var k2=t=>{throw TypeError(t)};var lm=(t,e,n)=>e.has(t)||k2("Cannot "+n);var U=(t,e,n)=>(lm(t,e,"read from private field"),n?n.call(t):e.get(t)),Ee=(t,e,n)=>e.has(t)?k2("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),le=(t,e,n,r)=>(lm(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Oe=(t,e,n)=>(lm(t,e,"access private method"),n);var uf=(t,e,n,r)=>({set _(i){le(t,e,i,n)},get _(){return U(t,e,r)}});function lD(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var yZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gA={exports:{}},kp={},vA={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wd=Symbol.for("react.element"),cD=Symbol.for("react.portal"),uD=Symbol.for("react.fragment"),dD=Symbol.for("react.strict_mode"),fD=Symbol.for("react.profiler"),hD=Symbol.for("react.provider"),pD=Symbol.for("react.context"),mD=Symbol.for("react.forward_ref"),gD=Symbol.for("react.suspense"),vD=Symbol.for("react.memo"),yD=Symbol.for("react.lazy"),M2=Symbol.iterator;function xD(t){return t===null||typeof t!="object"?null:(t=M2&&t[M2]||t["@@iterator"],typeof t=="function"?t:null)}var yA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xA=Object.assign,wA={};function cc(t,e,n){this.props=t,this.context=e,this.refs=wA,this.updater=n||yA}cc.prototype.isReactComponent={};cc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};cc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _A(){}_A.prototype=cc.prototype;function Lv(t,e,n){this.props=t,this.context=e,this.refs=wA,this.updater=n||yA}var Fv=Lv.prototype=new _A;Fv.constructor=Lv;xA(Fv,cc.prototype);Fv.isPureReactComponent=!0;var j2=Array.isArray,EA=Object.prototype.hasOwnProperty,Bv={current:null},CA={key:!0,ref:!0,__self:!0,__source:!0};function bA(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)EA.call(e,r)&&!CA.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:wd,type:t,key:o,ref:s,props:i,_owner:Bv.current}}function wD(t,e){return{$$typeof:wd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vv(t){return typeof t=="object"&&t!==null&&t.$$typeof===wd}function _D(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var L2=/\/+/g;function cm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?_D(""+t.key):e.toString(36)}function Qf(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case wd:case cD:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+cm(s,0):r,j2(i)?(n="",t!=null&&(n=t.replace(L2,"$&/")+"/"),Qf(i,e,n,"",function(u){return u})):i!=null&&(Vv(i)&&(i=wD(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(L2,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",j2(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+cm(o,a);s+=Qf(o,e,n,l,i)}else if(l=xD(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+cm(o,a++),s+=Qf(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function df(t,e,n){if(t==null)return t;var r=[],i=0;return Qf(t,r,"","",function(o){return e.call(n,o,i++)}),r}function ED(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var qn={current:null},Yf={transition:null},CD={ReactCurrentDispatcher:qn,ReactCurrentBatchConfig:Yf,ReactCurrentOwner:Bv};function AA(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:df,forEach:function(t,e,n){df(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return df(t,function(){e++}),e},toArray:function(t){return df(t,function(e){return e})||[]},only:function(t){if(!Vv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Fe.Component=cc;Fe.Fragment=uD;Fe.Profiler=fD;Fe.PureComponent=Lv;Fe.StrictMode=dD;Fe.Suspense=gD;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CD;Fe.act=AA;Fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=xA({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Bv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)EA.call(e,l)&&!CA.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:wd,type:t.type,key:i,ref:o,props:r,_owner:s}};Fe.createContext=function(t){return t={$$typeof:pD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:hD,_context:t},t.Consumer=t};Fe.createElement=bA;Fe.createFactory=function(t){var e=bA.bind(null,t);return e.type=t,e};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(t){return{$$typeof:mD,render:t}};Fe.isValidElement=Vv;Fe.lazy=function(t){return{$$typeof:yD,_payload:{_status:-1,_result:t},_init:ED}};Fe.memo=function(t,e){return{$$typeof:vD,type:t,compare:e===void 0?null:e}};Fe.startTransition=function(t){var e=Yf.transition;Yf.transition={};try{t()}finally{Yf.transition=e}};Fe.unstable_act=AA;Fe.useCallback=function(t,e){return qn.current.useCallback(t,e)};Fe.useContext=function(t){return qn.current.useContext(t)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(t){return qn.current.useDeferredValue(t)};Fe.useEffect=function(t,e){return qn.current.useEffect(t,e)};Fe.useId=function(){return qn.current.useId()};Fe.useImperativeHandle=function(t,e,n){return qn.current.useImperativeHandle(t,e,n)};Fe.useInsertionEffect=function(t,e){return qn.current.useInsertionEffect(t,e)};Fe.useLayoutEffect=function(t,e){return qn.current.useLayoutEffect(t,e)};Fe.useMemo=function(t,e){return qn.current.useMemo(t,e)};Fe.useReducer=function(t,e,n){return qn.current.useReducer(t,e,n)};Fe.useRef=function(t){return qn.current.useRef(t)};Fe.useState=function(t){return qn.current.useState(t)};Fe.useSyncExternalStore=function(t,e,n){return qn.current.useSyncExternalStore(t,e,n)};Fe.useTransition=function(){return qn.current.useTransition()};Fe.version="18.3.1";vA.exports=Fe;var C=vA.exports;const kt=mA(C),SA=lD({__proto__:null,default:kt},[C]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bD=C,AD=Symbol.for("react.element"),SD=Symbol.for("react.fragment"),ID=Object.prototype.hasOwnProperty,ND=bD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TD={key:!0,ref:!0,__self:!0,__source:!0};function IA(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)ID.call(e,r)&&!TD.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:AD,type:t,key:o,ref:s,props:i,_owner:ND.current}}kp.Fragment=SD;kp.jsx=IA;kp.jsxs=IA;gA.exports=kp;var c=gA.exports,NA={exports:{}},wr={},TA={exports:{}},RA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,z){var D=F.length;F.push(z);e:for(;0<D;){var B=D-1>>>1,$=F[B];if(0<i($,z))F[B]=z,F[D]=$,D=B;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var z=F[0],D=F.pop();if(D!==z){F[0]=D;e:for(var B=0,$=F.length,V=$>>>1;B<V;){var Y=2*(B+1)-1,re=F[Y],ie=Y+1,te=F[ie];if(0>i(re,D))ie<$&&0>i(te,re)?(F[B]=te,F[ie]=D,B=ie):(F[B]=re,F[Y]=D,B=Y);else if(ie<$&&0>i(te,D))F[B]=te,F[ie]=D,B=ie;else break e}}return z}function i(F,z){var D=F.sortIndex-z.sortIndex;return D!==0?D:F.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],u=[],d=1,f=null,h=3,m=!1,g=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(F){for(var z=n(u);z!==null;){if(z.callback===null)r(u);else if(z.startTime<=F)r(u),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(u)}}function A(F){if(v=!1,E(F),!g)if(n(l)!==null)g=!0,X(O);else{var z=n(u);z!==null&&ee(A,z.startTime-F)}}function O(F,z){g=!1,v&&(v=!1,x(T),T=-1),m=!0;var D=h;try{for(E(z),f=n(l);f!==null&&(!(f.expirationTime>z)||F&&!k());){var B=f.callback;if(typeof B=="function"){f.callback=null,h=f.priorityLevel;var $=B(f.expirationTime<=z);z=t.unstable_now(),typeof $=="function"?f.callback=$:f===n(l)&&r(l),E(z)}else r(l);f=n(l)}if(f!==null)var V=!0;else{var Y=n(u);Y!==null&&ee(A,Y.startTime-z),V=!1}return V}finally{f=null,h=D,m=!1}}var j=!1,N=null,T=-1,S=5,b=-1;function k(){return!(t.unstable_now()-b<S)}function R(){if(N!==null){var F=t.unstable_now();b=F;var z=!0;try{z=N(!0,F)}finally{z?P():(j=!1,N=null)}}else j=!1}var P;if(typeof w=="function")P=function(){w(R)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,K=G.port2;G.port1.onmessage=R,P=function(){K.postMessage(null)}}else P=function(){y(R,0)};function X(F){N=F,j||(j=!0,P())}function ee(F,z){T=y(function(){F(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){g||m||(g=!0,X(O))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(h){case 1:case 2:case 3:var z=3;break;default:z=h}var D=h;h=z;try{return F()}finally{h=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,z){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var D=h;h=F;try{return z()}finally{h=D}},t.unstable_scheduleCallback=function(F,z,D){var B=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?B+D:B):D=B,F){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=D+$,F={id:d++,callback:z,priorityLevel:F,startTime:D,expirationTime:$,sortIndex:-1},D>B?(F.sortIndex=D,e(u,F),n(l)===null&&F===n(u)&&(v?(x(T),T=-1):v=!0,ee(A,D-B))):(F.sortIndex=$,e(l,F),g||m||(g=!0,X(O))),F},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(F){var z=h;return function(){var D=h;h=z;try{return F.apply(this,arguments)}finally{h=D}}}})(RA);TA.exports=RA;var RD=TA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PD=C,xr=RD;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var PA=new Set,ju={};function Sa(t,e){Ul(t,e),Ul(t+"Capture",e)}function Ul(t,e){for(ju[t]=e,t=0;t<e.length;t++)PA.add(e[t])}var to=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xg=Object.prototype.hasOwnProperty,DD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,F2={},B2={};function OD(t){return xg.call(B2,t)?!0:xg.call(F2,t)?!1:DD.test(t)?B2[t]=!0:(F2[t]=!0,!1)}function kD(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function MD(t,e,n,r){if(e===null||typeof e>"u"||kD(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kn(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var vn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){vn[t]=new Kn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];vn[e]=new Kn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){vn[t]=new Kn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){vn[t]=new Kn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){vn[t]=new Kn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){vn[t]=new Kn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){vn[t]=new Kn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){vn[t]=new Kn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){vn[t]=new Kn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Uv=/[\-:]([a-z])/g;function $v(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Uv,$v);vn[e]=new Kn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Uv,$v);vn[e]=new Kn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Uv,$v);vn[e]=new Kn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){vn[t]=new Kn(t,1,!1,t.toLowerCase(),null,!1,!1)});vn.xlinkHref=new Kn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){vn[t]=new Kn(t,1,!1,t.toLowerCase(),null,!0,!0)});function zv(t,e,n,r){var i=vn.hasOwnProperty(e)?vn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(MD(e,n,i,r)&&(n=null),r||i===null?OD(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var fo=PD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ff=Symbol.for("react.element"),Xa=Symbol.for("react.portal"),Qa=Symbol.for("react.fragment"),Hv=Symbol.for("react.strict_mode"),wg=Symbol.for("react.profiler"),DA=Symbol.for("react.provider"),OA=Symbol.for("react.context"),Wv=Symbol.for("react.forward_ref"),_g=Symbol.for("react.suspense"),Eg=Symbol.for("react.suspense_list"),Gv=Symbol.for("react.memo"),Ao=Symbol.for("react.lazy"),kA=Symbol.for("react.offscreen"),V2=Symbol.iterator;function $c(t){return t===null||typeof t!="object"?null:(t=V2&&t[V2]||t["@@iterator"],typeof t=="function"?t:null)}var bt=Object.assign,um;function nu(t){if(um===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);um=e&&e[1]||""}return`
`+um+t}var dm=!1;function fm(t,e){if(!t||dm)return"";dm=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{dm=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?nu(t):""}function jD(t){switch(t.tag){case 5:return nu(t.type);case 16:return nu("Lazy");case 13:return nu("Suspense");case 19:return nu("SuspenseList");case 0:case 2:case 15:return t=fm(t.type,!1),t;case 11:return t=fm(t.type.render,!1),t;case 1:return t=fm(t.type,!0),t;default:return""}}function Cg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qa:return"Fragment";case Xa:return"Portal";case wg:return"Profiler";case Hv:return"StrictMode";case _g:return"Suspense";case Eg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case OA:return(t.displayName||"Context")+".Consumer";case DA:return(t._context.displayName||"Context")+".Provider";case Wv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gv:return e=t.displayName||null,e!==null?e:Cg(t.type)||"Memo";case Ao:e=t._payload,t=t._init;try{return Cg(t(e))}catch{}}return null}function LD(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cg(e);case 8:return e===Hv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ds(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function MA(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function FD(t){var e=MA(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hf(t){t._valueTracker||(t._valueTracker=FD(t))}function jA(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=MA(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Nh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bg(t,e){var n=e.checked;return bt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function U2(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ds(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function LA(t,e){e=e.checked,e!=null&&zv(t,"checked",e,!1)}function Ag(t,e){LA(t,e);var n=ds(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Sg(t,e.type,n):e.hasOwnProperty("defaultValue")&&Sg(t,e.type,ds(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $2(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Sg(t,e,n){(e!=="number"||Nh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ru=Array.isArray;function dl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ds(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ig(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return bt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function z2(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ne(92));if(ru(n)){if(1<n.length)throw Error(ne(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ds(n)}}function FA(t,e){var n=ds(e.value),r=ds(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function H2(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function BA(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ng(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?BA(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var pf,VA=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(pf=pf||document.createElement("div"),pf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Lu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},BD=["Webkit","ms","Moz","O"];Object.keys(vu).forEach(function(t){BD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vu[e]=vu[t]})});function UA(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||vu.hasOwnProperty(t)&&vu[t]?(""+e).trim():e+"px"}function $A(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=UA(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var VD=bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tg(t,e){if(e){if(VD[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function Rg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pg=null;function qv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dg=null,fl=null,hl=null;function W2(t){if(t=Cd(t)){if(typeof Dg!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=Bp(e),Dg(t.stateNode,t.type,e))}}function zA(t){fl?hl?hl.push(t):hl=[t]:fl=t}function HA(){if(fl){var t=fl,e=hl;if(hl=fl=null,W2(t),e)for(t=0;t<e.length;t++)W2(e[t])}}function WA(t,e){return t(e)}function GA(){}var hm=!1;function qA(t,e,n){if(hm)return t(e,n);hm=!0;try{return WA(t,e,n)}finally{hm=!1,(fl!==null||hl!==null)&&(GA(),HA())}}function Fu(t,e){var n=t.stateNode;if(n===null)return null;var r=Bp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ne(231,e,typeof n));return n}var Og=!1;if(to)try{var zc={};Object.defineProperty(zc,"passive",{get:function(){Og=!0}}),window.addEventListener("test",zc,zc),window.removeEventListener("test",zc,zc)}catch{Og=!1}function UD(t,e,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var yu=!1,Th=null,Rh=!1,kg=null,$D={onError:function(t){yu=!0,Th=t}};function zD(t,e,n,r,i,o,s,a,l){yu=!1,Th=null,UD.apply($D,arguments)}function HD(t,e,n,r,i,o,s,a,l){if(zD.apply(this,arguments),yu){if(yu){var u=Th;yu=!1,Th=null}else throw Error(ne(198));Rh||(Rh=!0,kg=u)}}function Ia(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function KA(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function G2(t){if(Ia(t)!==t)throw Error(ne(188))}function WD(t){var e=t.alternate;if(!e){if(e=Ia(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return G2(i),t;if(o===r)return G2(i),e;o=o.sibling}throw Error(ne(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(ne(189))}}if(n.alternate!==r)throw Error(ne(190))}if(n.tag!==3)throw Error(ne(188));return n.stateNode.current===n?t:e}function XA(t){return t=WD(t),t!==null?QA(t):null}function QA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=QA(t);if(e!==null)return e;t=t.sibling}return null}var YA=xr.unstable_scheduleCallback,q2=xr.unstable_cancelCallback,GD=xr.unstable_shouldYield,qD=xr.unstable_requestPaint,Dt=xr.unstable_now,KD=xr.unstable_getCurrentPriorityLevel,Kv=xr.unstable_ImmediatePriority,ZA=xr.unstable_UserBlockingPriority,Ph=xr.unstable_NormalPriority,XD=xr.unstable_LowPriority,JA=xr.unstable_IdlePriority,Mp=null,Ei=null;function QD(t){if(Ei&&typeof Ei.onCommitFiberRoot=="function")try{Ei.onCommitFiberRoot(Mp,t,void 0,(t.current.flags&128)===128)}catch{}}var ri=Math.clz32?Math.clz32:JD,YD=Math.log,ZD=Math.LN2;function JD(t){return t>>>=0,t===0?32:31-(YD(t)/ZD|0)|0}var mf=64,gf=4194304;function iu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Dh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=iu(a):(o&=s,o!==0&&(r=iu(o)))}else s=n&~i,s!==0?r=iu(s):o!==0&&(r=iu(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ri(e),i=1<<n,r|=t[n],e&=~i;return r}function eO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-ri(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=eO(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function Mg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function eS(){var t=mf;return mf<<=1,!(mf&4194240)&&(mf=64),t}function pm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _d(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ri(e),t[e]=n}function nO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ri(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Xv(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ri(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ot=0;function tS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nS,Qv,rS,iS,oS,jg=!1,vf=[],qo=null,Ko=null,Xo=null,Bu=new Map,Vu=new Map,No=[],rO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function K2(t,e){switch(t){case"focusin":case"focusout":qo=null;break;case"dragenter":case"dragleave":Ko=null;break;case"mouseover":case"mouseout":Xo=null;break;case"pointerover":case"pointerout":Bu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vu.delete(e.pointerId)}}function Hc(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Cd(e),e!==null&&Qv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function iO(t,e,n,r,i){switch(e){case"focusin":return qo=Hc(qo,t,e,n,r,i),!0;case"dragenter":return Ko=Hc(Ko,t,e,n,r,i),!0;case"mouseover":return Xo=Hc(Xo,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Bu.set(o,Hc(Bu.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Vu.set(o,Hc(Vu.get(o)||null,t,e,n,r,i)),!0}return!1}function sS(t){var e=zs(t.target);if(e!==null){var n=Ia(e);if(n!==null){if(e=n.tag,e===13){if(e=KA(n),e!==null){t.blockedOn=e,oS(t.priority,function(){rS(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Pg=r,n.target.dispatchEvent(r),Pg=null}else return e=Cd(n),e!==null&&Qv(e),t.blockedOn=n,!1;e.shift()}return!0}function X2(t,e,n){Zf(t)&&n.delete(e)}function oO(){jg=!1,qo!==null&&Zf(qo)&&(qo=null),Ko!==null&&Zf(Ko)&&(Ko=null),Xo!==null&&Zf(Xo)&&(Xo=null),Bu.forEach(X2),Vu.forEach(X2)}function Wc(t,e){t.blockedOn===e&&(t.blockedOn=null,jg||(jg=!0,xr.unstable_scheduleCallback(xr.unstable_NormalPriority,oO)))}function Uu(t){function e(i){return Wc(i,t)}if(0<vf.length){Wc(vf[0],t);for(var n=1;n<vf.length;n++){var r=vf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(qo!==null&&Wc(qo,t),Ko!==null&&Wc(Ko,t),Xo!==null&&Wc(Xo,t),Bu.forEach(e),Vu.forEach(e),n=0;n<No.length;n++)r=No[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<No.length&&(n=No[0],n.blockedOn===null);)sS(n),n.blockedOn===null&&No.shift()}var pl=fo.ReactCurrentBatchConfig,Oh=!0;function sO(t,e,n,r){var i=ot,o=pl.transition;pl.transition=null;try{ot=1,Yv(t,e,n,r)}finally{ot=i,pl.transition=o}}function aO(t,e,n,r){var i=ot,o=pl.transition;pl.transition=null;try{ot=4,Yv(t,e,n,r)}finally{ot=i,pl.transition=o}}function Yv(t,e,n,r){if(Oh){var i=Lg(t,e,n,r);if(i===null)bm(t,e,r,kh,n),K2(t,r);else if(iO(i,t,e,n,r))r.stopPropagation();else if(K2(t,r),e&4&&-1<rO.indexOf(t)){for(;i!==null;){var o=Cd(i);if(o!==null&&nS(o),o=Lg(t,e,n,r),o===null&&bm(t,e,r,kh,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else bm(t,e,r,null,n)}}var kh=null;function Lg(t,e,n,r){if(kh=null,t=qv(r),t=zs(t),t!==null)if(e=Ia(t),e===null)t=null;else if(n=e.tag,n===13){if(t=KA(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kh=t,null}function aS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KD()){case Kv:return 1;case ZA:return 4;case Ph:case XD:return 16;case JA:return 536870912;default:return 16}default:return 16}}var Ho=null,Zv=null,Jf=null;function lS(){if(Jf)return Jf;var t,e=Zv,n=e.length,r,i="value"in Ho?Ho.value:Ho.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Jf=i.slice(t,1<r?1-r:void 0)}function eh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yf(){return!0}function Q2(){return!1}function _r(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?yf:Q2,this.isPropagationStopped=Q2,this}return bt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yf)},persist:function(){},isPersistent:yf}),e}var uc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jv=_r(uc),Ed=bt({},uc,{view:0,detail:0}),lO=_r(Ed),mm,gm,Gc,jp=bt({},Ed,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ey,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Gc&&(Gc&&t.type==="mousemove"?(mm=t.screenX-Gc.screenX,gm=t.screenY-Gc.screenY):gm=mm=0,Gc=t),mm)},movementY:function(t){return"movementY"in t?t.movementY:gm}}),Y2=_r(jp),cO=bt({},jp,{dataTransfer:0}),uO=_r(cO),dO=bt({},Ed,{relatedTarget:0}),vm=_r(dO),fO=bt({},uc,{animationName:0,elapsedTime:0,pseudoElement:0}),hO=_r(fO),pO=bt({},uc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mO=_r(pO),gO=bt({},uc,{data:0}),Z2=_r(gO),vO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yO={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xO[t])?!!e[t]:!1}function ey(){return wO}var _O=bt({},Ed,{key:function(t){if(t.key){var e=vO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=eh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yO[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ey,charCode:function(t){return t.type==="keypress"?eh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?eh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),EO=_r(_O),CO=bt({},jp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),J2=_r(CO),bO=bt({},Ed,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ey}),AO=_r(bO),SO=bt({},uc,{propertyName:0,elapsedTime:0,pseudoElement:0}),IO=_r(SO),NO=bt({},jp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TO=_r(NO),RO=[9,13,27,32],ty=to&&"CompositionEvent"in window,xu=null;to&&"documentMode"in document&&(xu=document.documentMode);var PO=to&&"TextEvent"in window&&!xu,cS=to&&(!ty||xu&&8<xu&&11>=xu),e_=" ",t_=!1;function uS(t,e){switch(t){case"keyup":return RO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ya=!1;function DO(t,e){switch(t){case"compositionend":return dS(e);case"keypress":return e.which!==32?null:(t_=!0,e_);case"textInput":return t=e.data,t===e_&&t_?null:t;default:return null}}function OO(t,e){if(Ya)return t==="compositionend"||!ty&&uS(t,e)?(t=lS(),Jf=Zv=Ho=null,Ya=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return cS&&e.locale!=="ko"?null:e.data;default:return null}}var kO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function n_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kO[t.type]:e==="textarea"}function fS(t,e,n,r){zA(r),e=Mh(e,"onChange"),0<e.length&&(n=new Jv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var wu=null,$u=null;function MO(t){CS(t,0)}function Lp(t){var e=el(t);if(jA(e))return t}function jO(t,e){if(t==="change")return e}var hS=!1;if(to){var ym;if(to){var xm="oninput"in document;if(!xm){var r_=document.createElement("div");r_.setAttribute("oninput","return;"),xm=typeof r_.oninput=="function"}ym=xm}else ym=!1;hS=ym&&(!document.documentMode||9<document.documentMode)}function i_(){wu&&(wu.detachEvent("onpropertychange",pS),$u=wu=null)}function pS(t){if(t.propertyName==="value"&&Lp($u)){var e=[];fS(e,$u,t,qv(t)),qA(MO,e)}}function LO(t,e,n){t==="focusin"?(i_(),wu=e,$u=n,wu.attachEvent("onpropertychange",pS)):t==="focusout"&&i_()}function FO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lp($u)}function BO(t,e){if(t==="click")return Lp(e)}function VO(t,e){if(t==="input"||t==="change")return Lp(e)}function UO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var si=typeof Object.is=="function"?Object.is:UO;function zu(t,e){if(si(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!xg.call(e,i)||!si(t[i],e[i]))return!1}return!0}function o_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function s_(t,e){var n=o_(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=o_(n)}}function mS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?mS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gS(){for(var t=window,e=Nh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nh(t.document)}return e}function ny(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function $O(t){var e=gS(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&mS(n.ownerDocument.documentElement,n)){if(r!==null&&ny(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=s_(n,o);var s=s_(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zO=to&&"documentMode"in document&&11>=document.documentMode,Za=null,Fg=null,_u=null,Bg=!1;function a_(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Bg||Za==null||Za!==Nh(r)||(r=Za,"selectionStart"in r&&ny(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),_u&&zu(_u,r)||(_u=r,r=Mh(Fg,"onSelect"),0<r.length&&(e=new Jv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Za)))}function xf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ja={animationend:xf("Animation","AnimationEnd"),animationiteration:xf("Animation","AnimationIteration"),animationstart:xf("Animation","AnimationStart"),transitionend:xf("Transition","TransitionEnd")},wm={},vS={};to&&(vS=document.createElement("div").style,"AnimationEvent"in window||(delete Ja.animationend.animation,delete Ja.animationiteration.animation,delete Ja.animationstart.animation),"TransitionEvent"in window||delete Ja.transitionend.transition);function Fp(t){if(wm[t])return wm[t];if(!Ja[t])return t;var e=Ja[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in vS)return wm[t]=e[n];return t}var yS=Fp("animationend"),xS=Fp("animationiteration"),wS=Fp("animationstart"),_S=Fp("transitionend"),ES=new Map,l_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bs(t,e){ES.set(t,e),Sa(e,[t])}for(var _m=0;_m<l_.length;_m++){var Em=l_[_m],HO=Em.toLowerCase(),WO=Em[0].toUpperCase()+Em.slice(1);bs(HO,"on"+WO)}bs(yS,"onAnimationEnd");bs(xS,"onAnimationIteration");bs(wS,"onAnimationStart");bs("dblclick","onDoubleClick");bs("focusin","onFocus");bs("focusout","onBlur");bs(_S,"onTransitionEnd");Ul("onMouseEnter",["mouseout","mouseover"]);Ul("onMouseLeave",["mouseout","mouseover"]);Ul("onPointerEnter",["pointerout","pointerover"]);Ul("onPointerLeave",["pointerout","pointerover"]);Sa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Sa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Sa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Sa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Sa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Sa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GO=new Set("cancel close invalid load scroll toggle".split(" ").concat(ou));function c_(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,HD(r,e,void 0,t),t.currentTarget=null}function CS(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;c_(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;c_(i,a,u),o=l}}}if(Rh)throw t=kg,Rh=!1,kg=null,t}function ft(t,e){var n=e[Hg];n===void 0&&(n=e[Hg]=new Set);var r=t+"__bubble";n.has(r)||(bS(e,t,2,!1),n.add(r))}function Cm(t,e,n){var r=0;e&&(r|=4),bS(n,t,r,e)}var wf="_reactListening"+Math.random().toString(36).slice(2);function Hu(t){if(!t[wf]){t[wf]=!0,PA.forEach(function(n){n!=="selectionchange"&&(GO.has(n)||Cm(n,!1,t),Cm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wf]||(e[wf]=!0,Cm("selectionchange",!1,e))}}function bS(t,e,n,r){switch(aS(e)){case 1:var i=sO;break;case 4:i=aO;break;default:i=Yv}n=i.bind(null,e,n,t),i=void 0,!Og||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function bm(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=zs(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}qA(function(){var u=o,d=qv(n),f=[];e:{var h=ES.get(t);if(h!==void 0){var m=Jv,g=t;switch(t){case"keypress":if(eh(n)===0)break e;case"keydown":case"keyup":m=EO;break;case"focusin":g="focus",m=vm;break;case"focusout":g="blur",m=vm;break;case"beforeblur":case"afterblur":m=vm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Y2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=uO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=AO;break;case yS:case xS:case wS:m=hO;break;case _S:m=IO;break;case"scroll":m=lO;break;case"wheel":m=TO;break;case"copy":case"cut":case"paste":m=mO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=J2}var v=(e&4)!==0,y=!v&&t==="scroll",x=v?h!==null?h+"Capture":null:h;v=[];for(var w=u,E;w!==null;){E=w;var A=E.stateNode;if(E.tag===5&&A!==null&&(E=A,x!==null&&(A=Fu(w,x),A!=null&&v.push(Wu(w,A,E)))),y)break;w=w.return}0<v.length&&(h=new m(h,g,null,n,d),f.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",h&&n!==Pg&&(g=n.relatedTarget||n.fromElement)&&(zs(g)||g[no]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(g=n.relatedTarget||n.toElement,m=u,g=g?zs(g):null,g!==null&&(y=Ia(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(m=null,g=u),m!==g)){if(v=Y2,A="onMouseLeave",x="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(v=J2,A="onPointerLeave",x="onPointerEnter",w="pointer"),y=m==null?h:el(m),E=g==null?h:el(g),h=new v(A,w+"leave",m,n,d),h.target=y,h.relatedTarget=E,A=null,zs(d)===u&&(v=new v(x,w+"enter",g,n,d),v.target=E,v.relatedTarget=y,A=v),y=A,m&&g)t:{for(v=m,x=g,w=0,E=v;E;E=Ba(E))w++;for(E=0,A=x;A;A=Ba(A))E++;for(;0<w-E;)v=Ba(v),w--;for(;0<E-w;)x=Ba(x),E--;for(;w--;){if(v===x||x!==null&&v===x.alternate)break t;v=Ba(v),x=Ba(x)}v=null}else v=null;m!==null&&u_(f,h,m,v,!1),g!==null&&y!==null&&u_(f,y,g,v,!0)}}e:{if(h=u?el(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var O=jO;else if(n_(h))if(hS)O=VO;else{O=FO;var j=LO}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(O=BO);if(O&&(O=O(t,u))){fS(f,O,n,d);break e}j&&j(t,h,u),t==="focusout"&&(j=h._wrapperState)&&j.controlled&&h.type==="number"&&Sg(h,"number",h.value)}switch(j=u?el(u):window,t){case"focusin":(n_(j)||j.contentEditable==="true")&&(Za=j,Fg=u,_u=null);break;case"focusout":_u=Fg=Za=null;break;case"mousedown":Bg=!0;break;case"contextmenu":case"mouseup":case"dragend":Bg=!1,a_(f,n,d);break;case"selectionchange":if(zO)break;case"keydown":case"keyup":a_(f,n,d)}var N;if(ty)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Ya?uS(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(cS&&n.locale!=="ko"&&(Ya||T!=="onCompositionStart"?T==="onCompositionEnd"&&Ya&&(N=lS()):(Ho=d,Zv="value"in Ho?Ho.value:Ho.textContent,Ya=!0)),j=Mh(u,T),0<j.length&&(T=new Z2(T,t,null,n,d),f.push({event:T,listeners:j}),N?T.data=N:(N=dS(n),N!==null&&(T.data=N)))),(N=PO?DO(t,n):OO(t,n))&&(u=Mh(u,"onBeforeInput"),0<u.length&&(d=new Z2("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:u}),d.data=N))}CS(f,e)})}function Wu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Mh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Fu(t,n),o!=null&&r.unshift(Wu(t,o,i)),o=Fu(t,e),o!=null&&r.push(Wu(t,o,i))),t=t.return}return r}function Ba(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function u_(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=Fu(n,o),l!=null&&s.unshift(Wu(n,l,a))):i||(l=Fu(n,o),l!=null&&s.push(Wu(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var qO=/\r\n?/g,KO=/\u0000|\uFFFD/g;function d_(t){return(typeof t=="string"?t:""+t).replace(qO,`
`).replace(KO,"")}function _f(t,e,n){if(e=d_(e),d_(t)!==e&&n)throw Error(ne(425))}function jh(){}var Vg=null,Ug=null;function $g(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zg=typeof setTimeout=="function"?setTimeout:void 0,XO=typeof clearTimeout=="function"?clearTimeout:void 0,f_=typeof Promise=="function"?Promise:void 0,QO=typeof queueMicrotask=="function"?queueMicrotask:typeof f_<"u"?function(t){return f_.resolve(null).then(t).catch(YO)}:zg;function YO(t){setTimeout(function(){throw t})}function Am(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Uu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Uu(e)}function Qo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function h_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var dc=Math.random().toString(36).slice(2),vi="__reactFiber$"+dc,Gu="__reactProps$"+dc,no="__reactContainer$"+dc,Hg="__reactEvents$"+dc,ZO="__reactListeners$"+dc,JO="__reactHandles$"+dc;function zs(t){var e=t[vi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[no]||n[vi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=h_(t);t!==null;){if(n=t[vi])return n;t=h_(t)}return e}t=n,n=t.parentNode}return null}function Cd(t){return t=t[vi]||t[no],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function el(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function Bp(t){return t[Gu]||null}var Wg=[],tl=-1;function As(t){return{current:t}}function yt(t){0>tl||(t.current=Wg[tl],Wg[tl]=null,tl--)}function lt(t,e){tl++,Wg[tl]=t.current,t.current=e}var fs={},On=As(fs),or=As(!1),la=fs;function $l(t,e){var n=t.type.contextTypes;if(!n)return fs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function sr(t){return t=t.childContextTypes,t!=null}function Lh(){yt(or),yt(On)}function p_(t,e,n){if(On.current!==fs)throw Error(ne(168));lt(On,e),lt(or,n)}function AS(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ne(108,LD(t)||"Unknown",i));return bt({},n,r)}function Fh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fs,la=On.current,lt(On,t),lt(or,or.current),!0}function m_(t,e,n){var r=t.stateNode;if(!r)throw Error(ne(169));n?(t=AS(t,e,la),r.__reactInternalMemoizedMergedChildContext=t,yt(or),yt(On),lt(On,t)):yt(or),lt(or,n)}var Gi=null,Vp=!1,Sm=!1;function SS(t){Gi===null?Gi=[t]:Gi.push(t)}function ek(t){Vp=!0,SS(t)}function Ss(){if(!Sm&&Gi!==null){Sm=!0;var t=0,e=ot;try{var n=Gi;for(ot=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Gi=null,Vp=!1}catch(i){throw Gi!==null&&(Gi=Gi.slice(t+1)),YA(Kv,Ss),i}finally{ot=e,Sm=!1}}return null}var nl=[],rl=0,Bh=null,Vh=0,Sr=[],Ir=0,ca=null,Ki=1,Xi="";function Bs(t,e){nl[rl++]=Vh,nl[rl++]=Bh,Bh=t,Vh=e}function IS(t,e,n){Sr[Ir++]=Ki,Sr[Ir++]=Xi,Sr[Ir++]=ca,ca=t;var r=Ki;t=Xi;var i=32-ri(r)-1;r&=~(1<<i),n+=1;var o=32-ri(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ki=1<<32-ri(e)+i|n<<i|r,Xi=o+t}else Ki=1<<o|n<<i|r,Xi=t}function ry(t){t.return!==null&&(Bs(t,1),IS(t,1,0))}function iy(t){for(;t===Bh;)Bh=nl[--rl],nl[rl]=null,Vh=nl[--rl],nl[rl]=null;for(;t===ca;)ca=Sr[--Ir],Sr[Ir]=null,Xi=Sr[--Ir],Sr[Ir]=null,Ki=Sr[--Ir],Sr[Ir]=null}var vr=null,mr=null,xt=!1,Xr=null;function NS(t,e){var n=Rr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function g_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,vr=t,mr=Qo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,vr=t,mr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ca!==null?{id:Ki,overflow:Xi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Rr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,vr=t,mr=null,!0):!1;default:return!1}}function Gg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qg(t){if(xt){var e=mr;if(e){var n=e;if(!g_(t,e)){if(Gg(t))throw Error(ne(418));e=Qo(n.nextSibling);var r=vr;e&&g_(t,e)?NS(r,n):(t.flags=t.flags&-4097|2,xt=!1,vr=t)}}else{if(Gg(t))throw Error(ne(418));t.flags=t.flags&-4097|2,xt=!1,vr=t}}}function v_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;vr=t}function Ef(t){if(t!==vr)return!1;if(!xt)return v_(t),xt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$g(t.type,t.memoizedProps)),e&&(e=mr)){if(Gg(t))throw TS(),Error(ne(418));for(;e;)NS(t,e),e=Qo(e.nextSibling)}if(v_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){mr=Qo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}mr=null}}else mr=vr?Qo(t.stateNode.nextSibling):null;return!0}function TS(){for(var t=mr;t;)t=Qo(t.nextSibling)}function zl(){mr=vr=null,xt=!1}function oy(t){Xr===null?Xr=[t]:Xr.push(t)}var tk=fo.ReactCurrentBatchConfig;function qc(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ne(309));var r=n.stateNode}if(!r)throw Error(ne(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(ne(284));if(!n._owner)throw Error(ne(290,t))}return t}function Cf(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function y_(t){var e=t._init;return e(t._payload)}function RS(t){function e(x,w){if(t){var E=x.deletions;E===null?(x.deletions=[w],x.flags|=16):E.push(w)}}function n(x,w){if(!t)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function r(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function i(x,w){return x=es(x,w),x.index=0,x.sibling=null,x}function o(x,w,E){return x.index=E,t?(E=x.alternate,E!==null?(E=E.index,E<w?(x.flags|=2,w):E):(x.flags|=2,w)):(x.flags|=1048576,w)}function s(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,w,E,A){return w===null||w.tag!==6?(w=Om(E,x.mode,A),w.return=x,w):(w=i(w,E),w.return=x,w)}function l(x,w,E,A){var O=E.type;return O===Qa?d(x,w,E.props.children,A,E.key):w!==null&&(w.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ao&&y_(O)===w.type)?(A=i(w,E.props),A.ref=qc(x,w,E),A.return=x,A):(A=ah(E.type,E.key,E.props,null,x.mode,A),A.ref=qc(x,w,E),A.return=x,A)}function u(x,w,E,A){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=km(E,x.mode,A),w.return=x,w):(w=i(w,E.children||[]),w.return=x,w)}function d(x,w,E,A,O){return w===null||w.tag!==7?(w=ia(E,x.mode,A,O),w.return=x,w):(w=i(w,E),w.return=x,w)}function f(x,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Om(""+w,x.mode,E),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ff:return E=ah(w.type,w.key,w.props,null,x.mode,E),E.ref=qc(x,null,w),E.return=x,E;case Xa:return w=km(w,x.mode,E),w.return=x,w;case Ao:var A=w._init;return f(x,A(w._payload),E)}if(ru(w)||$c(w))return w=ia(w,x.mode,E,null),w.return=x,w;Cf(x,w)}return null}function h(x,w,E,A){var O=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return O!==null?null:a(x,w,""+E,A);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ff:return E.key===O?l(x,w,E,A):null;case Xa:return E.key===O?u(x,w,E,A):null;case Ao:return O=E._init,h(x,w,O(E._payload),A)}if(ru(E)||$c(E))return O!==null?null:d(x,w,E,A,null);Cf(x,E)}return null}function m(x,w,E,A,O){if(typeof A=="string"&&A!==""||typeof A=="number")return x=x.get(E)||null,a(w,x,""+A,O);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case ff:return x=x.get(A.key===null?E:A.key)||null,l(w,x,A,O);case Xa:return x=x.get(A.key===null?E:A.key)||null,u(w,x,A,O);case Ao:var j=A._init;return m(x,w,E,j(A._payload),O)}if(ru(A)||$c(A))return x=x.get(E)||null,d(w,x,A,O,null);Cf(w,A)}return null}function g(x,w,E,A){for(var O=null,j=null,N=w,T=w=0,S=null;N!==null&&T<E.length;T++){N.index>T?(S=N,N=null):S=N.sibling;var b=h(x,N,E[T],A);if(b===null){N===null&&(N=S);break}t&&N&&b.alternate===null&&e(x,N),w=o(b,w,T),j===null?O=b:j.sibling=b,j=b,N=S}if(T===E.length)return n(x,N),xt&&Bs(x,T),O;if(N===null){for(;T<E.length;T++)N=f(x,E[T],A),N!==null&&(w=o(N,w,T),j===null?O=N:j.sibling=N,j=N);return xt&&Bs(x,T),O}for(N=r(x,N);T<E.length;T++)S=m(N,x,T,E[T],A),S!==null&&(t&&S.alternate!==null&&N.delete(S.key===null?T:S.key),w=o(S,w,T),j===null?O=S:j.sibling=S,j=S);return t&&N.forEach(function(k){return e(x,k)}),xt&&Bs(x,T),O}function v(x,w,E,A){var O=$c(E);if(typeof O!="function")throw Error(ne(150));if(E=O.call(E),E==null)throw Error(ne(151));for(var j=O=null,N=w,T=w=0,S=null,b=E.next();N!==null&&!b.done;T++,b=E.next()){N.index>T?(S=N,N=null):S=N.sibling;var k=h(x,N,b.value,A);if(k===null){N===null&&(N=S);break}t&&N&&k.alternate===null&&e(x,N),w=o(k,w,T),j===null?O=k:j.sibling=k,j=k,N=S}if(b.done)return n(x,N),xt&&Bs(x,T),O;if(N===null){for(;!b.done;T++,b=E.next())b=f(x,b.value,A),b!==null&&(w=o(b,w,T),j===null?O=b:j.sibling=b,j=b);return xt&&Bs(x,T),O}for(N=r(x,N);!b.done;T++,b=E.next())b=m(N,x,T,b.value,A),b!==null&&(t&&b.alternate!==null&&N.delete(b.key===null?T:b.key),w=o(b,w,T),j===null?O=b:j.sibling=b,j=b);return t&&N.forEach(function(R){return e(x,R)}),xt&&Bs(x,T),O}function y(x,w,E,A){if(typeof E=="object"&&E!==null&&E.type===Qa&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case ff:e:{for(var O=E.key,j=w;j!==null;){if(j.key===O){if(O=E.type,O===Qa){if(j.tag===7){n(x,j.sibling),w=i(j,E.props.children),w.return=x,x=w;break e}}else if(j.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===Ao&&y_(O)===j.type){n(x,j.sibling),w=i(j,E.props),w.ref=qc(x,j,E),w.return=x,x=w;break e}n(x,j);break}else e(x,j);j=j.sibling}E.type===Qa?(w=ia(E.props.children,x.mode,A,E.key),w.return=x,x=w):(A=ah(E.type,E.key,E.props,null,x.mode,A),A.ref=qc(x,w,E),A.return=x,x=A)}return s(x);case Xa:e:{for(j=E.key;w!==null;){if(w.key===j)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){n(x,w.sibling),w=i(w,E.children||[]),w.return=x,x=w;break e}else{n(x,w);break}else e(x,w);w=w.sibling}w=km(E,x.mode,A),w.return=x,x=w}return s(x);case Ao:return j=E._init,y(x,w,j(E._payload),A)}if(ru(E))return g(x,w,E,A);if($c(E))return v(x,w,E,A);Cf(x,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(n(x,w.sibling),w=i(w,E),w.return=x,x=w):(n(x,w),w=Om(E,x.mode,A),w.return=x,x=w),s(x)):n(x,w)}return y}var Hl=RS(!0),PS=RS(!1),Uh=As(null),$h=null,il=null,sy=null;function ay(){sy=il=$h=null}function ly(t){var e=Uh.current;yt(Uh),t._currentValue=e}function Kg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ml(t,e){$h=t,sy=il=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ir=!0),t.firstContext=null)}function Lr(t){var e=t._currentValue;if(sy!==t)if(t={context:t,memoizedValue:e,next:null},il===null){if($h===null)throw Error(ne(308));il=t,$h.dependencies={lanes:0,firstContext:t}}else il=il.next=t;return e}var Hs=null;function cy(t){Hs===null?Hs=[t]:Hs.push(t)}function DS(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,cy(e)):(n.next=i.next,i.next=n),e.interleaved=n,ro(t,r)}function ro(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var So=!1;function uy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ji(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,qe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ro(t,n)}return i=r.interleaved,i===null?(e.next=e,cy(r)):(e.next=i.next,i.next=e),r.interleaved=e,ro(t,n)}function th(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xv(t,n)}}function x_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zh(t,e,n,r){var i=t.updateQueue;So=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==s&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;s=0,d=u=l=null,a=o;do{var h=a.lane,m=a.eventTime;if((r&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,v=a;switch(h=e,m=n,v.tag){case 1:if(g=v.payload,typeof g=="function"){f=g.call(m,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=v.payload,h=typeof g=="function"?g.call(m,f,h):g,h==null)break e;f=bt({},f,h);break e;case 2:So=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else m={eventTime:m,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=m,l=f):d=d.next=m,s|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(l=f),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);da|=s,t.lanes=s,t.memoizedState=f}}function w_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ne(191,i));i.call(r)}}}var bd={},Ci=As(bd),qu=As(bd),Ku=As(bd);function Ws(t){if(t===bd)throw Error(ne(174));return t}function dy(t,e){switch(lt(Ku,e),lt(qu,t),lt(Ci,bd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ng(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ng(e,t)}yt(Ci),lt(Ci,e)}function Wl(){yt(Ci),yt(qu),yt(Ku)}function kS(t){Ws(Ku.current);var e=Ws(Ci.current),n=Ng(e,t.type);e!==n&&(lt(qu,t),lt(Ci,n))}function fy(t){qu.current===t&&(yt(Ci),yt(qu))}var Et=As(0);function Hh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Im=[];function hy(){for(var t=0;t<Im.length;t++)Im[t]._workInProgressVersionPrimary=null;Im.length=0}var nh=fo.ReactCurrentDispatcher,Nm=fo.ReactCurrentBatchConfig,ua=0,Ct=null,Vt=null,nn=null,Wh=!1,Eu=!1,Xu=0,nk=0;function En(){throw Error(ne(321))}function py(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!si(t[n],e[n]))return!1;return!0}function my(t,e,n,r,i,o){if(ua=o,Ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nh.current=t===null||t.memoizedState===null?sk:ak,t=n(r,i),Eu){o=0;do{if(Eu=!1,Xu=0,25<=o)throw Error(ne(301));o+=1,nn=Vt=null,e.updateQueue=null,nh.current=lk,t=n(r,i)}while(Eu)}if(nh.current=Gh,e=Vt!==null&&Vt.next!==null,ua=0,nn=Vt=Ct=null,Wh=!1,e)throw Error(ne(300));return t}function gy(){var t=Xu!==0;return Xu=0,t}function di(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?Ct.memoizedState=nn=t:nn=nn.next=t,nn}function Fr(){if(Vt===null){var t=Ct.alternate;t=t!==null?t.memoizedState:null}else t=Vt.next;var e=nn===null?Ct.memoizedState:nn.next;if(e!==null)nn=e,Vt=t;else{if(t===null)throw Error(ne(310));Vt=t,t={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},nn===null?Ct.memoizedState=nn=t:nn=nn.next=t}return nn}function Qu(t,e){return typeof e=="function"?e(t):e}function Tm(t){var e=Fr(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=Vt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var d=u.lane;if((ua&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,s=r):l=l.next=f,Ct.lanes|=d,da|=d}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,si(r,e.memoizedState)||(ir=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Ct.lanes|=o,da|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Rm(t){var e=Fr(),n=e.queue;if(n===null)throw Error(ne(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);si(o,e.memoizedState)||(ir=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function MS(){}function jS(t,e){var n=Ct,r=Fr(),i=e(),o=!si(r.memoizedState,i);if(o&&(r.memoizedState=i,ir=!0),r=r.queue,vy(BS.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||nn!==null&&nn.memoizedState.tag&1){if(n.flags|=2048,Yu(9,FS.bind(null,n,r,i,e),void 0,null),sn===null)throw Error(ne(349));ua&30||LS(n,e,i)}return i}function LS(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ct.updateQueue,e===null?(e={lastEffect:null,stores:null},Ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function FS(t,e,n,r){e.value=n,e.getSnapshot=r,VS(e)&&US(t)}function BS(t,e,n){return n(function(){VS(e)&&US(t)})}function VS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!si(t,n)}catch{return!0}}function US(t){var e=ro(t,1);e!==null&&ii(e,t,1,-1)}function __(t){var e=di();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qu,lastRenderedState:t},e.queue=t,t=t.dispatch=ok.bind(null,Ct,t),[e.memoizedState,t]}function Yu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ct.updateQueue,e===null?(e={lastEffect:null,stores:null},Ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function $S(){return Fr().memoizedState}function rh(t,e,n,r){var i=di();Ct.flags|=t,i.memoizedState=Yu(1|e,n,void 0,r===void 0?null:r)}function Up(t,e,n,r){var i=Fr();r=r===void 0?null:r;var o=void 0;if(Vt!==null){var s=Vt.memoizedState;if(o=s.destroy,r!==null&&py(r,s.deps)){i.memoizedState=Yu(e,n,o,r);return}}Ct.flags|=t,i.memoizedState=Yu(1|e,n,o,r)}function E_(t,e){return rh(8390656,8,t,e)}function vy(t,e){return Up(2048,8,t,e)}function zS(t,e){return Up(4,2,t,e)}function HS(t,e){return Up(4,4,t,e)}function WS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function GS(t,e,n){return n=n!=null?n.concat([t]):null,Up(4,4,WS.bind(null,e,t),n)}function yy(){}function qS(t,e){var n=Fr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&py(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function KS(t,e){var n=Fr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&py(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function XS(t,e,n){return ua&21?(si(n,e)||(n=eS(),Ct.lanes|=n,da|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ir=!0),t.memoizedState=n)}function rk(t,e){var n=ot;ot=n!==0&&4>n?n:4,t(!0);var r=Nm.transition;Nm.transition={};try{t(!1),e()}finally{ot=n,Nm.transition=r}}function QS(){return Fr().memoizedState}function ik(t,e,n){var r=Jo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},YS(t))ZS(e,n);else if(n=DS(t,e,n,r),n!==null){var i=Gn();ii(n,t,r,i),JS(n,e,r)}}function ok(t,e,n){var r=Jo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(YS(t))ZS(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,si(a,s)){var l=e.interleaved;l===null?(i.next=i,cy(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=DS(t,e,i,r),n!==null&&(i=Gn(),ii(n,t,r,i),JS(n,e,r))}}function YS(t){var e=t.alternate;return t===Ct||e!==null&&e===Ct}function ZS(t,e){Eu=Wh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function JS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xv(t,n)}}var Gh={readContext:Lr,useCallback:En,useContext:En,useEffect:En,useImperativeHandle:En,useInsertionEffect:En,useLayoutEffect:En,useMemo:En,useReducer:En,useRef:En,useState:En,useDebugValue:En,useDeferredValue:En,useTransition:En,useMutableSource:En,useSyncExternalStore:En,useId:En,unstable_isNewReconciler:!1},sk={readContext:Lr,useCallback:function(t,e){return di().memoizedState=[t,e===void 0?null:e],t},useContext:Lr,useEffect:E_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,rh(4194308,4,WS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return rh(4194308,4,t,e)},useInsertionEffect:function(t,e){return rh(4,2,t,e)},useMemo:function(t,e){var n=di();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=di();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=ik.bind(null,Ct,t),[r.memoizedState,t]},useRef:function(t){var e=di();return t={current:t},e.memoizedState=t},useState:__,useDebugValue:yy,useDeferredValue:function(t){return di().memoizedState=t},useTransition:function(){var t=__(!1),e=t[0];return t=rk.bind(null,t[1]),di().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ct,i=di();if(xt){if(n===void 0)throw Error(ne(407));n=n()}else{if(n=e(),sn===null)throw Error(ne(349));ua&30||LS(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,E_(BS.bind(null,r,o,t),[t]),r.flags|=2048,Yu(9,FS.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=di(),e=sn.identifierPrefix;if(xt){var n=Xi,r=Ki;n=(r&~(1<<32-ri(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Xu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ak={readContext:Lr,useCallback:qS,useContext:Lr,useEffect:vy,useImperativeHandle:GS,useInsertionEffect:zS,useLayoutEffect:HS,useMemo:KS,useReducer:Tm,useRef:$S,useState:function(){return Tm(Qu)},useDebugValue:yy,useDeferredValue:function(t){var e=Fr();return XS(e,Vt.memoizedState,t)},useTransition:function(){var t=Tm(Qu)[0],e=Fr().memoizedState;return[t,e]},useMutableSource:MS,useSyncExternalStore:jS,useId:QS,unstable_isNewReconciler:!1},lk={readContext:Lr,useCallback:qS,useContext:Lr,useEffect:vy,useImperativeHandle:GS,useInsertionEffect:zS,useLayoutEffect:HS,useMemo:KS,useReducer:Rm,useRef:$S,useState:function(){return Rm(Qu)},useDebugValue:yy,useDeferredValue:function(t){var e=Fr();return Vt===null?e.memoizedState=t:XS(e,Vt.memoizedState,t)},useTransition:function(){var t=Rm(Qu)[0],e=Fr().memoizedState;return[t,e]},useMutableSource:MS,useSyncExternalStore:jS,useId:QS,unstable_isNewReconciler:!1};function Gr(t,e){if(t&&t.defaultProps){e=bt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Xg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:bt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $p={isMounted:function(t){return(t=t._reactInternals)?Ia(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Gn(),i=Jo(t),o=Ji(r,i);o.payload=e,n!=null&&(o.callback=n),e=Yo(t,o,i),e!==null&&(ii(e,t,i,r),th(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Gn(),i=Jo(t),o=Ji(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Yo(t,o,i),e!==null&&(ii(e,t,i,r),th(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Gn(),r=Jo(t),i=Ji(n,r);i.tag=2,e!=null&&(i.callback=e),e=Yo(t,i,r),e!==null&&(ii(e,t,r,n),th(e,t,r))}};function C_(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!zu(n,r)||!zu(i,o):!0}function eI(t,e,n){var r=!1,i=fs,o=e.contextType;return typeof o=="object"&&o!==null?o=Lr(o):(i=sr(e)?la:On.current,r=e.contextTypes,o=(r=r!=null)?$l(t,i):fs),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$p,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function b_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$p.enqueueReplaceState(e,e.state,null)}function Qg(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},uy(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Lr(o):(o=sr(e)?la:On.current,i.context=$l(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Xg(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&$p.enqueueReplaceState(i,i.state,null),zh(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Gl(t,e){try{var n="",r=e;do n+=jD(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function Pm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Yg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ck=typeof WeakMap=="function"?WeakMap:Map;function tI(t,e,n){n=Ji(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Kh||(Kh=!0,a1=r),Yg(t,e)},n}function nI(t,e,n){n=Ji(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Yg(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Yg(t,e),typeof r!="function"&&(Zo===null?Zo=new Set([this]):Zo.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function A_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ck;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Ck.bind(null,t,e,n),e.then(t,t))}function S_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function I_(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ji(-1,1),e.tag=2,Yo(n,e,1))),n.lanes|=1),t)}var uk=fo.ReactCurrentOwner,ir=!1;function Wn(t,e,n,r){e.child=t===null?PS(e,null,n,r):Hl(e,t.child,n,r)}function N_(t,e,n,r,i){n=n.render;var o=e.ref;return ml(e,i),r=my(t,e,n,r,o,i),n=gy(),t!==null&&!ir?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,io(t,e,i)):(xt&&n&&ry(e),e.flags|=1,Wn(t,e,r,i),e.child)}function T_(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Sy(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,rI(t,e,o,r,i)):(t=ah(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:zu,n(s,r)&&t.ref===e.ref)return io(t,e,i)}return e.flags|=1,t=es(o,r),t.ref=e.ref,t.return=e,e.child=t}function rI(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(zu(o,r)&&t.ref===e.ref)if(ir=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(ir=!0);else return e.lanes=t.lanes,io(t,e,i)}return Zg(t,e,n,r,i)}function iI(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},lt(sl,fr),fr|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,lt(sl,fr),fr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,lt(sl,fr),fr|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,lt(sl,fr),fr|=r;return Wn(t,e,i,n),e.child}function oI(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zg(t,e,n,r,i){var o=sr(n)?la:On.current;return o=$l(e,o),ml(e,i),n=my(t,e,n,r,o,i),r=gy(),t!==null&&!ir?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,io(t,e,i)):(xt&&r&&ry(e),e.flags|=1,Wn(t,e,n,i),e.child)}function R_(t,e,n,r,i){if(sr(n)){var o=!0;Fh(e)}else o=!1;if(ml(e,i),e.stateNode===null)ih(t,e),eI(e,n,r),Qg(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=n.contextType;typeof u=="object"&&u!==null?u=Lr(u):(u=sr(n)?la:On.current,u=$l(e,u));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&b_(e,s,r,u),So=!1;var h=e.memoizedState;s.state=h,zh(e,r,s,i),l=e.memoizedState,a!==r||h!==l||or.current||So?(typeof d=="function"&&(Xg(e,n,d,r),l=e.memoizedState),(a=So||C_(e,n,a,r,h,l,u))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,OS(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Gr(e.type,a),s.props=u,f=e.pendingProps,h=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=Lr(l):(l=sr(n)?la:On.current,l=$l(e,l));var m=n.getDerivedStateFromProps;(d=typeof m=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==f||h!==l)&&b_(e,s,r,l),So=!1,h=e.memoizedState,s.state=h,zh(e,r,s,i);var g=e.memoizedState;a!==f||h!==g||or.current||So?(typeof m=="function"&&(Xg(e,n,m,r),g=e.memoizedState),(u=So||C_(e,n,u,r,h,g,l)||!1)?(d||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,g,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,g,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),s.props=r,s.state=g,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Jg(t,e,n,r,o,i)}function Jg(t,e,n,r,i,o){oI(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&m_(e,n,!1),io(t,e,o);r=e.stateNode,uk.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Hl(e,t.child,null,o),e.child=Hl(e,null,a,o)):Wn(t,e,a,o),e.memoizedState=r.state,i&&m_(e,n,!0),e.child}function sI(t){var e=t.stateNode;e.pendingContext?p_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&p_(t,e.context,!1),dy(t,e.containerInfo)}function P_(t,e,n,r,i){return zl(),oy(i),e.flags|=256,Wn(t,e,n,r),e.child}var e1={dehydrated:null,treeContext:null,retryLane:0};function t1(t){return{baseLanes:t,cachePool:null,transitions:null}}function aI(t,e,n){var r=e.pendingProps,i=Et.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),lt(Et,i&1),t===null)return qg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Wp(s,r,0,null),t=ia(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=t1(n),e.memoizedState=e1,t):xy(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return dk(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=es(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=es(a,o):(o=ia(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?t1(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=e1,r}return o=t.child,t=o.sibling,r=es(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function xy(t,e){return e=Wp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function bf(t,e,n,r){return r!==null&&oy(r),Hl(e,t.child,null,n),t=xy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function dk(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=Pm(Error(ne(422))),bf(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Wp({mode:"visible",children:r.children},i,0,null),o=ia(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Hl(e,t.child,null,s),e.child.memoizedState=t1(s),e.memoizedState=e1,o);if(!(e.mode&1))return bf(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(ne(419)),r=Pm(o,r,void 0),bf(t,e,s,r)}if(a=(s&t.childLanes)!==0,ir||a){if(r=sn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,ro(t,i),ii(r,t,i,-1))}return Ay(),r=Pm(Error(ne(421))),bf(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=bk.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,mr=Qo(i.nextSibling),vr=e,xt=!0,Xr=null,t!==null&&(Sr[Ir++]=Ki,Sr[Ir++]=Xi,Sr[Ir++]=ca,Ki=t.id,Xi=t.overflow,ca=e),e=xy(e,r.children),e.flags|=4096,e)}function D_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Kg(t.return,e,n)}function Dm(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function lI(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Wn(t,e,r.children,n),r=Et.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&D_(t,n,e);else if(t.tag===19)D_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(lt(Et,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Hh(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Dm(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Hh(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Dm(e,!0,n,null,o);break;case"together":Dm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ih(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function io(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),da|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,n=es(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=es(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function fk(t,e,n){switch(e.tag){case 3:sI(e),zl();break;case 5:kS(e);break;case 1:sr(e.type)&&Fh(e);break;case 4:dy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;lt(Uh,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(lt(Et,Et.current&1),e.flags|=128,null):n&e.child.childLanes?aI(t,e,n):(lt(Et,Et.current&1),t=io(t,e,n),t!==null?t.sibling:null);lt(Et,Et.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return lI(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),lt(Et,Et.current),r)break;return null;case 22:case 23:return e.lanes=0,iI(t,e,n)}return io(t,e,n)}var cI,n1,uI,dI;cI=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};n1=function(){};uI=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ws(Ci.current);var o=null;switch(n){case"input":i=bg(t,i),r=bg(t,r),o=[];break;case"select":i=bt({},i,{value:void 0}),r=bt({},r,{value:void 0}),o=[];break;case"textarea":i=Ig(t,i),r=Ig(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=jh)}Tg(n,r);var s;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ju.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ju.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ft("scroll",t),o||a===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};dI=function(t,e,n,r){n!==r&&(e.flags|=4)};function Kc(t,e){if(!xt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Cn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function hk(t,e,n){var r=e.pendingProps;switch(iy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Cn(e),null;case 1:return sr(e.type)&&Lh(),Cn(e),null;case 3:return r=e.stateNode,Wl(),yt(or),yt(On),hy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ef(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xr!==null&&(u1(Xr),Xr=null))),n1(t,e),Cn(e),null;case 5:fy(e);var i=Ws(Ku.current);if(n=e.type,t!==null&&e.stateNode!=null)uI(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ne(166));return Cn(e),null}if(t=Ws(Ci.current),Ef(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[vi]=e,r[Gu]=o,t=(e.mode&1)!==0,n){case"dialog":ft("cancel",r),ft("close",r);break;case"iframe":case"object":case"embed":ft("load",r);break;case"video":case"audio":for(i=0;i<ou.length;i++)ft(ou[i],r);break;case"source":ft("error",r);break;case"img":case"image":case"link":ft("error",r),ft("load",r);break;case"details":ft("toggle",r);break;case"input":U2(r,o),ft("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ft("invalid",r);break;case"textarea":z2(r,o),ft("invalid",r)}Tg(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&_f(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&_f(r.textContent,a,t),i=["children",""+a]):ju.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&ft("scroll",r)}switch(n){case"input":hf(r),$2(r,o,!0);break;case"textarea":hf(r),H2(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=jh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=BA(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[vi]=e,t[Gu]=r,cI(t,e,!1,!1),e.stateNode=t;e:{switch(s=Rg(n,r),n){case"dialog":ft("cancel",t),ft("close",t),i=r;break;case"iframe":case"object":case"embed":ft("load",t),i=r;break;case"video":case"audio":for(i=0;i<ou.length;i++)ft(ou[i],t);i=r;break;case"source":ft("error",t),i=r;break;case"img":case"image":case"link":ft("error",t),ft("load",t),i=r;break;case"details":ft("toggle",t),i=r;break;case"input":U2(t,r),i=bg(t,r),ft("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=bt({},r,{value:void 0}),ft("invalid",t);break;case"textarea":z2(t,r),i=Ig(t,r),ft("invalid",t);break;default:i=r}Tg(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?$A(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&VA(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Lu(t,l):typeof l=="number"&&Lu(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ju.hasOwnProperty(o)?l!=null&&o==="onScroll"&&ft("scroll",t):l!=null&&zv(t,o,l,s))}switch(n){case"input":hf(t),$2(t,r,!1);break;case"textarea":hf(t),H2(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ds(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?dl(t,!!r.multiple,o,!1):r.defaultValue!=null&&dl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=jh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Cn(e),null;case 6:if(t&&e.stateNode!=null)dI(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ne(166));if(n=Ws(Ku.current),Ws(Ci.current),Ef(e)){if(r=e.stateNode,n=e.memoizedProps,r[vi]=e,(o=r.nodeValue!==n)&&(t=vr,t!==null))switch(t.tag){case 3:_f(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_f(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vi]=e,e.stateNode=r}return Cn(e),null;case 13:if(yt(Et),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xt&&mr!==null&&e.mode&1&&!(e.flags&128))TS(),zl(),e.flags|=98560,o=!1;else if(o=Ef(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(ne(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ne(317));o[vi]=e}else zl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Cn(e),o=!1}else Xr!==null&&(u1(Xr),Xr=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Et.current&1?qt===0&&(qt=3):Ay())),e.updateQueue!==null&&(e.flags|=4),Cn(e),null);case 4:return Wl(),n1(t,e),t===null&&Hu(e.stateNode.containerInfo),Cn(e),null;case 10:return ly(e.type._context),Cn(e),null;case 17:return sr(e.type)&&Lh(),Cn(e),null;case 19:if(yt(Et),o=e.memoizedState,o===null)return Cn(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Kc(o,!1);else{if(qt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Hh(t),s!==null){for(e.flags|=128,Kc(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return lt(Et,Et.current&1|2),e.child}t=t.sibling}o.tail!==null&&Dt()>ql&&(e.flags|=128,r=!0,Kc(o,!1),e.lanes=4194304)}else{if(!r)if(t=Hh(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Kc(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!xt)return Cn(e),null}else 2*Dt()-o.renderingStartTime>ql&&n!==1073741824&&(e.flags|=128,r=!0,Kc(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Dt(),e.sibling=null,n=Et.current,lt(Et,r?n&1|2:n&1),e):(Cn(e),null);case 22:case 23:return by(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?fr&1073741824&&(Cn(e),e.subtreeFlags&6&&(e.flags|=8192)):Cn(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function pk(t,e){switch(iy(e),e.tag){case 1:return sr(e.type)&&Lh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wl(),yt(or),yt(On),hy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return fy(e),null;case 13:if(yt(Et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));zl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return yt(Et),null;case 4:return Wl(),null;case 10:return ly(e.type._context),null;case 22:case 23:return by(),null;case 24:return null;default:return null}}var Af=!1,Rn=!1,mk=typeof WeakSet=="function"?WeakSet:Set,ue=null;function ol(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Nt(t,e,r)}else n.current=null}function r1(t,e,n){try{n()}catch(r){Nt(t,e,r)}}var O_=!1;function gk(t,e){if(Vg=Oh,t=gS(),ny(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,u=0,d=0,f=t,h=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(a=s+i),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===t)break t;if(h===n&&++u===i&&(a=s),h===o&&++d===r&&(l=s),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ug={focusedElem:t,selectionRange:n},Oh=!1,ue=e;ue!==null;)if(e=ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ue=t;else for(;ue!==null;){e=ue;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var v=g.memoizedProps,y=g.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:Gr(e.type,v),y);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(A){Nt(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}return g=O_,O_=!1,g}function Cu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&r1(e,n,o)}i=i.next}while(i!==r)}}function zp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function i1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function fI(t){var e=t.alternate;e!==null&&(t.alternate=null,fI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vi],delete e[Gu],delete e[Hg],delete e[ZO],delete e[JO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hI(t){return t.tag===5||t.tag===3||t.tag===4}function k_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function o1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jh));else if(r!==4&&(t=t.child,t!==null))for(o1(t,e,n),t=t.sibling;t!==null;)o1(t,e,n),t=t.sibling}function s1(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(s1(t,e,n),t=t.sibling;t!==null;)s1(t,e,n),t=t.sibling}var un=null,Kr=!1;function vo(t,e,n){for(n=n.child;n!==null;)pI(t,e,n),n=n.sibling}function pI(t,e,n){if(Ei&&typeof Ei.onCommitFiberUnmount=="function")try{Ei.onCommitFiberUnmount(Mp,n)}catch{}switch(n.tag){case 5:Rn||ol(n,e);case 6:var r=un,i=Kr;un=null,vo(t,e,n),un=r,Kr=i,un!==null&&(Kr?(t=un,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):un.removeChild(n.stateNode));break;case 18:un!==null&&(Kr?(t=un,n=n.stateNode,t.nodeType===8?Am(t.parentNode,n):t.nodeType===1&&Am(t,n),Uu(t)):Am(un,n.stateNode));break;case 4:r=un,i=Kr,un=n.stateNode.containerInfo,Kr=!0,vo(t,e,n),un=r,Kr=i;break;case 0:case 11:case 14:case 15:if(!Rn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&r1(n,e,s),i=i.next}while(i!==r)}vo(t,e,n);break;case 1:if(!Rn&&(ol(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Nt(n,e,a)}vo(t,e,n);break;case 21:vo(t,e,n);break;case 22:n.mode&1?(Rn=(r=Rn)||n.memoizedState!==null,vo(t,e,n),Rn=r):vo(t,e,n);break;default:vo(t,e,n)}}function M_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mk),e.forEach(function(r){var i=Ak.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function $r(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:un=a.stateNode,Kr=!1;break e;case 3:un=a.stateNode.containerInfo,Kr=!0;break e;case 4:un=a.stateNode.containerInfo,Kr=!0;break e}a=a.return}if(un===null)throw Error(ne(160));pI(o,s,i),un=null,Kr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Nt(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)mI(e,t),e=e.sibling}function mI(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if($r(e,t),ui(t),r&4){try{Cu(3,t,t.return),zp(3,t)}catch(v){Nt(t,t.return,v)}try{Cu(5,t,t.return)}catch(v){Nt(t,t.return,v)}}break;case 1:$r(e,t),ui(t),r&512&&n!==null&&ol(n,n.return);break;case 5:if($r(e,t),ui(t),r&512&&n!==null&&ol(n,n.return),t.flags&32){var i=t.stateNode;try{Lu(i,"")}catch(v){Nt(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&LA(i,o),Rg(a,s);var u=Rg(a,o);for(s=0;s<l.length;s+=2){var d=l[s],f=l[s+1];d==="style"?$A(i,f):d==="dangerouslySetInnerHTML"?VA(i,f):d==="children"?Lu(i,f):zv(i,d,f,u)}switch(a){case"input":Ag(i,o);break;case"textarea":FA(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var m=o.value;m!=null?dl(i,!!o.multiple,m,!1):h!==!!o.multiple&&(o.defaultValue!=null?dl(i,!!o.multiple,o.defaultValue,!0):dl(i,!!o.multiple,o.multiple?[]:"",!1))}i[Gu]=o}catch(v){Nt(t,t.return,v)}}break;case 6:if($r(e,t),ui(t),r&4){if(t.stateNode===null)throw Error(ne(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(v){Nt(t,t.return,v)}}break;case 3:if($r(e,t),ui(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Uu(e.containerInfo)}catch(v){Nt(t,t.return,v)}break;case 4:$r(e,t),ui(t);break;case 13:$r(e,t),ui(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Ey=Dt())),r&4&&M_(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Rn=(u=Rn)||d,$r(e,t),Rn=u):$r(e,t),ui(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(ue=t,d=t.child;d!==null;){for(f=ue=d;ue!==null;){switch(h=ue,m=h.child,h.tag){case 0:case 11:case 14:case 15:Cu(4,h,h.return);break;case 1:ol(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(v){Nt(r,n,v)}}break;case 5:ol(h,h.return);break;case 22:if(h.memoizedState!==null){L_(f);continue}}m!==null?(m.return=h,ue=m):L_(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=UA("display",s))}catch(v){Nt(t,t.return,v)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(v){Nt(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:$r(e,t),ui(t),r&4&&M_(t);break;case 21:break;default:$r(e,t),ui(t)}}function ui(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(hI(n)){var r=n;break e}n=n.return}throw Error(ne(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Lu(i,""),r.flags&=-33);var o=k_(t);s1(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=k_(t);o1(t,a,s);break;default:throw Error(ne(161))}}catch(l){Nt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vk(t,e,n){ue=t,gI(t)}function gI(t,e,n){for(var r=(t.mode&1)!==0;ue!==null;){var i=ue,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Af;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Rn;a=Af;var u=Rn;if(Af=s,(Rn=l)&&!u)for(ue=i;ue!==null;)s=ue,l=s.child,s.tag===22&&s.memoizedState!==null?F_(i):l!==null?(l.return=s,ue=l):F_(i);for(;o!==null;)ue=o,gI(o),o=o.sibling;ue=i,Af=a,Rn=u}j_(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ue=o):j_(t)}}function j_(t){for(;ue!==null;){var e=ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rn||zp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Rn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Gr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&w_(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}w_(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Uu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}Rn||e.flags&512&&i1(e)}catch(h){Nt(e,e.return,h)}}if(e===t){ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,ue=n;break}ue=e.return}}function L_(t){for(;ue!==null;){var e=ue;if(e===t){ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ue=n;break}ue=e.return}}function F_(t){for(;ue!==null;){var e=ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{zp(4,e)}catch(l){Nt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Nt(e,i,l)}}var o=e.return;try{i1(e)}catch(l){Nt(e,o,l)}break;case 5:var s=e.return;try{i1(e)}catch(l){Nt(e,s,l)}}}catch(l){Nt(e,e.return,l)}if(e===t){ue=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ue=a;break}ue=e.return}}var yk=Math.ceil,qh=fo.ReactCurrentDispatcher,wy=fo.ReactCurrentOwner,kr=fo.ReactCurrentBatchConfig,qe=0,sn=null,Mt=null,gn=0,fr=0,sl=As(0),qt=0,Zu=null,da=0,Hp=0,_y=0,bu=null,nr=null,Ey=0,ql=1/0,Wi=null,Kh=!1,a1=null,Zo=null,Sf=!1,Wo=null,Xh=0,Au=0,l1=null,oh=-1,sh=0;function Gn(){return qe&6?Dt():oh!==-1?oh:oh=Dt()}function Jo(t){return t.mode&1?qe&2&&gn!==0?gn&-gn:tk.transition!==null?(sh===0&&(sh=eS()),sh):(t=ot,t!==0||(t=window.event,t=t===void 0?16:aS(t.type)),t):1}function ii(t,e,n,r){if(50<Au)throw Au=0,l1=null,Error(ne(185));_d(t,n,r),(!(qe&2)||t!==sn)&&(t===sn&&(!(qe&2)&&(Hp|=n),qt===4&&To(t,gn)),ar(t,r),n===1&&qe===0&&!(e.mode&1)&&(ql=Dt()+500,Vp&&Ss()))}function ar(t,e){var n=t.callbackNode;tO(t,e);var r=Dh(t,t===sn?gn:0);if(r===0)n!==null&&q2(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&q2(n),e===1)t.tag===0?ek(B_.bind(null,t)):SS(B_.bind(null,t)),QO(function(){!(qe&6)&&Ss()}),n=null;else{switch(tS(r)){case 1:n=Kv;break;case 4:n=ZA;break;case 16:n=Ph;break;case 536870912:n=JA;break;default:n=Ph}n=bI(n,vI.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function vI(t,e){if(oh=-1,sh=0,qe&6)throw Error(ne(327));var n=t.callbackNode;if(gl()&&t.callbackNode!==n)return null;var r=Dh(t,t===sn?gn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Qh(t,r);else{e=r;var i=qe;qe|=2;var o=xI();(sn!==t||gn!==e)&&(Wi=null,ql=Dt()+500,ra(t,e));do try{_k();break}catch(a){yI(t,a)}while(!0);ay(),qh.current=o,qe=i,Mt!==null?e=0:(sn=null,gn=0,e=qt)}if(e!==0){if(e===2&&(i=Mg(t),i!==0&&(r=i,e=c1(t,i))),e===1)throw n=Zu,ra(t,0),To(t,r),ar(t,Dt()),n;if(e===6)To(t,r);else{if(i=t.current.alternate,!(r&30)&&!xk(i)&&(e=Qh(t,r),e===2&&(o=Mg(t),o!==0&&(r=o,e=c1(t,o))),e===1))throw n=Zu,ra(t,0),To(t,r),ar(t,Dt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ne(345));case 2:Vs(t,nr,Wi);break;case 3:if(To(t,r),(r&130023424)===r&&(e=Ey+500-Dt(),10<e)){if(Dh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Gn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=zg(Vs.bind(null,t,nr,Wi),e);break}Vs(t,nr,Wi);break;case 4:if(To(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ri(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Dt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*yk(r/1960))-r,10<r){t.timeoutHandle=zg(Vs.bind(null,t,nr,Wi),r);break}Vs(t,nr,Wi);break;case 5:Vs(t,nr,Wi);break;default:throw Error(ne(329))}}}return ar(t,Dt()),t.callbackNode===n?vI.bind(null,t):null}function c1(t,e){var n=bu;return t.current.memoizedState.isDehydrated&&(ra(t,e).flags|=256),t=Qh(t,e),t!==2&&(e=nr,nr=n,e!==null&&u1(e)),t}function u1(t){nr===null?nr=t:nr.push.apply(nr,t)}function xk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!si(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function To(t,e){for(e&=~_y,e&=~Hp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ri(e),r=1<<n;t[n]=-1,e&=~r}}function B_(t){if(qe&6)throw Error(ne(327));gl();var e=Dh(t,0);if(!(e&1))return ar(t,Dt()),null;var n=Qh(t,e);if(t.tag!==0&&n===2){var r=Mg(t);r!==0&&(e=r,n=c1(t,r))}if(n===1)throw n=Zu,ra(t,0),To(t,e),ar(t,Dt()),n;if(n===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Vs(t,nr,Wi),ar(t,Dt()),null}function Cy(t,e){var n=qe;qe|=1;try{return t(e)}finally{qe=n,qe===0&&(ql=Dt()+500,Vp&&Ss())}}function fa(t){Wo!==null&&Wo.tag===0&&!(qe&6)&&gl();var e=qe;qe|=1;var n=kr.transition,r=ot;try{if(kr.transition=null,ot=1,t)return t()}finally{ot=r,kr.transition=n,qe=e,!(qe&6)&&Ss()}}function by(){fr=sl.current,yt(sl)}function ra(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,XO(n)),Mt!==null)for(n=Mt.return;n!==null;){var r=n;switch(iy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Lh();break;case 3:Wl(),yt(or),yt(On),hy();break;case 5:fy(r);break;case 4:Wl();break;case 13:yt(Et);break;case 19:yt(Et);break;case 10:ly(r.type._context);break;case 22:case 23:by()}n=n.return}if(sn=t,Mt=t=es(t.current,null),gn=fr=e,qt=0,Zu=null,_y=Hp=da=0,nr=bu=null,Hs!==null){for(e=0;e<Hs.length;e++)if(n=Hs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Hs=null}return t}function yI(t,e){do{var n=Mt;try{if(ay(),nh.current=Gh,Wh){for(var r=Ct.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Wh=!1}if(ua=0,nn=Vt=Ct=null,Eu=!1,Xu=0,wy.current=null,n===null||n.return===null){qt=1,Zu=e,Mt=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=gn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=S_(s);if(m!==null){m.flags&=-257,I_(m,s,a,o,e),m.mode&1&&A_(o,u,e),e=m,l=u;var g=e.updateQueue;if(g===null){var v=new Set;v.add(l),e.updateQueue=v}else g.add(l);break e}else{if(!(e&1)){A_(o,u,e),Ay();break e}l=Error(ne(426))}}else if(xt&&a.mode&1){var y=S_(s);if(y!==null){!(y.flags&65536)&&(y.flags|=256),I_(y,s,a,o,e),oy(Gl(l,a));break e}}o=l=Gl(l,a),qt!==4&&(qt=2),bu===null?bu=[o]:bu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var x=tI(o,l,e);x_(o,x);break e;case 1:a=l;var w=o.type,E=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Zo===null||!Zo.has(E)))){o.flags|=65536,e&=-e,o.lanes|=e;var A=nI(o,a,e);x_(o,A);break e}}o=o.return}while(o!==null)}_I(n)}catch(O){e=O,Mt===n&&n!==null&&(Mt=n=n.return);continue}break}while(!0)}function xI(){var t=qh.current;return qh.current=Gh,t===null?Gh:t}function Ay(){(qt===0||qt===3||qt===2)&&(qt=4),sn===null||!(da&268435455)&&!(Hp&268435455)||To(sn,gn)}function Qh(t,e){var n=qe;qe|=2;var r=xI();(sn!==t||gn!==e)&&(Wi=null,ra(t,e));do try{wk();break}catch(i){yI(t,i)}while(!0);if(ay(),qe=n,qh.current=r,Mt!==null)throw Error(ne(261));return sn=null,gn=0,qt}function wk(){for(;Mt!==null;)wI(Mt)}function _k(){for(;Mt!==null&&!GD();)wI(Mt)}function wI(t){var e=CI(t.alternate,t,fr);t.memoizedProps=t.pendingProps,e===null?_I(t):Mt=e,wy.current=null}function _I(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=pk(n,e),n!==null){n.flags&=32767,Mt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qt=6,Mt=null;return}}else if(n=hk(n,e,fr),n!==null){Mt=n;return}if(e=e.sibling,e!==null){Mt=e;return}Mt=e=t}while(e!==null);qt===0&&(qt=5)}function Vs(t,e,n){var r=ot,i=kr.transition;try{kr.transition=null,ot=1,Ek(t,e,n,r)}finally{kr.transition=i,ot=r}return null}function Ek(t,e,n,r){do gl();while(Wo!==null);if(qe&6)throw Error(ne(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(nO(t,o),t===sn&&(Mt=sn=null,gn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Sf||(Sf=!0,bI(Ph,function(){return gl(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=kr.transition,kr.transition=null;var s=ot;ot=1;var a=qe;qe|=4,wy.current=null,gk(t,n),mI(n,t),$O(Ug),Oh=!!Vg,Ug=Vg=null,t.current=n,vk(n),qD(),qe=a,ot=s,kr.transition=o}else t.current=n;if(Sf&&(Sf=!1,Wo=t,Xh=i),o=t.pendingLanes,o===0&&(Zo=null),QD(n.stateNode),ar(t,Dt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Kh)throw Kh=!1,t=a1,a1=null,t;return Xh&1&&t.tag!==0&&gl(),o=t.pendingLanes,o&1?t===l1?Au++:(Au=0,l1=t):Au=0,Ss(),null}function gl(){if(Wo!==null){var t=tS(Xh),e=kr.transition,n=ot;try{if(kr.transition=null,ot=16>t?16:t,Wo===null)var r=!1;else{if(t=Wo,Wo=null,Xh=0,qe&6)throw Error(ne(331));var i=qe;for(qe|=4,ue=t.current;ue!==null;){var o=ue,s=o.child;if(ue.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(ue=u;ue!==null;){var d=ue;switch(d.tag){case 0:case 11:case 15:Cu(8,d,o)}var f=d.child;if(f!==null)f.return=d,ue=f;else for(;ue!==null;){d=ue;var h=d.sibling,m=d.return;if(fI(d),d===u){ue=null;break}if(h!==null){h.return=m,ue=h;break}ue=m}}}var g=o.alternate;if(g!==null){var v=g.child;if(v!==null){g.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}ue=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,ue=s;else e:for(;ue!==null;){if(o=ue,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Cu(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,ue=x;break e}ue=o.return}}var w=t.current;for(ue=w;ue!==null;){s=ue;var E=s.child;if(s.subtreeFlags&2064&&E!==null)E.return=s,ue=E;else e:for(s=w;ue!==null;){if(a=ue,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:zp(9,a)}}catch(O){Nt(a,a.return,O)}if(a===s){ue=null;break e}var A=a.sibling;if(A!==null){A.return=a.return,ue=A;break e}ue=a.return}}if(qe=i,Ss(),Ei&&typeof Ei.onPostCommitFiberRoot=="function")try{Ei.onPostCommitFiberRoot(Mp,t)}catch{}r=!0}return r}finally{ot=n,kr.transition=e}}return!1}function V_(t,e,n){e=Gl(n,e),e=tI(t,e,1),t=Yo(t,e,1),e=Gn(),t!==null&&(_d(t,1,e),ar(t,e))}function Nt(t,e,n){if(t.tag===3)V_(t,t,n);else for(;e!==null;){if(e.tag===3){V_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Zo===null||!Zo.has(r))){t=Gl(n,t),t=nI(e,t,1),e=Yo(e,t,1),t=Gn(),e!==null&&(_d(e,1,t),ar(e,t));break}}e=e.return}}function Ck(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Gn(),t.pingedLanes|=t.suspendedLanes&n,sn===t&&(gn&n)===n&&(qt===4||qt===3&&(gn&130023424)===gn&&500>Dt()-Ey?ra(t,0):_y|=n),ar(t,e)}function EI(t,e){e===0&&(t.mode&1?(e=gf,gf<<=1,!(gf&130023424)&&(gf=4194304)):e=1);var n=Gn();t=ro(t,e),t!==null&&(_d(t,e,n),ar(t,n))}function bk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),EI(t,n)}function Ak(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ne(314))}r!==null&&r.delete(e),EI(t,n)}var CI;CI=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||or.current)ir=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ir=!1,fk(t,e,n);ir=!!(t.flags&131072)}else ir=!1,xt&&e.flags&1048576&&IS(e,Vh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ih(t,e),t=e.pendingProps;var i=$l(e,On.current);ml(e,n),i=my(null,e,r,t,i,n);var o=gy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,sr(r)?(o=!0,Fh(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,uy(e),i.updater=$p,e.stateNode=i,i._reactInternals=e,Qg(e,r,t,n),e=Jg(null,e,r,!0,o,n)):(e.tag=0,xt&&o&&ry(e),Wn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ih(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Ik(r),t=Gr(r,t),i){case 0:e=Zg(null,e,r,t,n);break e;case 1:e=R_(null,e,r,t,n);break e;case 11:e=N_(null,e,r,t,n);break e;case 14:e=T_(null,e,r,Gr(r.type,t),n);break e}throw Error(ne(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gr(r,i),Zg(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gr(r,i),R_(t,e,r,i,n);case 3:e:{if(sI(e),t===null)throw Error(ne(387));r=e.pendingProps,o=e.memoizedState,i=o.element,OS(t,e),zh(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Gl(Error(ne(423)),e),e=P_(t,e,r,n,i);break e}else if(r!==i){i=Gl(Error(ne(424)),e),e=P_(t,e,r,n,i);break e}else for(mr=Qo(e.stateNode.containerInfo.firstChild),vr=e,xt=!0,Xr=null,n=PS(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zl(),r===i){e=io(t,e,n);break e}Wn(t,e,r,n)}e=e.child}return e;case 5:return kS(e),t===null&&qg(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,$g(r,i)?s=null:o!==null&&$g(r,o)&&(e.flags|=32),oI(t,e),Wn(t,e,s,n),e.child;case 6:return t===null&&qg(e),null;case 13:return aI(t,e,n);case 4:return dy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Hl(e,null,r,n):Wn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gr(r,i),N_(t,e,r,i,n);case 7:return Wn(t,e,e.pendingProps,n),e.child;case 8:return Wn(t,e,e.pendingProps.children,n),e.child;case 12:return Wn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,lt(Uh,r._currentValue),r._currentValue=s,o!==null)if(si(o.value,s)){if(o.children===i.children&&!or.current){e=io(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Ji(-1,n&-n),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Kg(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(ne(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Kg(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Wn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ml(e,n),i=Lr(i),r=r(i),e.flags|=1,Wn(t,e,r,n),e.child;case 14:return r=e.type,i=Gr(r,e.pendingProps),i=Gr(r.type,i),T_(t,e,r,i,n);case 15:return rI(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Gr(r,i),ih(t,e),e.tag=1,sr(r)?(t=!0,Fh(e)):t=!1,ml(e,n),eI(e,r,i),Qg(e,r,i,n),Jg(null,e,r,!0,t,n);case 19:return lI(t,e,n);case 22:return iI(t,e,n)}throw Error(ne(156,e.tag))};function bI(t,e){return YA(t,e)}function Sk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(t,e,n,r){return new Sk(t,e,n,r)}function Sy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ik(t){if(typeof t=="function")return Sy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Wv)return 11;if(t===Gv)return 14}return 2}function es(t,e){var n=t.alternate;return n===null?(n=Rr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ah(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")Sy(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Qa:return ia(n.children,i,o,e);case Hv:s=8,i|=8;break;case wg:return t=Rr(12,n,e,i|2),t.elementType=wg,t.lanes=o,t;case _g:return t=Rr(13,n,e,i),t.elementType=_g,t.lanes=o,t;case Eg:return t=Rr(19,n,e,i),t.elementType=Eg,t.lanes=o,t;case kA:return Wp(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case DA:s=10;break e;case OA:s=9;break e;case Wv:s=11;break e;case Gv:s=14;break e;case Ao:s=16,r=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=Rr(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function ia(t,e,n,r){return t=Rr(7,t,r,e),t.lanes=n,t}function Wp(t,e,n,r){return t=Rr(22,t,r,e),t.elementType=kA,t.lanes=n,t.stateNode={isHidden:!1},t}function Om(t,e,n){return t=Rr(6,t,null,e),t.lanes=n,t}function km(t,e,n){return e=Rr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Nk(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pm(0),this.expirationTimes=pm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pm(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Iy(t,e,n,r,i,o,s,a,l){return t=new Nk(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Rr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},uy(o),t}function Tk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xa,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function AI(t){if(!t)return fs;t=t._reactInternals;e:{if(Ia(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(sr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var n=t.type;if(sr(n))return AS(t,n,e)}return e}function SI(t,e,n,r,i,o,s,a,l){return t=Iy(n,r,!0,t,i,o,s,a,l),t.context=AI(null),n=t.current,r=Gn(),i=Jo(n),o=Ji(r,i),o.callback=e??null,Yo(n,o,i),t.current.lanes=i,_d(t,i,r),ar(t,r),t}function Gp(t,e,n,r){var i=e.current,o=Gn(),s=Jo(i);return n=AI(n),e.context===null?e.context=n:e.pendingContext=n,e=Ji(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Yo(i,e,s),t!==null&&(ii(t,i,s,o),th(t,i,s)),s}function Yh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function U_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ny(t,e){U_(t,e),(t=t.alternate)&&U_(t,e)}function Rk(){return null}var II=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ty(t){this._internalRoot=t}qp.prototype.render=Ty.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));Gp(t,e,null,null)};qp.prototype.unmount=Ty.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fa(function(){Gp(null,t,null,null)}),e[no]=null}};function qp(t){this._internalRoot=t}qp.prototype.unstable_scheduleHydration=function(t){if(t){var e=iS();t={blockedOn:null,target:t,priority:e};for(var n=0;n<No.length&&e!==0&&e<No[n].priority;n++);No.splice(n,0,t),n===0&&sS(t)}};function Ry(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Kp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $_(){}function Pk(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Yh(s);o.call(u)}}var s=SI(e,r,t,0,null,!1,!1,"",$_);return t._reactRootContainer=s,t[no]=s.current,Hu(t.nodeType===8?t.parentNode:t),fa(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Yh(l);a.call(u)}}var l=Iy(t,0,!1,null,null,!1,!1,"",$_);return t._reactRootContainer=l,t[no]=l.current,Hu(t.nodeType===8?t.parentNode:t),fa(function(){Gp(e,l,n,r)}),l}function Xp(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Yh(s);a.call(l)}}Gp(e,s,t,i)}else s=Pk(n,e,t,i,r);return Yh(s)}nS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=iu(e.pendingLanes);n!==0&&(Xv(e,n|1),ar(e,Dt()),!(qe&6)&&(ql=Dt()+500,Ss()))}break;case 13:fa(function(){var r=ro(t,1);if(r!==null){var i=Gn();ii(r,t,1,i)}}),Ny(t,1)}};Qv=function(t){if(t.tag===13){var e=ro(t,134217728);if(e!==null){var n=Gn();ii(e,t,134217728,n)}Ny(t,134217728)}};rS=function(t){if(t.tag===13){var e=Jo(t),n=ro(t,e);if(n!==null){var r=Gn();ii(n,t,e,r)}Ny(t,e)}};iS=function(){return ot};oS=function(t,e){var n=ot;try{return ot=t,e()}finally{ot=n}};Dg=function(t,e,n){switch(e){case"input":if(Ag(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Bp(r);if(!i)throw Error(ne(90));jA(r),Ag(r,i)}}}break;case"textarea":FA(t,n);break;case"select":e=n.value,e!=null&&dl(t,!!n.multiple,e,!1)}};WA=Cy;GA=fa;var Dk={usingClientEntryPoint:!1,Events:[Cd,el,Bp,zA,HA,Cy]},Xc={findFiberByHostInstance:zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ok={bundleType:Xc.bundleType,version:Xc.version,rendererPackageName:Xc.rendererPackageName,rendererConfig:Xc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=XA(t),t===null?null:t.stateNode},findFiberByHostInstance:Xc.findFiberByHostInstance||Rk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var If=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!If.isDisabled&&If.supportsFiber)try{Mp=If.inject(Ok),Ei=If}catch{}}wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dk;wr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ry(e))throw Error(ne(200));return Tk(t,e,null,n)};wr.createRoot=function(t,e){if(!Ry(t))throw Error(ne(299));var n=!1,r="",i=II;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Iy(t,1,!1,null,null,n,!1,r,i),t[no]=e.current,Hu(t.nodeType===8?t.parentNode:t),new Ty(e)};wr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=XA(e),t=t===null?null:t.stateNode,t};wr.flushSync=function(t){return fa(t)};wr.hydrate=function(t,e,n){if(!Kp(e))throw Error(ne(200));return Xp(null,t,e,!0,n)};wr.hydrateRoot=function(t,e,n){if(!Ry(t))throw Error(ne(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=II;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=SI(e,null,t,1,n??null,i,!1,o,s),t[no]=e.current,Hu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new qp(e)};wr.render=function(t,e,n){if(!Kp(e))throw Error(ne(200));return Xp(null,t,e,!1,n)};wr.unmountComponentAtNode=function(t){if(!Kp(t))throw Error(ne(40));return t._reactRootContainer?(fa(function(){Xp(null,null,t,!1,function(){t._reactRootContainer=null,t[no]=null})}),!0):!1};wr.unstable_batchedUpdates=Cy;wr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Kp(n))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return Xp(t,e,n,!1,r)};wr.version="18.3.1-next-f1338f8080-20240426";function NI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(NI)}catch(t){console.error(t)}}NI(),NA.exports=wr;var fc=NA.exports;const TI=mA(fc);var RI,z_=fc;RI=z_.createRoot,z_.hydrateRoot;var hc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},ha=typeof window>"u"||"Deno"in globalThis;function Ar(){}function kk(t,e){return typeof t=="function"?t(e):t}function d1(t){return typeof t=="number"&&t>=0&&t!==1/0}function PI(t,e){return Math.max(t+(e||0)-Date.now(),0)}function vl(t,e){return typeof t=="function"?t(e):t}function Qr(t,e){return typeof t=="function"?t(e):t}function H_(t,e){const{type:n="all",exact:r,fetchStatus:i,predicate:o,queryKey:s,stale:a}=t;if(s){if(r){if(e.queryHash!==Py(s,e.options))return!1}else if(!Ju(e.queryKey,s))return!1}if(n!=="all"){const l=e.isActive();if(n==="active"&&!l||n==="inactive"&&l)return!1}return!(typeof a=="boolean"&&e.isStale()!==a||i&&i!==e.state.fetchStatus||o&&!o(e))}function W_(t,e){const{exact:n,status:r,predicate:i,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(pa(e.options.mutationKey)!==pa(o))return!1}else if(!Ju(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||i&&!i(e))}function Py(t,e){return((e==null?void 0:e.queryKeyHashFn)||pa)(t)}function pa(t){return JSON.stringify(t,(e,n)=>f1(n)?Object.keys(n).sort().reduce((r,i)=>(r[i]=n[i],r),{}):n)}function Ju(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Ju(t[n],e[n])):!1}function DI(t,e){if(t===e)return t;const n=G_(t)&&G_(e);if(n||f1(t)&&f1(e)){const r=n?t:Object.keys(t),i=r.length,o=n?e:Object.keys(e),s=o.length,a=n?[]:{};let l=0;for(let u=0;u<s;u++){const d=n?u:o[u];(!n&&r.includes(d)||n)&&t[d]===void 0&&e[d]===void 0?(a[d]=void 0,l++):(a[d]=DI(t[d],e[d]),a[d]===t[d]&&t[d]!==void 0&&l++)}return i===s&&l===i?t:a}return e}function Zh(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function G_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function f1(t){if(!q_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!q_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function q_(t){return Object.prototype.toString.call(t)==="[object Object]"}function Mk(t){return new Promise(e=>{setTimeout(e,t)})}function h1(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?DI(t,e):e}function jk(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function Lk(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Dy=Symbol();function OI(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Dy?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Qs,Mo,Nl,oA,Fk=(oA=class extends hc{constructor(){super();Ee(this,Qs);Ee(this,Mo);Ee(this,Nl);le(this,Nl,e=>{if(!ha&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){U(this,Mo)||this.setEventListener(U(this,Nl))}onUnsubscribe(){var e;this.hasListeners()||((e=U(this,Mo))==null||e.call(this),le(this,Mo,void 0))}setEventListener(e){var n;le(this,Nl,e),(n=U(this,Mo))==null||n.call(this),le(this,Mo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){U(this,Qs)!==e&&(le(this,Qs,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof U(this,Qs)=="boolean"?U(this,Qs):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Qs=new WeakMap,Mo=new WeakMap,Nl=new WeakMap,oA),Oy=new Fk,Tl,jo,Rl,sA,Bk=(sA=class extends hc{constructor(){super();Ee(this,Tl,!0);Ee(this,jo);Ee(this,Rl);le(this,Rl,e=>{if(!ha&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){U(this,jo)||this.setEventListener(U(this,Rl))}onUnsubscribe(){var e;this.hasListeners()||((e=U(this,jo))==null||e.call(this),le(this,jo,void 0))}setEventListener(e){var n;le(this,Rl,e),(n=U(this,jo))==null||n.call(this),le(this,jo,e(this.setOnline.bind(this)))}setOnline(e){U(this,Tl)!==e&&(le(this,Tl,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return U(this,Tl)}},Tl=new WeakMap,jo=new WeakMap,Rl=new WeakMap,sA),Jh=new Bk;function p1(){let t,e;const n=new Promise((i,o)=>{t=i,e=o});n.status="pending",n.catch(()=>{});function r(i){Object.assign(n,i),delete n.resolve,delete n.reject}return n.resolve=i=>{r({status:"fulfilled",value:i}),t(i)},n.reject=i=>{r({status:"rejected",reason:i}),e(i)},n}function Vk(t){return Math.min(1e3*2**t,3e4)}function kI(t){return(t??"online")==="online"?Jh.isOnline():!0}var MI=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Mm(t){return t instanceof MI}function jI(t){let e=!1,n=0,r=!1,i;const o=p1(),s=v=>{var y;r||(h(new MI(v)),(y=t.abort)==null||y.call(t))},a=()=>{e=!0},l=()=>{e=!1},u=()=>Oy.isFocused()&&(t.networkMode==="always"||Jh.isOnline())&&t.canRun(),d=()=>kI(t.networkMode)&&t.canRun(),f=v=>{var y;r||(r=!0,(y=t.onSuccess)==null||y.call(t,v),i==null||i(),o.resolve(v))},h=v=>{var y;r||(r=!0,(y=t.onError)==null||y.call(t,v),i==null||i(),o.reject(v))},m=()=>new Promise(v=>{var y;i=x=>{(r||u())&&v(x)},(y=t.onPause)==null||y.call(t)}).then(()=>{var v;i=void 0,r||(v=t.onContinue)==null||v.call(t)}),g=()=>{if(r)return;let v;const y=n===0?t.initialPromise:void 0;try{v=y??t.fn()}catch(x){v=Promise.reject(x)}Promise.resolve(v).then(f).catch(x=>{var j;if(r)return;const w=t.retry??(ha?0:3),E=t.retryDelay??Vk,A=typeof E=="function"?E(n,x):E,O=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,x);if(e||!O){h(x);return}n++,(j=t.onFail)==null||j.call(t,n,x),Mk(A).then(()=>u()?void 0:m()).then(()=>{e?h(x):g()})})};return{promise:o,cancel:s,continue:()=>(i==null||i(),o),cancelRetry:a,continueRetry:l,canStart:d,start:()=>(d()?g():m().then(g),o)}}function Uk(){let t=[],e=0,n=a=>{a()},r=a=>{a()},i=a=>setTimeout(a,0);const o=a=>{e?t.push(a):i(()=>{n(a)})},s=()=>{const a=t;t=[],a.length&&i(()=>{r(()=>{a.forEach(l=>{n(l)})})})};return{batch:a=>{let l;e++;try{l=a()}finally{e--,e||s()}return l},batchCalls:a=>(...l)=>{o(()=>{a(...l)})},schedule:o,setNotifyFunction:a=>{n=a},setBatchNotifyFunction:a=>{r=a},setScheduler:a=>{i=a}}}var $t=Uk(),Ys,aA,LI=(aA=class{constructor(){Ee(this,Ys)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),d1(this.gcTime)&&le(this,Ys,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(ha?1/0:5*60*1e3))}clearGcTimeout(){U(this,Ys)&&(clearTimeout(U(this,Ys)),le(this,Ys,void 0))}},Ys=new WeakMap,aA),Pl,Dl,br,Sn,gd,Zs,qr,Hi,lA,$k=(lA=class extends LI{constructor(n){super();Ee(this,qr);Ee(this,Pl);Ee(this,Dl);Ee(this,br);Ee(this,Sn);Ee(this,gd);Ee(this,Zs);le(this,Zs,!1),le(this,gd,n.defaultOptions),this.setOptions(n.options),this.observers=[],le(this,br,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,le(this,Pl,zk(this.options)),this.state=n.state??U(this,Pl),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=U(this,Sn))==null?void 0:n.promise}setOptions(n){this.options={...U(this,gd),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&U(this,br).remove(this)}setData(n,r){const i=h1(this.state.data,n,this.options);return Oe(this,qr,Hi).call(this,{data:i,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),i}setState(n,r){Oe(this,qr,Hi).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var i,o;const r=(i=U(this,Sn))==null?void 0:i.promise;return(o=U(this,Sn))==null||o.cancel(n),r?r.then(Ar).catch(Ar):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(U(this,Pl))}isActive(){return this.observers.some(n=>Qr(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Dy||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!PI(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(i=>i.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=U(this,Sn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(i=>i.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=U(this,Sn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),U(this,br).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(U(this,Sn)&&(U(this,Zs)?U(this,Sn).cancel({revert:!0}):U(this,Sn).cancelRetry()),this.scheduleGc()),U(this,br).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Oe(this,qr,Hi).call(this,{type:"invalidate"})}fetch(n,r){var u,d,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(U(this,Sn))return U(this,Sn).continueRetry(),U(this,Sn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const h=this.observers.find(m=>m.options.queryFn);h&&this.setOptions(h.options)}const i=new AbortController,o=h=>{Object.defineProperty(h,"signal",{enumerable:!0,get:()=>(le(this,Zs,!0),i.signal)})},s=()=>{const h=OI(this.options,r),m={queryKey:this.queryKey,meta:this.meta};return o(m),le(this,Zs,!1),this.options.persister?this.options.persister(h,m,this):h(m)},a={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};o(a),(u=this.options.behavior)==null||u.onFetch(a,this),le(this,Dl,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=a.fetchOptions)==null?void 0:d.meta))&&Oe(this,qr,Hi).call(this,{type:"fetch",meta:(f=a.fetchOptions)==null?void 0:f.meta});const l=h=>{var m,g,v,y;Mm(h)&&h.silent||Oe(this,qr,Hi).call(this,{type:"error",error:h}),Mm(h)||((g=(m=U(this,br).config).onError)==null||g.call(m,h,this),(y=(v=U(this,br).config).onSettled)==null||y.call(v,this.state.data,h,this)),this.scheduleGc()};return le(this,Sn,jI({initialPromise:r==null?void 0:r.initialPromise,fn:a.fetchFn,abort:i.abort.bind(i),onSuccess:h=>{var m,g,v,y;if(h===void 0){l(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(h)}catch(x){l(x);return}(g=(m=U(this,br).config).onSuccess)==null||g.call(m,h,this),(y=(v=U(this,br).config).onSettled)==null||y.call(v,h,this.state.error,this),this.scheduleGc()},onError:l,onFail:(h,m)=>{Oe(this,qr,Hi).call(this,{type:"failed",failureCount:h,error:m})},onPause:()=>{Oe(this,qr,Hi).call(this,{type:"pause"})},onContinue:()=>{Oe(this,qr,Hi).call(this,{type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0})),U(this,Sn).start()}},Pl=new WeakMap,Dl=new WeakMap,br=new WeakMap,Sn=new WeakMap,gd=new WeakMap,Zs=new WeakMap,qr=new WeakSet,Hi=function(n){const r=i=>{switch(n.type){case"failed":return{...i,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,...FI(i.data,this.options),fetchMeta:n.meta??null};case"success":return{...i,data:n.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=n.error;return Mm(o)&&o.revert&&U(this,Dl)?{...U(this,Dl),fetchStatus:"idle"}:{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...n.state}}};this.state=r(this.state),$t.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),U(this,br).notify({query:this,type:"updated",action:n})})},lA);function FI(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:kI(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function zk(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var hi,cA,Hk=(cA=class extends hc{constructor(e={}){super();Ee(this,hi);this.config=e,le(this,hi,new Map)}build(e,n,r){const i=n.queryKey,o=n.queryHash??Py(i,n);let s=this.get(o);return s||(s=new $k({cache:this,queryKey:i,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(i)}),this.add(s)),s}add(e){U(this,hi).has(e.queryHash)||(U(this,hi).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=U(this,hi).get(e.queryHash);n&&(e.destroy(),n===e&&U(this,hi).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){$t.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return U(this,hi).get(e)}getAll(){return[...U(this,hi).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>H_(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>H_(e,r)):n}notify(e){$t.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){$t.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){$t.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},hi=new WeakMap,cA),pi,zn,Js,mi,Co,uA,Wk=(uA=class extends LI{constructor(n){super();Ee(this,mi);Ee(this,pi);Ee(this,zn);Ee(this,Js);this.mutationId=n.mutationId,le(this,zn,n.mutationCache),le(this,pi,[]),this.state=n.state||BI(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){U(this,pi).includes(n)||(U(this,pi).push(n),this.clearGcTimeout(),U(this,zn).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){le(this,pi,U(this,pi).filter(r=>r!==n)),this.scheduleGc(),U(this,zn).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){U(this,pi).length||(this.state.status==="pending"?this.scheduleGc():U(this,zn).remove(this))}continue(){var n;return((n=U(this,Js))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,s,a,l,u,d,f,h,m,g,v,y,x,w,E,A,O,j,N,T;le(this,Js,jI({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(S,b)=>{Oe(this,mi,Co).call(this,{type:"failed",failureCount:S,error:b})},onPause:()=>{Oe(this,mi,Co).call(this,{type:"pause"})},onContinue:()=>{Oe(this,mi,Co).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>U(this,zn).canRun(this)}));const r=this.state.status==="pending",i=!U(this,Js).canStart();try{if(!r){Oe(this,mi,Co).call(this,{type:"pending",variables:n,isPaused:i}),await((s=(o=U(this,zn).config).onMutate)==null?void 0:s.call(o,n,this));const b=await((l=(a=this.options).onMutate)==null?void 0:l.call(a,n));b!==this.state.context&&Oe(this,mi,Co).call(this,{type:"pending",context:b,variables:n,isPaused:i})}const S=await U(this,Js).start();return await((d=(u=U(this,zn).config).onSuccess)==null?void 0:d.call(u,S,n,this.state.context,this)),await((h=(f=this.options).onSuccess)==null?void 0:h.call(f,S,n,this.state.context)),await((g=(m=U(this,zn).config).onSettled)==null?void 0:g.call(m,S,null,this.state.variables,this.state.context,this)),await((y=(v=this.options).onSettled)==null?void 0:y.call(v,S,null,n,this.state.context)),Oe(this,mi,Co).call(this,{type:"success",data:S}),S}catch(S){try{throw await((w=(x=U(this,zn).config).onError)==null?void 0:w.call(x,S,n,this.state.context,this)),await((A=(E=this.options).onError)==null?void 0:A.call(E,S,n,this.state.context)),await((j=(O=U(this,zn).config).onSettled)==null?void 0:j.call(O,void 0,S,this.state.variables,this.state.context,this)),await((T=(N=this.options).onSettled)==null?void 0:T.call(N,void 0,S,n,this.state.context)),S}finally{Oe(this,mi,Co).call(this,{type:"error",error:S})}}finally{U(this,zn).runNext(this)}}},pi=new WeakMap,zn=new WeakMap,Js=new WeakMap,mi=new WeakSet,Co=function(n){const r=i=>{switch(n.type){case"failed":return{...i,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...i,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:n.error,failureCount:i.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),$t.batch(()=>{U(this,pi).forEach(i=>{i.onMutationUpdate(n)}),U(this,zn).notify({mutation:this,type:"updated",action:n})})},uA);function BI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var dr,vd,dA,Gk=(dA=class extends hc{constructor(e={}){super();Ee(this,dr);Ee(this,vd);this.config=e,le(this,dr,new Map),le(this,vd,Date.now())}build(e,n,r){const i=new Wk({mutationCache:this,mutationId:++uf(this,vd)._,options:e.defaultMutationOptions(n),state:r});return this.add(i),i}add(e){const n=Nf(e),r=U(this,dr).get(n)??[];r.push(e),U(this,dr).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=Nf(e);if(U(this,dr).has(n)){const i=(r=U(this,dr).get(n))==null?void 0:r.filter(o=>o!==e);i&&(i.length===0?U(this,dr).delete(n):U(this,dr).set(n,i))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=U(this,dr).get(Nf(e)))==null?void 0:r.find(i=>i.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=U(this,dr).get(Nf(e)))==null?void 0:r.find(i=>i!==e&&i.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){$t.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...U(this,dr).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>W_(n,r))}findAll(e={}){return this.getAll().filter(n=>W_(e,n))}notify(e){$t.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return $t.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ar))))}},dr=new WeakMap,vd=new WeakMap,dA);function Nf(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function K_(t){return{onFetch:(e,n)=>{var d,f,h,m,g;const r=e.options,i=(h=(f=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:f.fetchMore)==null?void 0:h.direction,o=((m=e.state.data)==null?void 0:m.pages)||[],s=((g=e.state.data)==null?void 0:g.pageParams)||[];let a={pages:[],pageParams:[]},l=0;const u=async()=>{let v=!1;const y=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},x=OI(e.options,e.fetchOptions),w=async(E,A,O)=>{if(v)return Promise.reject();if(A==null&&E.pages.length)return Promise.resolve(E);const j={queryKey:e.queryKey,pageParam:A,direction:O?"backward":"forward",meta:e.options.meta};y(j);const N=await x(j),{maxPages:T}=e.options,S=O?Lk:jk;return{pages:S(E.pages,N,T),pageParams:S(E.pageParams,A,T)}};if(i&&o.length){const E=i==="backward",A=E?qk:X_,O={pages:o,pageParams:s},j=A(r,O);a=await w(O,j,E)}else{const E=t??o.length;do{const A=l===0?s[0]??r.initialPageParam:X_(r,a);if(l>0&&A==null)break;a=await w(a,A),l++}while(l<E)}return a};e.options.persister?e.fetchFn=()=>{var v,y;return(y=(v=e.options).persister)==null?void 0:y.call(v,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function X_(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function qk(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var It,Lo,Fo,Ol,kl,Bo,Ml,jl,fA,Kk=(fA=class{constructor(t={}){Ee(this,It);Ee(this,Lo);Ee(this,Fo);Ee(this,Ol);Ee(this,kl);Ee(this,Bo);Ee(this,Ml);Ee(this,jl);le(this,It,t.queryCache||new Hk),le(this,Lo,t.mutationCache||new Gk),le(this,Fo,t.defaultOptions||{}),le(this,Ol,new Map),le(this,kl,new Map),le(this,Bo,0)}mount(){uf(this,Bo)._++,U(this,Bo)===1&&(le(this,Ml,Oy.subscribe(async t=>{t&&(await this.resumePausedMutations(),U(this,It).onFocus())})),le(this,jl,Jh.subscribe(async t=>{t&&(await this.resumePausedMutations(),U(this,It).onOnline())})))}unmount(){var t,e;uf(this,Bo)._--,U(this,Bo)===0&&((t=U(this,Ml))==null||t.call(this),le(this,Ml,void 0),(e=U(this,jl))==null||e.call(this),le(this,jl,void 0))}isFetching(t){return U(this,It).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return U(this,Lo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=U(this,It).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=U(this,It).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(vl(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return U(this,It).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),i=U(this,It).get(r.queryHash),o=i==null?void 0:i.state.data,s=kk(e,o);if(s!==void 0)return U(this,It).build(this,r).setData(s,{...n,manual:!0})}setQueriesData(t,e,n){return $t.batch(()=>U(this,It).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=U(this,It).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=U(this,It);$t.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=U(this,It),r={type:"active",...t};return $t.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=$t.batch(()=>U(this,It).findAll(t).map(i=>i.cancel(n)));return Promise.all(r).then(Ar).catch(Ar)}invalidateQueries(t={},e={}){return $t.batch(()=>{if(U(this,It).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=$t.batch(()=>U(this,It).findAll(t).filter(i=>!i.isDisabled()).map(i=>{let o=i.fetch(void 0,n);return n.throwOnError||(o=o.catch(Ar)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Ar)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=U(this,It).build(this,e);return n.isStaleByTime(vl(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ar).catch(Ar)}fetchInfiniteQuery(t){return t.behavior=K_(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ar).catch(Ar)}ensureInfiniteQueryData(t){return t.behavior=K_(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Jh.isOnline()?U(this,Lo).resumePausedMutations():Promise.resolve()}getQueryCache(){return U(this,It)}getMutationCache(){return U(this,Lo)}getDefaultOptions(){return U(this,Fo)}setDefaultOptions(t){le(this,Fo,t)}setQueryDefaults(t,e){U(this,Ol).set(pa(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...U(this,Ol).values()];let n={};return e.forEach(r=>{Ju(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){U(this,kl).set(pa(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...U(this,kl).values()];let n={};return e.forEach(r=>{Ju(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...U(this,Fo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Py(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Dy&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...U(this,Fo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){U(this,It).clear(),U(this,Lo).clear()}},It=new WeakMap,Lo=new WeakMap,Fo=new WeakMap,Ol=new WeakMap,kl=new WeakMap,Bo=new WeakMap,Ml=new WeakMap,jl=new WeakMap,fA),Jn,Ue,yd,Hn,ea,Ll,Vo,gi,xd,Fl,Bl,ta,na,Uo,Vl,tt,su,m1,g1,v1,y1,x1,w1,_1,VI,hA,Xk=(hA=class extends hc{constructor(e,n){super();Ee(this,tt);Ee(this,Jn);Ee(this,Ue);Ee(this,yd);Ee(this,Hn);Ee(this,ea);Ee(this,Ll);Ee(this,Vo);Ee(this,gi);Ee(this,xd);Ee(this,Fl);Ee(this,Bl);Ee(this,ta);Ee(this,na);Ee(this,Uo);Ee(this,Vl,new Set);this.options=n,le(this,Jn,e),le(this,gi,null),le(this,Vo,p1()),this.options.experimental_prefetchInRender||U(this,Vo).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(U(this,Ue).addObserver(this),Q_(U(this,Ue),this.options)?Oe(this,tt,su).call(this):this.updateResult(),Oe(this,tt,y1).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return E1(U(this,Ue),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return E1(U(this,Ue),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Oe(this,tt,x1).call(this),Oe(this,tt,w1).call(this),U(this,Ue).removeObserver(this)}setOptions(e,n){const r=this.options,i=U(this,Ue);if(this.options=U(this,Jn).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Qr(this.options.enabled,U(this,Ue))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Oe(this,tt,_1).call(this),U(this,Ue).setOptions(this.options),r._defaulted&&!Zh(this.options,r)&&U(this,Jn).getQueryCache().notify({type:"observerOptionsUpdated",query:U(this,Ue),observer:this});const o=this.hasListeners();o&&Y_(U(this,Ue),i,this.options,r)&&Oe(this,tt,su).call(this),this.updateResult(n),o&&(U(this,Ue)!==i||Qr(this.options.enabled,U(this,Ue))!==Qr(r.enabled,U(this,Ue))||vl(this.options.staleTime,U(this,Ue))!==vl(r.staleTime,U(this,Ue)))&&Oe(this,tt,m1).call(this);const s=Oe(this,tt,g1).call(this);o&&(U(this,Ue)!==i||Qr(this.options.enabled,U(this,Ue))!==Qr(r.enabled,U(this,Ue))||s!==U(this,Uo))&&Oe(this,tt,v1).call(this,s)}getOptimisticResult(e){const n=U(this,Jn).getQueryCache().build(U(this,Jn),e),r=this.createResult(n,e);return Yk(this,r)&&(le(this,Hn,r),le(this,Ll,this.options),le(this,ea,U(this,Ue).state)),r}getCurrentResult(){return U(this,Hn)}trackResult(e,n){const r={};return Object.keys(e).forEach(i=>{Object.defineProperty(r,i,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(i),n==null||n(i),e[i])})}),r}trackProp(e){U(this,Vl).add(e)}getCurrentQuery(){return U(this,Ue)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=U(this,Jn).defaultQueryOptions(e),r=U(this,Jn).getQueryCache().build(U(this,Jn),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return Oe(this,tt,su).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),U(this,Hn)))}createResult(e,n){var T;const r=U(this,Ue),i=this.options,o=U(this,Hn),s=U(this,ea),a=U(this,Ll),u=e!==r?e.state:U(this,yd),{state:d}=e;let f={...d},h=!1,m;if(n._optimisticResults){const S=this.hasListeners(),b=!S&&Q_(e,n),k=S&&Y_(e,r,n,i);(b||k)&&(f={...f,...FI(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:g,errorUpdatedAt:v,status:y}=f;if(n.select&&f.data!==void 0)if(o&&f.data===(s==null?void 0:s.data)&&n.select===U(this,xd))m=U(this,Fl);else try{le(this,xd,n.select),m=n.select(f.data),m=h1(o==null?void 0:o.data,m,n),le(this,Fl,m),le(this,gi,null)}catch(S){le(this,gi,S)}else m=f.data;if(n.placeholderData!==void 0&&m===void 0&&y==="pending"){let S;if(o!=null&&o.isPlaceholderData&&n.placeholderData===(a==null?void 0:a.placeholderData))S=o.data;else if(S=typeof n.placeholderData=="function"?n.placeholderData((T=U(this,Bl))==null?void 0:T.state.data,U(this,Bl)):n.placeholderData,n.select&&S!==void 0)try{S=n.select(S),le(this,gi,null)}catch(b){le(this,gi,b)}S!==void 0&&(y="success",m=h1(o==null?void 0:o.data,S,n),h=!0)}U(this,gi)&&(g=U(this,gi),m=U(this,Fl),v=Date.now(),y="error");const x=f.fetchStatus==="fetching",w=y==="pending",E=y==="error",A=w&&x,O=m!==void 0,N={status:y,fetchStatus:f.fetchStatus,isPending:w,isSuccess:y==="success",isError:E,isInitialLoading:A,isLoading:A,data:m,dataUpdatedAt:f.dataUpdatedAt,error:g,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>u.dataUpdateCount||f.errorUpdateCount>u.errorUpdateCount,isFetching:x,isRefetching:x&&!w,isLoadingError:E&&!O,isPaused:f.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:E&&O,isStale:ky(e,n),refetch:this.refetch,promise:U(this,Vo)};if(this.options.experimental_prefetchInRender){const S=R=>{N.status==="error"?R.reject(N.error):N.data!==void 0&&R.resolve(N.data)},b=()=>{const R=le(this,Vo,N.promise=p1());S(R)},k=U(this,Vo);switch(k.status){case"pending":e.queryHash===r.queryHash&&S(k);break;case"fulfilled":(N.status==="error"||N.data!==k.value)&&b();break;case"rejected":(N.status!=="error"||N.error!==k.reason)&&b();break}}return N}updateResult(e){const n=U(this,Hn),r=this.createResult(U(this,Ue),this.options);if(le(this,ea,U(this,Ue).state),le(this,Ll,this.options),U(this,ea).data!==void 0&&le(this,Bl,U(this,Ue)),Zh(r,n))return;le(this,Hn,r);const i={},o=()=>{if(!n)return!0;const{notifyOnChangeProps:s}=this.options,a=typeof s=="function"?s():s;if(a==="all"||!a&&!U(this,Vl).size)return!0;const l=new Set(a??U(this,Vl));return this.options.throwOnError&&l.add("error"),Object.keys(U(this,Hn)).some(u=>{const d=u;return U(this,Hn)[d]!==n[d]&&l.has(d)})};(e==null?void 0:e.listeners)!==!1&&o()&&(i.listeners=!0),Oe(this,tt,VI).call(this,{...i,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Oe(this,tt,y1).call(this)}},Jn=new WeakMap,Ue=new WeakMap,yd=new WeakMap,Hn=new WeakMap,ea=new WeakMap,Ll=new WeakMap,Vo=new WeakMap,gi=new WeakMap,xd=new WeakMap,Fl=new WeakMap,Bl=new WeakMap,ta=new WeakMap,na=new WeakMap,Uo=new WeakMap,Vl=new WeakMap,tt=new WeakSet,su=function(e){Oe(this,tt,_1).call(this);let n=U(this,Ue).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Ar)),n},m1=function(){Oe(this,tt,x1).call(this);const e=vl(this.options.staleTime,U(this,Ue));if(ha||U(this,Hn).isStale||!d1(e))return;const r=PI(U(this,Hn).dataUpdatedAt,e)+1;le(this,ta,setTimeout(()=>{U(this,Hn).isStale||this.updateResult()},r))},g1=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(U(this,Ue)):this.options.refetchInterval)??!1},v1=function(e){Oe(this,tt,w1).call(this),le(this,Uo,e),!(ha||Qr(this.options.enabled,U(this,Ue))===!1||!d1(U(this,Uo))||U(this,Uo)===0)&&le(this,na,setInterval(()=>{(this.options.refetchIntervalInBackground||Oy.isFocused())&&Oe(this,tt,su).call(this)},U(this,Uo)))},y1=function(){Oe(this,tt,m1).call(this),Oe(this,tt,v1).call(this,Oe(this,tt,g1).call(this))},x1=function(){U(this,ta)&&(clearTimeout(U(this,ta)),le(this,ta,void 0))},w1=function(){U(this,na)&&(clearInterval(U(this,na)),le(this,na,void 0))},_1=function(){const e=U(this,Jn).getQueryCache().build(U(this,Jn),this.options);if(e===U(this,Ue))return;const n=U(this,Ue);le(this,Ue,e),le(this,yd,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},VI=function(e){$t.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(U(this,Hn))}),U(this,Jn).getQueryCache().notify({query:U(this,Ue),type:"observerResultsUpdated"})})},hA);function Qk(t,e){return Qr(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function Q_(t,e){return Qk(t,e)||t.state.data!==void 0&&E1(t,e,e.refetchOnMount)}function E1(t,e,n){if(Qr(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&ky(t,e)}return!1}function Y_(t,e,n,r){return(t!==e||Qr(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&ky(t,n)}function ky(t,e){return Qr(e.enabled,t)!==!1&&t.isStaleByTime(vl(e.staleTime,t))}function Yk(t,e){return!Zh(t.getCurrentResult(),e)}var $o,zo,er,qi,eo,lh,C1,pA,Zk=(pA=class extends hc{constructor(n,r){super();Ee(this,eo);Ee(this,$o);Ee(this,zo);Ee(this,er);Ee(this,qi);le(this,$o,n),this.setOptions(r),this.bindMethods(),Oe(this,eo,lh).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var i;const r=this.options;this.options=U(this,$o).defaultMutationOptions(n),Zh(this.options,r)||U(this,$o).getMutationCache().notify({type:"observerOptionsUpdated",mutation:U(this,er),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&pa(r.mutationKey)!==pa(this.options.mutationKey)?this.reset():((i=U(this,er))==null?void 0:i.state.status)==="pending"&&U(this,er).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=U(this,er))==null||n.removeObserver(this)}onMutationUpdate(n){Oe(this,eo,lh).call(this),Oe(this,eo,C1).call(this,n)}getCurrentResult(){return U(this,zo)}reset(){var n;(n=U(this,er))==null||n.removeObserver(this),le(this,er,void 0),Oe(this,eo,lh).call(this),Oe(this,eo,C1).call(this)}mutate(n,r){var i;return le(this,qi,r),(i=U(this,er))==null||i.removeObserver(this),le(this,er,U(this,$o).getMutationCache().build(U(this,$o),this.options)),U(this,er).addObserver(this),U(this,er).execute(n)}},$o=new WeakMap,zo=new WeakMap,er=new WeakMap,qi=new WeakMap,eo=new WeakSet,lh=function(){var r;const n=((r=U(this,er))==null?void 0:r.state)??BI();le(this,zo,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},C1=function(n){$t.batch(()=>{var r,i,o,s,a,l,u,d;if(U(this,qi)&&this.hasListeners()){const f=U(this,zo).variables,h=U(this,zo).context;(n==null?void 0:n.type)==="success"?((i=(r=U(this,qi)).onSuccess)==null||i.call(r,n.data,f,h),(s=(o=U(this,qi)).onSettled)==null||s.call(o,n.data,null,f,h)):(n==null?void 0:n.type)==="error"&&((l=(a=U(this,qi)).onError)==null||l.call(a,n.error,f,h),(d=(u=U(this,qi)).onSettled)==null||d.call(u,void 0,n.error,f,h))}this.listeners.forEach(f=>{f(U(this,zo))})})},pA),UI=C.createContext(void 0),pc=t=>{const e=C.useContext(UI);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},Jk=({client:t,children:e})=>(C.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),c.jsx(UI.Provider,{value:t,children:e})),$I=C.createContext(!1),e5=()=>C.useContext($I);$I.Provider;function t5(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var n5=C.createContext(t5()),r5=()=>C.useContext(n5);function zI(t,e){return typeof t=="function"?t(...e):!!t}function b1(){}var i5=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},o5=t=>{C.useEffect(()=>{t.clearReset()},[t])},s5=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&zI(n,[t.error,r]),a5=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},l5=(t,e)=>t.isLoading&&t.isFetching&&!e,c5=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,Z_=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function u5(t,e,n){var d,f,h,m,g;const r=pc(),i=e5(),o=r5(),s=r.defaultQueryOptions(t);(f=(d=r.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||f.call(d,s),s._optimisticResults=i?"isRestoring":"optimistic",a5(s),i5(s,o),o5(o);const a=!r.getQueryCache().get(s.queryHash),[l]=C.useState(()=>new e(r,s)),u=l.getOptimisticResult(s);if(C.useSyncExternalStore(C.useCallback(v=>{const y=i?b1:l.subscribe($t.batchCalls(v));return l.updateResult(),y},[l,i]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),C.useEffect(()=>{l.setOptions(s,{listeners:!1})},[s,l]),c5(s,u))throw Z_(s,l,o);if(s5({result:u,errorResetBoundary:o,throwOnError:s.throwOnError,query:r.getQueryCache().get(s.queryHash)}))throw u.error;if((m=(h=r.getDefaultOptions().queries)==null?void 0:h._experimental_afterQuery)==null||m.call(h,s,u),s.experimental_prefetchInRender&&!ha&&l5(u,i)){const v=a?Z_(s,l,o):(g=r.getQueryCache().get(s.queryHash))==null?void 0:g.promise;v==null||v.catch(b1).finally(()=>{l.updateResult()})}return s.notifyOnChangeProps?u:l.trackResult(u)}function Qp(t,e){return u5(t,Xk)}function yl(t,e){const n=pc(),[r]=C.useState(()=>new Zk(n,t));C.useEffect(()=>{r.setOptions(t)},[r,t]);const i=C.useSyncExternalStore(C.useCallback(s=>r.subscribe($t.batchCalls(s)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=C.useCallback((s,a)=>{r.mutate(s,a).catch(b1)},[r]);if(i.error&&zI(r.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:o,mutateAsync:i.mutate}}const d5=new Kk({defaultOptions:{queries:{queryFn:async({queryKey:t,signal:e})=>{const n=t[0],r=window.location.hostname==="localhost"?`http://localhost:5000${n}`:n,i=await fetch(r,{signal:e});if(!i.ok)throw new Error(`${i.status}: ${i.statusText}`);return i.json()},staleTime:5*60*1e3,retry:1}}}),Qi=async(t,e={})=>{const n=window.location.hostname==="localhost"?`http://localhost:5000${t}`:t,r=await fetch(n,{headers:{"Content-Type":"application/json",...e.headers},...e});if(!r.ok)throw new Error(`${r.status}: ${r.statusText}`);return r.json()};function f5(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,i,o,s=[],a="",l=t.split("/");for(l[0]||l.shift();i=l.shift();)n=i[0],n==="*"?(s.push(n),a+=i[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=i.indexOf("?",1),o=i.indexOf(".",1),s.push(i.substring(1,~r?r:~o?o:i.length)),a+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(a+=(~r?"?":"")+"\\"+i.substring(o))):a+="/"+i;return{keys:s,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}var HI={exports:{}},WI={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kl=C;function h5(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var p5=typeof Object.is=="function"?Object.is:h5,m5=Kl.useState,g5=Kl.useEffect,v5=Kl.useLayoutEffect,y5=Kl.useDebugValue;function x5(t,e){var n=e(),r=m5({inst:{value:n,getSnapshot:e}}),i=r[0].inst,o=r[1];return v5(function(){i.value=n,i.getSnapshot=e,jm(i)&&o({inst:i})},[t,n,e]),g5(function(){return jm(i)&&o({inst:i}),t(function(){jm(i)&&o({inst:i})})},[t]),y5(n),n}function jm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!p5(t,n)}catch{return!0}}function w5(t,e){return e()}var _5=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?w5:x5;WI.useSyncExternalStore=Kl.useSyncExternalStore!==void 0?Kl.useSyncExternalStore:_5;HI.exports=WI;var E5=HI.exports;const C5=SA.useInsertionEffect,b5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",A5=b5?C.useLayoutEffect:C.useEffect,S5=C5||A5,GI=t=>{const e=C.useRef([t,(...n)=>e[0](...n)]).current;return S5(()=>{e[0]=t}),e[1]},I5="popstate",My="pushState",jy="replaceState",N5="hashchange",J_=[I5,My,jy,N5],T5=t=>{for(const e of J_)addEventListener(e,t);return()=>{for(const e of J_)removeEventListener(e,t)}},qI=(t,e)=>E5.useSyncExternalStore(T5,t,e),R5=()=>location.search,P5=({ssrSearch:t=""}={})=>qI(R5,()=>t),eE=()=>location.pathname,D5=({ssrPath:t}={})=>qI(eE,t?()=>t:eE),O5=(t,{replace:e=!1,state:n=null}={})=>history[e?jy:My](n,"",t),k5=(t={})=>[D5(t),O5],tE=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[tE]>"u"){for(const t of[My,jy]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,tE,{value:!0})}const M5=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",KI=(t="")=>t==="/"?"":t,j5=(t,e)=>t[0]==="~"?t.slice(1):KI(e)+t,L5=(t="",e)=>M5(nE(KI(t)),nE(e)),nE=t=>{try{return decodeURI(t)}catch{return t}},XI={hook:k5,searchHook:P5,parser:f5,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},QI=C.createContext(XI),Ad=()=>C.useContext(QI),YI={},ZI=C.createContext(YI),F5=()=>C.useContext(ZI),Yp=t=>{const[e,n]=t.hook(t);return[L5(t.base,e),GI((r,i)=>n(j5(r,t.base),i))]},JI=()=>Yp(Ad()),eN=(t,e,n,r)=>{const{pattern:i,keys:o}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),s=i.exec(n)||[],[a,...l]=s;return a!==void 0?[!0,(()=>{const u=o!==!1?Object.fromEntries(o.map((f,h)=>[f,l[h]])):s.groups;let d={...l};return u&&Object.assign(d,u),d})(),...r?[a]:[]]:[!1,null]},A1=({children:t,...e})=>{var d,f;const n=Ad(),r=e.hook?XI:n;let i=r;const[o,s]=((d=e.ssrPath)==null?void 0:d.split("?"))??[];s&&(e.ssrSearch=s,e.ssrPath=o),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let a=C.useRef({}),l=a.current,u=l;for(let h in r){const m=h==="base"?r[h]+(e[h]||""):e[h]||r[h];l===u&&m!==u[h]&&(a.current=u={...u}),u[h]=m,m!==r[h]&&(i=u)}return C.createElement(QI.Provider,{value:i,children:t})},rE=({children:t,component:e},n)=>e?C.createElement(e,{params:n}):typeof t=="function"?t(n):t,B5=t=>{let e=C.useRef(YI),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},$i=({path:t,nest:e,match:n,...r})=>{const i=Ad(),[o]=Yp(i),[s,a,l]=n??eN(i.parser,t,o,e),u=B5({...F5(),...a});if(!s)return null;const d=l?C.createElement(A1,{base:l},rE(r,u)):rE(r,u);return C.createElement(ZI.Provider,{value:u,children:d})};C.forwardRef((t,e)=>{const n=Ad(),[r,i]=Yp(n),{to:o="",href:s=o,onClick:a,asChild:l,children:u,className:d,replace:f,state:h,...m}=t,g=GI(y=>{y.ctrlKey||y.metaKey||y.altKey||y.shiftKey||y.button!==0||(a==null||a(y),y.defaultPrevented||(y.preventDefault(),i(s,t)))}),v=n.hrefs(s[0]==="~"?s.slice(1):n.base+s,n);return l&&C.isValidElement(u)?C.cloneElement(u,{onClick:g,href:v}):C.createElement("a",{...m,onClick:g,href:v,className:d!=null&&d.call?d(r===s):d,children:u,ref:e})});const tN=t=>Array.isArray(t)?t.flatMap(e=>tN(e&&e.type===C.Fragment?e.props.children:e)):[t],iE=({children:t,location:e})=>{const n=Ad(),[r]=Yp(n);for(const i of tN(t)){let o=0;if(C.isValidElement(i)&&(o=eN(n.parser,i.props.path,e||r,i.props.nest))[0])return C.cloneElement(i,{match:o})}return null};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V5=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nN=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var U5={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $5=C.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:o,iconNode:s,...a},l)=>C.createElement("svg",{ref:l,...U5,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:nN("lucide",i),...a},[...s.map(([u,d])=>C.createElement(u,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(t,e)=>{const n=C.forwardRef(({className:r,...i},o)=>C.createElement($5,{ref:o,iconNode:e,className:nN(`lucide-${V5(t)}`,r),...i}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=Se("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=Se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z5=Se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H5=Se("Beaker",[["path",{d:"M4.5 3h15",key:"c7n0jr"}],["path",{d:"M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3",key:"m1uhx7"}],["path",{d:"M6 14h12",key:"4cwo0f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=Se("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=Se("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Su=Se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xl=Se("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=Se("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zp=Se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W5=Se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G5=Se("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=Se("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q5=Se("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K5=Se("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ed=Se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S1=Se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gs=Se("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X5=Se("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=Se("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q5=Se("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y5=Se("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=Se("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z5=Se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=Se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J5=Se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=Se("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=Se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=Se("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ep=Se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=Se("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=Se("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=Se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=Se("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=Se("Sunset",[["path",{d:"M12 10V2",key:"16sf7g"}],["path",{d:"m4.93 10.93 1.41 1.41",key:"2a7f42"}],["path",{d:"M2 18h2",key:"j10viu"}],["path",{d:"M20 18h2",key:"wocana"}],["path",{d:"m19.07 10.93-1.41 1.41",key:"15zs5n"}],["path",{d:"M22 22H2",key:"19qnx5"}],["path",{d:"m16 6-4 4-4-4",key:"6wukr"}],["path",{d:"M16 18a4 4 0 0 0-8 0",key:"1lzouq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=Se("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=Se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I1=Se("Trees",[["path",{d:"M10 10v.2A3 3 0 0 1 8.9 16H5a3 3 0 0 1-1-5.8V10a3 3 0 0 1 6 0Z",key:"1l6gj6"}],["path",{d:"M7 16v6",key:"1a82de"}],["path",{d:"M13 19v3",key:"13sx9i"}],["path",{d:"M12 19h8.3a1 1 0 0 0 .7-1.7L18 14h.3a1 1 0 0 0 .7-1.7L16 9h.2a1 1 0 0 0 .8-1.7L13 3l-1.4 1.5",key:"1sj9kv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=Se("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N1=Se("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ro=Se("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=Se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=Se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=Se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yl=Se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=Se("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);function dE(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Sd(...t){return e=>{let n=!1;const r=t.map(i=>{const o=dE(i,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let i=0;i<r.length;i++){const o=r[i];typeof o=="function"?o():dE(t[i],null)}}}}function $e(...t){return C.useCallback(Sd(...t),t)}function ga(t){const e=iM(t),n=C.forwardRef((r,i)=>{const{children:o,...s}=r,a=C.Children.toArray(o),l=a.find(sM);if(l){const u=l.props.children,d=a.map(f=>f===l?C.Children.count(u)>1?C.Children.only(null):C.isValidElement(u)?u.props.children:null:f);return c.jsx(e,{...s,ref:i,children:C.isValidElement(u)?C.cloneElement(u,void 0,d):null})}return c.jsx(e,{...s,ref:i,children:o})});return n.displayName=`${t}.Slot`,n}var rM=ga("Slot");function iM(t){const e=C.forwardRef((n,r)=>{const{children:i,...o}=n;if(C.isValidElement(i)){const s=lM(i),a=aM(o,i.props);return i.type!==C.Fragment&&(a.ref=r?Sd(r,s):s),C.cloneElement(i,a)}return C.Children.count(i)>1?C.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var oM=Symbol("radix.slottable");function sM(t){return C.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===oM}function aM(t,e){const n={...e};for(const r in e){const i=t[r],o=e[r];/^on[A-Z]/.test(r)?i&&o?n[r]=(...a)=>{o(...a),i(...a)}:i&&(n[r]=i):r==="style"?n[r]={...i,...o}:r==="className"&&(n[r]=[i,o].filter(Boolean).join(" "))}return{...t,...n}}function lM(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function sN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=sN(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function aN(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=sN(t))&&(r&&(r+=" "),r+=e);return r}const fE=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,hE=aN,Id=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return hE(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:i,defaultVariants:o}=e,s=Object.keys(i).map(u=>{const d=n==null?void 0:n[u],f=o==null?void 0:o[u];if(d===null)return null;const h=fE(d)||fE(f);return i[u][h]}),a=n&&Object.entries(n).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),l=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:f,className:h,...m}=d;return Object.entries(m).every(g=>{let[v,y]=g;return Array.isArray(y)?y.includes({...o,...a}[v]):{...o,...a}[v]===y})?[...u,f,h]:u},[]);return hE(t,s,l,n==null?void 0:n.class,n==null?void 0:n.className)},Vy="-",cM=t=>{const e=dM(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{const a=s.split(Vy);return a[0]===""&&a.length!==1&&a.shift(),lN(a,e)||uM(s)},getConflictingClassGroupIds:(s,a)=>{const l=n[s]||[];return a&&r[s]?[...l,...r[s]]:l}}},lN=(t,e)=>{var s;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),i=r?lN(t.slice(1),r):void 0;if(i)return i;if(e.validators.length===0)return;const o=t.join(Vy);return(s=e.validators.find(({validator:a})=>a(o)))==null?void 0:s.classGroupId},pE=/^\[(.+)\]$/,uM=t=>{if(pE.test(t)){const e=pE.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},dM=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return hM(Object.entries(t.classGroups),n).forEach(([o,s])=>{T1(s,r,o,e)}),r},T1=(t,e,n,r)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?e:mE(e,i);o.classGroupId=n;return}if(typeof i=="function"){if(fM(i)){T1(i(r),e,n,r);return}e.validators.push({validator:i,classGroupId:n});return}Object.entries(i).forEach(([o,s])=>{T1(s,mE(e,o),n,r)})})},mE=(t,e)=>{let n=t;return e.split(Vy).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},fM=t=>t.isThemeGetter,hM=(t,e)=>e?t.map(([n,r])=>{const i=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([s,a])=>[e+s,a])):o);return[n,i]}):t,pM=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const i=(o,s)=>{n.set(o,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let s=n.get(o);if(s!==void 0)return s;if((s=r.get(o))!==void 0)return i(o,s),s},set(o,s){n.has(o)?n.set(o,s):i(o,s)}}},cN="!",mM=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,i=e[0],o=e.length,s=a=>{const l=[];let u=0,d=0,f;for(let y=0;y<a.length;y++){let x=a[y];if(u===0){if(x===i&&(r||a.slice(y,y+o)===e)){l.push(a.slice(d,y)),d=y+o;continue}if(x==="/"){f=y;continue}}x==="["?u++:x==="]"&&u--}const h=l.length===0?a:a.substring(d),m=h.startsWith(cN),g=m?h.substring(1):h,v=f&&f>d?f-d:void 0;return{modifiers:l,hasImportantModifier:m,baseClassName:g,maybePostfixModifierPosition:v}};return n?a=>n({className:a,parseClassName:s}):s},gM=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},vM=t=>({cache:pM(t.cacheSize),parseClassName:mM(t),...cM(t)}),yM=/\s+/,xM=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:i}=e,o=[],s=t.trim().split(yM);let a="";for(let l=s.length-1;l>=0;l-=1){const u=s[l],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}=n(u);let g=!!m,v=r(g?h.substring(0,m):h);if(!v){if(!g){a=u+(a.length>0?" "+a:a);continue}if(v=r(h),!v){a=u+(a.length>0?" "+a:a);continue}g=!1}const y=gM(d).join(":"),x=f?y+cN:y,w=x+v;if(o.includes(w))continue;o.push(w);const E=i(v,g);for(let A=0;A<E.length;++A){const O=E[A];o.push(x+O)}a=u+(a.length>0?" "+a:a)}return a};function wM(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=uN(e))&&(r&&(r+=" "),r+=n);return r}const uN=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=uN(t[r]))&&(n&&(n+=" "),n+=e);return n};function _M(t,...e){let n,r,i,o=s;function s(l){const u=e.reduce((d,f)=>f(d),t());return n=vM(u),r=n.cache.get,i=n.cache.set,o=a,a(l)}function a(l){const u=r(l);if(u)return u;const d=xM(l,n);return i(l,d),d}return function(){return o(wM.apply(null,arguments))}}const dt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},dN=/^\[(?:([a-z-]+):)?(.+)\]$/i,EM=/^\d+\/\d+$/,CM=new Set(["px","full","screen"]),bM=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,AM=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,SM=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,IM=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,NM=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,zi=t=>wl(t)||CM.has(t)||EM.test(t),yo=t=>mc(t,"length",jM),wl=t=>!!t&&!Number.isNaN(Number(t)),Fm=t=>mc(t,"number",wl),Qc=t=>!!t&&Number.isInteger(Number(t)),TM=t=>t.endsWith("%")&&wl(t.slice(0,-1)),De=t=>dN.test(t),xo=t=>bM.test(t),RM=new Set(["length","size","percentage"]),PM=t=>mc(t,RM,fN),DM=t=>mc(t,"position",fN),OM=new Set(["image","url"]),kM=t=>mc(t,OM,FM),MM=t=>mc(t,"",LM),Yc=()=>!0,mc=(t,e,n)=>{const r=dN.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},jM=t=>AM.test(t)&&!SM.test(t),fN=()=>!1,LM=t=>IM.test(t),FM=t=>NM.test(t),BM=()=>{const t=dt("colors"),e=dt("spacing"),n=dt("blur"),r=dt("brightness"),i=dt("borderColor"),o=dt("borderRadius"),s=dt("borderSpacing"),a=dt("borderWidth"),l=dt("contrast"),u=dt("grayscale"),d=dt("hueRotate"),f=dt("invert"),h=dt("gap"),m=dt("gradientColorStops"),g=dt("gradientColorStopPositions"),v=dt("inset"),y=dt("margin"),x=dt("opacity"),w=dt("padding"),E=dt("saturate"),A=dt("scale"),O=dt("sepia"),j=dt("skew"),N=dt("space"),T=dt("translate"),S=()=>["auto","contain","none"],b=()=>["auto","hidden","clip","visible","scroll"],k=()=>["auto",De,e],R=()=>[De,e],P=()=>["",zi,yo],G=()=>["auto",wl,De],K=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],X=()=>["solid","dashed","dotted","double","none"],ee=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],F=()=>["start","end","center","between","around","evenly","stretch"],z=()=>["","0",De],D=()=>["auto","avoid","all","avoid-page","page","left","right","column"],B=()=>[wl,De];return{cacheSize:500,separator:":",theme:{colors:[Yc],spacing:[zi,yo],blur:["none","",xo,De],brightness:B(),borderColor:[t],borderRadius:["none","","full",xo,De],borderSpacing:R(),borderWidth:P(),contrast:B(),grayscale:z(),hueRotate:B(),invert:z(),gap:R(),gradientColorStops:[t],gradientColorStopPositions:[TM,yo],inset:k(),margin:k(),opacity:B(),padding:R(),saturate:B(),scale:B(),sepia:z(),skew:B(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",De]}],container:["container"],columns:[{columns:[xo]}],"break-after":[{"break-after":D()}],"break-before":[{"break-before":D()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...K(),De]}],overflow:[{overflow:b()}],"overflow-x":[{"overflow-x":b()}],"overflow-y":[{"overflow-y":b()}],overscroll:[{overscroll:S()}],"overscroll-x":[{"overscroll-x":S()}],"overscroll-y":[{"overscroll-y":S()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qc,De]}],basis:[{basis:k()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",De]}],grow:[{grow:z()}],shrink:[{shrink:z()}],order:[{order:["first","last","none",Qc,De]}],"grid-cols":[{"grid-cols":[Yc]}],"col-start-end":[{col:["auto",{span:["full",Qc,De]},De]}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":[Yc]}],"row-start-end":[{row:["auto",{span:[Qc,De]},De]}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",De]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",De]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...F()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...F(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...F(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",De,e]}],"min-w":[{"min-w":[De,e,"min","max","fit"]}],"max-w":[{"max-w":[De,e,"none","full","min","max","fit","prose",{screen:[xo]},xo]}],h:[{h:[De,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[De,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[De,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[De,e,"auto","min","max","fit"]}],"font-size":[{text:["base",xo,yo]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Fm]}],"font-family":[{font:[Yc]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",De]}],"line-clamp":[{"line-clamp":["none",wl,Fm]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",zi,De]}],"list-image":[{"list-image":["none",De]}],"list-style-type":[{list:["none","disc","decimal",De]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",zi,yo]}],"underline-offset":[{"underline-offset":["auto",zi,De]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",De]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",De]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...K(),DM]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",PM]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},kM]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[g]}],"gradient-via-pos":[{via:[g]}],"gradient-to-pos":[{to:[g]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...X(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:X()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...X()]}],"outline-offset":[{"outline-offset":[zi,De]}],"outline-w":[{outline:[zi,yo]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[zi,yo]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",xo,MM]}],"shadow-color":[{shadow:[Yc]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...ee(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":ee()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",xo,De]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[E]}],sepia:[{sepia:[O]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[E]}],"backdrop-sepia":[{"backdrop-sepia":[O]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",De]}],duration:[{duration:B()}],ease:[{ease:["linear","in","out","in-out",De]}],delay:[{delay:B()}],animate:[{animate:["none","spin","ping","pulse","bounce",De]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[A]}],"scale-x":[{"scale-x":[A]}],"scale-y":[{"scale-y":[A]}],rotate:[{rotate:[Qc,De]}],"translate-x":[{"translate-x":[T]}],"translate-y":[{"translate-y":[T]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",De]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",De]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",De]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[zi,yo,Fm]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},VM=_M(BM);function xe(...t){return VM(aN(t))}const UM=Id("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ve=C.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...i},o)=>{const s=r?rM:"button";return c.jsx(s,{className:xe(UM({variant:e,size:n,className:t})),ref:o,...i})});ve.displayName="Button";const Pe=C.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:xe("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Pe.displayName="Card";const hn=C.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:xe("flex flex-col space-y-1.5 p-6",t),...e}));hn.displayName="CardHeader";const pn=C.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:xe("text-2xl font-semibold leading-none tracking-tight",t),...e}));pn.displayName="CardTitle";const ll=C.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:xe("text-sm text-muted-foreground",t),...e}));ll.displayName="CardDescription";const Le=C.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:xe("p-6 pt-0",t),...e}));Le.displayName="CardContent";const $M=C.forwardRef(({className:t,...e},n)=>c.jsx("div",{ref:n,className:xe("flex items-center p-6 pt-0",t),...e}));$M.displayName="CardFooter";function zM(t,e){const n=C.createContext(e),r=o=>{const{children:s,...a}=o,l=C.useMemo(()=>a,Object.values(a));return c.jsx(n.Provider,{value:l,children:s})};r.displayName=t+"Provider";function i(o){const s=C.useContext(n);if(s)return s;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,i]}function Er(t,e=[]){let n=[];function r(o,s){const a=C.createContext(s),l=n.length;n=[...n,s];const u=f=>{var x;const{scope:h,children:m,...g}=f,v=((x=h==null?void 0:h[t])==null?void 0:x[l])||a,y=C.useMemo(()=>g,Object.values(g));return c.jsx(v.Provider,{value:y,children:m})};u.displayName=o+"Provider";function d(f,h){var v;const m=((v=h==null?void 0:h[t])==null?void 0:v[l])||a,g=C.useContext(m);if(g)return g;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${o}\``)}return[u,d]}const i=()=>{const o=n.map(s=>C.createContext(s));return function(a){const l=(a==null?void 0:a[t])||o;return C.useMemo(()=>({[`__scope${t}`]:{...a,[t]:l}}),[a,l])}};return i.scopeName=t,[r,HM(i,...e)]}function HM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const s=r.reduce((a,{useScope:l,scopeName:u})=>{const f=l(o)[`__scope${u}`];return{...a,...f}},{});return C.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}var WM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],me=WM.reduce((t,e)=>{const n=ga(`Primitive.${e}`),r=C.forwardRef((i,o)=>{const{asChild:s,...a}=i,l=s?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(l,{...a,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function tp(t,e){t&&fc.flushSync(()=>t.dispatchEvent(e))}var Uy="Progress",$y=100,[GM,EZ]=Er(Uy),[qM,KM]=GM(Uy),hN=C.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:i,getValueLabel:o=XM,...s}=t;(i||i===0)&&!gE(i)&&console.error(QM(`${i}`,"Progress"));const a=gE(i)?i:$y;r!==null&&!vE(r,a)&&console.error(YM(`${r}`,"Progress"));const l=vE(r,a)?r:null,u=np(l)?o(l,a):void 0;return c.jsx(qM,{scope:n,value:l,max:a,children:c.jsx(me.div,{"aria-valuemax":a,"aria-valuemin":0,"aria-valuenow":np(l)?l:void 0,"aria-valuetext":u,role:"progressbar","data-state":gN(l,a),"data-value":l??void 0,"data-max":a,...s,ref:e})})});hN.displayName=Uy;var pN="ProgressIndicator",mN=C.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,i=KM(pN,n);return c.jsx(me.div,{"data-state":gN(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...r,ref:e})});mN.displayName=pN;function XM(t,e){return`${Math.round(t/e*100)}%`}function gN(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function np(t){return typeof t=="number"}function gE(t){return np(t)&&!isNaN(t)&&t>0}function vE(t,e){return np(t)&&!isNaN(t)&&t<=e&&t>=0}function QM(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${$y}\`.`}function YM(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${$y} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var vN=hN,ZM=mN;const R1=C.forwardRef(({className:t,value:e,...n},r)=>c.jsx(vN,{ref:r,className:xe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:c.jsx(ZM,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));R1.displayName=vN.displayName;const JM=Id("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Dn({className:t,variant:e,...n}){return c.jsx("div",{className:xe(JM({variant:e}),t),...n})}const ej=()=>{var u,d,f,h,m,g,v,y,x,w,E,A,O,j,N,T,S;const[,t]=JI(),[e,n]=C.useState(null),[r,i]=C.useState(!0),o=async()=>{try{i(!0);const b=window.location.hostname==="localhost"?"http://localhost:5000":"",[k,R,P,G,K]=await Promise.all([fetch(`${b}/api/rugs`),fetch(`${b}/api/buyers`),fetch(`${b}/api/admin/users`),fetch(`${b}/api/lab-inspections`),fetch(`${b}/api/audits`)]),[X,ee,F,z,D]=await Promise.all([k.json(),R.json(),P.json(),G.json(),K.json()]),B=z.filter(fe=>fe.status==="submitted"),$=B.filter(fe=>fe.overallStatus==="ok"),V=B.filter(fe=>fe.overallStatus==="not_ok"),Y=z.filter(fe=>fe.status==="draft"),re=new Date;re.setDate(re.getDate()-7);const ie=z.filter(fe=>new Date(fe.createdAt||fe.dateOfIncoming)>=re),te=B.length>0?Math.round($.length/B.length*100):0,de=D.filter(fe=>fe.status==="submitted"),be=de.filter(fe=>(fe.complianceScore||0)>=80),we=de.filter(fe=>(fe.complianceScore||0)<80),Ie=D.filter(fe=>fe.status==="draft"),Te=de.length>0?Math.round(de.reduce((fe,Zt)=>fe+(Zt.complianceScore||0),0)/de.length):0,Je=[];z.slice(0,5).forEach(fe=>{Je.push({id:fe.id,type:"inspection",title:`Lab Inspection ${fe.status==="submitted"?"Completed":"Created"}`,description:`${fe.supplierName||"Unknown Supplier"} - ${fe.inspectionType||"Material"} inspection`,timestamp:fe.updatedAt||fe.createdAt,status:fe.overallStatus||fe.status})}),D.slice(0,3).forEach(fe=>{Je.push({id:fe.id,type:"audit",title:`Compliance Audit ${fe.status==="submitted"?"Completed":"Created"}`,description:`${fe.company||"Company"} audit - Score: ${fe.complianceScore||"N/A"}%`,timestamp:fe.updatedAt||fe.createdAt,status:fe.status})}),X.slice(0,3).forEach(fe=>{Je.push({id:fe.id,type:"rug",title:"New Rug Sample Created",description:`${fe.designName||fe.rugName||"Unnamed Design"} - ${fe.construction||"Hand Woven"}`,timestamp:fe.createdAt||new Date().toISOString(),status:"created"})}),Je.sort((fe,Zt)=>new Date(Zt.timestamp).getTime()-new Date(fe.timestamp).getTime());const _t={totalRugs:X.length,totalBuyers:ee.length,totalUsers:F.length,labInspections:{total:z.length,passed:$.length,failed:V.length,pending:Y.length,thisWeek:ie.length,passRate:te},qualityAudits:{total:D.length,passed:be.length,failed:we.length,pending:Ie.length,avgScore:Te},recentActivity:Je.slice(0,8)};n(_t)}catch(b){console.error("Error fetching dashboard metrics:",b)}finally{i(!1)}};C.useEffect(()=>{o()},[]);const s=[{title:"Sampling",description:"Create and manage rug samples with technical specifications",icon:ts,path:"/sampling",color:"bg-blue-50 hover:bg-blue-100",iconColor:"text-blue-600",stats:`${(e==null?void 0:e.totalRugs)||0} rugs`,metric:(e==null?void 0:e.totalRugs)||0,trend:"+12%"},{title:"Quality",description:"Lab testing, compliance audits, and quality inspections",icon:al,path:"/quality",color:"bg-green-50 hover:bg-green-100",iconColor:"text-green-600",stats:`${((u=e==null?void 0:e.labInspections)==null?void 0:u.passRate)||0}% pass rate`,metric:`${((d=e==null?void 0:e.labInspections)==null?void 0:d.total)||0} inspections`,trend:(((f=e==null?void 0:e.labInspections)==null?void 0:f.passRate)||0)>=90?"+5%":"-2%"},{title:"Merchandising",description:"Buyer management and production order tracking",icon:xl,path:"/merchandising",color:"bg-purple-50 hover:bg-purple-100",iconColor:"text-purple-600",stats:`${(e==null?void 0:e.totalBuyers)||0} buyers`,metric:`${(e==null?void 0:e.totalUsers)||0} users`,trend:"+8%"}],a=b=>{const k=new Date(b),P=new Date().getTime()-k.getTime(),G=Math.floor(P/(1e3*60*60)),K=Math.floor(G/24);return G<1?"Just now":G<24?`${G}h ago`:K<7?`${K}d ago`:k.toLocaleDateString()},l=(b,k)=>{switch(b){case"inspection":return k==="ok"?{icon:bi,color:"text-green-600",bg:"bg-green-50"}:k==="not_ok"?{icon:Ro,color:"text-red-600",bg:"bg-red-50"}:{icon:ed,color:"text-yellow-600",bg:"bg-yellow-50"};case"audit":return{icon:al,color:"text-purple-600",bg:"bg-purple-50"};case"rug":return{icon:ts,color:"text-blue-600",bg:"bg-blue-50"};default:return{icon:Tf,color:"text-gray-600",bg:"bg-gray-50"}}};return r?c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"animate-pulse space-y-6",children:[c.jsx("div",{className:"h-20 bg-gray-200 rounded-lg"}),c.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(b=>c.jsx("div",{className:"h-24 bg-gray-200 rounded-lg"},b))}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(b=>c.jsx("div",{className:"h-40 bg-gray-200 rounded-lg"},b))})]})}):c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Quality Management System"}),c.jsx("p",{className:"text-gray-600",children:"Access your department's tools and workflows"}),c.jsxs("div",{className:"mt-4 flex items-center gap-4 text-sm text-gray-500",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(Su,{className:"h-4 w-4"}),new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(Tf,{className:"h-4 w-4"}),"System Status: Online"]})]})]}),c.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-6 gap-4 mb-8",children:[c.jsx(Pe,{className:"border-0 shadow-sm",children:c.jsx(Le,{className:"p-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:c.jsx(ts,{className:"h-5 w-5 text-blue-600"})}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("p",{className:"text-xs text-gray-600 truncate",children:"Total Rugs"}),c.jsx("p",{className:"text-lg font-semibold text-gray-900",children:(e==null?void 0:e.totalRugs)||0})]})]})})}),c.jsx(Pe,{className:"border-0 shadow-sm",children:c.jsx(Le,{className:"p-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:c.jsx(bi,{className:"h-5 w-5 text-green-600"})}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("p",{className:"text-xs text-gray-600 truncate",children:"Quality Pass Rate"}),c.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[((h=e==null?void 0:e.labInspections)==null?void 0:h.passRate)||0,"%"]})]})]})})}),c.jsx(Pe,{className:"border-0 shadow-sm",children:c.jsx(Le,{className:"p-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"p-2 bg-purple-50 rounded-lg",children:c.jsx(oN,{className:"h-5 w-5 text-purple-600"})}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("p",{className:"text-xs text-gray-600 truncate",children:"Active Buyers"}),c.jsx("p",{className:"text-lg font-semibold text-gray-900",children:(e==null?void 0:e.totalBuyers)||0})]})]})})}),c.jsx(Pe,{className:"border-0 shadow-sm",children:c.jsx(Le,{className:"p-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"p-2 bg-yellow-50 rounded-lg",children:c.jsx(ma,{className:"h-5 w-5 text-yellow-600"})}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("p",{className:"text-xs text-gray-600 truncate",children:"Lab Tests"}),c.jsx("p",{className:"text-lg font-semibold text-gray-900",children:((m=e==null?void 0:e.labInspections)==null?void 0:m.total)||0})]})]})})}),c.jsx(Pe,{className:"border-0 shadow-sm",children:c.jsx(Le,{className:"p-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"p-2 bg-indigo-50 rounded-lg",children:c.jsx(al,{className:"h-5 w-5 text-indigo-600"})}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("p",{className:"text-xs text-gray-600 truncate",children:"Audits"}),c.jsx("p",{className:"text-lg font-semibold text-gray-900",children:((g=e==null?void 0:e.qualityAudits)==null?void 0:g.total)||0})]})]})})}),c.jsx(Pe,{className:"border-0 shadow-sm",children:c.jsx(Le,{className:"p-4",children:c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"p-2 bg-orange-50 rounded-lg",children:c.jsx(xl,{className:"h-5 w-5 text-orange-600"})}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx("p",{className:"text-xs text-gray-600 truncate",children:"System Users"}),c.jsx("p",{className:"text-lg font-semibold text-gray-900",children:(e==null?void 0:e.totalUsers)||0})]})]})})})]}),c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[c.jsxs(Pe,{className:"border-0 shadow-sm",children:[c.jsxs(hn,{children:[c.jsxs(pn,{className:"flex items-center gap-2",children:[c.jsx(ma,{className:"h-5 w-5 text-blue-600"}),"Lab Inspections Analytics"]}),c.jsx(ll,{children:"Quality testing performance metrics"})]}),c.jsxs(Le,{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600",children:((v=e==null?void 0:e.labInspections)==null?void 0:v.passed)||0}),c.jsx("div",{className:"text-sm text-gray-500",children:"Passed"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-red-600",children:((y=e==null?void 0:e.labInspections)==null?void 0:y.failed)||0}),c.jsx("div",{className:"text-sm text-gray-500",children:"Failed"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:"Pass Rate"}),c.jsxs("span",{className:"font-medium",children:[((x=e==null?void 0:e.labInspections)==null?void 0:x.passRate)||0,"%"]})]}),c.jsx(R1,{value:((w=e==null?void 0:e.labInspections)==null?void 0:w.passRate)||0,className:"h-2"})]}),c.jsxs("div",{className:"flex items-center justify-between pt-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(ed,{className:"h-4 w-4 text-yellow-600"}),c.jsx("span",{className:"text-sm text-gray-600",children:"This Week"})]}),c.jsx(Dn,{variant:"secondary",children:((E=e==null?void 0:e.labInspections)==null?void 0:E.thisWeek)||0})]})]})]}),c.jsxs(Pe,{className:"border-0 shadow-sm",children:[c.jsxs(hn,{children:[c.jsxs(pn,{className:"flex items-center gap-2",children:[c.jsx(al,{className:"h-5 w-5 text-purple-600"}),"Compliance Audits Analytics"]}),c.jsx(ll,{children:"ISO 9001:2015 compliance metrics"})]}),c.jsxs(Le,{className:"space-y-4",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-green-600",children:((A=e==null?void 0:e.qualityAudits)==null?void 0:A.passed)||0}),c.jsx("div",{className:"text-sm text-gray-500",children:"Passed (≥80%)"})]}),c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"text-2xl font-bold text-red-600",children:((O=e==null?void 0:e.qualityAudits)==null?void 0:O.failed)||0}),c.jsx("div",{className:"text-sm text-gray-500",children:"Failed (<80%)"})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("div",{className:"flex justify-between text-sm",children:[c.jsx("span",{children:"Avg Score"}),c.jsxs("span",{className:"font-medium",children:[((j=e==null?void 0:e.qualityAudits)==null?void 0:j.avgScore)||0,"%"]})]}),c.jsx(R1,{value:((N=e==null?void 0:e.qualityAudits)==null?void 0:N.avgScore)||0,className:"h-2"})]}),c.jsxs("div",{className:"flex items-center justify-between pt-2",children:[c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(N1,{className:"h-4 w-4 text-green-600"}),c.jsx("span",{className:"text-sm text-gray-600",children:"Trending"})]}),c.jsx(Dn,{variant:((T=e==null?void 0:e.qualityAudits)==null?void 0:T.avgScore)>=80?"default":"destructive",children:((S=e==null?void 0:e.qualityAudits)==null?void 0:S.avgScore)>=80?"Good":"Needs Improvement"})]})]})]})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:s.map(b=>{const k=b.icon,R=b.trend.startsWith("+")?N1:eM,P=b.trend.startsWith("+")?"text-green-600":"text-red-600";return c.jsxs(Pe,{className:`cursor-pointer transition-all duration-200 border-0 shadow-sm hover:shadow-md ${b.color}`,onClick:()=>t(b.path),children:[c.jsxs(hn,{className:"pb-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("div",{className:"p-2 bg-white rounded-lg shadow-sm",children:c.jsx(k,{className:`h-6 w-6 ${b.iconColor}`})}),c.jsxs("div",{className:"min-w-0 flex-1",children:[c.jsx(pn,{className:"text-lg font-semibold text-gray-900",children:b.title}),c.jsx("p",{className:"text-sm text-gray-500",children:b.stats})]})]}),c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(R,{className:`h-4 w-4 ${P}`}),c.jsx("span",{className:`text-sm font-medium ${P}`,children:b.trend})]})]}),c.jsx(ll,{className:"text-gray-600 mt-2",children:b.description}),c.jsxs("div",{className:"mt-3 flex items-center justify-between text-sm text-gray-500",children:[c.jsx("span",{children:b.metric}),c.jsx(Dn,{variant:"outline",className:"text-xs",children:"Active"})]})]}),c.jsx(Le,{className:"pt-0",children:c.jsx(ve,{variant:"ghost",size:"sm",className:"w-full justify-start text-gray-700 hover:text-gray-900 hover:bg-white/80",children:"Access Department →"})})]},b.title)})}),c.jsxs(Pe,{className:"border-0 shadow-sm",children:[c.jsxs(hn,{children:[c.jsxs(pn,{className:"flex items-center gap-2",children:[c.jsx(Tf,{className:"h-5 w-5 text-gray-600"}),"Recent Activity"]}),c.jsx(ll,{children:"Latest updates across all departments"})]}),c.jsx(Le,{children:e!=null&&e.recentActivity&&e.recentActivity.length>0?c.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:e.recentActivity.map(b=>{const k=l(b.type,b.status),R=k.icon;return c.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-lg transition-colors hover:bg-gray-50 ${k.bg}`,children:[c.jsx("div",{className:`p-1.5 rounded-full ${k.bg}`,children:c.jsx(R,{className:`h-4 w-4 ${k.color}`})}),c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-sm font-medium text-gray-900",children:b.title}),c.jsx("p",{className:"text-sm text-gray-500 truncate",children:b.description})]}),c.jsxs("div",{className:"flex flex-col items-end gap-1",children:[c.jsx("span",{className:"text-xs text-gray-500",children:a(b.timestamp)}),b.status&&c.jsx(Dn,{variant:b.status==="ok"||b.status==="submitted"?"default":b.status==="not_ok"?"destructive":"secondary",className:"text-xs",children:b.status==="ok"?"Passed":b.status==="not_ok"?"Failed":b.status==="submitted"?"Submitted":b.status==="draft"?"Draft":b.status})]})]},b.id)})}):c.jsxs("div",{className:"text-center py-8 text-gray-500",children:[c.jsx(Tf,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),c.jsx("p",{className:"text-sm",children:"No recent activity to display"}),c.jsx("p",{className:"text-xs",children:"Activity will appear here as you use the system"})]})})]})]})},tj=()=>{};var yE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},nj=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],a=t[n++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},xN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,d=o>>2,f=(o&3)<<4|a>>4;let h=(a&15)<<2|u>>6,m=u&63;l||(m=64,s||(h=64)),r.push(n[d],n[f],n[h],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(yN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):nj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||u==null||f==null)throw new rj;const h=o<<2|a>>4;if(r.push(h),u!==64){const m=a<<4&240|u>>2;if(r.push(m),f!==64){const g=u<<6&192|f;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class rj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ij=function(t){const e=yN(t);return xN.encodeByteArray(e,!0)},rp=function(t){return ij(t).replace(/\./g,"")},wN=function(t){try{return xN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj=()=>oj().__FIREBASE_DEFAULTS__,aj=()=>{if(typeof process>"u"||typeof yE>"u")return;const t=yE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&wN(t[1]);return e&&JSON.parse(e)},Jp=()=>{try{return tj()||sj()||aj()||lj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_N=t=>{var e,n;return(n=(e=Jp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},EN=t=>{const e=_N(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},CN=()=>{var t;return(t=Jp())===null||t===void 0?void 0:t.config},bN=t=>{var e;return(e=Jp())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function zy(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[rp(JSON.stringify(n)),rp(JSON.stringify(s)),""].join(".")}const Iu={};function uj(){const t={prod:[],emulator:[]};for(const e of Object.keys(Iu))Iu[e]?t.emulator.push(e):t.prod.push(e);return t}function dj(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let xE=!1;function Hy(t,e){if(typeof window>"u"||typeof document>"u"||!Is(window.location.host)||Iu[t]===e||Iu[t]||xE)return;Iu[t]=e;function n(h){return`__firebase__banner__${h}`}const r="__firebase__banner",o=uj().prod.length>0;function s(){const h=document.getElementById(r);h&&h.remove()}function a(h){h.style.display="flex",h.style.background="#7faaf0",h.style.position="fixed",h.style.bottom="5px",h.style.left="5px",h.style.padding=".5em",h.style.borderRadius="5px",h.style.alignItems="center"}function l(h,m){h.setAttribute("width","24"),h.setAttribute("id",m),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px"}function u(){const h=document.createElement("span");return h.style.cursor="pointer",h.style.marginLeft="16px",h.style.fontSize="24px",h.innerHTML=" &times;",h.onclick=()=>{xE=!0,s()},h}function d(h,m){h.setAttribute("id",m),h.innerText="Learn more",h.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",h.setAttribute("target","__blank"),h.style.paddingLeft="5px",h.style.textDecoration="underline"}function f(){const h=dj(r),m=n("text"),g=document.getElementById(m)||document.createElement("span"),v=n("learnmore"),y=document.getElementById(v)||document.createElement("a"),x=n("preprendIcon"),w=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(h.created){const E=h.element;a(E),d(y,v);const A=u();l(w,x),E.append(w,g,y,A),document.body.appendChild(E)}o?(g.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kn())}function hj(){var t;const e=(t=Jp())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mj(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gj(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vj(){const t=kn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function yj(){return!hj()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xj(){try{return typeof indexedDB=="object"}catch{return!1}}function wj(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j="FirebaseError";class Fi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=_j,Object.setPrototypeOf(this,Fi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nd.prototype.create)}}class Nd{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?Ej(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Fi(i,a,r)}}function Ej(t,e){return t.replace(Cj,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Cj=/\{\$([^}]+)}/g;function bj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function va(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(wE(o)&&wE(s)){if(!va(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function wE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Aj(t,e){const n=new Sj(t,e);return n.subscribe.bind(n)}class Sj{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Ij(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Bm),i.error===void 0&&(i.error=Bm),i.complete===void 0&&(i.complete=Bm);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ij(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Bm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mn(t){return t&&t._delegate?t._delegate:t}class hs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new cj;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Rj(e))try{this.getOrInitializeService({instanceIdentifier:Us})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Us){return this.instances.has(e)}getOptions(e=Us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Tj(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Us){return this.component?this.component.multipleInstances?e:Us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Tj(t){return t===Us?void 0:t}function Rj(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Nj(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Be||(Be={}));const Dj={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},Oj=Be.INFO,kj={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},Mj=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=kj[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wy{constructor(e){this.name=e,this._logLevel=Oj,this._logHandler=Mj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Dj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const jj=(t,e)=>e.some(n=>t instanceof n);let _E,EE;function Lj(){return _E||(_E=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fj(){return EE||(EE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SN=new WeakMap,P1=new WeakMap,IN=new WeakMap,Vm=new WeakMap,Gy=new WeakMap;function Bj(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(ns(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&SN.set(n,t)}).catch(()=>{}),Gy.set(e,t),e}function Vj(t){if(P1.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});P1.set(t,e)}let D1={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return P1.get(t);if(e==="objectStoreNames")return t.objectStoreNames||IN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ns(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Uj(t){D1=t(D1)}function $j(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Um(this),e,...n);return IN.set(r,e.sort?e.sort():[e]),ns(r)}:Fj().includes(t)?function(...e){return t.apply(Um(this),e),ns(SN.get(this))}:function(...e){return ns(t.apply(Um(this),e))}}function zj(t){return typeof t=="function"?$j(t):(t instanceof IDBTransaction&&Vj(t),jj(t,Lj())?new Proxy(t,D1):t)}function ns(t){if(t instanceof IDBRequest)return Bj(t);if(Vm.has(t))return Vm.get(t);const e=zj(t);return e!==t&&(Vm.set(t,e),Gy.set(e,t)),e}const Um=t=>Gy.get(t);function Hj(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=ns(s);return r&&s.addEventListener("upgradeneeded",l=>{r(ns(s.result),l.oldVersion,l.newVersion,ns(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const Wj=["get","getKey","getAll","getAllKeys","count"],Gj=["put","add","delete","clear"],$m=new Map;function CE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($m.get(e))return $m.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Gj.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Wj.includes(n)))return;const o=async function(s,...a){const l=this.transaction(s,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return $m.set(e,o),o}Uj(t=>({...t,get:(e,n,r)=>CE(e,n)||t.get(e,n,r),has:(e,n)=>!!CE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Kj(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Kj(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const O1="@firebase/app",bE="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo=new Wy("@firebase/app"),Xj="@firebase/app-compat",Qj="@firebase/analytics-compat",Yj="@firebase/analytics",Zj="@firebase/app-check-compat",Jj="@firebase/app-check",e9="@firebase/auth",t9="@firebase/auth-compat",n9="@firebase/database",r9="@firebase/data-connect",i9="@firebase/database-compat",o9="@firebase/functions",s9="@firebase/functions-compat",a9="@firebase/installations",l9="@firebase/installations-compat",c9="@firebase/messaging",u9="@firebase/messaging-compat",d9="@firebase/performance",f9="@firebase/performance-compat",h9="@firebase/remote-config",p9="@firebase/remote-config-compat",m9="@firebase/storage",g9="@firebase/storage-compat",v9="@firebase/firestore",y9="@firebase/ai",x9="@firebase/firestore-compat",w9="firebase",_9="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="[DEFAULT]",E9={[O1]:"fire-core",[Xj]:"fire-core-compat",[Yj]:"fire-analytics",[Qj]:"fire-analytics-compat",[Jj]:"fire-app-check",[Zj]:"fire-app-check-compat",[e9]:"fire-auth",[t9]:"fire-auth-compat",[n9]:"fire-rtdb",[r9]:"fire-data-connect",[i9]:"fire-rtdb-compat",[o9]:"fire-fn",[s9]:"fire-fn-compat",[a9]:"fire-iid",[l9]:"fire-iid-compat",[c9]:"fire-fcm",[u9]:"fire-fcm-compat",[d9]:"fire-perf",[f9]:"fire-perf-compat",[h9]:"fire-rc",[p9]:"fire-rc-compat",[m9]:"fire-gcs",[g9]:"fire-gcs-compat",[v9]:"fire-fst",[x9]:"fire-fst-compat",[y9]:"fire-vertex","fire-js":"fire-js",[w9]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip=new Map,C9=new Map,M1=new Map;function AE(t,e){try{t.container.addComponent(e)}catch(n){oo.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ya(t){const e=t.name;if(M1.has(e))return oo.debug(`There were multiple attempts to register component ${e}.`),!1;M1.set(e,t);for(const n of ip.values())AE(n,t);for(const n of C9.values())AE(n,t);return!0}function e0(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function pr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rs=new Nd("app","Firebase",b9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=_9;function NN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:k1,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw rs.create("bad-app-name",{appName:String(i)});if(n||(n=CN()),!n)throw rs.create("no-options");const o=ip.get(i);if(o){if(va(n,o.options)&&va(r,o.config))return o;throw rs.create("duplicate-app",{appName:i})}const s=new Pj(i);for(const l of M1.values())s.addComponent(l);const a=new A9(n,r,s);return ip.set(i,a),a}function qy(t=k1){const e=ip.get(t);if(!e&&t===k1&&CN())return NN();if(!e)throw rs.create("no-app",{appName:t});return e}function Ai(t,e,n){var r;let i=(r=E9[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),oo.warn(a.join(" "));return}ya(new hs(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S9="firebase-heartbeat-database",I9=1,nd="firebase-heartbeat-store";let zm=null;function TN(){return zm||(zm=Hj(S9,I9,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(nd)}catch(n){console.warn(n)}}}}).catch(t=>{throw rs.create("idb-open",{originalErrorMessage:t.message})})),zm}async function N9(t){try{const n=(await TN()).transaction(nd),r=await n.objectStore(nd).get(RN(t));return await n.done,r}catch(e){if(e instanceof Fi)oo.warn(e.message);else{const n=rs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});oo.warn(n.message)}}}async function SE(t,e){try{const r=(await TN()).transaction(nd,"readwrite");await r.objectStore(nd).put(e,RN(t)),await r.done}catch(n){if(n instanceof Fi)oo.warn(n.message);else{const r=rs.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});oo.warn(r.message)}}}function RN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T9=1024,R9=30;class P9{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new O9(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=IE();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>R9){const s=k9(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){oo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=IE(),{heartbeatsToSend:r,unsentEntries:i}=D9(this._heartbeatsCache.heartbeats),o=rp(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return oo.warn(n),""}}}function IE(){return new Date().toISOString().substring(0,10)}function D9(t,e=T9){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),NE(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),NE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class O9{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xj()?wj().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await N9(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return SE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return SE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function NE(t){return rp(JSON.stringify({version:2,heartbeats:t})).length}function k9(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M9(t){ya(new hs("platform-logger",e=>new qj(e),"PRIVATE")),ya(new hs("heartbeat",e=>new P9(e),"PRIVATE")),Ai(O1,bE,t),Ai(O1,bE,"esm2017"),Ai("fire-js","")}M9("");var yi=function(){return yi=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},yi.apply(this,arguments)};function Rd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function j9(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function PN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const L9=PN,DN=new Nd("auth","Firebase",PN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op=new Wy("@firebase/auth");function F9(t,...e){op.logLevel<=Be.WARN&&op.warn(`Auth (${Na}): ${t}`,...e)}function ch(t,...e){op.logLevel<=Be.ERROR&&op.error(`Auth (${Na}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(t,...e){throw Xy(t,...e)}function oi(t,...e){return Xy(t,...e)}function Ky(t,e,n){const r=Object.assign(Object.assign({},L9()),{[e]:n});return new Nd("auth","Firebase",r).create(e,{appName:t.name})}function is(t){return Ky(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ON(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Oi(t,"argument-error"),Ky(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return DN.create(t,...e)}function Ae(t,e,...n){if(!t)throw Xy(e,...n)}function Yi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ch(e),new Error(e)}function so(t,e){t||Yi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function B9(){return TE()==="http:"||TE()==="https:"}function TE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V9(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(B9()||mj()||"connection"in navigator)?navigator.onLine:!0}function U9(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd{constructor(e,n){this.shortDelay=e,this.longDelay=n,so(n>e,"Short delay should be less than long delay!"),this.isMobile=fj()||gj()}get(){return V9()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(t,e){so(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],H9=new Pd(3e4,6e4);function Yy(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function gc(t,e,n,r,i={}){return MN(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const a=Td(Object.assign({key:t.config.apiKey},s)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},o);return pj()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Is(t.emulatorConfig.host)&&(u.credentials="include"),kN.fetch()(await jN(t,t.config.apiHost,n,a),u)})}async function MN(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},$9),e);try{const i=new G9(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw Rf(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Rf(t,"credential-already-in-use",s);if(l==="EMAIL_EXISTS")throw Rf(t,"email-already-in-use",s);if(l==="USER_DISABLED")throw Rf(t,"user-disabled",s);const d=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Ky(t,d,u);Oi(t,d)}}catch(i){if(i instanceof Fi)throw i;Oi(t,"network-request-failed",{message:String(i)})}}async function W9(t,e,n,r,i={}){const o=await gc(t,e,n,r,i);return"mfaPendingCredential"in o&&Oi(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function jN(t,e,n,r){const i=`${e}${n}?${r}`,o=t,s=o.config.emulator?Qy(t.config,i):`${t.config.apiScheme}://${i}`;return z9.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s}class G9{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(oi(this.auth,"network-request-failed")),H9.get())})}}function Rf(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=oi(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function q9(t,e){return gc(t,"POST","/v1/accounts:delete",e)}async function sp(t,e){return gc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function K9(t,e=!1){const n=Mn(t),r=await n.getIdToken(e),i=Zy(r);Ae(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Nu(Hm(i.auth_time)),issuedAtTime:Nu(Hm(i.iat)),expirationTime:Nu(Hm(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Hm(t){return Number(t)*1e3}function Zy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ch("JWT malformed, contained fewer than 3 sections"),null;try{const i=wN(n);return i?JSON.parse(i):(ch("Failed to decode base64 JWT payload"),null)}catch(i){return ch("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function RE(t){const e=Zy(t);return Ae(e,"internal-error"),Ae(typeof e.exp<"u","internal-error"),Ae(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rd(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Fi&&X9(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function X9({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q9{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nu(this.lastLoginAt),this.creationTime=Nu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ap(t){var e;const n=t.auth,r=await t.getIdToken(),i=await rd(t,sp(n,{idToken:r}));Ae(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?LN(o.providerUserInfo):[],a=Z9(t.providerData,s),l=t.isAnonymous,u=!(t.email&&o.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new L1(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function Y9(t){const e=Mn(t);await ap(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Z9(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function LN(t){return t.map(e=>{var{providerId:n}=e,r=Rd(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J9(t,e){const n=await MN(t,{},async()=>{const r=Td({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=await jN(t,i,"/v1/token",`key=${o}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:r};return t.emulatorConfig&&Is(t.emulatorConfig.host)&&(l.credentials="include"),kN.fetch()(s,l)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function e7(t,e){return gc(t,"POST","/v2/accounts:revokeToken",Yy(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ae(e.idToken,"internal-error"),Ae(typeof e.idToken<"u","internal-error"),Ae(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):RE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ae(e.length!==0,"internal-error");const n=RE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ae(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await J9(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new _l;return r&&(Ae(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(Ae(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(Ae(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _l,this.toJSON())}_performRefresh(){return Yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(t,e){Ae(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Rd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Q9(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new L1(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await rd(this,this.stsTokenManager.getToken(this.auth,e));return Ae(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return K9(this,e)}reload(){return Y9(this)}_assign(e){this!==e&&(Ae(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Jr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ae(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ap(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pr(this.auth.app))return Promise.reject(is(this.auth));const e=await this.getIdToken();return await rd(this,q9(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,l,u,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,m=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,g=(s=n.photoURL)!==null&&s!==void 0?s:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,x=(u=n.createdAt)!==null&&u!==void 0?u:void 0,w=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:E,emailVerified:A,isAnonymous:O,providerData:j,stsTokenManager:N}=n;Ae(E&&N,e,"internal-error");const T=_l.fromJSON(this.name,N);Ae(typeof E=="string",e,"internal-error"),wo(f,e.name),wo(h,e.name),Ae(typeof A=="boolean",e,"internal-error"),Ae(typeof O=="boolean",e,"internal-error"),wo(m,e.name),wo(g,e.name),wo(v,e.name),wo(y,e.name),wo(x,e.name),wo(w,e.name);const S=new Jr({uid:E,auth:e,email:h,emailVerified:A,displayName:f,isAnonymous:O,photoURL:g,phoneNumber:m,tenantId:v,stsTokenManager:T,createdAt:x,lastLoginAt:w});return j&&Array.isArray(j)&&(S.providerData=j.map(b=>Object.assign({},b))),y&&(S._redirectEventId=y),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new _l;i.updateFromServerResponse(n);const o=new Jr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ap(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];Ae(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?LN(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),a=new _l;a.updateFromIdToken(r);const l=new Jr({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new L1(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=new Map;function Zi(t){so(t instanceof Function,"Expected a class definition");let e=PE.get(t);return e?(so(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,PE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}FN.type="NONE";const DE=FN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(t,e,n){return`firebase:${t}:${e}:${n}`}class El{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=uh(this.userKey,i.apiKey,o),this.fullPersistenceKey=uh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await sp(this.auth,{idToken:e}).catch(()=>{});return n?Jr._fromGetAccountInfoResponse(this.auth,n,e):null}return Jr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new El(Zi(DE),e,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=i[0]||Zi(DE);const s=uh(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const d=await u._get(s);if(d){let f;if(typeof d=="string"){const h=await sp(e,{idToken:d}).catch(()=>{});if(!h)break;f=await Jr._fromGetAccountInfoResponse(e,h,d)}else f=Jr._fromJSON(e,d);u!==o&&(a=f),o=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new El(o,e,r):(o=l[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==o)try{await u._remove(s)}catch{}})),new El(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if($N(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(BN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(HN(e))return"Blackberry";if(WN(e))return"Webos";if(VN(e))return"Safari";if((e.includes("chrome/")||UN(e))&&!e.includes("edge/"))return"Chrome";if(zN(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function BN(t=kn()){return/firefox\//i.test(t)}function VN(t=kn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function UN(t=kn()){return/crios\//i.test(t)}function $N(t=kn()){return/iemobile/i.test(t)}function zN(t=kn()){return/android/i.test(t)}function HN(t=kn()){return/blackberry/i.test(t)}function WN(t=kn()){return/webos/i.test(t)}function Jy(t=kn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function t7(t=kn()){var e;return Jy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function n7(){return vj()&&document.documentMode===10}function GN(t=kn()){return Jy(t)||zN(t)||WN(t)||HN(t)||/windows phone/i.test(t)||$N(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(t,e=[]){let n;switch(t){case"Browser":n=OE(kn());break;case"Worker":n=`${OE(kn())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Na}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{const l=e(o);s(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i7(t,e={}){return gc(t,"GET","/v2/passwordPolicy",Yy(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o7=6;class s7{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:o7,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(s=l.containsNumericCharacter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a7{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kE(this),this.idTokenSubscription=new kE(this),this.beforeStateQueue=new r7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zi(n)),this._initializationPromise=this.queue(async()=>{var r,i,o;if(!this._deleted&&(this.persistenceManager=await El.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await sp(this,{idToken:e}),r=await Jr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(pr(this.app)){const s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!s||s===a)&&(l!=null&&l.user)&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ae(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ap(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=U9()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pr(this.app))return Promise.reject(is(this));const n=e?Mn(e):null;return n&&Ae(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ae(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pr(this.app)?Promise.reject(is(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pr(this.app)?Promise.reject(is(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await i7(this),n=new s7(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nd("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await e7(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zi(e)||this._popupRedirectResolver;Ae(n,this,"argument-error"),this.redirectPersistenceManager=await El.create(this,[Zi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ae(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{s=!0,l()}}else{const l=e.addObserver(n);return()=>{s=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ae(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=qN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;if(pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&F9(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function vc(t){return Mn(t)}class kE{constructor(e){this.auth=e,this.observer=null,this.addObserver=Aj(n=>this.observer=n)}get next(){return Ae(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ex={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function l7(t){ex=t}function c7(t){return ex.loadJS(t)}function u7(){return ex.gapiScript}function d7(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f7(t,e){const n=e0(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(va(o,e??{}))return i;Oi(i,"already-initialized")}return n.initialize({options:e})}function h7(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function p7(t,e,n){const r=vc(t);Ae(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=KN(e),{host:s,port:a}=m7(e),l=a===null?"":`:${a}`,u={url:`${o}//${s}${l}/`},d=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Ae(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ae(va(u,r.config.emulator)&&va(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Is(s)?(zy(`${o}//${s}${l}`),Hy("Auth",!0)):g7()}function KN(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function m7(t){const e=KN(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:ME(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:ME(s)}}}function ME(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function g7(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yi("not implemented")}_getIdTokenResponse(e){return Yi("not implemented")}_linkToIdToken(e,n){return Yi("not implemented")}_getReauthenticationResolver(e){return Yi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(t,e){return W9(t,"POST","/v1/accounts:signInWithIdp",Yy(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7="http://localhost";class xa extends XN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new xa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Oi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Rd(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new xa(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Cl(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Cl(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Cl(e,n)}buildRequest(){const e={requestUri:v7,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Td(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd extends t0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po extends Dd{constructor(){super("facebook.com")}static credential(e){return xa._fromParams({providerId:Po.PROVIDER_ID,signInMethod:Po.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Po.credentialFromTaggedObject(e)}static credentialFromError(e){return Po.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Po.credential(e.oauthAccessToken)}catch{return null}}}Po.FACEBOOK_SIGN_IN_METHOD="facebook.com";Po.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends Dd{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return xa._fromParams({providerId:xi.PROVIDER_ID,signInMethod:xi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return xi.credentialFromTaggedObject(e)}static credentialFromError(e){return xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return xi.credential(n,r)}catch{return null}}}xi.GOOGLE_SIGN_IN_METHOD="google.com";xi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Dd{constructor(){super("github.com")}static credential(e){return xa._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Do.credentialFromTaggedObject(e)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Do.credential(e.oauthAccessToken)}catch{return null}}}Do.GITHUB_SIGN_IN_METHOD="github.com";Do.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo extends Dd{constructor(){super("twitter.com")}static credential(e,n){return xa._fromParams({providerId:Oo.PROVIDER_ID,signInMethod:Oo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Oo.credentialFromTaggedObject(e)}static credentialFromError(e){return Oo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Oo.credential(n,r)}catch{return null}}}Oo.TWITTER_SIGN_IN_METHOD="twitter.com";Oo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Jr._fromIdTokenResponse(e,r,i),s=jE(r);return new Zl({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=jE(r);return new Zl({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function jE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp extends Fi{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,lp.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new lp(e,n,r,i)}}function QN(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?lp._fromErrorAndOperation(t,o,e,r):o})}async function y7(t,e,n=!1){const r=await rd(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Zl._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x7(t,e,n=!1){const{auth:r}=t;if(pr(r.app))return Promise.reject(is(r));const i="reauthenticate";try{const o=await rd(t,QN(r,i,e,t),n);Ae(o.idToken,r,"internal-error");const s=Zy(o.idToken);Ae(s,r,"internal-error");const{sub:a}=s;return Ae(t.uid===a,r,"user-mismatch"),Zl._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Oi(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w7(t,e,n=!1){if(pr(t.app))return Promise.reject(is(t));const r="signIn",i=await QN(t,r,e),o=await Zl._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function _7(t,e,n,r){return Mn(t).onIdTokenChanged(e,n,r)}function E7(t,e,n){return Mn(t).beforeAuthStateChanged(e,n)}function C7(t,e,n,r){return Mn(t).onAuthStateChanged(e,n,r)}const cp="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(cp,"1"),this.storage.removeItem(cp),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b7=1e3,A7=10;class ZN extends YN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=GN(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,l)=>{this.notifyListeners(s,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);n7()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,A7):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},b7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ZN.type="LOCAL";const S7=ZN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN extends YN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}JN.type="SESSION";const eT=JN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I7(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new n0(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async u=>u(n.origin,o)),l=await I7(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n0.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,l)=>{const u=tx("",20);i.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(f){const h=f;if(h.data.eventId===u)switch(h.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(h.data.response);break;default:clearTimeout(d),clearTimeout(o),l(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(){return window}function T7(t){Si().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(){return typeof Si().WorkerGlobalScope<"u"&&typeof Si().importScripts=="function"}async function R7(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function P7(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function D7(){return tT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nT="firebaseLocalStorageDb",O7=1,up="firebaseLocalStorage",rT="fbase_key";class Od{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function r0(t,e){return t.transaction([up],e?"readwrite":"readonly").objectStore(up)}function k7(){const t=indexedDB.deleteDatabase(nT);return new Od(t).toPromise()}function F1(){const t=indexedDB.open(nT,O7);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(up,{keyPath:rT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(up)?e(r):(r.close(),await k7(),e(await F1()))})})}async function LE(t,e,n){const r=r0(t,!0).put({[rT]:e,value:n});return new Od(r).toPromise()}async function M7(t,e){const n=r0(t,!1).get(e),r=await new Od(n).toPromise();return r===void 0?null:r.value}function FE(t,e){const n=r0(t,!0).delete(e);return new Od(n).toPromise()}const j7=800,L7=3;class iT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await F1(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>L7)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=n0._getInstance(D7()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await R7(),!this.activeServiceWorker)return;this.sender=new N7(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||P7()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await F1();return await LE(e,cp,"1"),await FE(e,cp),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>LE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>M7(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>FE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=r0(i,!1).getAll();return new Od(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),j7)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}iT.type="LOCAL";const F7=iT;new Pd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t,e){return e?Zi(e):(Ae(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx extends XN{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cl(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Cl(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Cl(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function B7(t){return w7(t.auth,new rx(t),t.bypassAuthState)}function V7(t){const{auth:e,user:n}=t;return Ae(n,e,"internal-error"),x7(n,new rx(t),t.bypassAuthState)}async function U7(t){const{auth:e,user:n}=t;return Ae(n,e,"internal-error"),y7(n,new rx(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return B7;case"linkViaPopup":case"linkViaRedirect":return U7;case"reauthViaPopup":case"reauthViaRedirect":return V7;default:Oi(this.auth,"internal-error")}}resolve(e){so(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){so(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $7=new Pd(2e3,1e4);async function z7(t,e,n){if(pr(t.app))return Promise.reject(oi(t,"operation-not-supported-in-this-environment"));const r=vc(t);ON(t,e,t0);const i=nx(r,n);return new qs(r,"signInViaPopup",e,i).executeNotNull()}class qs extends oT{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,qs.currentPopupAction&&qs.currentPopupAction.cancel(),qs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ae(e,this.auth,"internal-error"),e}async onExecution(){so(this.filter.length===1,"Popup operations only handle one event");const e=tx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(oi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(oi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,qs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$7.get())};e()}}qs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7="pendingRedirect",dh=new Map;class W7 extends oT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=dh.get(this.auth._key());if(!e){try{const r=await G7(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}dh.set(this.auth._key(),e)}return this.bypassAuthState||dh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function G7(t,e){const n=aT(e),r=sT(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function q7(t,e){return sT(t)._set(aT(e),"true")}function K7(t,e){dh.set(t._key(),e)}function sT(t){return Zi(t._redirectPersistence)}function aT(t){return uh(H7,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X7(t,e,n){return Q7(t,e,n)}async function Q7(t,e,n){if(pr(t.app))return Promise.reject(is(t));const r=vc(t);ON(t,e,t0),await r._initializationPromise;const i=nx(r,n);return await q7(i,r),i._openRedirect(r,e,"signInViaRedirect")}async function Y7(t,e){return await vc(t)._initializationPromise,lT(t,e,!1)}async function lT(t,e,n=!1){if(pr(t.app))return Promise.reject(is(t));const r=vc(t),i=nx(r,e),s=await new W7(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7=10*60*1e3;class J7{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eL(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!cT(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(oi(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Z7&&this.cachedEventUids.clear(),this.cachedEventUids.has(BE(e))}saveEventToCache(e){this.cachedEventUids.add(BE(e)),this.lastProcessedEventTime=Date.now()}}function BE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function cT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eL(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tL(t,e={}){return gc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rL=/^https?/;async function iL(t){if(t.config.emulator)return;const{authorizedDomains:e}=await tL(t);for(const n of e)try{if(oL(n))return}catch{}Oi(t,"unauthorized-domain")}function oL(t){const e=j1(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!rL.test(n))return!1;if(nL.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sL=new Pd(3e4,6e4);function VE(){const t=Si().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function aL(t){return new Promise((e,n)=>{var r,i,o;function s(){VE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{VE(),n(oi(t,"network-request-failed"))},timeout:sL.get()})}if(!((i=(r=Si().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Si().gapi)===null||o===void 0)&&o.load)s();else{const a=d7("iframefcb");return Si()[a]=()=>{gapi.load?s():n(oi(t,"network-request-failed"))},c7(`${u7()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw fh=null,e})}let fh=null;function lL(t){return fh=fh||aL(t),fh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL=new Pd(5e3,15e3),uL="__/auth/iframe",dL="emulator/auth/iframe",fL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pL(t){const e=t.config;Ae(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qy(e,dL):`https://${t.config.authDomain}/${uL}`,r={apiKey:e.apiKey,appName:t.name,v:Na},i=hL.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Td(r).slice(1)}`}async function mL(t){const e=await lL(t),n=Si().gapi;return Ae(n,t,"internal-error"),e.open({where:document.body,url:pL(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fL,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=oi(t,"network-request-failed"),a=Si().setTimeout(()=>{o(s)},cL.get());function l(){Si().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vL=500,yL=600,xL="_blank",wL="http://localhost";class UE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _L(t,e,n,r=vL,i=yL){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},gL),{width:r.toString(),height:i.toString(),top:o,left:s}),u=kn().toLowerCase();n&&(a=UN(u)?xL:n),BN(u)&&(e=e||wL,l.scrollbars="yes");const d=Object.entries(l).reduce((h,[m,g])=>`${h}${m}=${g},`,"");if(t7(u)&&a!=="_self")return EL(e||"",a),new UE(null);const f=window.open(e||"",a,d);Ae(f,t,"popup-blocked");try{f.focus()}catch{}return new UE(f)}function EL(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL="__/auth/handler",bL="emulator/auth/handler",AL=encodeURIComponent("fac");async function $E(t,e,n,r,i,o){Ae(t.config.authDomain,t,"auth-domain-config-required"),Ae(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Na,eventId:i};if(e instanceof t0){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",bj(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))s[d]=f}if(e instanceof Dd){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(s.scopes=d.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await t._getAppCheckToken(),u=l?`#${AL}=${encodeURIComponent(l)}`:"";return`${SL(t)}?${Td(a).slice(1)}${u}`}function SL({config:t}){return t.emulator?Qy(t,bL):`https://${t.authDomain}/${CL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm="webStorageSupport";class IL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=eT,this._completeRedirectFn=lT,this._overrideRedirectResult=K7}async _openPopup(e,n,r,i){var o;so((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await $E(e,n,r,j1(),i);return _L(e,s,tx())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await $E(e,n,r,j1(),i);return T7(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(so(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await mL(e),r=new J7(e);return n.register("authEvent",i=>(Ae(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wm,{type:Wm},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[Wm];s!==void 0&&n(!!s),Oi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iL(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return GN()||VN()||Jy()}}const NL=IL;var zE="@firebase/auth",HE="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ae(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function PL(t){ya(new hs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Ae(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:qN(t)},u=new a7(r,i,o,l);return h7(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ya(new hs("auth-internal",e=>{const n=vc(e.getProvider("auth").getImmediate());return(r=>new TL(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ai(zE,HE,RL(t)),Ai(zE,HE,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL=5*60,OL=bN("authIdTokenMaxAge")||DL;let WE=null;const kL=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>OL)return;const i=n==null?void 0:n.token;WE!==i&&(WE=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ML(t=qy()){const e=e0(t,"auth");if(e.isInitialized())return e.getImmediate();const n=f7(t,{popupRedirectResolver:NL,persistence:[F7,S7,eT]}),r=bN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const s=kL(o.toString());E7(n,s,()=>s(n.currentUser)),_7(n,a=>s(a))}}const i=_N("auth");return i&&p7(n,`http://${i}`),n}function jL(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}l7({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=oi("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",jL().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});PL("Browser");var GE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var os,uT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,T){function S(){}S.prototype=T.prototype,N.D=T.prototype,N.prototype=new S,N.prototype.constructor=N,N.C=function(b,k,R){for(var P=Array(arguments.length-2),G=2;G<arguments.length;G++)P[G-2]=arguments[G];return T.prototype[k].apply(b,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,T,S){S||(S=0);var b=Array(16);if(typeof T=="string")for(var k=0;16>k;++k)b[k]=T.charCodeAt(S++)|T.charCodeAt(S++)<<8|T.charCodeAt(S++)<<16|T.charCodeAt(S++)<<24;else for(k=0;16>k;++k)b[k]=T[S++]|T[S++]<<8|T[S++]<<16|T[S++]<<24;T=N.g[0],S=N.g[1],k=N.g[2];var R=N.g[3],P=T+(R^S&(k^R))+b[0]+3614090360&4294967295;T=S+(P<<7&4294967295|P>>>25),P=R+(k^T&(S^k))+b[1]+3905402710&4294967295,R=T+(P<<12&4294967295|P>>>20),P=k+(S^R&(T^S))+b[2]+606105819&4294967295,k=R+(P<<17&4294967295|P>>>15),P=S+(T^k&(R^T))+b[3]+3250441966&4294967295,S=k+(P<<22&4294967295|P>>>10),P=T+(R^S&(k^R))+b[4]+4118548399&4294967295,T=S+(P<<7&4294967295|P>>>25),P=R+(k^T&(S^k))+b[5]+1200080426&4294967295,R=T+(P<<12&4294967295|P>>>20),P=k+(S^R&(T^S))+b[6]+2821735955&4294967295,k=R+(P<<17&4294967295|P>>>15),P=S+(T^k&(R^T))+b[7]+4249261313&4294967295,S=k+(P<<22&4294967295|P>>>10),P=T+(R^S&(k^R))+b[8]+1770035416&4294967295,T=S+(P<<7&4294967295|P>>>25),P=R+(k^T&(S^k))+b[9]+2336552879&4294967295,R=T+(P<<12&4294967295|P>>>20),P=k+(S^R&(T^S))+b[10]+4294925233&4294967295,k=R+(P<<17&4294967295|P>>>15),P=S+(T^k&(R^T))+b[11]+2304563134&4294967295,S=k+(P<<22&4294967295|P>>>10),P=T+(R^S&(k^R))+b[12]+1804603682&4294967295,T=S+(P<<7&4294967295|P>>>25),P=R+(k^T&(S^k))+b[13]+4254626195&4294967295,R=T+(P<<12&4294967295|P>>>20),P=k+(S^R&(T^S))+b[14]+2792965006&4294967295,k=R+(P<<17&4294967295|P>>>15),P=S+(T^k&(R^T))+b[15]+1236535329&4294967295,S=k+(P<<22&4294967295|P>>>10),P=T+(k^R&(S^k))+b[1]+4129170786&4294967295,T=S+(P<<5&4294967295|P>>>27),P=R+(S^k&(T^S))+b[6]+3225465664&4294967295,R=T+(P<<9&4294967295|P>>>23),P=k+(T^S&(R^T))+b[11]+643717713&4294967295,k=R+(P<<14&4294967295|P>>>18),P=S+(R^T&(k^R))+b[0]+3921069994&4294967295,S=k+(P<<20&4294967295|P>>>12),P=T+(k^R&(S^k))+b[5]+3593408605&4294967295,T=S+(P<<5&4294967295|P>>>27),P=R+(S^k&(T^S))+b[10]+38016083&4294967295,R=T+(P<<9&4294967295|P>>>23),P=k+(T^S&(R^T))+b[15]+3634488961&4294967295,k=R+(P<<14&4294967295|P>>>18),P=S+(R^T&(k^R))+b[4]+3889429448&4294967295,S=k+(P<<20&4294967295|P>>>12),P=T+(k^R&(S^k))+b[9]+568446438&4294967295,T=S+(P<<5&4294967295|P>>>27),P=R+(S^k&(T^S))+b[14]+3275163606&4294967295,R=T+(P<<9&4294967295|P>>>23),P=k+(T^S&(R^T))+b[3]+4107603335&4294967295,k=R+(P<<14&4294967295|P>>>18),P=S+(R^T&(k^R))+b[8]+1163531501&4294967295,S=k+(P<<20&4294967295|P>>>12),P=T+(k^R&(S^k))+b[13]+2850285829&4294967295,T=S+(P<<5&4294967295|P>>>27),P=R+(S^k&(T^S))+b[2]+4243563512&4294967295,R=T+(P<<9&4294967295|P>>>23),P=k+(T^S&(R^T))+b[7]+1735328473&4294967295,k=R+(P<<14&4294967295|P>>>18),P=S+(R^T&(k^R))+b[12]+2368359562&4294967295,S=k+(P<<20&4294967295|P>>>12),P=T+(S^k^R)+b[5]+4294588738&4294967295,T=S+(P<<4&4294967295|P>>>28),P=R+(T^S^k)+b[8]+2272392833&4294967295,R=T+(P<<11&4294967295|P>>>21),P=k+(R^T^S)+b[11]+1839030562&4294967295,k=R+(P<<16&4294967295|P>>>16),P=S+(k^R^T)+b[14]+4259657740&4294967295,S=k+(P<<23&4294967295|P>>>9),P=T+(S^k^R)+b[1]+2763975236&4294967295,T=S+(P<<4&4294967295|P>>>28),P=R+(T^S^k)+b[4]+1272893353&4294967295,R=T+(P<<11&4294967295|P>>>21),P=k+(R^T^S)+b[7]+4139469664&4294967295,k=R+(P<<16&4294967295|P>>>16),P=S+(k^R^T)+b[10]+3200236656&4294967295,S=k+(P<<23&4294967295|P>>>9),P=T+(S^k^R)+b[13]+681279174&4294967295,T=S+(P<<4&4294967295|P>>>28),P=R+(T^S^k)+b[0]+3936430074&4294967295,R=T+(P<<11&4294967295|P>>>21),P=k+(R^T^S)+b[3]+3572445317&4294967295,k=R+(P<<16&4294967295|P>>>16),P=S+(k^R^T)+b[6]+76029189&4294967295,S=k+(P<<23&4294967295|P>>>9),P=T+(S^k^R)+b[9]+3654602809&4294967295,T=S+(P<<4&4294967295|P>>>28),P=R+(T^S^k)+b[12]+3873151461&4294967295,R=T+(P<<11&4294967295|P>>>21),P=k+(R^T^S)+b[15]+530742520&4294967295,k=R+(P<<16&4294967295|P>>>16),P=S+(k^R^T)+b[2]+3299628645&4294967295,S=k+(P<<23&4294967295|P>>>9),P=T+(k^(S|~R))+b[0]+4096336452&4294967295,T=S+(P<<6&4294967295|P>>>26),P=R+(S^(T|~k))+b[7]+1126891415&4294967295,R=T+(P<<10&4294967295|P>>>22),P=k+(T^(R|~S))+b[14]+2878612391&4294967295,k=R+(P<<15&4294967295|P>>>17),P=S+(R^(k|~T))+b[5]+4237533241&4294967295,S=k+(P<<21&4294967295|P>>>11),P=T+(k^(S|~R))+b[12]+1700485571&4294967295,T=S+(P<<6&4294967295|P>>>26),P=R+(S^(T|~k))+b[3]+2399980690&4294967295,R=T+(P<<10&4294967295|P>>>22),P=k+(T^(R|~S))+b[10]+4293915773&4294967295,k=R+(P<<15&4294967295|P>>>17),P=S+(R^(k|~T))+b[1]+2240044497&4294967295,S=k+(P<<21&4294967295|P>>>11),P=T+(k^(S|~R))+b[8]+1873313359&4294967295,T=S+(P<<6&4294967295|P>>>26),P=R+(S^(T|~k))+b[15]+4264355552&4294967295,R=T+(P<<10&4294967295|P>>>22),P=k+(T^(R|~S))+b[6]+2734768916&4294967295,k=R+(P<<15&4294967295|P>>>17),P=S+(R^(k|~T))+b[13]+1309151649&4294967295,S=k+(P<<21&4294967295|P>>>11),P=T+(k^(S|~R))+b[4]+4149444226&4294967295,T=S+(P<<6&4294967295|P>>>26),P=R+(S^(T|~k))+b[11]+3174756917&4294967295,R=T+(P<<10&4294967295|P>>>22),P=k+(T^(R|~S))+b[2]+718787259&4294967295,k=R+(P<<15&4294967295|P>>>17),P=S+(R^(k|~T))+b[9]+3951481745&4294967295,N.g[0]=N.g[0]+T&4294967295,N.g[1]=N.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+R&4294967295}r.prototype.u=function(N,T){T===void 0&&(T=N.length);for(var S=T-this.blockSize,b=this.B,k=this.h,R=0;R<T;){if(k==0)for(;R<=S;)i(this,N,R),R+=this.blockSize;if(typeof N=="string"){for(;R<T;)if(b[k++]=N.charCodeAt(R++),k==this.blockSize){i(this,b),k=0;break}}else for(;R<T;)if(b[k++]=N[R++],k==this.blockSize){i(this,b),k=0;break}}this.h=k,this.o+=T},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var T=1;T<N.length-8;++T)N[T]=0;var S=8*this.o;for(T=N.length-8;T<N.length;++T)N[T]=S&255,S/=256;for(this.u(N),N=Array(16),T=S=0;4>T;++T)for(var b=0;32>b;b+=8)N[S++]=this.g[T]>>>b&255;return N};function o(N,T){var S=a;return Object.prototype.hasOwnProperty.call(S,N)?S[N]:S[N]=T(N)}function s(N,T){this.h=T;for(var S=[],b=!0,k=N.length-1;0<=k;k--){var R=N[k]|0;b&&R==T||(S[k]=R,b=!1)}this.g=S}var a={};function l(N){return-128<=N&&128>N?o(N,function(T){return new s([T|0],0>T?-1:0)}):new s([N|0],0>N?-1:0)}function u(N){if(isNaN(N)||!isFinite(N))return f;if(0>N)return y(u(-N));for(var T=[],S=1,b=0;N>=S;b++)T[b]=N/S|0,S*=4294967296;return new s(T,0)}function d(N,T){if(N.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(N.charAt(0)=="-")return y(d(N.substring(1),T));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(T,8)),b=f,k=0;k<N.length;k+=8){var R=Math.min(8,N.length-k),P=parseInt(N.substring(k,k+R),T);8>R?(R=u(Math.pow(T,R)),b=b.j(R).add(u(P))):(b=b.j(S),b=b.add(u(P)))}return b}var f=l(0),h=l(1),m=l(16777216);t=s.prototype,t.m=function(){if(v(this))return-y(this).m();for(var N=0,T=1,S=0;S<this.g.length;S++){var b=this.i(S);N+=(0<=b?b:4294967296+b)*T,T*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(g(this))return"0";if(v(this))return"-"+y(this).toString(N);for(var T=u(Math.pow(N,6)),S=this,b="";;){var k=A(S,T).g;S=x(S,k.j(T));var R=((0<S.g.length?S.g[0]:S.h)>>>0).toString(N);if(S=k,g(S))return R+b;for(;6>R.length;)R="0"+R;b=R+b}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function g(N){if(N.h!=0)return!1;for(var T=0;T<N.g.length;T++)if(N.g[T]!=0)return!1;return!0}function v(N){return N.h==-1}t.l=function(N){return N=x(this,N),v(N)?-1:g(N)?0:1};function y(N){for(var T=N.g.length,S=[],b=0;b<T;b++)S[b]=~N.g[b];return new s(S,~N.h).add(h)}t.abs=function(){return v(this)?y(this):this},t.add=function(N){for(var T=Math.max(this.g.length,N.g.length),S=[],b=0,k=0;k<=T;k++){var R=b+(this.i(k)&65535)+(N.i(k)&65535),P=(R>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);b=P>>>16,R&=65535,P&=65535,S[k]=P<<16|R}return new s(S,S[S.length-1]&-2147483648?-1:0)};function x(N,T){return N.add(y(T))}t.j=function(N){if(g(this)||g(N))return f;if(v(this))return v(N)?y(this).j(y(N)):y(y(this).j(N));if(v(N))return y(this.j(y(N)));if(0>this.l(m)&&0>N.l(m))return u(this.m()*N.m());for(var T=this.g.length+N.g.length,S=[],b=0;b<2*T;b++)S[b]=0;for(b=0;b<this.g.length;b++)for(var k=0;k<N.g.length;k++){var R=this.i(b)>>>16,P=this.i(b)&65535,G=N.i(k)>>>16,K=N.i(k)&65535;S[2*b+2*k]+=P*K,w(S,2*b+2*k),S[2*b+2*k+1]+=R*K,w(S,2*b+2*k+1),S[2*b+2*k+1]+=P*G,w(S,2*b+2*k+1),S[2*b+2*k+2]+=R*G,w(S,2*b+2*k+2)}for(b=0;b<T;b++)S[b]=S[2*b+1]<<16|S[2*b];for(b=T;b<2*T;b++)S[b]=0;return new s(S,0)};function w(N,T){for(;(N[T]&65535)!=N[T];)N[T+1]+=N[T]>>>16,N[T]&=65535,T++}function E(N,T){this.g=N,this.h=T}function A(N,T){if(g(T))throw Error("division by zero");if(g(N))return new E(f,f);if(v(N))return T=A(y(N),T),new E(y(T.g),y(T.h));if(v(T))return T=A(N,y(T)),new E(y(T.g),T.h);if(30<N.g.length){if(v(N)||v(T))throw Error("slowDivide_ only works with positive integers.");for(var S=h,b=T;0>=b.l(N);)S=O(S),b=O(b);var k=j(S,1),R=j(b,1);for(b=j(b,2),S=j(S,2);!g(b);){var P=R.add(b);0>=P.l(N)&&(k=k.add(S),R=P),b=j(b,1),S=j(S,1)}return T=x(N,k.j(T)),new E(k,T)}for(k=f;0<=N.l(T);){for(S=Math.max(1,Math.floor(N.m()/T.m())),b=Math.ceil(Math.log(S)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),R=u(S),P=R.j(T);v(P)||0<P.l(N);)S-=b,R=u(S),P=R.j(T);g(R)&&(R=h),k=k.add(R),N=x(N,P)}return new E(k,N)}t.A=function(N){return A(this,N).h},t.and=function(N){for(var T=Math.max(this.g.length,N.g.length),S=[],b=0;b<T;b++)S[b]=this.i(b)&N.i(b);return new s(S,this.h&N.h)},t.or=function(N){for(var T=Math.max(this.g.length,N.g.length),S=[],b=0;b<T;b++)S[b]=this.i(b)|N.i(b);return new s(S,this.h|N.h)},t.xor=function(N){for(var T=Math.max(this.g.length,N.g.length),S=[],b=0;b<T;b++)S[b]=this.i(b)^N.i(b);return new s(S,this.h^N.h)};function O(N){for(var T=N.g.length+1,S=[],b=0;b<T;b++)S[b]=N.i(b)<<1|N.i(b-1)>>>31;return new s(S,N.h)}function j(N,T){var S=T>>5;T%=32;for(var b=N.g.length-S,k=[],R=0;R<b;R++)k[R]=0<T?N.i(R+S)>>>T|N.i(R+S+1)<<32-T:N.i(R+S);return new s(k,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,uT=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=d,os=s}).apply(typeof GE<"u"?GE:typeof self<"u"?self:typeof window<"u"?window:{});var Pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dT,au,fT,hh,B1,hT,pT,mT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,_,I){return p==Array.prototype||p==Object.prototype||(p[_]=I.value),p};function n(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Pf=="object"&&Pf];for(var _=0;_<p.length;++_){var I=p[_];if(I&&I.Math==Math)return I}throw Error("Cannot find global object")}var r=n(this);function i(p,_){if(_)e:{var I=r;p=p.split(".");for(var M=0;M<p.length-1;M++){var H=p[M];if(!(H in I))break e;I=I[H]}p=p[p.length-1],M=I[p],_=_(M),_!=M&&_!=null&&e(I,p,{configurable:!0,writable:!0,value:_})}}function o(p,_){p instanceof String&&(p+="");var I=0,M=!1,H={next:function(){if(!M&&I<p.length){var q=I++;return{value:_(q,p[q]),done:!1}}return M=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}i("Array.prototype.values",function(p){return p||function(){return o(this,function(_,I){return I})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},a=this||self;function l(p){var _=typeof p;return _=_!="object"?_:p?Array.isArray(p)?"array":_:"null",_=="array"||_=="object"&&typeof p.length=="number"}function u(p){var _=typeof p;return _=="object"&&p!=null||_=="function"}function d(p,_,I){return p.call.apply(p.bind,arguments)}function f(p,_,I){if(!p)throw Error();if(2<arguments.length){var M=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,M),p.apply(_,H)}}return function(){return p.apply(_,arguments)}}function h(p,_,I){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,h.apply(null,arguments)}function m(p,_){var I=Array.prototype.slice.call(arguments,1);return function(){var M=I.slice();return M.push.apply(M,arguments),p.apply(this,M)}}function g(p,_){function I(){}I.prototype=_.prototype,p.aa=_.prototype,p.prototype=new I,p.prototype.constructor=p,p.Qb=function(M,H,q){for(var se=Array(arguments.length-2),at=2;at<arguments.length;at++)se[at-2]=arguments[at];return _.prototype[H].apply(M,se)}}function v(p){const _=p.length;if(0<_){const I=Array(_);for(let M=0;M<_;M++)I[M]=p[M];return I}return[]}function y(p,_){for(let I=1;I<arguments.length;I++){const M=arguments[I];if(l(M)){const H=p.length||0,q=M.length||0;p.length=H+q;for(let se=0;se<q;se++)p[H+se]=M[se]}else p.push(M)}}class x{constructor(_,I){this.i=_,this.j=I,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function w(p){return/^[\s\xa0]*$/.test(p)}function E(){var p=a.navigator;return p&&(p=p.userAgent)?p:""}function A(p){return A[" "](p),p}A[" "]=function(){};var O=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function j(p,_,I){for(const M in p)_.call(I,p[M],M,p)}function N(p,_){for(const I in p)_.call(void 0,p[I],I,p)}function T(p){const _={};for(const I in p)_[I]=p[I];return _}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(p,_){let I,M;for(let H=1;H<arguments.length;H++){M=arguments[H];for(I in M)p[I]=M[I];for(let q=0;q<S.length;q++)I=S[q],Object.prototype.hasOwnProperty.call(M,I)&&(p[I]=M[I])}}function k(p){var _=1;p=p.split(":");const I=[];for(;0<_&&p.length;)I.push(p.shift()),_--;return p.length&&I.push(p.join(":")),I}function R(p){a.setTimeout(()=>{throw p},0)}function P(){var p=z;let _=null;return p.g&&(_=p.g,p.g=p.g.next,p.g||(p.h=null),_.next=null),_}class G{constructor(){this.h=this.g=null}add(_,I){const M=K.get();M.set(_,I),this.h?this.h.next=M:this.g=M,this.h=M}}var K=new x(()=>new X,p=>p.reset());class X{constructor(){this.next=this.g=this.h=null}set(_,I){this.h=_,this.g=I,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,F=!1,z=new G,D=()=>{const p=a.Promise.resolve(void 0);ee=()=>{p.then(B)}};var B=()=>{for(var p;p=P();){try{p.h.call(p.g)}catch(I){R(I)}var _=K;_.j(p),100>_.h&&(_.h++,p.next=_.g,_.g=p)}F=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(p,_){this.type=p,this.g=this.target=_,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var Y=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,_=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const I=()=>{};a.addEventListener("test",I,_),a.removeEventListener("test",I,_)}catch{}return p}();function re(p,_){if(V.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var I=this.type=p.type,M=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=_,_=p.relatedTarget){if(O){e:{try{A(_.nodeName);var H=!0;break e}catch{}H=!1}H||(_=null)}}else I=="mouseover"?_=p.fromElement:I=="mouseout"&&(_=p.toElement);this.relatedTarget=_,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:ie[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&re.aa.h.call(this)}}g(re,V);var ie={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var te="closure_listenable_"+(1e6*Math.random()|0),de=0;function be(p,_,I,M,H){this.listener=p,this.proxy=null,this.src=_,this.type=I,this.capture=!!M,this.ha=H,this.key=++de,this.da=this.fa=!1}function we(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Ie(p){this.src=p,this.g={},this.h=0}Ie.prototype.add=function(p,_,I,M,H){var q=p.toString();p=this.g[q],p||(p=this.g[q]=[],this.h++);var se=Je(p,_,M,H);return-1<se?(_=p[se],I||(_.fa=!1)):(_=new be(_,this.src,q,!!M,H),_.fa=I,p.push(_)),_};function Te(p,_){var I=_.type;if(I in p.g){var M=p.g[I],H=Array.prototype.indexOf.call(M,_,void 0),q;(q=0<=H)&&Array.prototype.splice.call(M,H,1),q&&(we(_),p.g[I].length==0&&(delete p.g[I],p.h--))}}function Je(p,_,I,M){for(var H=0;H<p.length;++H){var q=p[H];if(!q.da&&q.listener==_&&q.capture==!!I&&q.ha==M)return H}return-1}var _t="closure_lm_"+(1e6*Math.random()|0),fe={};function Zt(p,_,I,M,H){if(Array.isArray(_)){for(var q=0;q<_.length;q++)Zt(p,_[q],I,M,H);return null}return I=Fw(I),p&&p[te]?p.K(_,I,u(M)?!!M.capture:!!M,H):Ps(p,_,I,!1,M,H)}function Ps(p,_,I,M,H,q){if(!_)throw Error("Invalid event type");var se=u(H)?!!H.capture:!!H,at=H0(p);if(at||(p[_t]=at=new Ie(p)),I=at.add(_,I,M,se,q),I.proxy)return I;if(M=$0(),I.proxy=M,M.src=p,M.listener=I,p.addEventListener)Y||(H=se),H===void 0&&(H=!1),p.addEventListener(_.toString(),M,H);else if(p.attachEvent)p.attachEvent(Lw(_.toString()),M);else if(p.addListener&&p.removeListener)p.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return I}function $0(){function p(I){return _.call(p.src,p.listener,I)}const _=M8;return p}function Ds(p,_,I,M,H){if(Array.isArray(_))for(var q=0;q<_.length;q++)Ds(p,_[q],I,M,H);else M=u(M)?!!M.capture:!!M,I=Fw(I),p&&p[te]?(p=p.i,_=String(_).toString(),_ in p.g&&(q=p.g[_],I=Je(q,I,M,H),-1<I&&(we(q[I]),Array.prototype.splice.call(q,I,1),q.length==0&&(delete p.g[_],p.h--)))):p&&(p=H0(p))&&(_=p.g[_.toString()],p=-1,_&&(p=Je(_,I,M,H)),(I=-1<p?_[p]:null)&&z0(I))}function z0(p){if(typeof p!="number"&&p&&!p.da){var _=p.src;if(_&&_[te])Te(_.i,p);else{var I=p.type,M=p.proxy;_.removeEventListener?_.removeEventListener(I,M,p.capture):_.detachEvent?_.detachEvent(Lw(I),M):_.addListener&&_.removeListener&&_.removeListener(M),(I=H0(_))?(Te(I,p),I.h==0&&(I.src=null,_[_t]=null)):we(p)}}}function Lw(p){return p in fe?fe[p]:fe[p]="on"+p}function M8(p,_){if(p.da)p=!0;else{_=new re(_,this);var I=p.listener,M=p.ha||p.src;p.fa&&z0(p),p=I.call(M,_)}return p}function H0(p){return p=p[_t],p instanceof Ie?p:null}var W0="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fw(p){return typeof p=="function"?p:(p[W0]||(p[W0]=function(_){return p.handleEvent(_)}),p[W0])}function xn(){$.call(this),this.i=new Ie(this),this.M=this,this.F=null}g(xn,$),xn.prototype[te]=!0,xn.prototype.removeEventListener=function(p,_,I,M){Ds(this,p,_,I,M)};function Ln(p,_){var I,M=p.F;if(M)for(I=[];M;M=M.F)I.push(M);if(p=p.M,M=_.type||_,typeof _=="string")_=new V(_,p);else if(_ instanceof V)_.target=_.target||p;else{var H=_;_=new V(M,p),b(_,H)}if(H=!0,I)for(var q=I.length-1;0<=q;q--){var se=_.g=I[q];H=qd(se,M,!0,_)&&H}if(se=_.g=p,H=qd(se,M,!0,_)&&H,H=qd(se,M,!1,_)&&H,I)for(q=0;q<I.length;q++)se=_.g=I[q],H=qd(se,M,!1,_)&&H}xn.prototype.N=function(){if(xn.aa.N.call(this),this.i){var p=this.i,_;for(_ in p.g){for(var I=p.g[_],M=0;M<I.length;M++)we(I[M]);delete p.g[_],p.h--}}this.F=null},xn.prototype.K=function(p,_,I,M){return this.i.add(String(p),_,!1,I,M)},xn.prototype.L=function(p,_,I,M){return this.i.add(String(p),_,!0,I,M)};function qd(p,_,I,M){if(_=p.i.g[String(_)],!_)return!0;_=_.concat();for(var H=!0,q=0;q<_.length;++q){var se=_[q];if(se&&!se.da&&se.capture==I){var at=se.listener,an=se.ha||se.src;se.fa&&Te(p.i,se),H=at.call(an,M)!==!1&&H}}return H&&!M.defaultPrevented}function Bw(p,_,I){if(typeof p=="function")I&&(p=h(p,I));else if(p&&typeof p.handleEvent=="function")p=h(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(p,_||0)}function Vw(p){p.g=Bw(()=>{p.g=null,p.i&&(p.i=!1,Vw(p))},p.l);const _=p.h;p.h=null,p.m.apply(null,_)}class j8 extends ${constructor(_,I){super(),this.m=_,this.l=I,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Vw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Tc(p){$.call(this),this.h=p,this.g={}}g(Tc,$);var Uw=[];function $w(p){j(p.g,function(_,I){this.g.hasOwnProperty(I)&&z0(_)},p),p.g={}}Tc.prototype.N=function(){Tc.aa.N.call(this),$w(this)},Tc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var G0=a.JSON.stringify,L8=a.JSON.parse,F8=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function q0(){}q0.prototype.h=null;function zw(p){return p.h||(p.h=p.i())}function Hw(){}var Rc={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function K0(){V.call(this,"d")}g(K0,V);function X0(){V.call(this,"c")}g(X0,V);var Os={},Ww=null;function Kd(){return Ww=Ww||new xn}Os.La="serverreachability";function Gw(p){V.call(this,Os.La,p)}g(Gw,V);function Pc(p){const _=Kd();Ln(_,new Gw(_))}Os.STAT_EVENT="statevent";function qw(p,_){V.call(this,Os.STAT_EVENT,p),this.stat=_}g(qw,V);function Fn(p){const _=Kd();Ln(_,new qw(_,p))}Os.Ma="timingevent";function Kw(p,_){V.call(this,Os.Ma,p),this.size=_}g(Kw,V);function Dc(p,_){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},_)}function Oc(){this.g=!0}Oc.prototype.xa=function(){this.g=!1};function B8(p,_,I,M,H,q){p.info(function(){if(p.g)if(q)for(var se="",at=q.split("&"),an=0;an<at.length;an++){var Ke=at[an].split("=");if(1<Ke.length){var wn=Ke[0];Ke=Ke[1];var _n=wn.split("_");se=2<=_n.length&&_n[1]=="type"?se+(wn+"="+Ke+"&"):se+(wn+"=redacted&")}}else se=null;else se=q;return"XMLHTTP REQ ("+M+") [attempt "+H+"]: "+_+`
`+I+`
`+se})}function V8(p,_,I,M,H,q,se){p.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+H+"]: "+_+`
`+I+`
`+q+" "+se})}function Ma(p,_,I,M){p.info(function(){return"XMLHTTP TEXT ("+_+"): "+$8(p,I)+(M?" "+M:"")})}function U8(p,_){p.info(function(){return"TIMEOUT: "+_})}Oc.prototype.info=function(){};function $8(p,_){if(!p.g)return _;if(!_)return null;try{var I=JSON.parse(_);if(I){for(p=0;p<I.length;p++)if(Array.isArray(I[p])){var M=I[p];if(!(2>M.length)){var H=M[1];if(Array.isArray(H)&&!(1>H.length)){var q=H[0];if(q!="noop"&&q!="stop"&&q!="close")for(var se=1;se<H.length;se++)H[se]=""}}}}return G0(I)}catch{return _}}var Xd={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Xw={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Q0;function Qd(){}g(Qd,q0),Qd.prototype.g=function(){return new XMLHttpRequest},Qd.prototype.i=function(){return{}},Q0=new Qd;function po(p,_,I,M){this.j=p,this.i=_,this.l=I,this.R=M||1,this.U=new Tc(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qw}function Qw(){this.i=null,this.g="",this.h=!1}var Yw={},Y0={};function Z0(p,_,I){p.L=1,p.v=ef(Vi(_)),p.m=I,p.P=!0,Zw(p,null)}function Zw(p,_){p.F=Date.now(),Yd(p),p.A=Vi(p.v);var I=p.A,M=p.R;Array.isArray(M)||(M=[String(M)]),f2(I.i,"t",M),p.C=0,I=p.j.J,p.h=new Qw,p.g=R2(p.j,I?_:null,!p.m),0<p.O&&(p.M=new j8(h(p.Y,p,p.g),p.O)),_=p.U,I=p.g,M=p.ca;var H="readystatechange";Array.isArray(H)||(H&&(Uw[0]=H.toString()),H=Uw);for(var q=0;q<H.length;q++){var se=Zt(I,H[q],M||_.handleEvent,!1,_.h||_);if(!se)break;_.g[se.key]=se}_=p.H?T(p.H):{},p.m?(p.u||(p.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,_)):(p.u="GET",p.g.ea(p.A,p.u,null,_)),Pc(),B8(p.i,p.u,p.A,p.l,p.R,p.m)}po.prototype.ca=function(p){p=p.target;const _=this.M;_&&Ui(p)==3?_.j():this.Y(p)},po.prototype.Y=function(p){try{if(p==this.g)e:{const _n=Ui(this.g);var _=this.g.Ba();const Fa=this.g.Z();if(!(3>_n)&&(_n!=3||this.g&&(this.h.h||this.g.oa()||x2(this.g)))){this.J||_n!=4||_==7||(_==8||0>=Fa?Pc(3):Pc(2)),J0(this);var I=this.g.Z();this.X=I;t:if(Jw(this)){var M=x2(this.g);p="";var H=M.length,q=Ui(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ks(this),kc(this);var se="";break t}this.h.i=new a.TextDecoder}for(_=0;_<H;_++)this.h.h=!0,p+=this.h.i.decode(M[_],{stream:!(q&&_==H-1)});M.length=0,this.h.g+=p,this.C=0,se=this.h.g}else se=this.g.oa();if(this.o=I==200,V8(this.i,this.u,this.A,this.l,this.R,_n,I),this.o){if(this.T&&!this.K){t:{if(this.g){var at,an=this.g;if((at=an.g?an.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(at)){var Ke=at;break t}}Ke=null}if(I=Ke)Ma(this.i,this.l,I,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,em(this,I);else{this.o=!1,this.s=3,Fn(12),ks(this),kc(this);break e}}if(this.P){I=!0;let Ur;for(;!this.J&&this.C<se.length;)if(Ur=z8(this,se),Ur==Y0){_n==4&&(this.s=4,Fn(14),I=!1),Ma(this.i,this.l,null,"[Incomplete Response]");break}else if(Ur==Yw){this.s=4,Fn(15),Ma(this.i,this.l,se,"[Invalid Chunk]"),I=!1;break}else Ma(this.i,this.l,Ur,null),em(this,Ur);if(Jw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_n!=4||se.length!=0||this.h.h||(this.s=1,Fn(16),I=!1),this.o=this.o&&I,!I)Ma(this.i,this.l,se,"[Invalid Chunked Response]"),ks(this),kc(this);else if(0<se.length&&!this.W){this.W=!0;var wn=this.j;wn.g==this&&wn.ba&&!wn.M&&(wn.j.info("Great, no buffering proxy detected. Bytes received: "+se.length),sm(wn),wn.M=!0,Fn(11))}}else Ma(this.i,this.l,se,null),em(this,se);_n==4&&ks(this),this.o&&!this.J&&(_n==4?S2(this.j,this):(this.o=!1,Yd(this)))}else sD(this.g),I==400&&0<se.indexOf("Unknown SID")?(this.s=3,Fn(12)):(this.s=0,Fn(13)),ks(this),kc(this)}}}catch{}finally{}};function Jw(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function z8(p,_){var I=p.C,M=_.indexOf(`
`,I);return M==-1?Y0:(I=Number(_.substring(I,M)),isNaN(I)?Yw:(M+=1,M+I>_.length?Y0:(_=_.slice(M,M+I),p.C=M+I,_)))}po.prototype.cancel=function(){this.J=!0,ks(this)};function Yd(p){p.S=Date.now()+p.I,e2(p,p.I)}function e2(p,_){if(p.B!=null)throw Error("WatchDog timer not null");p.B=Dc(h(p.ba,p),_)}function J0(p){p.B&&(a.clearTimeout(p.B),p.B=null)}po.prototype.ba=function(){this.B=null;const p=Date.now();0<=p-this.S?(U8(this.i,this.A),this.L!=2&&(Pc(),Fn(17)),ks(this),this.s=2,kc(this)):e2(this,this.S-p)};function kc(p){p.j.G==0||p.J||S2(p.j,p)}function ks(p){J0(p);var _=p.M;_&&typeof _.ma=="function"&&_.ma(),p.M=null,$w(p.U),p.g&&(_=p.g,p.g=null,_.abort(),_.ma())}function em(p,_){try{var I=p.j;if(I.G!=0&&(I.g==p||tm(I.h,p))){if(!p.K&&tm(I.h,p)&&I.G==3){try{var M=I.Da.g.parse(_)}catch{M=null}if(Array.isArray(M)&&M.length==3){var H=M;if(H[0]==0){e:if(!I.u){if(I.g)if(I.g.F+3e3<p.F)af(I),of(I);else break e;om(I),Fn(18)}}else I.za=H[1],0<I.za-I.T&&37500>H[2]&&I.F&&I.v==0&&!I.C&&(I.C=Dc(h(I.Za,I),6e3));if(1>=r2(I.h)&&I.ca){try{I.ca()}catch{}I.ca=void 0}}else js(I,11)}else if((p.K||I.g==p)&&af(I),!w(_))for(H=I.Da.g.parse(_),_=0;_<H.length;_++){let Ke=H[_];if(I.T=Ke[0],Ke=Ke[1],I.G==2)if(Ke[0]=="c"){I.K=Ke[1],I.ia=Ke[2];const wn=Ke[3];wn!=null&&(I.la=wn,I.j.info("VER="+I.la));const _n=Ke[4];_n!=null&&(I.Aa=_n,I.j.info("SVER="+I.Aa));const Fa=Ke[5];Fa!=null&&typeof Fa=="number"&&0<Fa&&(M=1.5*Fa,I.L=M,I.j.info("backChannelRequestTimeoutMs_="+M)),M=I;const Ur=p.g;if(Ur){const cf=Ur.g?Ur.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(cf){var q=M.h;q.g||cf.indexOf("spdy")==-1&&cf.indexOf("quic")==-1&&cf.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&(nm(q,q.h),q.h=null))}if(M.D){const am=Ur.g?Ur.g.getResponseHeader("X-HTTP-Session-Id"):null;am&&(M.ya=am,ut(M.I,M.D,am))}}I.G=3,I.l&&I.l.ua(),I.ba&&(I.R=Date.now()-p.F,I.j.info("Handshake RTT: "+I.R+"ms")),M=I;var se=p;if(M.qa=T2(M,M.J?M.ia:null,M.W),se.K){i2(M.h,se);var at=se,an=M.L;an&&(at.I=an),at.B&&(J0(at),Yd(at)),M.g=se}else b2(M);0<I.i.length&&sf(I)}else Ke[0]!="stop"&&Ke[0]!="close"||js(I,7);else I.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?js(I,7):im(I):Ke[0]!="noop"&&I.l&&I.l.ta(Ke),I.v=0)}}Pc(4)}catch{}}var H8=class{constructor(p,_){this.g=p,this.map=_}};function t2(p){this.l=p||10,a.PerformanceNavigationTiming?(p=a.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function n2(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function r2(p){return p.h?1:p.g?p.g.size:0}function tm(p,_){return p.h?p.h==_:p.g?p.g.has(_):!1}function nm(p,_){p.g?p.g.add(_):p.h=_}function i2(p,_){p.h&&p.h==_?p.h=null:p.g&&p.g.has(_)&&p.g.delete(_)}t2.prototype.cancel=function(){if(this.i=o2(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function o2(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let _=p.i;for(const I of p.g.values())_=_.concat(I.D);return _}return v(p.i)}function W8(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(l(p)){for(var _=[],I=p.length,M=0;M<I;M++)_.push(p[M]);return _}_=[],I=0;for(M in p)_[I++]=p[M];return _}function G8(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(l(p)||typeof p=="string"){var _=[];p=p.length;for(var I=0;I<p;I++)_.push(I);return _}_=[],I=0;for(const M in p)_[I++]=M;return _}}}function s2(p,_){if(p.forEach&&typeof p.forEach=="function")p.forEach(_,void 0);else if(l(p)||typeof p=="string")Array.prototype.forEach.call(p,_,void 0);else for(var I=G8(p),M=W8(p),H=M.length,q=0;q<H;q++)_.call(void 0,M[q],I&&I[q],p)}var a2=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function q8(p,_){if(p){p=p.split("&");for(var I=0;I<p.length;I++){var M=p[I].indexOf("="),H=null;if(0<=M){var q=p[I].substring(0,M);H=p[I].substring(M+1)}else q=p[I];_(q,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Ms(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof Ms){this.h=p.h,Zd(this,p.j),this.o=p.o,this.g=p.g,Jd(this,p.s),this.l=p.l;var _=p.i,I=new Lc;I.i=_.i,_.g&&(I.g=new Map(_.g),I.h=_.h),l2(this,I),this.m=p.m}else p&&(_=String(p).match(a2))?(this.h=!1,Zd(this,_[1]||"",!0),this.o=Mc(_[2]||""),this.g=Mc(_[3]||"",!0),Jd(this,_[4]),this.l=Mc(_[5]||"",!0),l2(this,_[6]||"",!0),this.m=Mc(_[7]||"")):(this.h=!1,this.i=new Lc(null,this.h))}Ms.prototype.toString=function(){var p=[],_=this.j;_&&p.push(jc(_,c2,!0),":");var I=this.g;return(I||_=="file")&&(p.push("//"),(_=this.o)&&p.push(jc(_,c2,!0),"@"),p.push(encodeURIComponent(String(I)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),I=this.s,I!=null&&p.push(":",String(I))),(I=this.l)&&(this.g&&I.charAt(0)!="/"&&p.push("/"),p.push(jc(I,I.charAt(0)=="/"?Q8:X8,!0))),(I=this.i.toString())&&p.push("?",I),(I=this.m)&&p.push("#",jc(I,Z8)),p.join("")};function Vi(p){return new Ms(p)}function Zd(p,_,I){p.j=I?Mc(_,!0):_,p.j&&(p.j=p.j.replace(/:$/,""))}function Jd(p,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);p.s=_}else p.s=null}function l2(p,_,I){_ instanceof Lc?(p.i=_,J8(p.i,p.h)):(I||(_=jc(_,Y8)),p.i=new Lc(_,p.h))}function ut(p,_,I){p.i.set(_,I)}function ef(p){return ut(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function Mc(p,_){return p?_?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function jc(p,_,I){return typeof p=="string"?(p=encodeURI(p).replace(_,K8),I&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function K8(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var c2=/[#\/\?@]/g,X8=/[#\?:]/g,Q8=/[#\?]/g,Y8=/[#\?@]/g,Z8=/#/g;function Lc(p,_){this.h=this.g=null,this.i=p||null,this.j=!!_}function mo(p){p.g||(p.g=new Map,p.h=0,p.i&&q8(p.i,function(_,I){p.add(decodeURIComponent(_.replace(/\+/g," ")),I)}))}t=Lc.prototype,t.add=function(p,_){mo(this),this.i=null,p=ja(this,p);var I=this.g.get(p);return I||this.g.set(p,I=[]),I.push(_),this.h+=1,this};function u2(p,_){mo(p),_=ja(p,_),p.g.has(_)&&(p.i=null,p.h-=p.g.get(_).length,p.g.delete(_))}function d2(p,_){return mo(p),_=ja(p,_),p.g.has(_)}t.forEach=function(p,_){mo(this),this.g.forEach(function(I,M){I.forEach(function(H){p.call(_,H,M,this)},this)},this)},t.na=function(){mo(this);const p=Array.from(this.g.values()),_=Array.from(this.g.keys()),I=[];for(let M=0;M<_.length;M++){const H=p[M];for(let q=0;q<H.length;q++)I.push(_[M])}return I},t.V=function(p){mo(this);let _=[];if(typeof p=="string")d2(this,p)&&(_=_.concat(this.g.get(ja(this,p))));else{p=Array.from(this.g.values());for(let I=0;I<p.length;I++)_=_.concat(p[I])}return _},t.set=function(p,_){return mo(this),this.i=null,p=ja(this,p),d2(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[_]),this.h+=1,this},t.get=function(p,_){return p?(p=this.V(p),0<p.length?String(p[0]):_):_};function f2(p,_,I){u2(p,_),0<I.length&&(p.i=null,p.g.set(ja(p,_),v(I)),p.h+=I.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],_=Array.from(this.g.keys());for(var I=0;I<_.length;I++){var M=_[I];const q=encodeURIComponent(String(M)),se=this.V(M);for(M=0;M<se.length;M++){var H=q;se[M]!==""&&(H+="="+encodeURIComponent(String(se[M]))),p.push(H)}}return this.i=p.join("&")};function ja(p,_){return _=String(_),p.j&&(_=_.toLowerCase()),_}function J8(p,_){_&&!p.j&&(mo(p),p.i=null,p.g.forEach(function(I,M){var H=M.toLowerCase();M!=H&&(u2(this,M),f2(this,H,I))},p)),p.j=_}function eD(p,_){const I=new Oc;if(a.Image){const M=new Image;M.onload=m(go,I,"TestLoadImage: loaded",!0,_,M),M.onerror=m(go,I,"TestLoadImage: error",!1,_,M),M.onabort=m(go,I,"TestLoadImage: abort",!1,_,M),M.ontimeout=m(go,I,"TestLoadImage: timeout",!1,_,M),a.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=p}else _(!1)}function tD(p,_){const I=new Oc,M=new AbortController,H=setTimeout(()=>{M.abort(),go(I,"TestPingServer: timeout",!1,_)},1e4);fetch(p,{signal:M.signal}).then(q=>{clearTimeout(H),q.ok?go(I,"TestPingServer: ok",!0,_):go(I,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(H),go(I,"TestPingServer: error",!1,_)})}function go(p,_,I,M,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),M(I)}catch{}}function nD(){this.g=new F8}function rD(p,_,I){const M=I||"";try{s2(p,function(H,q){let se=H;u(H)&&(se=G0(H)),_.push(M+q+"="+encodeURIComponent(se))})}catch(H){throw _.push(M+"type="+encodeURIComponent("_badmap")),H}}function tf(p){this.l=p.Ub||null,this.j=p.eb||!1}g(tf,q0),tf.prototype.g=function(){return new nf(this.l,this.j)},tf.prototype.i=function(p){return function(){return p}}({});function nf(p,_){xn.call(this),this.D=p,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(nf,xn),t=nf.prototype,t.open=function(p,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=_,this.readyState=1,Bc(this)},t.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(_.body=p),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fc(this)),this.readyState=0},t.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Bc(this)),this.g&&(this.readyState=3,Bc(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;h2(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function h2(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}t.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var _=p.value?p.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!p.done}))&&(this.response=this.responseText+=_)}p.done?Fc(this):Bc(this),this.readyState==3&&h2(this)}},t.Ra=function(p){this.g&&(this.response=this.responseText=p,Fc(this))},t.Qa=function(p){this.g&&(this.response=p,Fc(this))},t.ga=function(){this.g&&Fc(this)};function Fc(p){p.readyState=4,p.l=null,p.j=null,p.v=null,Bc(p)}t.setRequestHeader=function(p,_){this.u.append(p,_)},t.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],_=this.h.entries();for(var I=_.next();!I.done;)I=I.value,p.push(I[0]+": "+I[1]),I=_.next();return p.join(`\r
`)};function Bc(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(nf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function p2(p){let _="";return j(p,function(I,M){_+=M,_+=":",_+=I,_+=`\r
`}),_}function rm(p,_,I){e:{for(M in I){var M=!1;break e}M=!0}M||(I=p2(I),typeof p=="string"?I!=null&&encodeURIComponent(String(I)):ut(p,_,I))}function St(p){xn.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(St,xn);var iD=/^https?$/i,oD=["POST","PUT"];t=St.prototype,t.Ha=function(p){this.J=p},t.ea=function(p,_,I,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);_=_?_.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Q0.g(),this.v=this.o?zw(this.o):zw(Q0),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(_,String(p),!0),this.B=!1}catch(q){m2(this,q);return}if(p=I||"",I=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var H in M)I.set(H,M[H]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const q of M.keys())I.set(q,M.get(q));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(I.keys()).find(q=>q.toLowerCase()=="content-type"),H=a.FormData&&p instanceof a.FormData,!(0<=Array.prototype.indexOf.call(oD,_,void 0))||M||H||I.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,se]of I)this.g.setRequestHeader(q,se);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{y2(this),this.u=!0,this.g.send(p),this.u=!1}catch(q){m2(this,q)}};function m2(p,_){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=_,p.m=5,g2(p),rf(p)}function g2(p){p.A||(p.A=!0,Ln(p,"complete"),Ln(p,"error"))}t.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,Ln(this,"complete"),Ln(this,"abort"),rf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rf(this,!0)),St.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?v2(this):this.bb())},t.bb=function(){v2(this)};function v2(p){if(p.h&&typeof s<"u"&&(!p.v[1]||Ui(p)!=4||p.Z()!=2)){if(p.u&&Ui(p)==4)Bw(p.Ea,0,p);else if(Ln(p,"readystatechange"),Ui(p)==4){p.h=!1;try{const se=p.Z();e:switch(se){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var I;if(!(I=_)){var M;if(M=se===0){var H=String(p.D).match(a2)[1]||null;!H&&a.self&&a.self.location&&(H=a.self.location.protocol.slice(0,-1)),M=!iD.test(H?H.toLowerCase():"")}I=M}if(I)Ln(p,"complete"),Ln(p,"success");else{p.m=6;try{var q=2<Ui(p)?p.g.statusText:""}catch{q=""}p.l=q+" ["+p.Z()+"]",g2(p)}}finally{rf(p)}}}}function rf(p,_){if(p.g){y2(p);const I=p.g,M=p.v[0]?()=>{}:null;p.g=null,p.v=null,_||Ln(p,"ready");try{I.onreadystatechange=M}catch{}}}function y2(p){p.I&&(a.clearTimeout(p.I),p.I=null)}t.isActive=function(){return!!this.g};function Ui(p){return p.g?p.g.readyState:0}t.Z=function(){try{return 2<Ui(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(p){if(this.g){var _=this.g.responseText;return p&&_.indexOf(p)==0&&(_=_.substring(p.length)),L8(_)}};function x2(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function sD(p){const _={};p=(p.g&&2<=Ui(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<p.length;M++){if(w(p[M]))continue;var I=k(p[M]);const H=I[0];if(I=I[1],typeof I!="string")continue;I=I.trim();const q=_[H]||[];_[H]=q,q.push(I)}N(_,function(M){return M.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vc(p,_,I){return I&&I.internalChannelParams&&I.internalChannelParams[p]||_}function w2(p){this.Aa=0,this.i=[],this.j=new Oc,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vc("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vc("baseRetryDelayMs",5e3,p),this.cb=Vc("retryDelaySeedMs",1e4,p),this.Wa=Vc("forwardChannelMaxRetries",2,p),this.wa=Vc("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new t2(p&&p.concurrentRequestLimit),this.Da=new nD,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=w2.prototype,t.la=8,t.G=1,t.connect=function(p,_,I,M){Fn(0),this.W=p,this.H=_||{},I&&M!==void 0&&(this.H.OSID=I,this.H.OAID=M),this.F=this.X,this.I=T2(this,null,this.W),sf(this)};function im(p){if(_2(p),p.G==3){var _=p.U++,I=Vi(p.I);if(ut(I,"SID",p.K),ut(I,"RID",_),ut(I,"TYPE","terminate"),Uc(p,I),_=new po(p,p.j,_),_.L=2,_.v=ef(Vi(I)),I=!1,a.navigator&&a.navigator.sendBeacon)try{I=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!I&&a.Image&&(new Image().src=_.v,I=!0),I||(_.g=R2(_.j,null),_.g.ea(_.v)),_.F=Date.now(),Yd(_)}N2(p)}function of(p){p.g&&(sm(p),p.g.cancel(),p.g=null)}function _2(p){of(p),p.u&&(a.clearTimeout(p.u),p.u=null),af(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&a.clearTimeout(p.s),p.s=null)}function sf(p){if(!n2(p.h)&&!p.s){p.s=!0;var _=p.Ga;ee||D(),F||(ee(),F=!0),z.add(_,p),p.B=0}}function aD(p,_){return r2(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=_.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=Dc(h(p.Ga,p,_),I2(p,p.B)),p.B++,!0)}t.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;const H=new po(this,this.j,p);let q=this.o;if(this.S&&(q?(q=T(q),b(q,this.S)):q=this.S),this.m!==null||this.O||(H.H=q,q=null),this.P)e:{for(var _=0,I=0;I<this.i.length;I++){t:{var M=this.i[I];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(_+=M,4096<_){_=I;break e}if(_===4096||I===this.i.length-1){_=I+1;break e}}_=1e3}else _=1e3;_=C2(this,H,_),I=Vi(this.I),ut(I,"RID",p),ut(I,"CVER",22),this.D&&ut(I,"X-HTTP-Session-Id",this.D),Uc(this,I),q&&(this.O?_="headers="+encodeURIComponent(String(p2(q)))+"&"+_:this.m&&rm(I,this.m,q)),nm(this.h,H),this.Ua&&ut(I,"TYPE","init"),this.P?(ut(I,"$req",_),ut(I,"SID","null"),H.T=!0,Z0(H,I,null)):Z0(H,I,_),this.G=2}}else this.G==3&&(p?E2(this,p):this.i.length==0||n2(this.h)||E2(this))};function E2(p,_){var I;_?I=_.l:I=p.U++;const M=Vi(p.I);ut(M,"SID",p.K),ut(M,"RID",I),ut(M,"AID",p.T),Uc(p,M),p.m&&p.o&&rm(M,p.m,p.o),I=new po(p,p.j,I,p.B+1),p.m===null&&(I.H=p.o),_&&(p.i=_.D.concat(p.i)),_=C2(p,I,1e3),I.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),nm(p.h,I),Z0(I,M,_)}function Uc(p,_){p.H&&j(p.H,function(I,M){ut(_,M,I)}),p.l&&s2({},function(I,M){ut(_,M,I)})}function C2(p,_,I){I=Math.min(p.i.length,I);var M=p.l?h(p.l.Na,p.l,p):null;e:{var H=p.i;let q=-1;for(;;){const se=["count="+I];q==-1?0<I?(q=H[0].g,se.push("ofs="+q)):q=0:se.push("ofs="+q);let at=!0;for(let an=0;an<I;an++){let Ke=H[an].g;const wn=H[an].map;if(Ke-=q,0>Ke)q=Math.max(0,H[an].g-100),at=!1;else try{rD(wn,se,"req"+Ke+"_")}catch{M&&M(wn)}}if(at){M=se.join("&");break e}}}return p=p.i.splice(0,I),_.D=p,M}function b2(p){if(!p.g&&!p.u){p.Y=1;var _=p.Fa;ee||D(),F||(ee(),F=!0),z.add(_,p),p.v=0}}function om(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=Dc(h(p.Fa,p),I2(p,p.v)),p.v++,!0)}t.Fa=function(){if(this.u=null,A2(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=Dc(h(this.ab,this),p)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Fn(10),of(this),A2(this))};function sm(p){p.A!=null&&(a.clearTimeout(p.A),p.A=null)}function A2(p){p.g=new po(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var _=Vi(p.qa);ut(_,"RID","rpc"),ut(_,"SID",p.K),ut(_,"AID",p.T),ut(_,"CI",p.F?"0":"1"),!p.F&&p.ja&&ut(_,"TO",p.ja),ut(_,"TYPE","xmlhttp"),Uc(p,_),p.m&&p.o&&rm(_,p.m,p.o),p.L&&(p.g.I=p.L);var I=p.g;p=p.ia,I.L=1,I.v=ef(Vi(_)),I.m=null,I.P=!0,Zw(I,p)}t.Za=function(){this.C!=null&&(this.C=null,of(this),om(this),Fn(19))};function af(p){p.C!=null&&(a.clearTimeout(p.C),p.C=null)}function S2(p,_){var I=null;if(p.g==_){af(p),sm(p),p.g=null;var M=2}else if(tm(p.h,_))I=_.D,i2(p.h,_),M=1;else return;if(p.G!=0){if(_.o)if(M==1){I=_.m?_.m.length:0,_=Date.now()-_.F;var H=p.B;M=Kd(),Ln(M,new Kw(M,I)),sf(p)}else b2(p);else if(H=_.s,H==3||H==0&&0<_.X||!(M==1&&aD(p,_)||M==2&&om(p)))switch(I&&0<I.length&&(_=p.h,_.i=_.i.concat(I)),H){case 1:js(p,5);break;case 4:js(p,10);break;case 3:js(p,6);break;default:js(p,2)}}}function I2(p,_){let I=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(I*=2),I*_}function js(p,_){if(p.j.info("Error code "+_),_==2){var I=h(p.fb,p),M=p.Xa;const H=!M;M=new Ms(M||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Zd(M,"https"),ef(M),H?eD(M.toString(),I):tD(M.toString(),I)}else Fn(2);p.G=0,p.l&&p.l.sa(_),N2(p),_2(p)}t.fb=function(p){p?(this.j.info("Successfully pinged google.com"),Fn(2)):(this.j.info("Failed to ping google.com"),Fn(1))};function N2(p){if(p.G=0,p.ka=[],p.l){const _=o2(p.h);(_.length!=0||p.i.length!=0)&&(y(p.ka,_),y(p.ka,p.i),p.h.i.length=0,v(p.i),p.i.length=0),p.l.ra()}}function T2(p,_,I){var M=I instanceof Ms?Vi(I):new Ms(I);if(M.g!="")_&&(M.g=_+"."+M.g),Jd(M,M.s);else{var H=a.location;M=H.protocol,_=_?_+"."+H.hostname:H.hostname,H=+H.port;var q=new Ms(null);M&&Zd(q,M),_&&(q.g=_),H&&Jd(q,H),I&&(q.l=I),M=q}return I=p.D,_=p.ya,I&&_&&ut(M,I,_),ut(M,"VER",p.la),Uc(p,M),M}function R2(p,_,I){if(_&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=p.Ca&&!p.pa?new St(new tf({eb:I})):new St(p.pa),_.Ha(p.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function P2(){}t=P2.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function lf(){}lf.prototype.g=function(p,_){return new ur(p,_)};function ur(p,_){xn.call(this),this.g=new w2(_),this.l=p,this.h=_&&_.messageUrlParams||null,p=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(p?p["X-WebChannel-Content-Type"]=_.messageContentType:p={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(p?p["X-WebChannel-Client-Profile"]=_.va:p={"X-WebChannel-Client-Profile":_.va}),this.g.S=p,(p=_&&_.Sb)&&!w(p)&&(this.g.m=p),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!w(_)&&(this.g.D=_,p=this.h,p!==null&&_ in p&&(p=this.h,_ in p&&delete p[_])),this.j=new La(this)}g(ur,xn),ur.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ur.prototype.close=function(){im(this.g)},ur.prototype.o=function(p){var _=this.g;if(typeof p=="string"){var I={};I.__data__=p,p=I}else this.u&&(I={},I.__data__=G0(p),p=I);_.i.push(new H8(_.Ya++,p)),_.G==3&&sf(_)},ur.prototype.N=function(){this.g.l=null,delete this.j,im(this.g),delete this.g,ur.aa.N.call(this)};function D2(p){K0.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var _=p.__sm__;if(_){e:{for(const I in _){p=I;break e}p=void 0}(this.i=p)&&(p=this.i,_=_!==null&&p in _?_[p]:void 0),this.data=_}else this.data=p}g(D2,K0);function O2(){X0.call(this),this.status=1}g(O2,X0);function La(p){this.g=p}g(La,P2),La.prototype.ua=function(){Ln(this.g,"a")},La.prototype.ta=function(p){Ln(this.g,new D2(p))},La.prototype.sa=function(p){Ln(this.g,new O2)},La.prototype.ra=function(){Ln(this.g,"b")},lf.prototype.createWebChannel=lf.prototype.g,ur.prototype.send=ur.prototype.o,ur.prototype.open=ur.prototype.m,ur.prototype.close=ur.prototype.close,mT=function(){return new lf},pT=function(){return Kd()},hT=Os,B1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Xd.NO_ERROR=0,Xd.TIMEOUT=8,Xd.HTTP_ERROR=6,hh=Xd,Xw.COMPLETE="complete",fT=Xw,Hw.EventType=Rc,Rc.OPEN="a",Rc.CLOSE="b",Rc.ERROR="c",Rc.MESSAGE="d",xn.prototype.listen=xn.prototype.K,au=Hw,St.prototype.listenOnce=St.prototype.L,St.prototype.getLastError=St.prototype.Ka,St.prototype.getLastErrorCode=St.prototype.Ba,St.prototype.getStatus=St.prototype.Z,St.prototype.getResponseJson=St.prototype.Oa,St.prototype.getResponseText=St.prototype.oa,St.prototype.send=St.prototype.ea,St.prototype.setWithCredentials=St.prototype.Ha,dT=St}).apply(typeof Pf<"u"?Pf:typeof self<"u"?self:typeof window<"u"?window:{});const qE="@firebase/firestore",KE="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yc="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wa=new Wy("@firebase/firestore");function Ha(){return wa.logLevel}function ce(t,...e){if(wa.logLevel<=Be.DEBUG){const n=e.map(ix);wa.debug(`Firestore (${yc}): ${t}`,...n)}}function ao(t,...e){if(wa.logLevel<=Be.ERROR){const n=e.map(ix);wa.error(`Firestore (${yc}): ${t}`,...n)}}function ps(t,...e){if(wa.logLevel<=Be.WARN){const n=e.map(ix);wa.warn(`Firestore (${yc}): ${t}`,...n)}}function ix(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,gT(t,r,n)}function gT(t,e,n){let r=`FIRESTORE (${yc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw ao(r),new Error(r)}function nt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||gT(e,i,r)}function Re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Fi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(In.UNAUTHENTICATED))}shutdown(){}}class FL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class BL{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){nt(this.o===void 0,42304);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let o=new ss;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ss,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ss)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nt(typeof r.accessToken=="string",31837,{l:r}),new vT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return nt(e===null||typeof e=="string",2055,{h:e}),new In(e)}}class VL{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=In.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class UL{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new VL(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(In.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class XE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $L{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,pr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){nt(this.o===void 0,3512);const r=o=>{o.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.m;return this.m=o.token,ce("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?i(o):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new XE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(nt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new XE(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=zL(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}}function Me(t,e){return t<e?-1:t>e?1:0}function V1(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=t.codePointAt(n),i=e.codePointAt(n);if(r!==i){if(r<128&&i<128)return Me(r,i);{const o=yT(),s=HL(o.encode(QE(t,n)),o.encode(QE(e,n)));return s!==0?s:Me(r,i)}}n+=r>65535?2:1}return Me(t.length,e.length)}function QE(t,e){return t.codePointAt(e)>65535?t.substring(e,e+2):t.substring(e,e+1)}function HL(t,e){for(let n=0;n<t.length&&n<e.length;++n)if(t[n]!==e[n])return Me(t[n],e[n]);return Me(t.length,e.length)}function Jl(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="__name__";class fi{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ce(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&Ce(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return fi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof fi?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=fi.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return Me(e.length,n.length)}static compareSegments(e,n){const r=fi.isNumericId(e),i=fi.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?fi.extractNumericId(e).compare(fi.extractNumericId(n)):V1(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return os.fromString(e.substring(4,e.length-2))}}class gt extends fi{construct(e,n,r){return new gt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(J.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new gt(n)}static emptyPath(){return new gt([])}}const WL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends fi{construct(e,n,r){return new fn(e,n,r)}static isValidIdentifier(e){return WL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===YE}static keyField(){return new fn([YE])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new pe(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new pe(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new pe(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new pe(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(n)}static emptyPath(){return new fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(gt.fromString(e))}static fromName(e){return new ye(gt.fromString(e).popFirst(5))}static empty(){return new ye(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return gt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new gt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(t,e,n){if(!n)throw new pe(J.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function GL(t,e,n,r){if(e===!0&&r===!0)throw new pe(J.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ZE(t){if(!ye.isDocumentKey(t))throw new pe(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function JE(t){if(ye.isDocumentKey(t))throw new pe(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function wT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function sx(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ce(12329,{type:typeof t})}function ec(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new pe(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sx(t);throw new pe(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t,e){const n={typeString:t};return e&&(n.value=e),n}function kd(t,e){if(!wT(t))throw new pe(J.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new pe(J.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=-62135596800,tC=1e6;class vt{static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*tC);return new vt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new pe(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new pe(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<eC)throw new pe(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tC}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:vt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(kd(e,vt._jsonSchema))return new vt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-eC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}vt._jsonSchemaVersion="firestore/timestamp/1.0",vt._jsonSchema={type:jt("string",vt._jsonSchemaVersion),seconds:jt("number"),nanoseconds:jt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new vt(0,0))}static max(){return new Ne(new vt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id=-1;function qL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Ne.fromTimestamp(r===1e9?new vt(n+1,0):new vt(n,r));return new ms(i,ye.empty(),e)}function KL(t){return new ms(t.readTime,t.key,id)}class ms{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ms(Ne.min(),ye.empty(),id)}static max(){return new ms(Ne.max(),ye.empty(),id)}}function XL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ye.comparator(t.documentKey,e.documentKey),n!==0?n:Me(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xc(t){if(t.code!==J.FAILED_PRECONDITION||t.message!==QL)throw t;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Z((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Z?n:Z.resolve(n)}catch(n){return Z.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Z.reject(n)}static resolve(e){return new Z((n,r)=>{n(e)})}static reject(e){return new Z((n,r)=>{r(e)})}static waitFor(e){return new Z((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(e){let n=Z.resolve(!1);for(const r of e)n=n.next(i=>i?Z.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new Z((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let l=0;l<o;l++){const u=l;n(e[u]).next(d=>{s[u]=d,++a,a===o&&r(s)},d=>i(d))}})}static doWhile(e,n){return new Z((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function ZL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function wc(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this._e(r),this.ae=r=>n.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}i0.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=-1;function o0(t){return t==null}function dp(t){return t===0&&1/t==-1/0}function JL(t){return typeof t=="number"&&Number.isInteger(t)&&!dp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _T="";function eF(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=nC(e)),e=tF(t.get(n),e);return nC(e)}function tF(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case _T:n+="";break;default:n+=o}}return n}function nC(t){return t+_T+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ta(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function ET(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,n){this.comparator=e,this.root=n||dn.EMPTY}insert(e,n){return new At(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,dn.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,dn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Df(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Df(this.root,e,this.comparator,!1)}getReverseIterator(){return new Df(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Df(this.root,e,this.comparator,!0)}}class Df{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class dn{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??dn.RED,this.left=i??dn.EMPTY,this.right=o??dn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new dn(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return dn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return dn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,dn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,dn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}dn.EMPTY=null,dn.RED=!0,dn.BLACK=!1;dn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new dn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new iC(this.data.getIterator())}getIteratorFrom(e){return new iC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Qt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Qt(this.comparator);return n.data=e,n}}class iC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e){this.fields=e,e.sort(fn.comparator)}static empty(){return new ei([])}unionWith(e){let n=new Qt(fn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ei(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new CT("Invalid base64 string: "+o):o}}(e);return new yn(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new yn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yn.EMPTY_BYTE_STRING=new yn("");const nF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gs(t){if(nt(!!t,39018),typeof t=="string"){let e=0;const n=nF.exec(t);if(nt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pt(t.seconds),nanos:Pt(t.nanos)}}function Pt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vs(t){return typeof t=="string"?yn.fromBase64String(t):yn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT="server_timestamp",AT="__type__",ST="__previous_value__",IT="__local_write_time__";function lx(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[AT])===null||n===void 0?void 0:n.stringValue)===bT}function s0(t){const e=t.mapValue.fields[ST];return lx(e)?s0(e):e}function od(t){const e=gs(t.mapValue.fields[IT].timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF{constructor(e,n,r,i,o,s,a,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const fp="(default)";class sd{constructor(e,n){this.projectId=e,this.database=n||fp}static empty(){return new sd("","")}get isDefaultDatabase(){return this.database===fp}isEqual(e){return e instanceof sd&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT="__type__",TT="__max__",Of={mapValue:{fields:{__type__:{stringValue:TT}}}},RT="__vector__",hp="value";function ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?lx(t)?4:oF(t)?9007199254740991:iF(t)?10:11:Ce(28295,{value:t})}function ki(t,e){if(t===e)return!0;const n=ys(t);if(n!==ys(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return od(t).isEqual(od(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=gs(i.timestampValue),a=gs(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return vs(i.bytesValue).isEqual(vs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return Pt(i.geoPointValue.latitude)===Pt(o.geoPointValue.latitude)&&Pt(i.geoPointValue.longitude)===Pt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Pt(i.integerValue)===Pt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Pt(i.doubleValue),a=Pt(o.doubleValue);return s===a?dp(s)===dp(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return Jl(t.arrayValue.values||[],e.arrayValue.values||[],ki);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(rC(s)!==rC(a))return!1;for(const l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!ki(s[l],a[l])))return!1;return!0}(t,e);default:return Ce(52216,{left:t})}}function ad(t,e){return(t.values||[]).find(n=>ki(n,e))!==void 0}function tc(t,e){if(t===e)return 0;const n=ys(t),r=ys(e);if(n!==r)return Me(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Me(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=Pt(o.integerValue||o.doubleValue),l=Pt(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return oC(t.timestampValue,e.timestampValue);case 4:return oC(od(t),od(e));case 5:return V1(t.stringValue,e.stringValue);case 6:return function(o,s){const a=vs(o),l=vs(s);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),l=s.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=Me(a[u],l[u]);if(d!==0)return d}return Me(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=Me(Pt(o.latitude),Pt(s.latitude));return a!==0?a:Me(Pt(o.longitude),Pt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return sC(t.arrayValue,e.arrayValue);case 10:return function(o,s){var a,l,u,d;const f=o.fields||{},h=s.fields||{},m=(a=f[hp])===null||a===void 0?void 0:a.arrayValue,g=(l=h[hp])===null||l===void 0?void 0:l.arrayValue,v=Me(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((d=g==null?void 0:g.values)===null||d===void 0?void 0:d.length)||0);return v!==0?v:sC(m,g)}(t.mapValue,e.mapValue);case 11:return function(o,s){if(o===Of.mapValue&&s===Of.mapValue)return 0;if(o===Of.mapValue)return 1;if(s===Of.mapValue)return-1;const a=o.fields||{},l=Object.keys(a),u=s.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let f=0;f<l.length&&f<d.length;++f){const h=V1(l[f],d[f]);if(h!==0)return h;const m=tc(a[l[f]],u[d[f]]);if(m!==0)return m}return Me(l.length,d.length)}(t.mapValue,e.mapValue);default:throw Ce(23264,{le:n})}}function oC(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Me(t,e);const n=gs(t),r=gs(e),i=Me(n.seconds,r.seconds);return i!==0?i:Me(n.nanos,r.nanos)}function sC(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=tc(n[i],r[i]);if(o)return o}return Me(n.length,r.length)}function nc(t){return U1(t)}function U1(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=gs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return vs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ye.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=U1(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${U1(n.fields[s])}`;return i+"}"}(t.mapValue):Ce(61005,{value:t})}function ph(t){switch(ys(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=s0(t);return e?16+ph(e):16;case 5:return 2*t.stringValue.length;case 6:return vs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+ph(o),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Ta(r.fields,(o,s)=>{i+=o.length+ph(s)}),i}(t.mapValue);default:throw Ce(13486,{value:t})}}function $1(t){return!!t&&"integerValue"in t}function cx(t){return!!t&&"arrayValue"in t}function aC(t){return!!t&&"nullValue"in t}function lC(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function mh(t){return!!t&&"mapValue"in t}function iF(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[NT])===null||n===void 0?void 0:n.stringValue)===RT}function Tu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ta(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Tu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Tu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function oF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===TT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this.value=e}static empty(){return new Nr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!mh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tu(n)}setAll(e){let n=fn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=Tu(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());mh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ki(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];mh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Ta(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Nr(Tu(this.value))}}function PT(t){const e=[];return Ta(t.fields,(n,r)=>{const i=new fn([n]);if(mh(r)){const o=PT(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new ei(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Pn(e,0,Ne.min(),Ne.min(),Ne.min(),Nr.empty(),0)}static newFoundDocument(e,n,r,i){return new Pn(e,1,n,Ne.min(),r,i,0)}static newNoDocument(e,n){return new Pn(e,2,n,Ne.min(),Ne.min(),Nr.empty(),0)}static newUnknownDocument(e,n){return new Pn(e,3,n,Ne.min(),Ne.min(),Nr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(e,n){this.position=e,this.inclusive=n}}function cC(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=ye.comparator(ye.fromName(s.referenceValue),n.key):r=tc(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function uC(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ki(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n="asc"){this.field=e,this.dir=n}}function sF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{}class Wt extends DT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lF(e,n,r):n==="array-contains"?new dF(e,r):n==="in"?new fF(e,r):n==="not-in"?new hF(e,r):n==="array-contains-any"?new pF(e,r):new Wt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cF(e,r):new uF(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(tc(n,this.value)):n!==null&&ys(this.value)===ys(n)&&this.matchesComparison(tc(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Mi extends DT{constructor(e,n){super(),this.filters=e,this.op=n,this.he=null}static create(e,n){return new Mi(e,n)}matches(e){return OT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function OT(t){return t.op==="and"}function kT(t){return aF(t)&&OT(t)}function aF(t){for(const e of t.filters)if(e instanceof Mi)return!1;return!0}function z1(t){if(t instanceof Wt)return t.field.canonicalString()+t.op.toString()+nc(t.value);if(kT(t))return t.filters.map(e=>z1(e)).join(",");{const e=t.filters.map(n=>z1(n)).join(",");return`${t.op}(${e})`}}function MT(t,e){return t instanceof Wt?function(r,i){return i instanceof Wt&&r.op===i.op&&r.field.isEqual(i.field)&&ki(r.value,i.value)}(t,e):t instanceof Mi?function(r,i){return i instanceof Mi&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&MT(s,i.filters[a]),!0):!1}(t,e):void Ce(19439)}function jT(t){return t instanceof Wt?function(n){return`${n.field.canonicalString()} ${n.op} ${nc(n.value)}`}(t):t instanceof Mi?function(n){return n.op.toString()+" {"+n.getFilters().map(jT).join(" ,")+"}"}(t):"Filter"}class lF extends Wt{constructor(e,n,r){super(e,n,r),this.key=ye.fromName(r.referenceValue)}matches(e){const n=ye.comparator(e.key,this.key);return this.matchesComparison(n)}}class cF extends Wt{constructor(e,n){super(e,"in",n),this.keys=LT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uF extends Wt{constructor(e,n){super(e,"not-in",n),this.keys=LT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function LT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ye.fromName(r.referenceValue))}class dF extends Wt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return cx(n)&&ad(n.arrayValue,this.value)}}class fF extends Wt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ad(this.value.arrayValue,n)}}class hF extends Wt{constructor(e,n){super(e,"not-in",n)}matches(e){if(ad(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ad(this.value.arrayValue,n)}}class pF extends Wt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!cx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ad(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Pe=null}}function dC(t,e=null,n=[],r=[],i=null,o=null,s=null){return new mF(t,e,n,r,i,o,s)}function ux(t){const e=Re(t);if(e.Pe===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>z1(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),o0(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>nc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>nc(r)).join(",")),e.Pe=n}return e.Pe}function dx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!sF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!MT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!uC(t.startAt,e.startAt)&&uC(t.endAt,e.endAt)}function H1(t){return ye.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function gF(t,e,n,r,i,o,s,a){return new a0(t,e,n,r,i,o,s,a)}function fx(t){return new a0(t)}function fC(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vF(t){return t.collectionGroup!==null}function Ru(t){const e=Re(t);if(e.Te===null){e.Te=[];const n=new Set;for(const o of e.explicitOrderBy)e.Te.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Qt(fn.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Te.push(new mp(o,r))}),n.has(fn.keyField().canonicalString())||e.Te.push(new mp(fn.keyField(),r))}return e.Te}function Ii(t){const e=Re(t);return e.Ie||(e.Ie=yF(e,Ru(t))),e.Ie}function yF(t,e){if(t.limitType==="F")return dC(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new mp(i.field,o)});const n=t.endAt?new pp(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new pp(t.startAt.position,t.startAt.inclusive):null;return dC(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function W1(t,e,n){return new a0(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function l0(t,e){return dx(Ii(t),Ii(e))&&t.limitType===e.limitType}function FT(t){return`${ux(Ii(t))}|lt:${t.limitType}`}function Wa(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>jT(i)).join(", ")}]`),o0(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>nc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>nc(i)).join(",")),`Target(${r})`}(Ii(t))}; limitType=${t.limitType})`}function c0(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ye.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Ru(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,l){const u=cC(s,a,l);return s.inclusive?u<=0:u<0}(r.startAt,Ru(r),i)||r.endAt&&!function(s,a,l){const u=cC(s,a,l);return s.inclusive?u>=0:u>0}(r.endAt,Ru(r),i))}(t,e)}function xF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function BT(t){return(e,n)=>{let r=!1;for(const i of Ru(t)){const o=wF(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function wF(t,e,n){const r=t.field.isKeyField()?ye.comparator(e.key,n.key):function(o,s,a){const l=s.data.field(o),u=a.data.field(o);return l!==null&&u!==null?tc(l,u):Ce(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ce(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ta(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return ET(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F=new At(ye.comparator);function lo(){return _F}const VT=new At(ye.comparator);function lu(...t){let e=VT;for(const n of t)e=e.insert(n.key,n);return e}function UT(t){let e=VT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ks(){return Pu()}function $T(){return Pu()}function Pu(){return new Ra(t=>t.toString(),(t,e)=>t.isEqual(e))}const EF=new At(ye.comparator),CF=new Qt(ye.comparator);function Ve(...t){let e=CF;for(const n of t)e=e.add(n);return e}const bF=new Qt(Me);function AF(){return bF}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:dp(e)?"-0":e}}function zT(t){return{integerValue:""+t}}function SF(t,e){return JL(e)?zT(e):hx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u0{constructor(){this._=void 0}}function IF(t,e,n){return t instanceof ld?function(i,o){const s={fields:{[AT]:{stringValue:bT},[IT]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&lx(o)&&(o=s0(o)),o&&(s.fields[ST]=o),{mapValue:s}}(n,e):t instanceof cd?WT(t,e):t instanceof ud?GT(t,e):function(i,o){const s=HT(i,o),a=hC(s)+hC(i.Ee);return $1(s)&&$1(i.Ee)?zT(a):hx(i.serializer,a)}(t,e)}function NF(t,e,n){return t instanceof cd?WT(t,e):t instanceof ud?GT(t,e):n}function HT(t,e){return t instanceof gp?function(r){return $1(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class ld extends u0{}class cd extends u0{constructor(e){super(),this.elements=e}}function WT(t,e){const n=qT(e);for(const r of t.elements)n.some(i=>ki(i,r))||n.push(r);return{arrayValue:{values:n}}}class ud extends u0{constructor(e){super(),this.elements=e}}function GT(t,e){let n=qT(e);for(const r of t.elements)n=n.filter(i=>!ki(i,r));return{arrayValue:{values:n}}}class gp extends u0{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function hC(t){return Pt(t.integerValue||t.doubleValue)}function qT(t){return cx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(e,n){this.field=e,this.transform=n}}function RF(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof cd&&i instanceof cd||r instanceof ud&&i instanceof ud?Jl(r.elements,i.elements,ki):r instanceof gp&&i instanceof gp?ki(r.Ee,i.Ee):r instanceof ld&&i instanceof ld}(t.transform,e.transform)}class PF{constructor(e,n){this.version=e,this.transformResults=n}}class Ni{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ni}static exists(e){return new Ni(void 0,e)}static updateTime(e){return new Ni(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class d0{}function KT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new QT(t.key,Ni.none()):new Md(t.key,t.data,Ni.none());{const n=t.data,r=Nr.empty();let i=new Qt(fn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Pa(t.key,r,new ei(i.toArray()),Ni.none())}}function DF(t,e,n){t instanceof Md?function(i,o,s){const a=i.value.clone(),l=mC(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Pa?function(i,o,s){if(!gh(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=mC(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(XT(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Du(t,e,n,r){return t instanceof Md?function(o,s,a,l){if(!gh(o.precondition,s))return a;const u=o.value.clone(),d=gC(o.fieldTransforms,l,s);return u.setAll(d),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Pa?function(o,s,a,l){if(!gh(o.precondition,s))return a;const u=gC(o.fieldTransforms,l,s),d=s.data;return d.setAll(XT(o)),d.setAll(u),s.convertToFoundDocument(s.version,d).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(o,s,a){return gh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function OF(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=HT(r.transform,i||null);o!=null&&(n===null&&(n=Nr.empty()),n.set(r.field,o))}return n||null}function pC(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Jl(r,i,(o,s)=>RF(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Md extends d0{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Pa extends d0{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function XT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function mC(t,e,n){const r=new Map;nt(t.length===n.length,32656,{Ae:n.length,Re:t.length});for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,NF(s,a,n[i]))}return r}function gC(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,IF(o,s,e))}return r}class QT extends d0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kF extends d0{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&DF(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Du(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Du(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=$T();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const l=KT(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(Ne.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ve())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,(n,r)=>pC(n,r))&&Jl(this.baseMutations,e.baseMutations,(n,r)=>pC(n,r))}}class px{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){nt(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let i=function(){return EF}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new px(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jF=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot,ze;function FF(t){switch(t){case J.OK:return Ce(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return Ce(15467,{code:t})}}function YT(t){if(t===void 0)return ao("GRPC error has no .code"),J.UNKNOWN;switch(t){case Ot.OK:return J.OK;case Ot.CANCELLED:return J.CANCELLED;case Ot.UNKNOWN:return J.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return J.INTERNAL;case Ot.UNAVAILABLE:return J.UNAVAILABLE;case Ot.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Ot.NOT_FOUND:return J.NOT_FOUND;case Ot.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Ot.ABORTED:return J.ABORTED;case Ot.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Ot.DATA_LOSS:return J.DATA_LOSS;default:return Ce(39323,{code:t})}}(ze=Ot||(Ot={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BF=new os([4294967295,4294967295],0);function vC(t){const e=yT().encode(t),n=new uT;return n.update(e),new Uint8Array(n.digest())}function yC(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new os([n,r],0),new os([i,o],0)]}class mx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new cu(`Invalid padding: ${n}`);if(r<0)throw new cu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new cu(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new cu(`Invalid padding when bitmap length is 0: ${n}`);this.fe=8*e.length-n,this.ge=os.fromNumber(this.fe)}pe(e,n,r){let i=e.add(n.multiply(os.fromNumber(r)));return i.compare(BF)===1&&(i=new os([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const n=vC(e),[r,i]=yC(n);for(let o=0;o<this.hashCount;o++){const s=this.pe(r,i,o);if(!this.ye(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new mx(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.fe===0)return;const n=vC(e),[r,i]=yC(n);for(let o=0;o<this.hashCount;o++){const s=this.pe(r,i,o);this.we(s)}}we(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class cu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,jd.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new f0(Ne.min(),i,new At(Me),lo(),Ve())}}class jd{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new jd(r,n,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vh{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.be=i}}class ZT{constructor(e,n){this.targetId=e,this.De=n}}class JT{constructor(e,n,r=yn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class xC{constructor(){this.ve=0,this.Ce=wC(),this.Fe=yn.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ve(),n=Ve(),r=Ve();return this.Ce.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Ce(38017,{changeType:o})}}),new jd(this.Fe,this.Me,e,n,r)}ke(){this.xe=!1,this.Ce=wC()}qe(e,n){this.xe=!0,this.Ce=this.Ce.insert(e,n)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,nt(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class VF{constructor(e){this.We=e,this.Ge=new Map,this.ze=lo(),this.je=kf(),this.Je=kf(),this.He=new At(Me)}Ye(e){for(const n of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(n,e.be):this.Xe(n,e.key,e.be);for(const n of e.removedTargetIds)this.Xe(n,e.key,e.be)}et(e){this.forEachTarget(e,n=>{const r=this.tt(n);switch(e.state){case 0:this.nt(n)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(n);break;case 3:this.nt(n)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(n)&&(this.rt(n),r.Be(e.resumeToken));break;default:Ce(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ge.forEach((r,i)=>{this.nt(i)&&n(i)})}it(e){const n=e.targetId,r=e.De.count,i=this.st(n);if(i){const o=i.target;if(H1(o))if(r===0){const s=new ye(o.path);this.Xe(n,s,Pn.newNoDocument(s,Ne.min()))}else nt(r===1,20013,{expectedCount:r});else{const s=this.ot(n);if(s!==r){const a=this._t(e),l=a?this.ut(a,e,s):1;if(l!==0){this.rt(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(n,u)}}}}}_t(e){const n=e.De.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=vs(r).toUint8Array()}catch(l){if(l instanceof CT)return ps("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new mx(s,i,o)}catch(l){return ps(l instanceof cu?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.fe===0?null:a}ut(e,n,r){return n.De.count===r-this.ht(e,n.targetId)?0:2}ht(e,n){const r=this.We.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.We.lt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Xe(n,o,null),i++)}),i}Pt(e){const n=new Map;this.Ge.forEach((o,s)=>{const a=this.st(s);if(a){if(o.current&&H1(a.target)){const l=new ye(a.target.path);this.Tt(l).has(s)||this.It(s,l)||this.Xe(s,l,Pn.newNoDocument(l,e))}o.Ne&&(n.set(s,o.Le()),o.ke())}});let r=Ve();this.Je.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{const u=this.st(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ze.forEach((o,s)=>s.setReadTime(e));const i=new f0(e,n,this.He,this.ze,r);return this.ze=lo(),this.je=kf(),this.Je=kf(),this.He=new At(Me),i}Ze(e,n){if(!this.nt(e))return;const r=this.It(e,n.key)?2:0;this.tt(e).qe(n.key,r),this.ze=this.ze.insert(n.key,n),this.je=this.je.insert(n.key,this.Tt(n.key).add(e)),this.Je=this.Je.insert(n.key,this.dt(n.key).add(e))}Xe(e,n,r){if(!this.nt(e))return;const i=this.tt(e);this.It(e,n)?i.qe(n,1):i.Qe(n),this.Je=this.Je.insert(n,this.dt(n).delete(e)),this.Je=this.Je.insert(n,this.dt(n).add(e)),r&&(this.ze=this.ze.insert(n,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const n=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let n=this.Ge.get(e);return n||(n=new xC,this.Ge.set(e,n)),n}dt(e){let n=this.Je.get(e);return n||(n=new Qt(Me),this.Je=this.Je.insert(e,n)),n}Tt(e){let n=this.je.get(e);return n||(n=new Qt(Me),this.je=this.je.insert(e,n)),n}nt(e){const n=this.st(e)!==null;return n||ce("WatchChangeAggregator","Detected inactive target",e),n}st(e){const n=this.Ge.get(e);return n&&n.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new xC),this.We.getRemoteKeysForTarget(e).forEach(n=>{this.Xe(e,n,null)})}It(e,n){return this.We.getRemoteKeysForTarget(e).has(n)}}function kf(){return new At(ye.comparator)}function wC(){return new At(ye.comparator)}const UF={asc:"ASCENDING",desc:"DESCENDING"},$F={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zF={and:"AND",or:"OR"};class HF{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function G1(t,e){return t.useProto3Json||o0(e)?e:{value:e}}function vp(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function e3(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function WF(t,e){return vp(t,e.toTimestamp())}function Ti(t){return nt(!!t,49232),Ne.fromTimestamp(function(n){const r=gs(n);return new vt(r.seconds,r.nanos)}(t))}function gx(t,e){return q1(t,e).canonicalString()}function q1(t,e){const n=function(i){return new gt(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function t3(t){const e=gt.fromString(t);return nt(s3(e),10190,{key:e.toString()}),e}function K1(t,e){return gx(t.databaseId,e.path)}function Gm(t,e){const n=t3(e);if(n.get(1)!==t.databaseId.projectId)throw new pe(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new pe(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ye(r3(n))}function n3(t,e){return gx(t.databaseId,e)}function GF(t){const e=t3(t);return e.length===4?gt.emptyPath():r3(e)}function X1(t){return new gt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function r3(t){return nt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function _C(t,e,n){return{name:K1(t,e),fields:n.value.mapValue.fields}}function qF(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:Ce(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(nt(d===void 0||typeof d=="string",58123),yn.fromBase64String(d||"")):(nt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),yn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){const d=u.code===void 0?J.UNKNOWN:YT(u.code);return new pe(d,u.message||"")}(s);n=new JT(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Gm(t,r.document.name),o=Ti(r.document.updateTime),s=r.document.createTime?Ti(r.document.createTime):Ne.min(),a=new Nr({mapValue:{fields:r.document.fields}}),l=Pn.newFoundDocument(i,o,s,a),u=r.targetIds||[],d=r.removedTargetIds||[];n=new vh(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Gm(t,r.document),o=r.readTime?Ti(r.readTime):Ne.min(),s=Pn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new vh([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Gm(t,r.document),o=r.removedTargetIds||[];n=new vh([],o,i,null)}else{if(!("filter"in e))return Ce(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new LF(i,o),a=r.targetId;n=new ZT(a,s)}}return n}function KF(t,e){let n;if(e instanceof Md)n={update:_C(t,e.key,e.value)};else if(e instanceof QT)n={delete:K1(t,e.key)};else if(e instanceof Pa)n={update:_C(t,e.key,e.data),updateMask:rB(e.fieldMask)};else{if(!(e instanceof kF))return Ce(16599,{Rt:e.type});n={verify:K1(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof ld)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof cd)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ud)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gp)return{fieldPath:s.field.canonicalString(),increment:a.Ee};throw Ce(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:WF(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ce(27497)}(t,e.precondition)),n}function XF(t,e){return t&&t.length>0?(nt(e!==void 0,14353),t.map(n=>function(i,o){let s=i.updateTime?Ti(i.updateTime):Ti(o);return s.isEqual(Ne.min())&&(s=Ti(o)),new PF(s,i.transformResults||[])}(n,e))):[]}function QF(t,e){return{documents:[n3(t,e.path)]}}function YF(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=n3(t,i);const o=function(u){if(u.length!==0)return o3(Mi.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(u){if(u.length!==0)return u.map(d=>function(h){return{field:Ga(h.field),direction:eB(h.dir)}}(d))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=G1(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{Vt:n,parent:i}}function ZF(t){let e=GF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){nt(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(f){const h=i3(f);return h instanceof Mi&&kT(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(f){return f.map(h=>function(g){return new mp(qa(g.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(f){let h;return h=typeof f=="object"?f.value:f,o0(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(f){const h=!!f.before,m=f.values||[];return new pp(m,h)}(n.startAt));let u=null;return n.endAt&&(u=function(f){const h=!f.before,m=f.values||[];return new pp(m,h)}(n.endAt)),gF(e,i,s,o,a,"F",l,u)}function JF(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function i3(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=qa(n.unaryFilter.field);return Wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=qa(n.unaryFilter.field);return Wt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=qa(n.unaryFilter.field);return Wt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=qa(n.unaryFilter.field);return Wt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}}(t):t.fieldFilter!==void 0?function(n){return Wt.create(qa(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Mi.create(n.compositeFilter.filters.map(r=>i3(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}}(n.compositeFilter.op))}(t):Ce(30097,{filter:t})}function eB(t){return UF[t]}function tB(t){return $F[t]}function nB(t){return zF[t]}function Ga(t){return{fieldPath:t.canonicalString()}}function qa(t){return fn.fromServerFormat(t.fieldPath)}function o3(t){return t instanceof Wt?function(n){if(n.op==="=="){if(lC(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NAN"}};if(aC(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(lC(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NOT_NAN"}};if(aC(n.value))return{unaryFilter:{field:Ga(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ga(n.field),op:tB(n.op),value:n.value}}}(t):t instanceof Mi?function(n){const r=n.getFilters().map(i=>o3(i));return r.length===1?r[0]:{compositeFilter:{op:nB(n.op),filters:r}}}(t):Ce(54877,{filter:t})}function rB(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function s3(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(e,n,r,i,o=Ne.min(),s=Ne.min(),a=yn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Go(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Go(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Go(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Go(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e){this.gt=e}}function oB(t){const e=ZF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?W1(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sB{constructor(){this.Dn=new aB}addToCollectionParentIndex(e,n){return this.Dn.add(n),Z.resolve()}getCollectionParents(e,n){return Z.resolve(this.Dn.getEntries(n))}addFieldIndex(e,n){return Z.resolve()}deleteFieldIndex(e,n){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,n){return Z.resolve()}getDocumentsMatchingTarget(e,n){return Z.resolve(null)}getIndexType(e,n){return Z.resolve(0)}getFieldIndexes(e,n){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,n){return Z.resolve(ms.min())}getMinOffsetFromCollectionGroup(e,n){return Z.resolve(ms.min())}updateCollectionGroup(e,n,r){return Z.resolve()}updateIndexEntries(e,n){return Z.resolve()}}class aB{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Qt(gt.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Qt(gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},a3=41943040;class tr{static withCacheSize(e){return new tr(e,tr.DEFAULT_COLLECTION_PERCENTILE,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tr.DEFAULT_COLLECTION_PERCENTILE=10,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tr.DEFAULT=new tr(a3,tr.DEFAULT_COLLECTION_PERCENTILE,tr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tr.DISABLED=new tr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new rc(0)}static ur(){return new rc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC="LruGarbageCollector",lB=1048576;function bC([t,e],[n,r]){const i=Me(t,n);return i===0?Me(e,r):i}class cB{constructor(e){this.Tr=e,this.buffer=new Qt(bC),this.Ir=0}dr(){return++this.Ir}Er(e){const n=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();bC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class uB{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ce(CC,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){wc(n)?ce(CC,"Ignoring IndexedDB error during garbage collection: ",n):await xc(n)}await this.Rr(3e5)})}}class dB{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.mr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return Z.resolve(i0.ue);const r=new cB(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.gr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(EC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),EC):this.pr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,n){let r,i,o,s,a,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,s=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(o=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(u=Date.now(),Ha()<=Be.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-d}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:f})))}}function fB(t,e){return new dB(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(){this.changes=new Ra(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Z.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pB{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mB{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Du(r.mutation,i,ei.empty(),vt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ve()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ve()){const i=Ks();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=lu();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Ks();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ve()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=lo();const s=Pu(),a=function(){return Pu()}();return n.forEach((l,u)=>{const d=r.get(u.key);i.has(u.key)&&(d===void 0||d.mutation instanceof Pa)?o=o.insert(u.key,u):d!==void 0?(s.set(u.key,d.mutation.getFieldMask()),Du(d.mutation,u,d.mutation.getFieldMask(),vt.now())):s.set(u.key,ei.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((u,d)=>s.set(u,d)),n.forEach((u,d)=>{var f;return a.set(u,new pB(d,(f=s.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Pu();let i=new At((s,a)=>s-a),o=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let d=r.get(l)||ei.empty();d=a.applyToLocalView(u,d),r.set(l,d);const f=(i.get(a.batchId)||Ve()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,f=$T();d.forEach(h=>{if(!o.has(h)){const m=KT(n.get(h),r.get(h));m!==null&&f.set(h,m),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,f))}return Z.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return ye.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vF(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):Z.resolve(Ks());let a=id,l=o;return s.next(u=>Z.forEach(u,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),o.get(d)?Z.resolve():this.remoteDocumentCache.getEntry(e,d).next(h=>{l=l.insert(d,h)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,l,u,Ve())).next(d=>({batchId:a,changes:UT(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ye(n)).next(r=>{let i=lu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=lu();return this.indexManager.getCollectionParents(e,o).next(a=>Z.forEach(a,l=>{const u=function(f,h){return new a0(h,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(d=>{d.forEach((f,h)=>{s=s.insert(f,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((l,u)=>{const d=u.getKey();s.get(d)===null&&(s=s.insert(d,Pn.newInvalidDocument(d)))});let a=lu();return s.forEach((l,u)=>{const d=o.get(l);d!==void 0&&Du(d.mutation,u,ei.empty(),vt.now()),c0(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gB{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,n){return Z.resolve(this.Br.get(n))}saveBundleMetadata(e,n){return this.Br.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ti(i.createTime)}}(n)),Z.resolve()}getNamedQuery(e,n){return Z.resolve(this.Lr.get(n))}saveNamedQuery(e,n){return this.Lr.set(n.name,function(i){return{name:i.name,query:oB(i.bundledQuery),readTime:Ti(i.readTime)}}(n)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vB{constructor(){this.overlays=new At(ye.comparator),this.kr=new Map}getOverlay(e,n){return Z.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ks();return Z.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.wt(e,n,o)}),Z.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.kr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.kr.delete(r)),Z.resolve()}getOverlaysForCollection(e,n,r){const i=Ks(),o=n.length+1,s=new ye(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return Z.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new At((u,d)=>u-d);const s=this.overlays.getIterator();for(;s.hasNext();){const u=s.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=o.get(u.largestBatchId);d===null&&(d=Ks(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=Ks(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,d)=>a.set(u,d)),!(a.size()>=i)););return Z.resolve(a)}wt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.kr.get(i.largestBatchId).delete(r.key);this.kr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new jF(n,r));let o=this.kr.get(n);o===void 0&&(o=Ve(),this.kr.set(n,o)),this.kr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yB{constructor(){this.sessionToken=yn.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(){this.qr=new Qt(tn.Qr),this.$r=new Qt(tn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,n){const r=new tn(e,n);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new tn(e,n))}Gr(e,n){e.forEach(r=>this.removeReference(r,n))}zr(e){const n=new ye(new gt([])),r=new tn(n,e),i=new tn(n,e+1),o=[];return this.$r.forEachInRange([r,i],s=>{this.Wr(s),o.push(s.key)}),o}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const n=new ye(new gt([])),r=new tn(n,e),i=new tn(n,e+1);let o=Ve();return this.$r.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new tn(e,0),r=this.qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class tn{constructor(e,n){this.key=e,this.Hr=n}static Qr(e,n){return ye.comparator(e.key,n.key)||Me(e.Hr,n.Hr)}static Ur(e,n){return Me(e.Hr,n.Hr)||ye.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xB{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.er=1,this.Yr=new Qt(tn.Qr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new MF(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.Yr=this.Yr.add(new tn(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Z.resolve(s)}lookupMutationBatch(e,n){return Z.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),o=i<0?0:i;return Z.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?ax:this.er-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new tn(n,0),i=new tn(n,Number.POSITIVE_INFINITY),o=[];return this.Yr.forEachInRange([r,i],s=>{const a=this.Zr(s.Hr);o.push(a)}),Z.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qt(Me);return n.forEach(i=>{const o=new tn(i,0),s=new tn(i,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([o,s],a=>{r=r.add(a.Hr)})}),Z.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;ye.isDocumentKey(o)||(o=o.child(""));const s=new tn(new ye(o),0);let a=new Qt(Me);return this.Yr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.Hr)),!0)},s),Z.resolve(this.ei(a))}ei(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){nt(this.ti(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return Z.forEach(n.mutations,i=>{const o=new tn(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=r})}rr(e){}containsKey(e,n){const r=new tn(n,0),i=this.Yr.firstAfterOrEqual(r);return Z.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}ti(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wB{constructor(e){this.ni=e,this.docs=function(){return new At(ye.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ni(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Z.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(n))}getEntries(e,n){let r=lo();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Pn.newInvalidDocument(i))}),Z.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=lo();const s=n.path,a=new ye(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||XL(KL(d),r)<=0||(i.has(d.key)||c0(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return Z.resolve(o)}getAllFromCollectionGroup(e,n,r,i){Ce(9500)}ri(e,n){return Z.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new _B(this)}getSize(e){return Z.resolve(this.size)}}class _B extends hB{constructor(e){super(),this.Or=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Or.addEntry(e,i)):this.Or.removeEntry(r)}),Z.waitFor(n)}getFromCache(e,n){return this.Or.getEntry(e,n)}getAllFromCache(e,n){return this.Or.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(e){this.persistence=e,this.ii=new Ra(n=>ux(n),dx),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.si=0,this.oi=new vx,this.targetCount=0,this._i=rc.ar()}forEachTarget(e,n){return this.ii.forEach((r,i)=>n(i)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.si&&(this.si=n),Z.resolve()}hr(e){this.ii.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this._i=new rc(n),this.highestTargetId=n),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,n){return this.hr(n),this.targetCount+=1,Z.resolve()}updateTargetData(e,n){return this.hr(n),Z.resolve()}removeTargetData(e,n){return this.ii.delete(n.target),this.oi.zr(n.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.ii.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),Z.waitFor(o).next(()=>i)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,n){const r=this.ii.get(n)||null;return Z.resolve(r)}addMatchingKeys(e,n,r){return this.oi.Kr(n,r),Z.resolve()}removeMatchingKeys(e,n,r){this.oi.Gr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),Z.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.oi.zr(n),Z.resolve()}getMatchingKeysForTargetId(e,n){const r=this.oi.Jr(n);return Z.resolve(r)}containsKey(e,n){return Z.resolve(this.oi.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l3{constructor(e,n){this.ai={},this.overlays={},this.ui=new i0(0),this.ci=!1,this.ci=!0,this.li=new yB,this.referenceDelegate=e(this),this.hi=new EB(this),this.indexManager=new sB,this.remoteDocumentCache=function(i){return new wB(i)}(r=>this.referenceDelegate.Pi(r)),this.serializer=new iB(n),this.Ti=new gB(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vB,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ai[e.toKey()];return r||(r=new xB(n,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,n,r){ce("MemoryPersistence","Starting transaction:",e);const i=new CB(this.ui.next());return this.referenceDelegate.Ii(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ei(e,n){return Z.or(Object.values(this.ai).map(r=>()=>r.containsKey(e,n)))}}class CB extends YL{constructor(e){super(),this.currentSequenceNumber=e}}class yx{constructor(e){this.persistence=e,this.Ai=new vx,this.Ri=null}static Vi(e){return new yx(e)}get mi(){if(this.Ri)return this.Ri;throw Ce(60996)}addReference(e,n,r){return this.Ai.addReference(r,n),this.mi.delete(r.toString()),Z.resolve()}removeReference(e,n,r){return this.Ai.removeReference(r,n),this.mi.add(r.toString()),Z.resolve()}markPotentiallyOrphaned(e,n){return this.mi.add(n.toString()),Z.resolve()}removeTarget(e,n){this.Ai.zr(n.targetId).forEach(i=>this.mi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.mi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ii(){this.Ri=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.mi,r=>{const i=ye.fromPath(r);return this.fi(e,i).next(o=>{o||n.removeEntry(i,Ne.min())})}).next(()=>(this.Ri=null,n.apply(e)))}updateLimboDocument(e,n){return this.fi(e,n).next(r=>{r?this.mi.delete(n.toString()):this.mi.add(n.toString())})}Pi(e){return 0}fi(e,n){return Z.or([()=>Z.resolve(this.Ai.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class yp{constructor(e,n){this.persistence=e,this.gi=new Ra(r=>eF(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=fB(this,n)}static Vi(e,n){return new yp(e,n)}Ii(){}di(e){return Z.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}mr(e){const n=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}yr(e){let n=0;return this.gr(e,r=>{n++}).next(()=>n)}gr(e,n){return Z.forEach(this.gi,(r,i)=>this.Sr(e,r,i).next(o=>o?Z.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ri(e,s=>this.Sr(e,s,n).next(a=>{a||(r++,o.removeEntry(s,Ne.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.gi.set(n,e.currentSequenceNumber),Z.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),Z.resolve()}removeReference(e,n,r){return this.gi.set(r,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,n){return this.gi.set(n,e.currentSequenceNumber),Z.resolve()}Pi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ph(e.data.value)),n}Sr(e,n,r){return Z.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.gi.get(n);return Z.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Is=r,this.ds=i}static Es(e,n){let r=Ve(),i=Ve();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new xx(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bB{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AB{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=function(){return yj()?8:ZL(kn())>0?6:4}()}initialize(e,n){this.gs=e,this.indexManager=n,this.As=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ps(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ys(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new bB;return this.ws(e,n,s).next(a=>{if(o.result=a,this.Rs)return this.Ss(e,n,s,a.size)})}).next(()=>o.result)}Ss(e,n,r,i){return r.documentReadCount<this.Vs?(Ha()<=Be.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Wa(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Z.resolve()):(Ha()<=Be.DEBUG&&ce("QueryEngine","Query:",Wa(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.fs*i?(Ha()<=Be.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Wa(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ii(n))):Z.resolve())}ps(e,n){if(fC(n))return Z.resolve(null);let r=Ii(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=W1(n,null,"F"),r=Ii(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Ve(...o);return this.gs.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.bs(n,a);return this.Ds(n,u,s,l.readTime)?this.ps(e,W1(n,null,"F")):this.vs(e,u,n,l)}))})))}ys(e,n,r,i){return fC(n)||i.isEqual(Ne.min())?Z.resolve(null):this.gs.getDocuments(e,r).next(o=>{const s=this.bs(n,o);return this.Ds(n,s,r,i)?Z.resolve(null):(Ha()<=Be.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Wa(n)),this.vs(e,s,n,qL(i,id)).next(a=>a))})}bs(e,n){let r=new Qt(BT(e));return n.forEach((i,o)=>{c0(e,o)&&(r=r.add(o))}),r}Ds(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ws(e,n,r){return Ha()<=Be.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Wa(n)),this.gs.getDocumentsMatchingQuery(e,n,ms.min(),r)}vs(e,n,r,i){return this.gs.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="LocalStore",SB=3e8;class IB{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.Fs=new At(Me),this.Ms=new Ra(o=>ux(o),dx),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mB(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Fs))}}function NB(t,e,n,r){return new IB(t,e,n,r)}async function c3(t,e){const n=Re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Ns(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let l=Ve();for(const u of i){s.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of o){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return n.localDocuments.getDocuments(r,l).next(u=>({Bs:u,removedBatchIds:s,addedBatchIds:a}))})})}function TB(t,e){const n=Re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.Os.newChangeBuffer({trackRemovals:!0});return function(a,l,u,d){const f=u.batch,h=f.keys();let m=Z.resolve();return h.forEach(g=>{m=m.next(()=>d.getEntry(l,g)).next(v=>{const y=u.docVersions.get(g);nt(y!==null,48541),v.version.compareTo(y)<0&&(f.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),d.addEntry(v)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ve();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function u3(t){const e=Re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.hi.getLastRemoteSnapshotVersion(n))}function RB(t,e){const n=Re(t),r=e.snapshotVersion;let i=n.Fs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.Os.newChangeBuffer({trackRemovals:!0});i=n.Fs;const a=[];e.targetChanges.forEach((d,f)=>{const h=i.get(f);if(!h)return;a.push(n.hi.removeMatchingKeys(o,d.removedDocuments,f).next(()=>n.hi.addMatchingKeys(o,d.addedDocuments,f)));let m=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(yn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,r)),i=i.insert(f,m),function(v,y,x){return v.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=SB?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(h,m,d)&&a.push(n.hi.updateTargetData(o,m))});let l=lo(),u=Ve();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),a.push(PB(o,s,e.documentUpdates).next(d=>{l=d.Ls,u=d.ks})),!r.isEqual(Ne.min())){const d=n.hi.getLastRemoteSnapshotVersion(o).next(f=>n.hi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(d)}return Z.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,u)).next(()=>l)}).then(o=>(n.Fs=i,o))}function PB(t,e,n){let r=Ve(),i=Ve();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=lo();return n.forEach((a,l)=>{const u=o.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Ne.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):ce(wx,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ls:s,ks:i}})}function DB(t,e){const n=Re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ax),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function OB(t,e){const n=Re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.hi.getTargetData(r,e).next(o=>o?(i=o,Z.resolve(i)):n.hi.allocateTargetId(r).next(s=>(i=new Go(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.hi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Fs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Fs=n.Fs.insert(r.targetId,r),n.Ms.set(e,r.targetId)),r})}async function Q1(t,e,n){const r=Re(t),i=r.Fs.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!wc(s))throw s;ce(wx,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(i.target)}function AC(t,e,n){const r=Re(t);let i=Ne.min(),o=Ve();return r.persistence.runTransaction("Execute query","readwrite",s=>function(l,u,d){const f=Re(l),h=f.Ms.get(d);return h!==void 0?Z.resolve(f.Fs.get(h)):f.hi.getTargetData(u,d)}(r,s,Ii(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.Cs.getDocumentsMatchingQuery(s,e,n?i:Ne.min(),n?o:Ve())).next(a=>(kB(r,xF(e),a),{documents:a,qs:o})))}function kB(t,e,n){let r=t.xs.get(e)||Ne.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.xs.set(e,r)}class SC{constructor(){this.activeTargetIds=AF()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MB{constructor(){this.Fo=new SC,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,n,r){this.Mo[e]=n}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new SC,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jB{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC="ConnectivityMonitor";class NC{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ce(IC,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ce(IC,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mf=null;function Y1(){return Mf===null?Mf=function(){return 268435456+Math.round(2147483648*Math.random())}():Mf++,"0x"+Mf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="RestConnection",LB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class FB{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.Ko=this.databaseId.database===fp?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,o){const s=Y1(),a=this.Go(e,n.toUriEncodedString());ce(qm,`Sending RPC '${e}' ${s}:`,a,r);const l={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(l,i,o);const{host:u}=new URL(a),d=Is(u);return this.jo(e,a,l,r,d).then(f=>(ce(qm,`Received RPC '${e}' ${s}: `,f),f),f=>{throw ps(qm,`RPC '${e}' ${s} failed with error: `,f,"url: ",a,"request:",r),f})}Jo(e,n,r,i,o,s){return this.Wo(e,n,r,i,o)}zo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yc}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}Go(e,n){const r=LB[e];return`${this.$o}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BB{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn="WebChannelConnection";class VB extends FB{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,n,r,i,o){const s=Y1();return new Promise((a,l)=>{const u=new dT;u.setWithCredentials(!0),u.listenOnce(fT.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case hh.NO_ERROR:const f=u.getResponseJson();ce(bn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),a(f);break;case hh.TIMEOUT:ce(bn,`RPC '${e}' ${s} timed out`),l(new pe(J.DEADLINE_EXCEEDED,"Request time out"));break;case hh.HTTP_ERROR:const h=u.getStatus();if(ce(bn,`RPC '${e}' ${s} failed with status:`,h,"response text:",u.getResponseText()),h>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m==null?void 0:m.error;if(g&&g.status&&g.message){const v=function(x){const w=x.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(w)>=0?w:J.UNKNOWN}(g.status);l(new pe(v,g.message))}else l(new pe(J.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new pe(J.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{c_:e,streamId:s,l_:u.getLastErrorCode(),h_:u.getLastError()})}}finally{ce(bn,`RPC '${e}' ${s} completed.`)}});const d=JSON.stringify(i);ce(bn,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",d,r,15)})}P_(e,n,r){const i=Y1(),o=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=mT(),a=pT(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.zo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=o.join("");ce(bn,`Creating RPC '${e}' stream ${i}: ${d}`,l);const f=s.createWebChannel(d,l);this.T_(f);let h=!1,m=!1;const g=new BB({Ho:y=>{m?ce(bn,`Not sending because RPC '${e}' stream ${i} is closed:`,y):(h||(ce(bn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),h=!0),ce(bn,`RPC '${e}' stream ${i} sending:`,y),f.send(y))},Yo:()=>f.close()}),v=(y,x,w)=>{y.listen(x,E=>{try{w(E)}catch(A){setTimeout(()=>{throw A},0)}})};return v(f,au.EventType.OPEN,()=>{m||(ce(bn,`RPC '${e}' stream ${i} transport opened.`),g.s_())}),v(f,au.EventType.CLOSE,()=>{m||(m=!0,ce(bn,`RPC '${e}' stream ${i} transport closed`),g.__(),this.I_(f))}),v(f,au.EventType.ERROR,y=>{m||(m=!0,ps(bn,`RPC '${e}' stream ${i} transport errored. Name:`,y.name,"Message:",y.message),g.__(new pe(J.UNAVAILABLE,"The operation could not be completed")))}),v(f,au.EventType.MESSAGE,y=>{var x;if(!m){const w=y.data[0];nt(!!w,16349);const E=w,A=(E==null?void 0:E.error)||((x=E[0])===null||x===void 0?void 0:x.error);if(A){ce(bn,`RPC '${e}' stream ${i} received error:`,A);const O=A.status;let j=function(S){const b=Ot[S];if(b!==void 0)return YT(b)}(O),N=A.message;j===void 0&&(j=J.INTERNAL,N="Unknown error status: "+O+" with message "+A.message),m=!0,g.__(new pe(j,N)),f.close()}else ce(bn,`RPC '${e}' stream ${i} received:`,w),g.a_(w)}}),v(a,hT.STAT_EVENT,y=>{y.stat===B1.PROXY?ce(bn,`RPC '${e}' stream ${i} detected buffering proxy`):y.stat===B1.NOPROXY&&ce(bn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.o_()},0),g}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(n=>n===e)}}function Km(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h0(t){return new HF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Fi=e,this.timerId=n,this.d_=r,this.E_=i,this.A_=o,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const n=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),i=Math.max(0,n-r);i>0&&ce("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.R_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC="PersistentStream";class f3{constructor(e,n,r,i,o,s,a,l){this.Fi=e,this.w_=r,this.S_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new d3(e,n)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():n&&n.code===J.RESOURCE_EXHAUSTED?(ao(n.toString()),ao("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):n&&n.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(n)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),n=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.b_===n&&this.W_(r,i)},r=>{e(()=>{const i=new pe(J.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(i)})})}W_(e,n){const r=this.K_(this.b_);this.stream=this.z_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.e_(()=>{r(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(i=>{r(()=>this.G_(i))}),this.stream.onMessage(i=>{r(()=>++this.C_==1?this.j_(i):this.onNext(i))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return ce(TC,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return n=>{this.Fi.enqueueAndForget(()=>this.b_===e?n():(ce(TC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class UB extends f3{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}z_(e,n){return this.connection.P_("Listen",e,n)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const n=qF(this.serializer,e),r=function(o){if(!("targetChange"in o))return Ne.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Ne.min():s.readTime?Ti(s.readTime):Ne.min()}(e);return this.listener.J_(n,r)}H_(e){const n={};n.database=X1(this.serializer),n.addTarget=function(o,s){let a;const l=s.target;if(a=H1(l)?{documents:QF(o,l)}:{query:YF(o,l).Vt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=e3(o,s.resumeToken);const u=G1(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(Ne.min())>0){a.readTime=vp(o,s.snapshotVersion.toTimestamp());const u=G1(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const r=JF(this.serializer,e);r&&(n.labels=r),this.k_(n)}Y_(e){const n={};n.database=X1(this.serializer),n.removeTarget=e,this.k_(n)}}class $B extends f3{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,n){return this.connection.P_("Write",e,n)}j_(e){return nt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,nt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){nt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const n=XF(e.writeResults,e.commitTime),r=Ti(e.commitTime);return this.listener.ta(r,n)}na(){const e={};e.database=X1(this.serializer),this.k_(e)}X_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>KF(this.serializer,r))};this.k_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zB{}class HB extends zB{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new pe(J.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Wo(e,q1(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new pe(J.UNKNOWN,o.toString())})}Jo(e,n,r,i,o){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Jo(e,q1(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new pe(J.UNKNOWN,s.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class WB{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(ao(n),this._a=!1):ce("OnlineStateTracker",n)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _a="RemoteStore";class GB{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=o,this.Ea.xo(s=>{r.enqueueAndForget(async()=>{Da(this)&&(ce(_a,"Restarting streams for network reachability change."),await async function(l){const u=Re(l);u.Ia.add(4),await Ld(u),u.Aa.set("Unknown"),u.Ia.delete(4),await p0(u)}(this))})}),this.Aa=new WB(r,i)}}async function p0(t){if(Da(t))for(const e of t.da)await e(!0)}async function Ld(t){for(const e of t.da)await e(!1)}function h3(t,e){const n=Re(t);n.Ta.has(e.targetId)||(n.Ta.set(e.targetId,e),bx(n)?Cx(n):_c(n).x_()&&Ex(n,e))}function _x(t,e){const n=Re(t),r=_c(n);n.Ta.delete(e),r.x_()&&p3(n,e),n.Ta.size===0&&(r.x_()?r.B_():Da(n)&&n.Aa.set("Unknown"))}function Ex(t,e){if(t.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}_c(t).H_(e)}function p3(t,e){t.Ra.$e(e),_c(t).Y_(e)}function Cx(t){t.Ra=new VF({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>t.Ta.get(e)||null,lt:()=>t.datastore.serializer.databaseId}),_c(t).start(),t.Aa.aa()}function bx(t){return Da(t)&&!_c(t).M_()&&t.Ta.size>0}function Da(t){return Re(t).Ia.size===0}function m3(t){t.Ra=void 0}async function qB(t){t.Aa.set("Online")}async function KB(t){t.Ta.forEach((e,n)=>{Ex(t,e)})}async function XB(t,e){m3(t),bx(t)?(t.Aa.la(e),Cx(t)):t.Aa.set("Unknown")}async function QB(t,e,n){if(t.Aa.set("Online"),e instanceof JT&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.Ta.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ta.delete(a),i.Ra.removeTarget(a))}(t,e)}catch(r){ce(_a,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xp(t,r)}else if(e instanceof vh?t.Ra.Ye(e):e instanceof ZT?t.Ra.it(e):t.Ra.et(e),!n.isEqual(Ne.min()))try{const r=await u3(t.localStore);n.compareTo(r)>=0&&await function(o,s){const a=o.Ra.Pt(s);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=o.Ta.get(u);d&&o.Ta.set(u,d.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,u)=>{const d=o.Ta.get(l);if(!d)return;o.Ta.set(l,d.withResumeToken(yn.EMPTY_BYTE_STRING,d.snapshotVersion)),p3(o,l);const f=new Go(d.target,l,u,d.sequenceNumber);Ex(o,f)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){ce(_a,"Failed to raise snapshot:",r),await xp(t,r)}}async function xp(t,e,n){if(!wc(e))throw e;t.Ia.add(1),await Ld(t),t.Aa.set("Offline"),n||(n=()=>u3(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ce(_a,"Retrying IndexedDB access"),await n(),t.Ia.delete(1),await p0(t)})}function g3(t,e){return e().catch(n=>xp(t,n,e))}async function m0(t){const e=Re(t),n=xs(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ax;for(;YB(e);)try{const i=await DB(e.localStore,r);if(i===null){e.Pa.length===0&&n.B_();break}r=i.batchId,ZB(e,i)}catch(i){await xp(e,i)}v3(e)&&y3(e)}function YB(t){return Da(t)&&t.Pa.length<10}function ZB(t,e){t.Pa.push(e);const n=xs(t);n.x_()&&n.Z_&&n.X_(e.mutations)}function v3(t){return Da(t)&&!xs(t).M_()&&t.Pa.length>0}function y3(t){xs(t).start()}async function JB(t){xs(t).na()}async function eV(t){const e=xs(t);for(const n of t.Pa)e.X_(n.mutations)}async function tV(t,e,n){const r=t.Pa.shift(),i=px.from(r,e,n);await g3(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await m0(t)}async function nV(t,e){e&&xs(t).Z_&&await async function(r,i){if(function(s){return FF(s)&&s!==J.ABORTED}(i.code)){const o=r.Pa.shift();xs(r).N_(),await g3(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await m0(r)}}(t,e),v3(t)&&y3(t)}async function RC(t,e){const n=Re(t);n.asyncQueue.verifyOperationInProgress(),ce(_a,"RemoteStore received new credentials");const r=Da(n);n.Ia.add(3),await Ld(n),r&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ia.delete(3),await p0(n)}async function rV(t,e){const n=Re(t);e?(n.Ia.delete(2),await p0(n)):e||(n.Ia.add(2),await Ld(n),n.Aa.set("Unknown"))}function _c(t){return t.Va||(t.Va=function(n,r,i){const o=Re(n);return o.ia(),new UB(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:qB.bind(null,t),e_:KB.bind(null,t),n_:XB.bind(null,t),J_:QB.bind(null,t)}),t.da.push(async e=>{e?(t.Va.N_(),bx(t)?Cx(t):t.Aa.set("Unknown")):(await t.Va.stop(),m3(t))})),t.Va}function xs(t){return t.ma||(t.ma=function(n,r,i){const o=Re(n);return o.ia(),new $B(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),e_:JB.bind(null,t),n_:nV.bind(null,t),ea:eV.bind(null,t),ta:tV.bind(null,t)}),t.da.push(async e=>{e?(t.ma.N_(),await m0(t)):(await t.ma.stop(),t.Pa.length>0&&(ce(_a,`Stopping write stream with ${t.Pa.length} pending writes`),t.Pa=[]))})),t.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new ss,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new Ax(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Sx(t,e){if(ao("AsyncQueue",`${e}: ${t}`),wc(t))return new pe(J.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{static emptySet(e){return new bl(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ye.comparator(n.key,r.key):(n,r)=>ye.comparator(n.key,r.key),this.keyedMap=lu(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new bl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(){this.fa=new At(ye.comparator)}track(e){const n=e.doc.key,r=this.fa.get(n);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(n,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(n):e.type===1&&r.type===2?this.fa=this.fa.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(n,{type:2,doc:e.doc}):Ce(63341,{At:e,ga:r}):this.fa=this.fa.insert(n,e)}pa(){const e=[];return this.fa.inorderTraversal((n,r)=>{e.push(r)}),e}}class ic{constructor(e,n,r,i,o,s,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new ic(e,n,bl.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&l0(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some(e=>e.ba())}}class oV{constructor(){this.queries=DC(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(n,r){const i=Re(n),o=i.queries;i.queries=DC(),o.forEach((s,a)=>{for(const l of a.wa)l.onError(r)})})(this,new pe(J.ABORTED,"Firestore shutting down"))}}function DC(){return new Ra(t=>FT(t),l0)}async function sV(t,e){const n=Re(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.Sa()&&e.ba()&&(r=2):(o=new iV,r=e.ba()?0:1);try{switch(r){case 0:o.ya=await n.onListen(i,!0);break;case 1:o.ya=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){const a=Sx(s,`Initialization of query '${Wa(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.wa.push(e),e.va(n.onlineState),o.ya&&e.Ca(o.ya)&&Ix(n)}async function aV(t,e){const n=Re(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const s=o.wa.indexOf(e);s>=0&&(o.wa.splice(s,1),o.wa.length===0?i=e.ba()?0:1:!o.Sa()&&e.ba()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function lV(t,e){const n=Re(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.wa)a.Ca(i)&&(r=!0);s.ya=i}}r&&Ix(n)}function cV(t,e,n){const r=Re(t),i=r.queries.get(e);if(i)for(const o of i.wa)o.onError(n);r.queries.delete(e)}function Ix(t){t.Da.forEach(e=>{e.next()})}var Z1,OC;(OC=Z1||(Z1={})).Fa="default",OC.Cache="cache";class uV{constructor(e,n,r){this.query=e,this.Ma=n,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ic(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),n=!0):this.Ba(e,this.onlineState)&&(this.La(e),n=!0),this.Oa=e,n}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let n=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),n=!0),n}Ba(e,n){if(!e.fromCache||!this.ba())return!0;const r=n!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const n=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}La(e){e=ic.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==Z1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x3{constructor(e){this.key=e}}class w3{constructor(e){this.key=e}}class dV{constructor(e,n){this.query=e,this.Ha=n,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ve(),this.mutatedKeys=Ve(),this.Xa=BT(e),this.eu=new bl(this.Xa)}get tu(){return this.Ha}nu(e,n){const r=n?n.ru:new PC,i=n?n.eu:this.eu;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const h=i.get(d),m=c0(this.query,f)?f:null,g=!!h&&this.mutatedKeys.has(h.key),v=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let y=!1;h&&m?h.data.isEqual(m.data)?g!==v&&(r.track({type:3,doc:m}),y=!0):this.iu(h,m)||(r.track({type:2,doc:m}),y=!0,(l&&this.Xa(m,l)>0||u&&this.Xa(m,u)<0)&&(a=!0)):!h&&m?(r.track({type:0,doc:m}),y=!0):h&&!m&&(r.track({type:1,doc:h}),y=!0,(l||u)&&(a=!0)),y&&(m?(s=s.add(m),o=v?o.add(d):o.delete(d)):(s=s.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const d=this.query.limitType==="F"?s.last():s.first();s=s.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{eu:s,ru:r,Ds:a,mutatedKeys:o}}iu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const s=e.ru.pa();s.sort((d,f)=>function(m,g){const v=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{At:y})}};return v(m)-v(g)}(d.type,f.type)||this.Xa(d.doc,f.doc)),this.su(r),i=i!=null&&i;const a=n&&!i?this.ou():[],l=this.Za.size===0&&this.current&&!i?1:0,u=l!==this.Ya;return this.Ya=l,s.length!==0||u?{snapshot:new ic(this.query,e.eu,o,s,e.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:a}:{_u:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new PC,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach(n=>this.Ha=this.Ha.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ha=this.Ha.delete(n)),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ve(),this.eu.forEach(r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))});const n=[];return e.forEach(r=>{this.Za.has(r)||n.push(new w3(r))}),this.Za.forEach(r=>{e.has(r)||n.push(new x3(r))}),n}uu(e){this.Ha=e.qs,this.Za=Ve();const n=this.nu(e.documents);return this.applyChanges(n,!0)}cu(){return ic.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const Nx="SyncEngine";class fV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class hV{constructor(e){this.key=e,this.lu=!1}}class pV{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Ra(a=>FT(a),l0),this.Tu=new Map,this.Iu=new Set,this.du=new At(ye.comparator),this.Eu=new Map,this.Au=new vx,this.Ru={},this.Vu=new Map,this.mu=rc.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function mV(t,e,n=!0){const r=S3(t);let i;const o=r.Pu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.cu()):i=await _3(r,e,n,!0),i}async function gV(t,e){const n=S3(t);await _3(n,e,!0,!1)}async function _3(t,e,n,r){const i=await OB(t.localStore,Ii(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n);let a;return r&&(a=await vV(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&h3(t.remoteStore,i),a}async function vV(t,e,n,r,i){t.gu=(f,h,m)=>async function(v,y,x,w){let E=y.view.nu(x);E.Ds&&(E=await AC(v.localStore,y.query,!1).then(({documents:N})=>y.view.nu(N,E)));const A=w&&w.targetChanges.get(y.targetId),O=w&&w.targetMismatches.get(y.targetId)!=null,j=y.view.applyChanges(E,v.isPrimaryClient,A,O);return MC(v,y.targetId,j._u),j.snapshot}(t,f,h,m);const o=await AC(t.localStore,e,!0),s=new dV(e,o.qs),a=s.nu(o.documents),l=jd.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=s.applyChanges(a,t.isPrimaryClient,l);MC(t,n,u._u);const d=new fV(e,n,s);return t.Pu.set(e,d),t.Tu.has(n)?t.Tu.get(n).push(e):t.Tu.set(n,[e]),u.snapshot}async function yV(t,e,n){const r=Re(t),i=r.Pu.get(e),o=r.Tu.get(i.targetId);if(o.length>1)return r.Tu.set(i.targetId,o.filter(s=>!l0(s,e))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Q1(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&_x(r.remoteStore,i.targetId),J1(r,i.targetId)}).catch(xc)):(J1(r,i.targetId),await Q1(r.localStore,i.targetId,!0))}async function xV(t,e){const n=Re(t),r=n.Pu.get(e),i=n.Tu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_x(n.remoteStore,r.targetId))}async function wV(t,e,n){const r=IV(t);try{const i=await function(s,a){const l=Re(s),u=vt.now(),d=a.reduce((m,g)=>m.add(g.key),Ve());let f,h;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let g=lo(),v=Ve();return l.Os.getEntries(m,d).next(y=>{g=y,g.forEach((x,w)=>{w.isValidDocument()||(v=v.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,g)).next(y=>{f=y;const x=[];for(const w of a){const E=OF(w,f.get(w.key).overlayedDocument);E!=null&&x.push(new Pa(w.key,E,PT(E.value.mapValue),Ni.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,x,a)}).next(y=>{h=y;const x=y.applyToLocalDocumentSet(f,v);return l.documentOverlayCache.saveOverlays(m,y.batchId,x)})}).then(()=>({batchId:h.batchId,changes:UT(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,l){let u=s.Ru[s.currentUser.toKey()];u||(u=new At(Me)),u=u.insert(a,l),s.Ru[s.currentUser.toKey()]=u}(r,i.batchId,n),await Fd(r,i.changes),await m0(r.remoteStore)}catch(i){const o=Sx(i,"Failed to persist write");n.reject(o)}}async function E3(t,e){const n=Re(t);try{const r=await RB(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Eu.get(o);s&&(nt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.lu=!0:i.modifiedDocuments.size>0?nt(s.lu,14607):i.removedDocuments.size>0&&(nt(s.lu,42227),s.lu=!1))}),await Fd(n,r,e)}catch(r){await xc(r)}}function kC(t,e,n){const r=Re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Pu.forEach((o,s)=>{const a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const l=Re(s);l.onlineState=a;let u=!1;l.queries.forEach((d,f)=>{for(const h of f.wa)h.va(a)&&(u=!0)}),u&&Ix(l)}(r.eventManager,e),i.length&&r.hu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _V(t,e,n){const r=Re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Eu.get(e),o=i&&i.key;if(o){let s=new At(ye.comparator);s=s.insert(o,Pn.newNoDocument(o,Ne.min()));const a=Ve().add(o),l=new f0(Ne.min(),new Map,new At(Me),s,a);await E3(r,l),r.du=r.du.remove(o),r.Eu.delete(e),Tx(r)}else await Q1(r.localStore,e,!1).then(()=>J1(r,e,n)).catch(xc)}async function EV(t,e){const n=Re(t),r=e.batch.batchId;try{const i=await TB(n.localStore,e);b3(n,r,null),C3(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Fd(n,i)}catch(i){await xc(i)}}async function CV(t,e,n){const r=Re(t);try{const i=await function(s,a){const l=Re(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next(f=>(nt(f!==null,37113),d=f.keys(),l.mutationQueue.removeMutationBatch(u,f))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>l.localDocuments.getDocuments(u,d))})}(r.localStore,e);b3(r,e,n),C3(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Fd(r,i)}catch(i){await xc(i)}}function C3(t,e){(t.Vu.get(e)||[]).forEach(n=>{n.resolve()}),t.Vu.delete(e)}function b3(t,e,n){const r=Re(t);let i=r.Ru[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ru[r.currentUser.toKey()]=i}}function J1(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Tu.get(e))t.Pu.delete(r),n&&t.hu.pu(r,n);t.Tu.delete(e),t.isPrimaryClient&&t.Au.zr(e).forEach(r=>{t.Au.containsKey(r)||A3(t,r)})}function A3(t,e){t.Iu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(_x(t.remoteStore,n),t.du=t.du.remove(e),t.Eu.delete(n),Tx(t))}function MC(t,e,n){for(const r of n)r instanceof x3?(t.Au.addReference(r.key,e),bV(t,r)):r instanceof w3?(ce(Nx,"Document no longer in limbo: "+r.key),t.Au.removeReference(r.key,e),t.Au.containsKey(r.key)||A3(t,r.key)):Ce(19791,{yu:r})}function bV(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Iu.has(r)||(ce(Nx,"New document in limbo: "+n),t.Iu.add(r),Tx(t))}function Tx(t){for(;t.Iu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Iu.values().next().value;t.Iu.delete(e);const n=new ye(gt.fromString(e)),r=t.mu.next();t.Eu.set(r,new hV(n)),t.du=t.du.insert(n,r),h3(t.remoteStore,new Go(Ii(fx(n.path)),r,"TargetPurposeLimboResolution",i0.ue))}}async function Fd(t,e,n){const r=Re(t),i=[],o=[],s=[];r.Pu.isEmpty()||(r.Pu.forEach((a,l)=>{s.push(r.gu(l,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const f=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(u){i.push(u);const f=xx.Es(l.targetId,u);o.push(f)}}))}),await Promise.all(s),r.hu.J_(i),await async function(l,u){const d=Re(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Z.forEach(u,h=>Z.forEach(h.Is,m=>d.persistence.referenceDelegate.addReference(f,h.targetId,m)).next(()=>Z.forEach(h.ds,m=>d.persistence.referenceDelegate.removeReference(f,h.targetId,m)))))}catch(f){if(!wc(f))throw f;ce(wx,"Failed to update sequence numbers: "+f)}for(const f of u){const h=f.targetId;if(!f.fromCache){const m=d.Fs.get(h),g=m.snapshotVersion,v=m.withLastLimboFreeSnapshotVersion(g);d.Fs=d.Fs.insert(h,v)}}}(r.localStore,o))}async function AV(t,e){const n=Re(t);if(!n.currentUser.isEqual(e)){ce(Nx,"User change. New user:",e.toKey());const r=await c3(n.localStore,e);n.currentUser=e,function(o,s){o.Vu.forEach(a=>{a.forEach(l=>{l.reject(new pe(J.CANCELLED,s))})}),o.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Fd(n,r.Bs)}}function SV(t,e){const n=Re(t),r=n.Eu.get(e);if(r&&r.lu)return Ve().add(r.key);{let i=Ve();const o=n.Tu.get(e);if(!o)return i;for(const s of o){const a=n.Pu.get(s);i=i.unionWith(a.view.tu)}return i}}function S3(t){const e=Re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=E3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=SV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_V.bind(null,e),e.hu.J_=lV.bind(null,e.eventManager),e.hu.pu=cV.bind(null,e.eventManager),e}function IV(t){const e=Re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CV.bind(null,e),e}class wp{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=h0(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,n){return null}Fu(e,n){return null}vu(e){return NB(this.persistence,new AB,e.initialUser,this.serializer)}Du(e){return new l3(yx.Vi,this.serializer)}bu(e){return new MB}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wp.provider={build:()=>new wp};class NV extends wp{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,n){nt(this.persistence.referenceDelegate instanceof yp,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new uB(r,e.asyncQueue,n)}Du(e){const n=this.cacheSizeBytes!==void 0?tr.withCacheSize(this.cacheSizeBytes):tr.DEFAULT;return new l3(r=>yp.Vi(r,n),this.serializer)}}class ev{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>kC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=AV.bind(null,this.syncEngine),await rV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new oV}()}createDatastore(e){const n=h0(e.databaseInfo.databaseId),r=function(o){return new VB(o)}(e.databaseInfo);return function(o,s,a,l){return new HB(o,s,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new GB(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>kC(this.syncEngine,n,0),function(){return NC.C()?new NC:new jB}())}createSyncEngine(e,n){return function(i,o,s,a,l,u,d){const f=new pV(i,o,s,a,l,u);return d&&(f.fu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=Re(i);ce(_a,"RemoteStore shutting down."),o.Ia.add(5),await Ld(o),o.Ea.shutdown(),o.Aa.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}ev.provider={build:()=>new ev};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):ao("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="FirestoreClient";class RV{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=In.UNAUTHENTICATED,this.clientId=ox.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{ce(ws,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(ce(ws,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ss;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Sx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Xm(t,e){t.asyncQueue.verifyOperationInProgress(),ce(ws,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await c3(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>{ps("Terminating Firestore due to IndexedDb database deletion"),t.terminate().then(()=>{ce("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(i=>{ps("Terminating Firestore due to IndexedDb database deletion failed",i)})}),t._offlineComponents=e}async function jC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await PV(t);ce(ws,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>RC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>RC(e.remoteStore,i)),t._onlineComponents=e}async function PV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ce(ws,"Using user provided OfflineComponentProvider");try{await Xm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===J.FAILED_PRECONDITION||i.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;ps("Error using user provided cache. Falling back to memory cache: "+n),await Xm(t,new wp)}}else ce(ws,"Using default OfflineComponentProvider"),await Xm(t,new NV(void 0));return t._offlineComponents}async function I3(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ce(ws,"Using user provided OnlineComponentProvider"),await jC(t,t._uninitializedComponentsProvider._online)):(ce(ws,"Using default OnlineComponentProvider"),await jC(t,new ev))),t._onlineComponents}function DV(t){return I3(t).then(e=>e.syncEngine)}async function OV(t){const e=await I3(t),n=e.eventManager;return n.onListen=mV.bind(null,e.syncEngine),n.onUnlisten=yV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=gV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=xV.bind(null,e.syncEngine),n}function kV(t,e,n={}){const r=new ss;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,l,u){const d=new TV({next:h=>{d.Ou(),s.enqueueAndForget(()=>aV(o,f));const m=h.docs.has(a);!m&&h.fromCache?u.reject(new pe(J.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&h.fromCache&&l&&l.source==="server"?u.reject(new pe(J.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),f=new uV(fx(a.path),d,{includeMetadataChanges:!0,ka:!0});return sV(o,f)}(await OV(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N3(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3="firestore.googleapis.com",FC=!0;class BC{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=T3,this.ssl=FC}else this.host=e.host,this.ssl=(n=e.ssl)!==null&&n!==void 0?n:FC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=a3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lB)throw new pe(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=N3((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new pe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new pe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new pe(J.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class g0{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new BC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new BC(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new LL;switch(r.type){case"firstParty":return new UL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=LC.get(n);r&&(ce("ComponentProvider","Removing Datastore"),LC.delete(n),r.terminate())}(this),Promise.resolve()}}function MV(t,e,n,r={}){var i;t=ec(t,g0);const o=Is(e),s=t._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:t._getEmulatorOptions()}),l=`${e}:${n}`;o&&(zy(`https://${l}`),Hy("Firestore",!0)),s.host!==T3&&s.host!==l&&ps("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},s),{host:l,ssl:o,emulatorOptions:r});if(!va(u,a)&&(t._setSettings(u),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=In.MOCK_USER;else{d=AN(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new pe(J.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new In(h)}t._authCredentials=new FL(new vT(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Rx(this.firestore,e,this._query)}}class Kt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new as(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}toJSON(){return{type:Kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(kd(n,Kt._jsonSchema))return new Kt(e,r||null,new ye(gt.fromString(n.referencePath)))}}Kt._jsonSchemaVersion="firestore/documentReference/1.0",Kt._jsonSchema={type:jt("string",Kt._jsonSchemaVersion),referencePath:jt("string")};class as extends Rx{constructor(e,n,r){super(e,n,fx(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new ye(e))}withConverter(e){return new as(this.firestore,e,this._path)}}function tv(t,e,...n){if(t=Mn(t),xT("collection","path",e),t instanceof g0){const r=gt.fromString(e,...n);return JE(r),new as(t,null,r)}{if(!(t instanceof Kt||t instanceof as))throw new pe(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(gt.fromString(e,...n));return JE(r),new as(t.firestore,null,r)}}function nv(t,e,...n){if(t=Mn(t),arguments.length===1&&(e=ox.newId()),xT("doc","path",e),t instanceof g0){const r=gt.fromString(e,...n);return ZE(r),new Kt(t,null,new ye(r))}{if(!(t instanceof Kt||t instanceof as))throw new pe(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(gt.fromString(e,...n));return ZE(r),new Kt(t.firestore,t instanceof as?t.converter:null,new ye(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC="AsyncQueue";class UC{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new d3(this,"async_queue_retry"),this.oc=()=>{const r=Km();r&&ce(VC,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const n=Km();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const n=Km();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const n=new ss;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!wc(e))throw e;ce(VC,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const n=this._c.then(()=>(this.nc=!0,e().catch(r=>{throw this.tc=r,this.nc=!1,ao("INTERNAL UNHANDLED ERROR: ",$C(r)),r}).then(r=>(this.nc=!1,r))));return this._c=n,n}enqueueAfterDelay(e,n,r){this.ac(),this.sc.indexOf(e)>-1&&(n=0);const i=Ax.createAndSchedule(this,e,n,r,o=>this.lc(o));return this.ec.push(i),i}ac(){this.tc&&Ce(47125,{hc:$C(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const n of this.ec)if(n.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.ec)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const n=this.ec.indexOf(e);this.ec.splice(n,1)}}function $C(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class v0 extends g0{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new UC,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new UC(e),this._firestoreClient=void 0,await e}}}function jV(t,e){const n=typeof t=="object"?t:qy(),r=typeof t=="string"?t:fp,i=e0(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=EN("firestore");o&&MV(i,...o)}return i}function R3(t){if(t._terminated)throw new pe(J.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||LV(t),t._firestoreClient}function LV(t){var e,n,r;const i=t._freezeSettings(),o=function(a,l,u,d){return new rF(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,N3(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new RV(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tr(yn.fromBase64String(e))}catch(n){throw new pe(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Tr(yn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Tr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(kd(e,Tr._jsonSchema))return Tr.fromBase64String(e.bytes)}}Tr._jsonSchemaVersion="firestore/bytes/1.0",Tr._jsonSchema={type:jt("string",Tr._jsonSchemaVersion),bytes:jt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new pe(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new pe(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new pe(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ri._jsonSchemaVersion}}static fromJSON(e){if(kd(e,Ri._jsonSchema))return new Ri(e.latitude,e.longitude)}}Ri._jsonSchemaVersion="firestore/geoPoint/1.0",Ri._jsonSchema={type:jt("string",Ri._jsonSchemaVersion),latitude:jt("number"),longitude:jt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(kd(e,Pi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Pi(e.vectorValues);throw new pe(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Pi._jsonSchemaVersion="firestore/vectorValue/1.0",Pi._jsonSchema={type:jt("string",Pi._jsonSchemaVersion),vectorValues:jt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=/^__.*__$/;class BV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Pa(e,this.data,this.fieldMask,n,this.fieldTransforms):new Md(e,this.data,n,this.fieldTransforms)}}function P3(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ec:t})}}class Ox{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Ac(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Ox(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.fc(e),i}gc(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Rc({path:r,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return _p(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(P3(this.Ec)&&FV.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class VV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||h0(e)}Dc(e,n,r,i=!1){return new Ox({Ec:e,methodName:n,bc:r,path:fn.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function D3(t){const e=t._freezeSettings(),n=h0(t._databaseId);return new VV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function O3(t,e,n,r,i,o={}){const s=t.Dc(o.merge||o.mergeFields?2:0,e,n,i);L3("Data must be an object, but it was:",s,r);const a=M3(r,s);let l,u;if(o.merge)l=new ei(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){const d=[];for(const f of o.mergeFields){const h=UV(e,f,n);if(!s.contains(h))throw new pe(J.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);zV(d,h)||d.push(h)}l=new ei(d),u=s.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,u=s.fieldTransforms;return new BV(new Nr(a),l,u)}class kx extends Dx{_toFieldTransform(e){return new TF(e.path,new ld)}isEqual(e){return e instanceof kx}}function k3(t,e){if(j3(t=Mn(t)))return L3("Unsupported field value:",e,t),M3(t,e);if(t instanceof Dx)return function(r,i){if(!P3(i.Ec))throw i.wc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.wc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let l=k3(a,i.yc(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Mn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return SF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=vt.fromDate(r);return{timestampValue:vp(i.serializer,o)}}if(r instanceof vt){const o=new vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vp(i.serializer,o)}}if(r instanceof Ri)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Tr)return{bytesValue:e3(i.serializer,r._byteString)};if(r instanceof Kt){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.wc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:gx(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Pi)return function(s,a){return{mapValue:{fields:{[NT]:{stringValue:RT},[hp]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.wc("VectorValues must only contain numeric values.");return hx(a.serializer,u)})}}}}}}(r,i);throw i.wc(`Unsupported field value: ${sx(r)}`)}(t,e)}function M3(t,e){const n={};return ET(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ta(t,(r,i)=>{const o=k3(i,e.Vc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function j3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof vt||t instanceof Ri||t instanceof Tr||t instanceof Kt||t instanceof Dx||t instanceof Pi)}function L3(t,e,n){if(!j3(n)||!wT(n)){const r=sx(n);throw r==="an object"?e.wc(t+" a custom object"):e.wc(t+" "+r)}}function UV(t,e,n){if((e=Mn(e))instanceof Px)return e._internalPath;if(typeof e=="string")return F3(t,e);throw _p("Field path arguments must be of type string or ",t,!1,void 0,n)}const $V=new RegExp("[~\\*/\\[\\]]");function F3(t,e,n){if(e.search($V)>=0)throw _p(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Px(...e.split("."))._internalPath}catch{throw _p(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function _p(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new pe(J.INVALID_ARGUMENT,a+t+l)}function zV(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new HV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(V3("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class HV extends B3{data(){return super.data()}}function V3(t,e){return typeof e=="string"?F3(t,e):e instanceof Px?e._internalPath:e._delegate._internalPath}class WV{convertValue(e,n="none"){switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ta(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n[hp].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Pt(s.doubleValue));return new Pi(o)}convertGeoPoint(e){return new Ri(Pt(e.latitude),Pt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=s0(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(od(e));default:return null}}convertTimestamp(e){const n=gs(e);return new vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=gt.fromString(e);nt(s3(r),9688,{name:e});const i=new sd(r.get(1),r.get(3)),o=new ye(r.popFirst(5));return i.isEqual(n)||ao(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U3(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class uu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oa extends B3{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new yh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(V3("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=oa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}oa._jsonSchemaVersion="firestore/documentSnapshot/1.0",oa._jsonSchema={type:jt("string",oa._jsonSchemaVersion),bundleSource:jt("string","DocumentSnapshot"),bundleName:jt("string"),bundle:jt("string")};class yh extends oa{data(e={}){return super.data(e)}}class Ou{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new uu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new yh(this._firestore,this._userDataWriter,r.key,r,new uu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new pe(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const l=new yh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new uu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const l=new yh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new uu(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,d=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),d=s.indexOf(a.doc.key)),{type:GV(a.type),doc:l,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new pe(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Ou._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ox.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function GV(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(t){t=ec(t,Kt);const e=ec(t.firestore,v0);return kV(R3(e),t._key).then(n=>QV(e,t,n))}Ou._jsonSchemaVersion="firestore/querySnapshot/1.0",Ou._jsonSchema={type:jt("string",Ou._jsonSchemaVersion),bundleSource:jt("string","QuerySnapshot"),bundleName:jt("string"),bundle:jt("string")};class KV extends WV{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tr(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}}function XV(t,e,n){t=ec(t,Kt);const r=ec(t.firestore,v0),i=U3(t.converter,e);return z3(r,[O3(D3(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ni.none())])}function $3(t,e){const n=ec(t.firestore,v0),r=nv(t),i=U3(t.converter,e);return z3(n,[O3(D3(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ni.exists(!1))]).then(()=>r)}function z3(t,e){return function(r,i){const o=new ss;return r.asyncQueue.enqueueAndForget(async()=>wV(await DV(r),i,o)),o.promise}(R3(t),e)}function QV(t,e,n){const r=n.docs.get(e._key),i=new KV(t);return new oa(t,i,e._key,r,new uu(n.hasPendingWrites,n.fromCache),e.converter)}function H3(){return new kx("serverTimestamp")}(function(e,n=!0){(function(i){yc=i})(Na),ya(new hs("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new v0(new BL(r.getProvider("auth-internal")),new $L(s,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new pe(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sd(u.options.projectId,d)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),Ai(qE,KE,e),Ai(qE,KE,"esm2017")})();var YV="firebase",ZV="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ai(YV,ZV,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W3="firebasestorage.googleapis.com",G3="storageBucket",JV=2*60*1e3,eU=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt extends Fi{constructor(e,n,r=0){super(Qm(e),`Firebase Storage: ${n} (${Qm(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qm(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Tt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Tt||(Tt={}));function Qm(t){return"storage/"+t}function Mx(){const t="An unknown error occurred, please check the error payload for server response.";return new Rt(Tt.UNKNOWN,t)}function tU(t){return new Rt(Tt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function nU(t){return new Rt(Tt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function rU(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Rt(Tt.UNAUTHENTICATED,t)}function iU(){return new Rt(Tt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function oU(t){return new Rt(Tt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function sU(){return new Rt(Tt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function aU(){return new Rt(Tt.CANCELED,"User canceled the upload/download.")}function lU(t){return new Rt(Tt.INVALID_URL,"Invalid URL '"+t+"'.")}function cU(t){return new Rt(Tt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function uU(){return new Rt(Tt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+G3+"' property when initializing the app?")}function dU(){return new Rt(Tt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function fU(){return new Rt(Tt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function hU(t){return new Rt(Tt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function rv(t){return new Rt(Tt.INVALID_ARGUMENT,t)}function q3(){return new Rt(Tt.APP_DELETED,"The Firebase app was deleted.")}function pU(t){return new Rt(Tt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ku(t,e){return new Rt(Tt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Zc(t){throw new Rt(Tt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=gr.makeFromUrl(e,n)}catch{return new gr(e,"")}if(r.path==="")return r;throw cU(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),l={bucket:1,path:3};function u(A){A.path_=decodeURIComponent(A.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${d}/b/${i}/o${h}`,"i"),g={bucket:1,path:3},v=n===W3?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",x=new RegExp(`^https?://${v}/${i}/${y}`,"i"),E=[{regex:a,indices:l,postModify:o},{regex:m,indices:g,postModify:u},{regex:x,indices:{bucket:1,path:2},postModify:u}];for(let A=0;A<E.length;A++){const O=E[A],j=O.regex.exec(e);if(j){const N=j[O.indices.bucket];let T=j[O.indices.path];T||(T=""),r=new gr(N,T),O.postModify(r);break}}if(r==null)throw lU(e);return r}}class mU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gU(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return a===2}let u=!1;function d(...y){u||(u=!0,e.apply(null,y))}function f(y){i=setTimeout(()=>{i=null,t(m,l())},y)}function h(){o&&clearTimeout(o)}function m(y,...x){if(u){h();return}if(y){h(),d.call(null,y,...x);return}if(l()||s){h(),d.call(null,y,...x);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,f(E)}let g=!1;function v(y){g||(g=!0,h(),!u&&(i!==null?(y||(a=2),clearTimeout(i),f(0)):y||(a=1)))}return f(0),o=setTimeout(()=>{s=!0,v(!0)},n),v}function vU(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yU(t){return t!==void 0}function xU(t){return typeof t=="object"&&!Array.isArray(t)}function jx(t){return typeof t=="string"||t instanceof String}function zC(t){return Lx()&&t instanceof Blob}function Lx(){return typeof Blob<"u"}function HC(t,e,n,r){if(r<e)throw rv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw rv(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fx(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function K3(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var sa;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(sa||(sa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wU(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _U{constructor(e,n,r,i,o,s,a,l,u,d,f,h=!0,m=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=f,this.retry=h,this.isUsingEmulator=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,v)=>{this.resolve_=g,this.reject_=v,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new jf(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===sa.NO_ERROR,l=o.getStatus();if(!a||wU(l,this.additionalRetryCodes_)&&this.retry){const d=o.getErrorCode()===sa.ABORT;r(!1,new jf(!1,null,d));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new jf(u,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());yU(l)?o(l):o()}catch(l){s(l)}else if(a!==null){const l=Mx();l.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,l)):s(l)}else if(i.canceled){const l=this.appDelete_?q3():aU();s(l)}else{const l=sU();s(l)}};this.canceled_?n(!1,new jf(!1,null,!0)):this.backoffId_=gU(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&vU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class jf{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function EU(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function CU(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function bU(t,e){e&&(t["X-Firebase-GMPID"]=e)}function AU(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function SU(t,e,n,r,i,o,s=!0,a=!1){const l=K3(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return bU(d,e),EU(d,n),CU(d,o),AU(d,r),new _U(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IU(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function NU(...t){const e=IU();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Lx())return new Blob(t);throw new Rt(Tt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function TU(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RU(t){if(typeof atob>"u")throw hU("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ym{constructor(e,n){this.data=e,this.contentType=n||null}}function PU(t,e){switch(t){case wi.RAW:return new Ym(X3(e));case wi.BASE64:case wi.BASE64URL:return new Ym(Q3(t,e));case wi.DATA_URL:return new Ym(OU(e),kU(e))}throw Mx()}function X3(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function DU(t){let e;try{e=decodeURIComponent(t)}catch{throw ku(wi.DATA_URL,"Malformed data URL.")}return X3(e)}function Q3(t,e){switch(t){case wi.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw ku(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case wi.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw ku(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=RU(e)}catch(i){throw i.message.includes("polyfill")?i:ku(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Y3{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ku(wi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=MU(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function OU(t){const e=new Y3(t);return e.base64?Q3(wi.BASE64,e.rest):DU(e.rest)}function kU(t){return new Y3(t).contentType}function MU(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n){let r=0,i="";zC(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(zC(this.data_)){const r=this.data_,i=TU(r,e,n);return i===null?null:new ko(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ko(r,!0)}}static getBlob(...e){if(Lx()){const n=e.map(r=>r instanceof ko?r.data_:r);return new ko(NU.apply(null,n))}else{const n=e.map(s=>jx(s)?PU(wi.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new ko(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z3(t){let e;try{e=JSON.parse(t)}catch{return null}return xU(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jU(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function LU(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function J3(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FU(t,e){return e}class Bn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||FU}}let Lf=null;function BU(t){return!jx(t)||t.length<2?t:J3(t)}function e4(){if(Lf)return Lf;const t=[];t.push(new Bn("bucket")),t.push(new Bn("generation")),t.push(new Bn("metageneration")),t.push(new Bn("name","fullPath",!0));function e(o,s){return BU(s)}const n=new Bn("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}const i=new Bn("size");return i.xform=r,t.push(i),t.push(new Bn("timeCreated")),t.push(new Bn("updated")),t.push(new Bn("md5Hash",null,!0)),t.push(new Bn("cacheControl",null,!0)),t.push(new Bn("contentDisposition",null,!0)),t.push(new Bn("contentEncoding",null,!0)),t.push(new Bn("contentLanguage",null,!0)),t.push(new Bn("contentType",null,!0)),t.push(new Bn("metadata","customMetadata",!0)),Lf=t,Lf}function VU(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new gr(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function UU(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return VU(r,t),r}function t4(t,e,n){const r=Z3(e);return r===null?null:UU(t,r,n)}function $U(t,e,n,r){const i=Z3(e);if(i===null||!jx(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(u=>{const d=t.bucket,f=t.fullPath,h="/b/"+s(d)+"/o/"+s(f),m=Fx(h,n,r),g=K3({alt:"media",token:u});return m+g})[0]}function zU(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class n4{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(t){if(!t)throw Mx()}function HU(t,e){function n(r,i){const o=t4(t,i,e);return r4(o!==null),o}return n}function WU(t,e){function n(r,i){const o=t4(t,i,e);return r4(o!==null),$U(o,i,t.host,t._protocol)}return n}function i4(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=iU():i=rU():n.getStatus()===402?i=nU(t.bucket):n.getStatus()===403?i=oU(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function GU(t){const e=i4(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=tU(t.path)),o.serverResponse=i.serverResponse,o}return n}function qU(t,e,n){const r=e.fullServerUrl(),i=Fx(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new n4(i,o,WU(t,n),s);return a.errorHandler=GU(e),a}function KU(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function XU(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=KU(null,e)),r}function QU(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let A=0;A<2;A++)E=E+Math.random().toString().slice(2);return E}const l=a();s["Content-Type"]="multipart/related; boundary="+l;const u=XU(e,r,i),d=zU(u,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,h=`\r
--`+l+"--",m=ko.getBlob(f,r,h);if(m===null)throw dU();const g={name:u.fullPath},v=Fx(o,t.host,t._protocol),y="POST",x=t.maxUploadRetryTime,w=new n4(v,y,HU(t,n),x);return w.urlParams=g,w.headers=s,w.body=m.uploadData(),w.errorHandler=i4(e),w}class YU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=sa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=sa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=sa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,o){if(this.sent_)throw Zc("cannot .send() more than once");if(Is(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),o!==void 0)for(const s in o)o.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,o[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Zc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Zc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Zc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Zc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class ZU extends YU{initXhr(){this.xhr_.responseType="text"}}function o4(){return new ZU}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e,n){this._service=e,n instanceof gr?this._location=n:this._location=gr.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ea(e,n)}get root(){const e=new gr(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return J3(this._location.path)}get storage(){return this._service}get parent(){const e=jU(this._location.path);if(e===null)return null;const n=new gr(this._location.bucket,e);return new Ea(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw pU(e)}}function JU(t,e,n){t._throwIfRoot("uploadBytes");const r=QU(t.storage,t._location,e4(),new ko(e,!0),n);return t.storage.makeRequestWithTokens(r,o4).then(i=>({metadata:i,ref:t}))}function e$(t){t._throwIfRoot("getDownloadURL");const e=qU(t.storage,t._location,e4());return t.storage.makeRequestWithTokens(e,o4).then(n=>{if(n===null)throw fU();return n})}function t$(t,e){const n=LU(t._location.path,e),r=new gr(t._location.bucket,n);return new Ea(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n$(t){return/^[A-Za-z]+:\/\//.test(t)}function r$(t,e){return new Ea(t,e)}function s4(t,e){if(t instanceof Bx){const n=t;if(n._bucket==null)throw uU();const r=new Ea(n,n._bucket);return e!=null?s4(r,e):r}else return e!==void 0?t$(t,e):t}function i$(t,e){if(e&&n$(e)){if(t instanceof Bx)return r$(t,e);throw rv("To use ref(service, url), the first argument must be a Storage instance.")}else return s4(t,e)}function WC(t,e){const n=e==null?void 0:e[G3];return n==null?null:gr.makeFromBucketSpec(n,t)}function o$(t,e,n,r={}){t.host=`${e}:${n}`;const i=Is(e);i&&(zy(`https://${t.host}/b`),Hy("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:o}=r;o&&(t._overrideAuthToken=typeof o=="string"?o:AN(o,t.app.options.projectId))}class Bx{constructor(e,n,r,i,o,s=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._isUsingEmulator=s,this._bucket=null,this._host=W3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=JV,this._maxUploadRetryTime=eU,this._requests=new Set,i!=null?this._bucket=gr.makeFromBucketSpec(i,this._host):this._bucket=WC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=gr.makeFromBucketSpec(this._url,e):this._bucket=WC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){HC("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){HC("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(pr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ea(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new mU(q3());{const s=SU(e,this._appId,r,i,n,this._firebaseVersion,o,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const GC="@firebase/storage",qC="0.13.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4="storage";function s$(t,e,n){return t=Mn(t),JU(t,e,n)}function a$(t){return t=Mn(t),e$(t)}function l$(t,e){return t=Mn(t),i$(t,e)}function l4(t=qy(),e){t=Mn(t);const r=e0(t,a4).getImmediate({identifier:e}),i=EN("storage");return i&&c$(r,...i),r}function c$(t,e,n,r={}){o$(t,e,n,r)}function u$(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Bx(n,r,i,e,Na)}function d$(){ya(new hs(a4,u$,"PUBLIC").setMultipleInstances(!0)),Ai(GC,qC,""),Ai(GC,qC,"esm2017")}d$();const f$={apiKey:"AIzaSyADeiIAY7CA5Y5rQbUacqKxtHR9zzQkvl0",authDomain:"rugcraftpro.firebaseapp.com",projectId:"rugcraftpro",storageBucket:"rugcraftpro.appspot.com",messagingSenderId:"874927345152",appId:"1:874927345152:web:a9af4b96032d22095412e5",measurementId:"G-NDP0Z4H9KF"},Vx=NN(f$),Ka=ML(Vx),Al=jV(Vx);l4(Vx);new xi;const h$=Al;try{Ka.useDeviceLanguage()}catch(t){console.warn("Firebase auth configuration warning:",t)}const iv=new xi;iv.setCustomParameters({prompt:"select_account"});const Bd=()=>{const[t,e]=C.useState(null),[n,r]=C.useState(null),[i,o]=C.useState(!0),s=async()=>{var l,u;try{await z7(Ka,iv)}catch(d){if(console.error("Sign-in error:",d),d.code==="auth/popup-blocked"||d.code==="auth/unauthorized-domain"||(l=d.message)!=null&&l.includes("storage-partitioned")||(u=d.message)!=null&&u.includes("sessionStorage")){console.log("Popup blocked or storage issue, switching to redirect authentication");try{await X7(Ka,iv)}catch(f){console.error("Redirect sign-in error:",f),alert("Authentication failed. Please try again or contact support.")}}else alert("Sign-in failed. Please try again.")}},a=async()=>{await Ka.signOut(),e(null),r(null)};return C.useEffect(()=>{(async()=>{var d,f;try{await Y7(Ka)&&console.log("✅ Redirect authentication successful")}catch(h){if(console.error("Redirect result error:",h),(d=h.message)!=null&&d.includes("sessionStorage")||(f=h.message)!=null&&f.includes("storage-partitioned")){console.log("Storage partitioning detected, clearing storage and retrying...");try{localStorage.clear(),sessionStorage.clear()}catch(m){console.warn("Could not clear storage:",m)}}}})();const u=C7(Ka,async d=>{if(e(d),d)try{if(console.log("🔄 Starting user data fetch for:",d.email,"UID:",d.uid),d.email==="lab.easternmills@gmail.com"||d.email==="abdulansari@easternmills.com")console.log("🎯 Special user detected, using server endpoint");else{const h=nv(Al,"users",d.uid),m=await qV(h);if(m.exists()){console.log("✅ Found user by UID in Firestore"),r(m.data()),o(!1);return}}try{console.log("🔍 Searching for user with email:",d.email);const h=await fetch("/api/auth/user-by-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:d.email})});if(h.ok){const m=await h.json();console.log("✅ Server returned user data:",m),console.log("🔧 Extracting fields:",{Role:m.Role,role:m.role,DepartmentId:m.DepartmentId,department_id:m.department_id,department:m.department}),localStorage.clear(),sessionStorage.clear();const g={...m,uid:d.uid,email:d.email||m.email||m.Email,displayName:d.displayName,Role:m.Role||m.role,DepartmentId:m.DepartmentId||m.department_id||m.department,role:m.Role||m.role,department:m.DepartmentId||m.department_id||m.department,department_id:m.DepartmentId||m.department_id||m.department,isActive:m.isActive!==!1,Email:d.email||m.email||m.Email};console.log("🔧 Mapped user doc from server data:",{serverData:m,mappedDoc:g,Role:g.Role,DepartmentId:g.DepartmentId}),console.log("✅ Setting userDoc with mapped data"),r(g),console.log("✅ UserDoc set successfully, should trigger RBAC update"),o(!1);return}else console.error("❌ Server user lookup failed:",h.status,h.statusText)}catch(h){console.warn("Server user lookup failed, falling back to auto-create:",h)}const f={uid:d.uid,email:d.email,displayName:d.displayName,department:"quality",role:"user",DepartmentId:"quality",Role:"user",permissions:[],allowedTabs:[],isAuthorized:!1};try{const h=nv(Al,"users",d.uid);await XV(h,f),console.log("✅ Auto-created authorized user:",d.email)}catch(h){console.error("Firestore error (continuing anyway):",h)}r(f),o(!1)}catch(f){console.error("Firestore permission error - user needs proper authorization:",f),r({uid:d.uid,email:d.email,displayName:d.displayName,department:null,role:null,DepartmentId:null,Role:null,permissions:[],allowedTabs:[],isAuthorized:!1}),console.log("❌ User requires proper authorization in Firestore:",d.email)}else r(null);o(!1)});return()=>u()},[]),{user:t,userDoc:n,loading:i,login:s,logout:a}};function p$(){const{login:t}=Bd();return c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("header",{className:"bg-white border-b border-gray-200 px-4 py-4",children:c.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center gap-4",children:[c.jsx("div",{className:"h-14 w-14 bg-blue-600 rounded-lg flex items-center justify-center",children:c.jsx(aE,{className:"h-8 w-8 text-white"})}),c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Eastern Mills"}),c.jsx("p",{className:"text-gray-600",children:"Rug Manufacturing Management System"})]})]}),c.jsxs(ve,{onClick:t,className:"flex items-center gap-2",size:"lg",children:[c.jsx(Lm,{className:"h-4 w-4"}),"Sign In with Google"]})]})}),c.jsxs("main",{className:"max-w-7xl mx-auto px-4 py-8",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Welcome to Eastern Mills"}),c.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"Complete textile manufacturing quality management platform"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs(ve,{onClick:t,size:"lg",className:"flex items-center gap-2 mx-auto",children:[c.jsx(Lm,{className:"h-5 w-5"}),"Get Started - Sign In with Google"]}),c.jsxs("div",{className:"text-sm text-gray-500 text-center space-y-1",children:[c.jsx("p",{children:"Note: If popup is blocked, authentication will redirect automatically"}),c.jsx("p",{children:"Please allow cookies and enable JavaScript for optimal experience"})]})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:[c.jsxs(Pe,{className:"text-center",children:[c.jsxs(hn,{children:[c.jsx(al,{className:"h-12 w-12 text-blue-600 mx-auto mb-4"}),c.jsx(pn,{children:"Quality Control"})]}),c.jsx(Le,{children:c.jsx("p",{className:"text-gray-600",children:"Comprehensive lab inspections, compliance audits, and quality management workflows."})})]}),c.jsxs(Pe,{className:"text-center",children:[c.jsxs(hn,{children:[c.jsx(aE,{className:"h-12 w-12 text-green-600 mx-auto mb-4"}),c.jsx(pn,{children:"Department Management"})]}),c.jsx(Le,{children:c.jsx("p",{className:"text-gray-600",children:"Streamlined workflows for Sampling, Merchandising, and Production departments."})})]}),c.jsxs(Pe,{className:"text-center",children:[c.jsxs(hn,{children:[c.jsx(oN,{className:"h-12 w-12 text-purple-600 mx-auto mb-4"}),c.jsx(pn,{children:"User Permissions"})]}),c.jsx(Le,{children:c.jsx("p",{className:"text-gray-600",children:"Role-based access control and granular permissions for secure operations."})})]})]}),c.jsxs("div",{className:"bg-blue-50 rounded-lg p-8 text-center",children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Ready to get started?"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Sign in with your Google account to access your dashboard and begin managing your textile manufacturing processes."}),c.jsxs(ve,{onClick:t,size:"lg",className:"flex items-center gap-2 mx-auto",children:[c.jsx(Lm,{className:"h-5 w-5"}),"Sign In Now"]})]})]})]})}function ae(t,e,{checkForDefaultPrevented:n=!0}={}){return function(i){if(t==null||t(i),n===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Ec(t){const e=t+"CollectionProvider",[n,r]=Er(e),[i,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=v=>{const{scope:y,children:x}=v,w=kt.useRef(null),E=kt.useRef(new Map).current;return c.jsx(i,{scope:y,itemMap:E,collectionRef:w,children:x})};s.displayName=e;const a=t+"CollectionSlot",l=ga(a),u=kt.forwardRef((v,y)=>{const{scope:x,children:w}=v,E=o(a,x),A=$e(y,E.collectionRef);return c.jsx(l,{ref:A,children:w})});u.displayName=a;const d=t+"CollectionItemSlot",f="data-radix-collection-item",h=ga(d),m=kt.forwardRef((v,y)=>{const{scope:x,children:w,...E}=v,A=kt.useRef(null),O=$e(y,A),j=o(d,x);return kt.useEffect(()=>(j.itemMap.set(A,{ref:A,...E}),()=>void j.itemMap.delete(A))),c.jsx(h,{[f]:"",ref:O,children:w})});m.displayName=d;function g(v){const y=o(t+"CollectionConsumer",v);return kt.useCallback(()=>{const w=y.collectionRef.current;if(!w)return[];const E=Array.from(w.querySelectorAll(`[${f}]`));return Array.from(y.itemMap.values()).sort((j,N)=>E.indexOf(j.ref.current)-E.indexOf(N.ref.current))},[y.collectionRef,y.itemMap])}return[{Provider:s,Slot:u,ItemSlot:m},g,r]}var Yt=globalThis!=null&&globalThis.document?C.useLayoutEffect:()=>{},m$=SA[" useId ".trim().toString()]||(()=>{}),g$=0;function lr(t){const[e,n]=C.useState(m$());return Yt(()=>{t||n(r=>r??String(g$++))},[t]),t||(e?`radix-${e}`:"")}function zt(t){const e=C.useRef(t);return C.useEffect(()=>{e.current=t}),C.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function Br({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=v$({defaultProp:e,onChange:n}),o=t!==void 0,s=o?t:r,a=zt(n),l=C.useCallback(u=>{if(o){const f=typeof u=="function"?u(t):u;f!==t&&a(f)}else i(u)},[o,t,i,a]);return[s,l]}function v$({defaultProp:t,onChange:e}){const n=C.useState(t),[r]=n,i=C.useRef(r),o=zt(e);return C.useEffect(()=>{i.current!==r&&(o(r),i.current=r)},[r,i,o]),n}var y$=C.createContext(void 0);function Cc(t){const e=C.useContext(y$);return t||e||"ltr"}var Zm="rovingFocusGroup.onEntryFocus",x$={bubbles:!1,cancelable:!0},y0="RovingFocusGroup",[ov,c4,w$]=Ec(y0),[_$,x0]=Er(y0,[w$]),[E$,C$]=_$(y0),u4=C.forwardRef((t,e)=>c.jsx(ov.Provider,{scope:t.__scopeRovingFocusGroup,children:c.jsx(ov.Slot,{scope:t.__scopeRovingFocusGroup,children:c.jsx(b$,{...t,ref:e})})}));u4.displayName=y0;var b$=C.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:i=!1,dir:o,currentTabStopId:s,defaultCurrentTabStopId:a,onCurrentTabStopIdChange:l,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...f}=t,h=C.useRef(null),m=$e(e,h),g=Cc(o),[v=null,y]=Br({prop:s,defaultProp:a,onChange:l}),[x,w]=C.useState(!1),E=zt(u),A=c4(n),O=C.useRef(!1),[j,N]=C.useState(0);return C.useEffect(()=>{const T=h.current;if(T)return T.addEventListener(Zm,E),()=>T.removeEventListener(Zm,E)},[E]),c.jsx(E$,{scope:n,orientation:r,dir:g,loop:i,currentTabStopId:v,onItemFocus:C.useCallback(T=>y(T),[y]),onItemShiftTab:C.useCallback(()=>w(!0),[]),onFocusableItemAdd:C.useCallback(()=>N(T=>T+1),[]),onFocusableItemRemove:C.useCallback(()=>N(T=>T-1),[]),children:c.jsx(me.div,{tabIndex:x||j===0?-1:0,"data-orientation":r,...f,ref:m,style:{outline:"none",...t.style},onMouseDown:ae(t.onMouseDown,()=>{O.current=!0}),onFocus:ae(t.onFocus,T=>{const S=!O.current;if(T.target===T.currentTarget&&S&&!x){const b=new CustomEvent(Zm,x$);if(T.currentTarget.dispatchEvent(b),!b.defaultPrevented){const k=A().filter(X=>X.focusable),R=k.find(X=>X.active),P=k.find(X=>X.id===v),K=[R,P,...k].filter(Boolean).map(X=>X.ref.current);h4(K,d)}}O.current=!1}),onBlur:ae(t.onBlur,()=>w(!1))})})}),d4="RovingFocusGroupItem",f4=C.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:i=!1,tabStopId:o,...s}=t,a=lr(),l=o||a,u=C$(d4,n),d=u.currentTabStopId===l,f=c4(n),{onFocusableItemAdd:h,onFocusableItemRemove:m}=u;return C.useEffect(()=>{if(r)return h(),()=>m()},[r,h,m]),c.jsx(ov.ItemSlot,{scope:n,id:l,focusable:r,active:i,children:c.jsx(me.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...s,ref:e,onMouseDown:ae(t.onMouseDown,g=>{r?u.onItemFocus(l):g.preventDefault()}),onFocus:ae(t.onFocus,()=>u.onItemFocus(l)),onKeyDown:ae(t.onKeyDown,g=>{if(g.key==="Tab"&&g.shiftKey){u.onItemShiftTab();return}if(g.target!==g.currentTarget)return;const v=I$(g,u.orientation,u.dir);if(v!==void 0){if(g.metaKey||g.ctrlKey||g.altKey||g.shiftKey)return;g.preventDefault();let x=f().filter(w=>w.focusable).map(w=>w.ref.current);if(v==="last")x.reverse();else if(v==="prev"||v==="next"){v==="prev"&&x.reverse();const w=x.indexOf(g.currentTarget);x=u.loop?N$(x,w+1):x.slice(w+1)}setTimeout(()=>h4(x))}})})})});f4.displayName=d4;var A$={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function S$(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function I$(t,e,n){const r=S$(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return A$[r]}function h4(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function N$(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var p4=u4,m4=f4;function T$(t,e){return C.useReducer((n,r)=>e[n][r]??n,t)}var Xn=t=>{const{present:e,children:n}=t,r=R$(e),i=typeof n=="function"?n({present:r.isPresent}):C.Children.only(n),o=$e(r.ref,P$(i));return typeof n=="function"||r.isPresent?C.cloneElement(i,{ref:o}):null};Xn.displayName="Presence";function R$(t){const[e,n]=C.useState(),r=C.useRef({}),i=C.useRef(t),o=C.useRef("none"),s=t?"mounted":"unmounted",[a,l]=T$(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return C.useEffect(()=>{const u=Ff(r.current);o.current=a==="mounted"?u:"none"},[a]),Yt(()=>{const u=r.current,d=i.current;if(d!==t){const h=o.current,m=Ff(u);t?l("MOUNT"):m==="none"||(u==null?void 0:u.display)==="none"?l("UNMOUNT"):l(d&&h!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,l]),Yt(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,f=m=>{const v=Ff(r.current).includes(m.animationName);if(m.target===e&&v&&(l("ANIMATION_END"),!i.current)){const y=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=y)})}},h=m=>{m.target===e&&(o.current=Ff(r.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(a),ref:C.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function Ff(t){return(t==null?void 0:t.animationName)||"none"}function P$(t){var r,i;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Ux="Tabs",[D$,AZ]=Er(Ux,[x0]),g4=x0(),[O$,$x]=D$(Ux),v4=C.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:i,defaultValue:o,orientation:s="horizontal",dir:a,activationMode:l="automatic",...u}=t,d=Cc(a),[f,h]=Br({prop:r,onChange:i,defaultProp:o});return c.jsx(O$,{scope:n,baseId:lr(),value:f,onValueChange:h,orientation:s,dir:d,activationMode:l,children:c.jsx(me.div,{dir:d,"data-orientation":s,...u,ref:e})})});v4.displayName=Ux;var y4="TabsList",x4=C.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...i}=t,o=$x(y4,n),s=g4(n);return c.jsx(p4,{asChild:!0,...s,orientation:o.orientation,dir:o.dir,loop:r,children:c.jsx(me.div,{role:"tablist","aria-orientation":o.orientation,...i,ref:e})})});x4.displayName=y4;var w4="TabsTrigger",_4=C.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:i=!1,...o}=t,s=$x(w4,n),a=g4(n),l=b4(s.baseId,r),u=A4(s.baseId,r),d=r===s.value;return c.jsx(m4,{asChild:!0,...a,focusable:!i,active:d,children:c.jsx(me.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l,...o,ref:e,onMouseDown:ae(t.onMouseDown,f=>{!i&&f.button===0&&f.ctrlKey===!1?s.onValueChange(r):f.preventDefault()}),onKeyDown:ae(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&s.onValueChange(r)}),onFocus:ae(t.onFocus,()=>{const f=s.activationMode!=="manual";!d&&!i&&f&&s.onValueChange(r)})})})});_4.displayName=w4;var E4="TabsContent",C4=C.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:i,children:o,...s}=t,a=$x(E4,n),l=b4(a.baseId,r),u=A4(a.baseId,r),d=r===a.value,f=C.useRef(d);return C.useEffect(()=>{const h=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(h)},[]),c.jsx(Xn,{present:i||d,children:({present:h})=>c.jsx(me.div,{"data-state":d?"active":"inactive","data-orientation":a.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:u,tabIndex:0,...s,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:h&&o})})});C4.displayName=E4;function b4(t,e){return`${t}-trigger-${e}`}function A4(t,e){return`${t}-content-${e}`}var k$=v4,S4=x4,I4=_4,N4=C4;const dd=k$,oc=C.forwardRef(({className:t,...e},n)=>c.jsx(S4,{ref:n,className:xe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));oc.displayName=S4.displayName;const Nn=C.forwardRef(({className:t,...e},n)=>c.jsx(I4,{ref:n,className:xe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));Nn.displayName=I4.displayName;const Tn=C.forwardRef(({className:t,...e},n)=>c.jsx(N4,{ref:n,className:xe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Tn.displayName=N4.displayName;const Ze=C.forwardRef(({className:t,type:e,...n},r)=>c.jsx("input",{type:e,className:xe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...n}));Ze.displayName="Input";const M$=1,j$=1e6;let Jm=0;function L$(){return Jm=(Jm+1)%Number.MAX_SAFE_INTEGER,Jm.toString()}const eg=new Map,KC=t=>{if(eg.has(t))return;const e=setTimeout(()=>{eg.delete(t),Mu({type:"REMOVE_TOAST",toastId:t})},j$);eg.set(t,e)},F$=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,M$)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?KC(n):t.toasts.forEach(r=>{KC(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},xh=[];let wh={toasts:[]};function Mu(t){wh=F$(wh,t),xh.forEach(e=>{e(wh)})}function Lt({...t}){const e=L$(),n=i=>Mu({type:"UPDATE_TOAST",toast:{...i,id:e}}),r=()=>Mu({type:"DISMISS_TOAST",toastId:e});return Mu({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||r()}}}),{id:e,dismiss:r,update:n}}function Ns(){const[t,e]=C.useState(wh);return C.useEffect(()=>(xh.push(e),()=>{const n=xh.indexOf(e);n>-1&&xh.splice(n,1)}),[t]),{...t,toast:Lt,dismiss:n=>Mu({type:"DISMISS_TOAST",toastId:n})}}function B$(){const t=pc(),{toast:e}=Ns(),{data:n=[],isLoading:r}=Qp({queryKey:["compliance-audits"],queryFn:async()=>{try{return(await Qi("/api/audits/compliance")).audits||[]}catch(f){return console.error("Error fetching compliance audits:",f),[]}}}),i=n.filter(f=>f.status==="draft"),o=n.filter(f=>f.status==="submitted"),s=yl({mutationFn:async f=>(await Qi("/api/audits/compliance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)})).id,onSuccess:()=>{t.invalidateQueries({queryKey:["compliance-audits"]}),e({title:"Audit created",description:"Compliance audit draft created successfully."})},onError:f=>{console.error("Error creating audit:",f),e({title:"Error creating audit",description:"Failed to create compliance audit. Please try again.",variant:"destructive"})}}),a=yl({mutationFn:async({id:f,data:h})=>(await Qi(`/api/audits/compliance/${f}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}),f),onSuccess:()=>{t.invalidateQueries({queryKey:["compliance-audits"]})},onError:f=>{console.error("Error updating audit:",f),e({title:"Error saving audit",description:"Failed to save audit changes. Please try again.",variant:"destructive"})}}),l=yl({mutationFn:async f=>(await Qi(`/api/audits/compliance/${f}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"submitted",submittedAt:new Date().toISOString()})}),f),onSuccess:()=>{t.invalidateQueries({queryKey:["compliance-audits"]}),e({title:"Audit submitted",description:"Compliance audit submitted successfully."})},onError:f=>{console.error("Error submitting audit:",f),e({title:"Error submitting audit",description:"Failed to submit audit. Please try again.",variant:"destructive"})}}),u=async f=>{try{return n.find(m=>m.id===f)||null}catch(h){return console.error("Error fetching audit:",h),null}},d=async(f,h)=>{try{await a.mutateAsync({id:f,data:h})}catch(m){console.error("Auto-save failed:",m)}};return{audits:n,draftAudits:i,submittedAudits:o,isLoading:r,createAudit:s.mutateAsync,updateAudit:a.mutateAsync,submitAudit:l.mutateAsync,getAudit:u,autoSave:d,isCreating:s.isPending,isUpdating:a.isPending,isSubmitting:l.isPending}}const Vd=C.forwardRef(({className:t,...e},n)=>c.jsx("textarea",{className:xe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...e}));Vd.displayName="Textarea";const V$=l4(),U$=async(t,e,n)=>{try{const r=Date.now(),i=`audit-evidence/${e}/${n}/${r}-${t.name}`,o=l$(V$,i),s=await s$(o,t),a=await a$(s.ref);return console.log("✅ Evidence image uploaded:",a),a}catch(r){throw console.error("❌ Failed to upload evidence image:",r),r}},Yn=[{title:"Design Control",items:[{code:"C1",question:"Are design and development procedures established?"},{code:"C2",question:"Are design input requirements identified and reviewed?"},{code:"C3",question:"Are design reviews conducted at key stages?"},{code:"C4",question:"Does design output include all necessary production info?"},{code:"C5",question:"Are design changes verified and controlled?"},{code:"C6",question:"Is prototype or pilot testing done before production?"},{code:"C7",question:"Are design personnel competent and qualified?"}]},{title:"Purchasing Control",items:[{code:"C8",question:"Are suppliers evaluated and approved before ordering?"},{code:"C9",question:"Are materials purchased from approved sources?"},{code:"C10",question:"Are product specs and requirements agreed with suppliers?"},{code:"C11",question:"Is supplier performance monitored and recorded?"},{code:"C12",question:"Is supplier risk assessed to avoid material shortages?"}]},{title:"Storage Management",items:[{code:"C13",question:"Is inventory recorded for incoming and outgoing goods?"},{code:"C14",question:"Is inventory stored in safe and suitable conditions?"},{code:"C15",question:"Are materials clearly identified and segregated?"},{code:"C16",question:"Is product condition checked regularly in storage?"},{code:"C17",question:"Is inventory managed using FIFO or similar systems?"}]},{title:"Incoming Inspection",items:[{code:"C18",question:"Is there a separate area for uninspected materials?"},{code:"C19",question:"Are inspection criteria defined for incoming goods?"},{code:"C20",question:"Are inspections conducted and results recorded?"},{code:"C21",question:"Are unverified materials checked via alternate methods?"},{code:"C22",question:"Are customer-designated sources properly controlled?"},{code:"C23",question:"Is inspection status clearly marked on materials?"},{code:"C24",question:"Are rejected materials properly handled and recorded?"},{code:"C25",question:"Are inspection results analyzed for supplier evaluation?"}]},{title:"Production Control",items:[{code:"C26",question:"Are manufacturing inputs reviewed and documented?"},{code:"C27",question:"Are outputs expressed in specs and drawings?"},{code:"C28",question:"Is there a control plan for production?"},{code:"C29",question:"Are QC staff and work instructions in place?"},{code:"C30",question:"Are materials defined via BOM or similar?"},{code:"C31",question:"Is production scheduled based on capacity and orders?"},{code:"C32",question:"Are products traceable and batch-controlled?"},{code:"C33",question:"Are rejected items isolated and rechecked?"},{code:"C34",question:"Are defects and trends analyzed?"},{code:"C35",question:"Are new tools evaluated before use?"},{code:"C36",question:"Are process parameters monitored and recorded?"},{code:"C37",question:"Can QC stop production for quality issues?"},{code:"C38",question:"Is equipment maintenance planned and recorded?"},{code:"C39",question:"Are handling and transport methods suitable?"},{code:"C40",question:"Are packing and packaging requirements defined?"},{code:"C41",question:"Is the production flow chart available and clear?"},{code:"C42",question:"Are outsourced processes identified?"},{code:"C43",question:"Does the factory have relevant production experience?"},{code:"C44",question:"Are workers skilled and observed during audit?"},{code:"C45",question:"Are machines and facilities adequate for production?"}]},{title:"Final Product Inspection & Testing",items:[{code:"C46",question:"Are customer specs available for QC?"},{code:"C47",question:"Are final inspection criteria defined?"},{code:"C48",question:"Are final inspections conducted and recorded?"},{code:"C49",question:"Are appearance checks done with proper tools?"},{code:"C50",question:"Are safety and functionality checks performed?"},{code:"C51",question:"Are rejected lots isolated and handled properly?"},{code:"C52",question:"Are causes of rejects investigated and improved?"},{code:"C53",question:"Is ongoing reliability testing conducted?"}]},{title:"Measuring & Testing Equipment",items:[{code:"C54",question:"Is life/reliability testing equipment available?"},{code:"C55",question:"Are gauges and tools maintained and protected?"},{code:"C56",question:"Is equipment calibrated regularly?"},{code:"C57",question:"Are display devices checked frequently?"},{code:"C58",question:"Is equipment condition verified with fault simulation?"}]},{title:"Resource Management",items:[{code:"C59",question:"Is infrastructure adequate and layout optimized?"},{code:"C60",question:"Is the factory clean and well-maintained?"},{code:"C61",question:"Are training needs identified and addressed?"},{code:"C62",question:"Are employees motivated for quality and innovation?"},{code:"C63",question:"Are contingency plans in place for emergencies?"}]},{title:"Continuous Improvement",items:[{code:"C64",question:"Is data collected to support improvement?"},{code:"C65",question:"Are failures recorded and investigated?"},{code:"C66",question:"Are quality objectives defined and measured?"},{code:"C67",question:"Are internal audits planned and conducted?"},{code:"C68",question:"Does top management review the QMS?"},{code:"C69",question:"Are corrective actions taken and reviewed?"},{code:"C70",question:"Are preventive actions implemented?"},{code:"C71",question:"Are improvement programs like 5S or Kaizen used?"},{code:"C72",question:"Are audit and review results followed up?"},{code:"C73",question:"Are customer complaints reviewed?"}]},{title:"Social & Environmental Responsibility",items:[{code:"C74",question:"Are working conditions (air, light, cleanliness) acceptable?"},{code:"C75",question:"Are all workers above the legal working age?"},{code:"C76",question:"Do working hours comply with labor laws?"},{code:"C77",question:"Do workers get at least one day off per week?"},{code:"C78",question:"Are workers employed voluntarily?"},{code:"C79",question:"Are wages equal to or above legal minimum?"},{code:"C80",question:"Do women have equal rights and protections?"},{code:"C81",question:"Are workers treated respectfully without abuse?"},{code:"C82",question:"Is the fire protection system adequate and functional?"},{code:"C83",question:"Are fire and evacuation drills conducted regularly?"}]},{title:"Health & Safety",items:[{code:"C84",question:"Are buildings in good physical condition?"},{code:"C85",question:"Are machine guards installed for safety?"},{code:"C86",question:"Are special equipment registered and inspected?"},{code:"C87",question:"Are safety instructions about clothing/jewelry followed?"},{code:"C88",question:"Is PPE provided and in good condition?"},{code:"C89",question:"Are PPE signs posted in required areas?"},{code:"C90",question:"Do workers follow safety instructions and use PPE?"},{code:"C91",question:"Is dormitory separate from production areas?"},{code:"C92",question:"Is a valid restaurant license available if required?"},{code:"C93",question:"Is medical service (e.g., first aid) available for workers?"}]}];function $$({company:t,onBack:e,existingAudit:n}){const{toast:r}=Ns(),[i,o]=C.useState(0),[s,a]=C.useState({auditorName:"",location:"",auditScope:"",checklist:Yn.flatMap(b=>b.items),partScores:{}}),[l,u]=C.useState(!1),[d,f]=C.useState(!1),[h,m]=C.useState((n==null?void 0:n.id)||null),[g,v]=C.useState(new Set);C.useEffect(()=>{var b;n&&a({auditorName:n.auditorName,location:n.location,auditScope:n.auditScope,checklist:((b=n.parts)==null?void 0:b.flatMap(k=>k.items.map(R=>({code:R.id||`C${Math.random().toString(36).substr(2,3)}`,question:R.question||"",response:R.response,remarks:R.remark,evidence:R.evidenceImages||[]}))))||Yn.flatMap(k=>k.items),partScores:{}})},[n]);const y=(b,k)=>{a(R=>({...R,checklist:R.checklist.map(P=>P.code===b?{...P,response:k}:P)}))},x=(b,k)=>{a(R=>({...R,checklist:R.checklist.map(P=>P.code===b?{...P,remarks:k}:P)}))},w=(b,k)=>{a(R=>({...R,checklist:R.checklist.map(P=>P.code===b?{...P,evidence:[...P.evidence||[],k]}:P)}))},E=(b,k)=>{a(R=>({...R,checklist:R.checklist.map(P=>{var G;return P.code===b?{...P,evidence:((G=P.evidence)==null?void 0:G.filter((K,X)=>X!==k))||[]}:P})}))},A=b=>{const k=Yn[b],R=s.checklist.filter(K=>k.items.some(X=>X.code===K.code)),P=R.filter(K=>K.response&&K.response!=="NA"),G=R.filter(K=>K.response==="Yes").length;return P.length>0?Math.round(G/P.length*100):0},O=async(b,k,R)=>{try{const P=await fetch(`/api/audits/compliance/${b}`);if(!P.ok)throw new Error("Failed to fetch audit");const{audit:G}=await P.json(),K=G.parts.map(F=>({...F,items:F.items.map(z=>z.code===k?{...z,evidenceImages:[...z.evidenceImages||[],R]}:z)})),X=(G.checklist||[]).map(F=>F.code===k?{...F,evidence:[...F.evidence||[],R]}:F);if(console.log(`🔄 Updating evidence for ${k}: ${R.substring(0,50)}...`),console.log("📋 Updated checklist item:",X.find(F=>F.code===k)),!(await fetch(`/api/audits/compliance/${b}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...G,parts:K,checklist:X,updatedAt:new Date().toISOString()})})).ok)throw new Error("Failed to update audit in Firestore");console.log(`✅ Evidence URL successfully added to both parts and checklist for ${k}`)}catch(P){throw console.error("Error updating evidence in Firestore:",P),P}},j=async(b,k)=>{var P;const R=(P=k.target.files)==null?void 0:P[0];if(R){if(!h&&(r({title:"Saving audit first",description:"Creating audit draft before uploading evidence..."}),await N(),!h)){r({title:"Error",description:"Failed to create audit. Please try again.",variant:"destructive"});return}v(G=>new Set([...G,b]));try{r({title:"Uploading evidence",description:"Saving evidence image..."});const G=await U$(R,h,b);w(b,G.url),await O(h,b,G.url),r({title:"Evidence uploaded",description:"Evidence image saved successfully."})}catch(G){console.error("Evidence upload error:",G),r({title:"Upload failed",description:"Failed to upload evidence. Please retry.",variant:"destructive"})}finally{v(G=>{const K=new Set(G);return K.delete(b),K})}}},N=async()=>{f(!0);try{const b=Yn.flatMap(P=>P.items.map(G=>{const K=s.checklist.find(X=>X.code===G.code);return{code:G.code,question:G.question,response:K==null?void 0:K.response,remark:K==null?void 0:K.remarks,evidence:(K==null?void 0:K.evidence)||[]}}));console.log("📋 Flattened checklist before saving:",b),console.log("📊 Checklist items with evidence:",b.filter(P=>P.evidence&&P.evidence.length>0));const k={auditorName:s.auditorName,location:s.location,auditScope:s.auditScope,company:t,auditDate:new Date().toISOString().split("T")[0],parts:Yn.map((P,G)=>({id:`part-${G+1}`,title:P.title,items:P.items.map(K=>{const X=s.checklist.find(ee=>ee.code===K.code);return{code:K.code,question:K.question,response:X==null?void 0:X.response,remark:X==null?void 0:X.remarks,evidenceImages:(X==null?void 0:X.evidence)||[]}}),weight:1,maxPoints:P.items.length})),checklist:b,status:"draft"},R=await fetch("/api/audits/compliance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});if(R.ok){const P=await R.json();P.id&&!h&&m(P.id),window.dispatchEvent(new CustomEvent("compliance-audit-saved")),r({title:"Draft saved",description:"Audit draft saved successfully."})}else throw new Error("Failed to save draft")}catch{r({title:"Error saving draft",description:"Failed to save audit draft. Please try again.",variant:"destructive"})}finally{f(!1)}},T=async()=>{u(!0);try{const b=Yn.flatMap(P=>P.items.map(G=>{const K=s.checklist.find(X=>X.code===G.code);return{code:G.code,question:G.question,response:K==null?void 0:K.response,remark:K==null?void 0:K.remarks,evidence:(K==null?void 0:K.evidence)||[]}}));console.log("📋 Flattened checklist before submission:",b),console.log("📊 Checklist items with evidence:",b.filter(P=>P.evidence&&P.evidence.length>0));const k={auditorName:s.auditorName,location:s.location,auditScope:s.auditScope,company:t,auditDate:new Date().toISOString().split("T")[0],parts:Yn.map((P,G)=>({id:`part-${G+1}`,title:P.title,items:P.items.map(K=>{const X=s.checklist.find(ee=>ee.code===K.code);return{code:K.code,question:K.question,response:X==null?void 0:X.response,remark:X==null?void 0:X.remarks,evidenceImages:(X==null?void 0:X.evidence)||[]}}),weight:1,maxPoints:P.items.length})),checklist:b,status:"submitted"};if((await fetch("/api/audits/compliance",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)})).ok)window.dispatchEvent(new CustomEvent("compliance-audit-submitted")),r({title:"Audit submitted",description:"Compliance audit submitted successfully."}),e();else throw new Error("Failed to submit audit")}catch{r({title:"Error submitting audit",description:"Failed to submit audit. Please try again.",variant:"destructive"})}finally{u(!1)}},S=Yn[i];return s.checklist.filter(b=>S.items.some(k=>k.code===b.code)),c.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:c.jsxs("div",{className:"max-w-4xl mx-auto",children:[c.jsxs("div",{className:"mb-6",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[c.jsxs(ve,{variant:"outline",onClick:e,className:"flex items-center gap-2",children:[c.jsx(oE,{className:"h-4 w-4"}),"Back to Dashboard"]}),c.jsx(Dn,{variant:"secondary",className:"text-sm",children:t==="EHI"?"Eastern Home Industries":"Eastern Mills Private Limited"})]}),c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Compliance Audit Form"}),c.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[c.jsxs("span",{children:["Part ",i+1," of ",Yn.length]}),c.jsx("span",{children:"•"}),c.jsx("span",{children:S.title}),c.jsx("span",{children:"•"}),c.jsxs("span",{children:["Score: ",A(i),"%"]})]})]}),i===0&&c.jsxs(Pe,{className:"mb-6",children:[c.jsx(hn,{children:c.jsx(pn,{children:"Audit Information"})}),c.jsxs(Le,{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Auditor Name"}),c.jsx(Ze,{value:s.auditorName,onChange:b=>a(k=>({...k,auditorName:b.target.value})),placeholder:"Enter auditor name"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Location"}),c.jsx(Ze,{value:s.location,onChange:b=>a(k=>({...k,location:b.target.value})),placeholder:"Enter audit location"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium mb-2",children:"Audit Scope"}),c.jsx(Ze,{value:s.auditScope,onChange:b=>a(k=>({...k,auditScope:b.target.value})),placeholder:"Enter audit scope"})]})]})]}),c.jsxs(Pe,{className:"mb-6",children:[c.jsx(hn,{children:c.jsxs(pn,{className:"flex items-center justify-between",children:[c.jsxs("span",{children:["Part ",i+1,": ",S.title]}),c.jsxs(Dn,{variant:"secondary",children:[A(i),"% Complete"]})]})}),c.jsx(Le,{className:"space-y-6",children:S.items.map((b,k)=>{var P;const R=s.checklist.find(G=>G.code===b.code);return c.jsxs("div",{className:"border rounded-lg p-4 bg-white",children:[c.jsx("div",{className:"flex items-start justify-between mb-3",children:c.jsx("div",{className:"flex-1",children:c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(Dn,{variant:"outline",className:"text-xs",children:b.code}),c.jsx("span",{className:"text-sm font-medium text-gray-900",children:b.question})]})})}),c.jsxs("div",{className:"flex gap-2 mb-3",children:[c.jsxs(ve,{variant:(R==null?void 0:R.response)==="Yes"?"default":"outline",size:"sm",onClick:()=>y(b.code,"Yes"),className:"flex items-center gap-1",children:[c.jsx(Xl,{className:"h-3 w-3"}),"Yes"]}),c.jsxs(ve,{variant:(R==null?void 0:R.response)==="No"?"destructive":"outline",size:"sm",onClick:()=>y(b.code,"No"),className:"flex items-center gap-1",children:[c.jsx(Yl,{className:"h-3 w-3"}),"No"]}),c.jsxs(ve,{variant:(R==null?void 0:R.response)==="NA"?"secondary":"outline",size:"sm",onClick:()=>y(b.code,"NA"),className:"flex items-center gap-1",children:[c.jsx(Ro,{className:"h-3 w-3"}),"N/A"]})]}),c.jsxs("div",{className:"mb-3",children:[c.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Remarks (Optional)"}),c.jsx(Vd,{value:(R==null?void 0:R.remarks)||"",onChange:G=>x(b.code,G.target.value),placeholder:"Add any remarks or observations...",className:"text-sm",rows:2})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Evidence Images (Optional - Max 5)"}),c.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[(P=R==null?void 0:R.evidence)==null?void 0:P.map((G,K)=>c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:G,alt:`Evidence ${K+1}`,className:"w-16 h-16 object-cover rounded border"}),c.jsx(ve,{variant:"destructive",size:"sm",className:"absolute -top-2 -right-2 h-5 w-5 rounded-full p-0",onClick:()=>E(b.code,K),children:c.jsx(Yl,{className:"h-3 w-3"})})]},K)),(!(R!=null&&R.evidence)||R.evidence.length<5)&&c.jsxs("label",{className:"cursor-pointer",children:[c.jsx("div",{className:"w-16 h-16 border-2 border-dashed border-gray-300 rounded flex items-center justify-center hover:border-blue-400 transition-colors",children:g.has(b.code)?c.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}):c.jsx(Ql,{className:"h-6 w-6 text-gray-400"})}),c.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:G=>j(b.code,G),disabled:g.has(b.code)})]})]})]})]},b.code)})})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(ve,{variant:"outline",onClick:()=>o(Math.max(0,i-1)),disabled:i===0,className:"flex items-center gap-2",children:[c.jsx(oE,{className:"h-4 w-4"}),"Previous Part"]}),i<Yn.length-1&&c.jsxs(ve,{onClick:()=>o(Math.min(Yn.length-1,i+1)),className:"flex items-center gap-2",children:["Next Part",c.jsx(z5,{className:"h-4 w-4"})]})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsxs(ve,{variant:"outline",onClick:N,disabled:d,className:"flex items-center gap-2",children:[c.jsx(Ly,{className:"h-4 w-4"}),d?"Saving...":"Save Draft"]}),i===Yn.length-1&&c.jsxs(ve,{onClick:T,disabled:l||!s.auditorName||!s.location,className:"flex items-center gap-2",children:[c.jsx(rN,{className:"h-4 w-4"}),l?"Submitting...":"Submit Audit"]})]})]}),c.jsxs("div",{className:"mt-6",children:[c.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[c.jsx("span",{children:"Progress"}),c.jsxs("span",{children:[i+1," / ",Yn.length]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${(i+1)/Yn.length*100}%`}})})]})]})})}function XC(t,[e,n]){return Math.min(n,Math.max(e,t))}function z$(t,e=globalThis==null?void 0:globalThis.document){const n=zt(t);C.useEffect(()=>{const r=i=>{i.key==="Escape"&&n(i)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var H$="DismissableLayer",sv="dismissableLayer.update",W$="dismissableLayer.pointerDownOutside",G$="dismissableLayer.focusOutside",QC,T4=C.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Ud=C.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:s,onDismiss:a,...l}=t,u=C.useContext(T4),[d,f]=C.useState(null),h=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=C.useState({}),g=$e(e,N=>f(N)),v=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=v.indexOf(y),w=d?v.indexOf(d):-1,E=u.layersWithOutsidePointerEventsDisabled.size>0,A=w>=x,O=X$(N=>{const T=N.target,S=[...u.branches].some(b=>b.contains(T));!A||S||(i==null||i(N),s==null||s(N),N.defaultPrevented||a==null||a())},h),j=Q$(N=>{const T=N.target;[...u.branches].some(b=>b.contains(T))||(o==null||o(N),s==null||s(N),N.defaultPrevented||a==null||a())},h);return z$(N=>{w===u.layers.size-1&&(r==null||r(N),!N.defaultPrevented&&a&&(N.preventDefault(),a()))},h),C.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(QC=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),YC(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=QC)}},[d,h,n,u]),C.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),YC())},[d,u]),C.useEffect(()=>{const N=()=>m({});return document.addEventListener(sv,N),()=>document.removeEventListener(sv,N)},[]),c.jsx(me.div,{...l,ref:g,style:{pointerEvents:E?A?"auto":"none":void 0,...t.style},onFocusCapture:ae(t.onFocusCapture,j.onFocusCapture),onBlurCapture:ae(t.onBlurCapture,j.onBlurCapture),onPointerDownCapture:ae(t.onPointerDownCapture,O.onPointerDownCapture)})});Ud.displayName=H$;var q$="DismissableLayerBranch",K$=C.forwardRef((t,e)=>{const n=C.useContext(T4),r=C.useRef(null),i=$e(e,r);return C.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),c.jsx(me.div,{...t,ref:i})});K$.displayName=q$;function X$(t,e=globalThis==null?void 0:globalThis.document){const n=zt(t),r=C.useRef(!1),i=C.useRef(()=>{});return C.useEffect(()=>{const o=a=>{if(a.target&&!r.current){let l=function(){R4(W$,n,u,{discrete:!0})};const u={originalEvent:a};a.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=l,e.addEventListener("click",i.current,{once:!0})):l()}else e.removeEventListener("click",i.current);r.current=!1},s=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(s),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function Q$(t,e=globalThis==null?void 0:globalThis.document){const n=zt(t),r=C.useRef(!1);return C.useEffect(()=>{const i=o=>{o.target&&!r.current&&R4(G$,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function YC(){const t=new CustomEvent(sv);document.dispatchEvent(t)}function R4(t,e,n,{discrete:r}){const i=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&i.addEventListener(t,e,{once:!0}),r?tp(i,o):i.dispatchEvent(o)}var tg=0;function zx(){C.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??ZC()),document.body.insertAdjacentElement("beforeend",t[1]??ZC()),tg++,()=>{tg===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),tg--}},[])}function ZC(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var ng="focusScope.autoFocusOnMount",rg="focusScope.autoFocusOnUnmount",JC={bubbles:!1,cancelable:!0},Y$="FocusScope",w0=C.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...s}=t,[a,l]=C.useState(null),u=zt(i),d=zt(o),f=C.useRef(null),h=$e(e,v=>l(v)),m=C.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;C.useEffect(()=>{if(r){let v=function(E){if(m.paused||!a)return;const A=E.target;a.contains(A)?f.current=A:bo(f.current,{select:!0})},y=function(E){if(m.paused||!a)return;const A=E.relatedTarget;A!==null&&(a.contains(A)||bo(f.current,{select:!0}))},x=function(E){if(document.activeElement===document.body)for(const O of E)O.removedNodes.length>0&&bo(a)};document.addEventListener("focusin",v),document.addEventListener("focusout",y);const w=new MutationObserver(x);return a&&w.observe(a,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",y),w.disconnect()}}},[r,a,m.paused]),C.useEffect(()=>{if(a){tb.add(m);const v=document.activeElement;if(!a.contains(v)){const x=new CustomEvent(ng,JC);a.addEventListener(ng,u),a.dispatchEvent(x),x.defaultPrevented||(Z$(rz(P4(a)),{select:!0}),document.activeElement===v&&bo(a))}return()=>{a.removeEventListener(ng,u),setTimeout(()=>{const x=new CustomEvent(rg,JC);a.addEventListener(rg,d),a.dispatchEvent(x),x.defaultPrevented||bo(v??document.body,{select:!0}),a.removeEventListener(rg,d),tb.remove(m)},0)}}},[a,u,d,m]);const g=C.useCallback(v=>{if(!n&&!r||m.paused)return;const y=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,x=document.activeElement;if(y&&x){const w=v.currentTarget,[E,A]=J$(w);E&&A?!v.shiftKey&&x===A?(v.preventDefault(),n&&bo(E,{select:!0})):v.shiftKey&&x===E&&(v.preventDefault(),n&&bo(A,{select:!0})):x===w&&v.preventDefault()}},[n,r,m.paused]);return c.jsx(me.div,{tabIndex:-1,...s,ref:h,onKeyDown:g})});w0.displayName=Y$;function Z$(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(bo(r,{select:e}),document.activeElement!==n)return}function J$(t){const e=P4(t),n=eb(e,t),r=eb(e.reverse(),t);return[n,r]}function P4(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function eb(t,e){for(const n of t)if(!ez(n,{upTo:e}))return n}function ez(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function tz(t){return t instanceof HTMLInputElement&&"select"in t}function bo(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&tz(t)&&e&&t.select()}}var tb=nz();function nz(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=nb(t,e),t.unshift(e)},remove(e){var n;t=nb(t,e),(n=t[0])==null||n.resume()}}}function nb(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function rz(t){return t.filter(e=>e.tagName!=="A")}const iz=["top","right","bottom","left"],_s=Math.min,hr=Math.max,Ep=Math.round,Bf=Math.floor,Di=t=>({x:t,y:t}),oz={left:"right",right:"left",bottom:"top",top:"bottom"},sz={start:"end",end:"start"};function av(t,e,n){return hr(t,_s(e,n))}function co(t,e){return typeof t=="function"?t(e):t}function uo(t){return t.split("-")[0]}function bc(t){return t.split("-")[1]}function Hx(t){return t==="x"?"y":"x"}function Wx(t){return t==="y"?"height":"width"}function Es(t){return["top","bottom"].includes(uo(t))?"y":"x"}function Gx(t){return Hx(Es(t))}function az(t,e,n){n===void 0&&(n=!1);const r=bc(t),i=Gx(t),o=Wx(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=Cp(s)),[s,Cp(s)]}function lz(t){const e=Cp(t);return[lv(t),e,lv(e)]}function lv(t){return t.replace(/start|end/g,e=>sz[e])}function cz(t,e,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?o:s;default:return[]}}function uz(t,e,n,r){const i=bc(t);let o=cz(uo(t),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),e&&(o=o.concat(o.map(lv)))),o}function Cp(t){return t.replace(/left|right|bottom|top/g,e=>oz[e])}function dz(t){return{top:0,right:0,bottom:0,left:0,...t}}function D4(t){return typeof t!="number"?dz(t):{top:t,right:t,bottom:t,left:t}}function bp(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function rb(t,e,n){let{reference:r,floating:i}=t;const o=Es(e),s=Gx(e),a=Wx(s),l=uo(e),u=o==="y",d=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let m;switch(l){case"top":m={x:d,y:r.y-i.height};break;case"bottom":m={x:d,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:f};break;case"left":m={x:r.x-i.width,y:f};break;default:m={x:r.x,y:r.y}}switch(bc(e)){case"start":m[s]-=h*(n&&u?-1:1);break;case"end":m[s]+=h*(n&&u?-1:1);break}return m}const fz=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let u=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:d,y:f}=rb(u,r,l),h=r,m={},g=0;for(let v=0;v<a.length;v++){const{name:y,fn:x}=a[v],{x:w,y:E,data:A,reset:O}=await x({x:d,y:f,initialPlacement:r,placement:h,strategy:i,middlewareData:m,rects:u,platform:s,elements:{reference:t,floating:e}});d=w??d,f=E??f,m={...m,[y]:{...m[y],...A}},O&&g<=50&&(g++,typeof O=="object"&&(O.placement&&(h=O.placement),O.rects&&(u=O.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):O.rects),{x:d,y:f}=rb(u,h,l)),v=-1)}return{x:d,y:f,placement:h,strategy:i,middlewareData:m}};async function fd(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:f="floating",altBoundary:h=!1,padding:m=0}=co(e,t),g=D4(m),y=a[h?f==="floating"?"reference":"floating":f],x=bp(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(y)))==null||n?y:y.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:u,rootBoundary:d,strategy:l})),w=f==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,E=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),A=await(o.isElement==null?void 0:o.isElement(E))?await(o.getScale==null?void 0:o.getScale(E))||{x:1,y:1}:{x:1,y:1},O=bp(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:w,offsetParent:E,strategy:l}):w);return{top:(x.top-O.top+g.top)/A.y,bottom:(O.bottom-x.bottom+g.bottom)/A.y,left:(x.left-O.left+g.left)/A.x,right:(O.right-x.right+g.right)/A.x}}const hz=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:i,rects:o,platform:s,elements:a,middlewareData:l}=e,{element:u,padding:d=0}=co(t,e)||{};if(u==null)return{};const f=D4(d),h={x:n,y:r},m=Gx(i),g=Wx(m),v=await s.getDimensions(u),y=m==="y",x=y?"top":"left",w=y?"bottom":"right",E=y?"clientHeight":"clientWidth",A=o.reference[g]+o.reference[m]-h[m]-o.floating[g],O=h[m]-o.reference[m],j=await(s.getOffsetParent==null?void 0:s.getOffsetParent(u));let N=j?j[E]:0;(!N||!await(s.isElement==null?void 0:s.isElement(j)))&&(N=a.floating[E]||o.floating[g]);const T=A/2-O/2,S=N/2-v[g]/2-1,b=_s(f[x],S),k=_s(f[w],S),R=b,P=N-v[g]-k,G=N/2-v[g]/2+T,K=av(R,G,P),X=!l.arrow&&bc(i)!=null&&G!==K&&o.reference[g]/2-(G<R?b:k)-v[g]/2<0,ee=X?G<R?G-R:G-P:0;return{[m]:h[m]+ee,data:{[m]:K,centerOffset:G-K-ee,...X&&{alignmentOffset:ee}},reset:X}}}),pz=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:u}=e,{mainAxis:d=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:v=!0,...y}=co(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const x=uo(i),w=Es(a),E=uo(a)===a,A=await(l.isRTL==null?void 0:l.isRTL(u.floating)),O=h||(E||!v?[Cp(a)]:lz(a)),j=g!=="none";!h&&j&&O.push(...uz(a,v,g,A));const N=[a,...O],T=await fd(e,y),S=[];let b=((r=o.flip)==null?void 0:r.overflows)||[];if(d&&S.push(T[x]),f){const G=az(i,s,A);S.push(T[G[0]],T[G[1]])}if(b=[...b,{placement:i,overflows:S}],!S.every(G=>G<=0)){var k,R;const G=(((k=o.flip)==null?void 0:k.index)||0)+1,K=N[G];if(K)return{data:{index:G,overflows:b},reset:{placement:K}};let X=(R=b.filter(ee=>ee.overflows[0]<=0).sort((ee,F)=>ee.overflows[1]-F.overflows[1])[0])==null?void 0:R.placement;if(!X)switch(m){case"bestFit":{var P;const ee=(P=b.filter(F=>{if(j){const z=Es(F.placement);return z===w||z==="y"}return!0}).map(F=>[F.placement,F.overflows.filter(z=>z>0).reduce((z,D)=>z+D,0)]).sort((F,z)=>F[1]-z[1])[0])==null?void 0:P[0];ee&&(X=ee);break}case"initialPlacement":X=a;break}if(i!==X)return{reset:{placement:X}}}return{}}}};function ib(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function ob(t){return iz.some(e=>t[e]>=0)}const mz=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...i}=co(t,e);switch(r){case"referenceHidden":{const o=await fd(e,{...i,elementContext:"reference"}),s=ib(o,n.reference);return{data:{referenceHiddenOffsets:s,referenceHidden:ob(s)}}}case"escaped":{const o=await fd(e,{...i,altBoundary:!0}),s=ib(o,n.floating);return{data:{escapedOffsets:s,escaped:ob(s)}}}default:return{}}}}};async function gz(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=uo(n),a=bc(n),l=Es(n)==="y",u=["left","top"].includes(s)?-1:1,d=o&&l?-1:1,f=co(e,t);let{mainAxis:h,crossAxis:m,alignmentAxis:g}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return a&&typeof g=="number"&&(m=a==="end"?g*-1:g),l?{x:m*d,y:h*u}:{x:h*u,y:m*d}}const vz=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=e,l=await gz(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},yz=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:y=>{let{x,y:w}=y;return{x,y:w}}},...l}=co(t,e),u={x:n,y:r},d=await fd(e,l),f=Es(uo(i)),h=Hx(f);let m=u[h],g=u[f];if(o){const y=h==="y"?"top":"left",x=h==="y"?"bottom":"right",w=m+d[y],E=m-d[x];m=av(w,m,E)}if(s){const y=f==="y"?"top":"left",x=f==="y"?"bottom":"right",w=g+d[y],E=g-d[x];g=av(w,g,E)}const v=a.fn({...e,[h]:m,[f]:g});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[h]:o,[f]:s}}}}}},xz=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:i,rects:o,middlewareData:s}=e,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=co(t,e),d={x:n,y:r},f=Es(i),h=Hx(f);let m=d[h],g=d[f];const v=co(a,e),y=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(l){const E=h==="y"?"height":"width",A=o.reference[h]-o.floating[E]+y.mainAxis,O=o.reference[h]+o.reference[E]-y.mainAxis;m<A?m=A:m>O&&(m=O)}if(u){var x,w;const E=h==="y"?"width":"height",A=["top","left"].includes(uo(i)),O=o.reference[f]-o.floating[E]+(A&&((x=s.offset)==null?void 0:x[f])||0)+(A?0:y.crossAxis),j=o.reference[f]+o.reference[E]+(A?0:((w=s.offset)==null?void 0:w[f])||0)-(A?y.crossAxis:0);g<O?g=O:g>j&&(g=j)}return{[h]:m,[f]:g}}}},wz=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:i,rects:o,platform:s,elements:a}=e,{apply:l=()=>{},...u}=co(t,e),d=await fd(e,u),f=uo(i),h=bc(i),m=Es(i)==="y",{width:g,height:v}=o.floating;let y,x;f==="top"||f==="bottom"?(y=f,x=h===(await(s.isRTL==null?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(x=f,y=h==="end"?"top":"bottom");const w=v-d.top-d.bottom,E=g-d.left-d.right,A=_s(v-d[y],w),O=_s(g-d[x],E),j=!e.middlewareData.shift;let N=A,T=O;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(T=E),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(N=w),j&&!h){const b=hr(d.left,0),k=hr(d.right,0),R=hr(d.top,0),P=hr(d.bottom,0);m?T=g-2*(b!==0||k!==0?b+k:hr(d.left,d.right)):N=v-2*(R!==0||P!==0?R+P:hr(d.top,d.bottom))}await l({...e,availableWidth:T,availableHeight:N});const S=await s.getDimensions(a.floating);return g!==S.width||v!==S.height?{reset:{rects:!0}}:{}}}};function _0(){return typeof window<"u"}function Ac(t){return O4(t)?(t.nodeName||"").toLowerCase():"#document"}function yr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Bi(t){var e;return(e=(O4(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function O4(t){return _0()?t instanceof Node||t instanceof yr(t).Node:!1}function ai(t){return _0()?t instanceof Element||t instanceof yr(t).Element:!1}function ji(t){return _0()?t instanceof HTMLElement||t instanceof yr(t).HTMLElement:!1}function sb(t){return!_0()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof yr(t).ShadowRoot}function $d(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=li(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function _z(t){return["table","td","th"].includes(Ac(t))}function E0(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function qx(t){const e=Kx(),n=ai(t)?li(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Ez(t){let e=Cs(t);for(;ji(e)&&!sc(e);){if(qx(e))return e;if(E0(e))return null;e=Cs(e)}return null}function Kx(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function sc(t){return["html","body","#document"].includes(Ac(t))}function li(t){return yr(t).getComputedStyle(t)}function C0(t){return ai(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Cs(t){if(Ac(t)==="html")return t;const e=t.assignedSlot||t.parentNode||sb(t)&&t.host||Bi(t);return sb(e)?e.host:e}function k4(t){const e=Cs(t);return sc(e)?t.ownerDocument?t.ownerDocument.body:t.body:ji(e)&&$d(e)?e:k4(e)}function hd(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=k4(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),s=yr(i);if(o){const a=cv(s);return e.concat(s,s.visualViewport||[],$d(i)?i:[],a&&n?hd(a):[])}return e.concat(i,hd(i,[],n))}function cv(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function M4(t){const e=li(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=ji(t),o=i?t.offsetWidth:n,s=i?t.offsetHeight:r,a=Ep(n)!==o||Ep(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function Xx(t){return ai(t)?t:t.contextElement}function Sl(t){const e=Xx(t);if(!ji(e))return Di(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=M4(e);let s=(o?Ep(n.width):n.width)/r,a=(o?Ep(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const Cz=Di(0);function j4(t){const e=yr(t);return!Kx()||!e.visualViewport?Cz:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function bz(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==yr(t)?!1:e}function Ca(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=Xx(t);let s=Di(1);e&&(r?ai(r)&&(s=Sl(r)):s=Sl(t));const a=bz(o,n,r)?j4(o):Di(0);let l=(i.left+a.x)/s.x,u=(i.top+a.y)/s.y,d=i.width/s.x,f=i.height/s.y;if(o){const h=yr(o),m=r&&ai(r)?yr(r):r;let g=h,v=cv(g);for(;v&&r&&m!==g;){const y=Sl(v),x=v.getBoundingClientRect(),w=li(v),E=x.left+(v.clientLeft+parseFloat(w.paddingLeft))*y.x,A=x.top+(v.clientTop+parseFloat(w.paddingTop))*y.y;l*=y.x,u*=y.y,d*=y.x,f*=y.y,l+=E,u+=A,g=yr(v),v=cv(g)}}return bp({width:d,height:f,x:l,y:u})}function Qx(t,e){const n=C0(t).scrollLeft;return e?e.left+n:Ca(Bi(t)).left+n}function L4(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:Qx(t,r)),o=r.top+e.scrollTop;return{x:i,y:o}}function Az(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",s=Bi(r),a=e?E0(e.floating):!1;if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},u=Di(1);const d=Di(0),f=ji(r);if((f||!f&&!o)&&((Ac(r)!=="body"||$d(s))&&(l=C0(r)),ji(r))){const m=Ca(r);u=Sl(r),d.x=m.x+r.clientLeft,d.y=m.y+r.clientTop}const h=s&&!f&&!o?L4(s,l,!0):Di(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+d.x+h.x,y:n.y*u.y-l.scrollTop*u.y+d.y+h.y}}function Sz(t){return Array.from(t.getClientRects())}function Iz(t){const e=Bi(t),n=C0(t),r=t.ownerDocument.body,i=hr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=hr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+Qx(t);const a=-n.scrollTop;return li(r).direction==="rtl"&&(s+=hr(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function Nz(t,e){const n=yr(t),r=Bi(t),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const u=Kx();(!u||u&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}function Tz(t,e){const n=Ca(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=ji(t)?Sl(t):Di(1),s=t.clientWidth*o.x,a=t.clientHeight*o.y,l=i*o.x,u=r*o.y;return{width:s,height:a,x:l,y:u}}function ab(t,e,n){let r;if(e==="viewport")r=Nz(t,n);else if(e==="document")r=Iz(Bi(t));else if(ai(e))r=Tz(e,n);else{const i=j4(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return bp(r)}function F4(t,e){const n=Cs(t);return n===e||!ai(n)||sc(n)?!1:li(n).position==="fixed"||F4(n,e)}function Rz(t,e){const n=e.get(t);if(n)return n;let r=hd(t,[],!1).filter(a=>ai(a)&&Ac(a)!=="body"),i=null;const o=li(t).position==="fixed";let s=o?Cs(t):t;for(;ai(s)&&!sc(s);){const a=li(s),l=qx(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||$d(s)&&!l&&F4(t,s))?r=r.filter(d=>d!==s):i=a,s=Cs(s)}return e.set(t,r),r}function Pz(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?E0(e)?[]:Rz(e,this._c):[].concat(n),r],a=s[0],l=s.reduce((u,d)=>{const f=ab(e,d,i);return u.top=hr(f.top,u.top),u.right=_s(f.right,u.right),u.bottom=_s(f.bottom,u.bottom),u.left=hr(f.left,u.left),u},ab(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Dz(t){const{width:e,height:n}=M4(t);return{width:e,height:n}}function Oz(t,e,n){const r=ji(e),i=Bi(e),o=n==="fixed",s=Ca(t,!0,o,e);let a={scrollLeft:0,scrollTop:0};const l=Di(0);if(r||!r&&!o)if((Ac(e)!=="body"||$d(i))&&(a=C0(e)),r){const h=Ca(e,!0,o,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else i&&(l.x=Qx(i));const u=i&&!r&&!o?L4(i,a):Di(0),d=s.left+a.scrollLeft-l.x-u.x,f=s.top+a.scrollTop-l.y-u.y;return{x:d,y:f,width:s.width,height:s.height}}function ig(t){return li(t).position==="static"}function lb(t,e){if(!ji(t)||li(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Bi(t)===n&&(n=n.ownerDocument.body),n}function B4(t,e){const n=yr(t);if(E0(t))return n;if(!ji(t)){let i=Cs(t);for(;i&&!sc(i);){if(ai(i)&&!ig(i))return i;i=Cs(i)}return n}let r=lb(t,e);for(;r&&_z(r)&&ig(r);)r=lb(r,e);return r&&sc(r)&&ig(r)&&!qx(r)?n:r||Ez(t)||n}const kz=async function(t){const e=this.getOffsetParent||B4,n=this.getDimensions,r=await n(t.floating);return{reference:Oz(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Mz(t){return li(t).direction==="rtl"}const jz={convertOffsetParentRelativeRectToViewportRelativeRect:Az,getDocumentElement:Bi,getClippingRect:Pz,getOffsetParent:B4,getElementRects:kz,getClientRects:Sz,getDimensions:Dz,getScale:Sl,isElement:ai,isRTL:Mz};function V4(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Lz(t,e){let n=null,r;const i=Bi(t);function o(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function s(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),o();const u=t.getBoundingClientRect(),{left:d,top:f,width:h,height:m}=u;if(a||e(),!h||!m)return;const g=Bf(f),v=Bf(i.clientWidth-(d+h)),y=Bf(i.clientHeight-(f+m)),x=Bf(d),E={rootMargin:-g+"px "+-v+"px "+-y+"px "+-x+"px",threshold:hr(0,_s(1,l))||1};let A=!0;function O(j){const N=j[0].intersectionRatio;if(N!==l){if(!A)return s();N?s(!1,N):r=setTimeout(()=>{s(!1,1e-7)},1e3)}N===1&&!V4(u,t.getBoundingClientRect())&&s(),A=!1}try{n=new IntersectionObserver(O,{...E,root:i.ownerDocument})}catch{n=new IntersectionObserver(O,E)}n.observe(t)}return s(!0),o}function Fz(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=Xx(t),d=i||o?[...u?hd(u):[],...hd(e)]:[];d.forEach(x=>{i&&x.addEventListener("scroll",n,{passive:!0}),o&&x.addEventListener("resize",n)});const f=u&&a?Lz(u,n):null;let h=-1,m=null;s&&(m=new ResizeObserver(x=>{let[w]=x;w&&w.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var E;(E=m)==null||E.observe(e)})),n()}),u&&!l&&m.observe(u),m.observe(e));let g,v=l?Ca(t):null;l&&y();function y(){const x=Ca(t);v&&!V4(v,x)&&n(),v=x,g=requestAnimationFrame(y)}return n(),()=>{var x;d.forEach(w=>{i&&w.removeEventListener("scroll",n),o&&w.removeEventListener("resize",n)}),f==null||f(),(x=m)==null||x.disconnect(),m=null,l&&cancelAnimationFrame(g)}}const Bz=vz,Vz=yz,Uz=pz,$z=wz,zz=mz,cb=hz,Hz=xz,Wz=(t,e,n)=>{const r=new Map,i={platform:jz,...n},o={...i.platform,_c:r};return fz(t,e,{...i,platform:o})};var _h=typeof document<"u"?C.useLayoutEffect:C.useEffect;function Ap(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Ap(t[r],e[r]))return!1;return!0}if(i=Object.keys(t),n=i.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&t.$$typeof)&&!Ap(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function U4(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function ub(t,e){const n=U4(t);return Math.round(e*n)/n}function og(t){const e=C.useRef(t);return _h(()=>{e.current=t}),e}function Gz(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:a=!0,whileElementsMounted:l,open:u}=t,[d,f]=C.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,m]=C.useState(r);Ap(h,r)||m(r);const[g,v]=C.useState(null),[y,x]=C.useState(null),w=C.useCallback(F=>{F!==j.current&&(j.current=F,v(F))},[]),E=C.useCallback(F=>{F!==N.current&&(N.current=F,x(F))},[]),A=o||g,O=s||y,j=C.useRef(null),N=C.useRef(null),T=C.useRef(d),S=l!=null,b=og(l),k=og(i),R=og(u),P=C.useCallback(()=>{if(!j.current||!N.current)return;const F={placement:e,strategy:n,middleware:h};k.current&&(F.platform=k.current),Wz(j.current,N.current,F).then(z=>{const D={...z,isPositioned:R.current!==!1};G.current&&!Ap(T.current,D)&&(T.current=D,fc.flushSync(()=>{f(D)}))})},[h,e,n,k,R]);_h(()=>{u===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,f(F=>({...F,isPositioned:!1})))},[u]);const G=C.useRef(!1);_h(()=>(G.current=!0,()=>{G.current=!1}),[]),_h(()=>{if(A&&(j.current=A),O&&(N.current=O),A&&O){if(b.current)return b.current(A,O,P);P()}},[A,O,P,b,S]);const K=C.useMemo(()=>({reference:j,floating:N,setReference:w,setFloating:E}),[w,E]),X=C.useMemo(()=>({reference:A,floating:O}),[A,O]),ee=C.useMemo(()=>{const F={position:n,left:0,top:0};if(!X.floating)return F;const z=ub(X.floating,d.x),D=ub(X.floating,d.y);return a?{...F,transform:"translate("+z+"px, "+D+"px)",...U4(X.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:D}},[n,a,X.floating,d.x,d.y]);return C.useMemo(()=>({...d,update:P,refs:K,elements:X,floatingStyles:ee}),[d,P,K,X,ee])}const qz=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:i}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?cb({element:r.current,padding:i}).fn(n):{}:r?cb({element:r,padding:i}).fn(n):{}}}},Kz=(t,e)=>({...Bz(t),options:[t,e]}),Xz=(t,e)=>({...Vz(t),options:[t,e]}),Qz=(t,e)=>({...Hz(t),options:[t,e]}),Yz=(t,e)=>({...Uz(t),options:[t,e]}),Zz=(t,e)=>({...$z(t),options:[t,e]}),Jz=(t,e)=>({...zz(t),options:[t,e]}),eH=(t,e)=>({...qz(t),options:[t,e]});var tH="Arrow",$4=C.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...o}=t;return c.jsx(me.svg,{...o,ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:c.jsx("polygon",{points:"0,0 30,0 15,10"})})});$4.displayName=tH;var nH=$4;function z4(t){const[e,n]=C.useState(void 0);return Yt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let s,a;if("borderBoxSize"in o){const l=o.borderBoxSize,u=Array.isArray(l)?l[0]:l;s=u.inlineSize,a=u.blockSize}else s=t.offsetWidth,a=t.offsetHeight;n({width:s,height:a})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Yx="Popper",[H4,b0]=Er(Yx),[rH,W4]=H4(Yx),G4=t=>{const{__scopePopper:e,children:n}=t,[r,i]=C.useState(null);return c.jsx(rH,{scope:e,anchor:r,onAnchorChange:i,children:n})};G4.displayName=Yx;var q4="PopperAnchor",K4=C.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,o=W4(q4,n),s=C.useRef(null),a=$e(e,s);return C.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||s.current)}),r?null:c.jsx(me.div,{...i,ref:a})});K4.displayName=q4;var Zx="PopperContent",[iH,oH]=H4(Zx),X4=C.forwardRef((t,e)=>{var te,de,be,we,Ie,Te;const{__scopePopper:n,side:r="bottom",sideOffset:i=0,align:o="center",alignOffset:s=0,arrowPadding:a=0,avoidCollisions:l=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:m="optimized",onPlaced:g,...v}=t,y=W4(Zx,n),[x,w]=C.useState(null),E=$e(e,Je=>w(Je)),[A,O]=C.useState(null),j=z4(A),N=(j==null?void 0:j.width)??0,T=(j==null?void 0:j.height)??0,S=r+(o!=="center"?"-"+o:""),b=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},k=Array.isArray(u)?u:[u],R=k.length>0,P={padding:b,boundary:k.filter(aH),altBoundary:R},{refs:G,floatingStyles:K,placement:X,isPositioned:ee,middlewareData:F}=Gz({strategy:"fixed",placement:S,whileElementsMounted:(...Je)=>Fz(...Je,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[Kz({mainAxis:i+T,alignmentAxis:s}),l&&Xz({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Qz():void 0,...P}),l&&Yz({...P}),Zz({...P,apply:({elements:Je,rects:_t,availableWidth:fe,availableHeight:Zt})=>{const{width:Ps,height:$0}=_t.reference,Ds=Je.floating.style;Ds.setProperty("--radix-popper-available-width",`${fe}px`),Ds.setProperty("--radix-popper-available-height",`${Zt}px`),Ds.setProperty("--radix-popper-anchor-width",`${Ps}px`),Ds.setProperty("--radix-popper-anchor-height",`${$0}px`)}}),A&&eH({element:A,padding:a}),lH({arrowWidth:N,arrowHeight:T}),h&&Jz({strategy:"referenceHidden",...P})]}),[z,D]=Z4(X),B=zt(g);Yt(()=>{ee&&(B==null||B())},[ee,B]);const $=(te=F.arrow)==null?void 0:te.x,V=(de=F.arrow)==null?void 0:de.y,Y=((be=F.arrow)==null?void 0:be.centerOffset)!==0,[re,ie]=C.useState();return Yt(()=>{x&&ie(window.getComputedStyle(x).zIndex)},[x]),c.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...K,transform:ee?K.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:re,"--radix-popper-transform-origin":[(we=F.transformOrigin)==null?void 0:we.x,(Ie=F.transformOrigin)==null?void 0:Ie.y].join(" "),...((Te=F.hide)==null?void 0:Te.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:c.jsx(iH,{scope:n,placedSide:z,onArrowChange:O,arrowX:$,arrowY:V,shouldHideArrow:Y,children:c.jsx(me.div,{"data-side":z,"data-align":D,...v,ref:E,style:{...v.style,animation:ee?void 0:"none"}})})})});X4.displayName=Zx;var Q4="PopperArrow",sH={top:"bottom",right:"left",bottom:"top",left:"right"},Y4=C.forwardRef(function(e,n){const{__scopePopper:r,...i}=e,o=oH(Q4,r),s=sH[o.placedSide];return c.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[s]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:c.jsx(nH,{...i,ref:n,style:{...i.style,display:"block"}})})});Y4.displayName=Q4;function aH(t){return t!==null}var lH=t=>({name:"transformOrigin",options:t,fn(e){var y,x,w;const{placement:n,rects:r,middlewareData:i}=e,s=((y=i.arrow)==null?void 0:y.centerOffset)!==0,a=s?0:t.arrowWidth,l=s?0:t.arrowHeight,[u,d]=Z4(n),f={start:"0%",center:"50%",end:"100%"}[d],h=(((x=i.arrow)==null?void 0:x.x)??0)+a/2,m=(((w=i.arrow)==null?void 0:w.y)??0)+l/2;let g="",v="";return u==="bottom"?(g=s?f:`${h}px`,v=`${-l}px`):u==="top"?(g=s?f:`${h}px`,v=`${r.floating.height+l}px`):u==="right"?(g=`${-l}px`,v=s?f:`${m}px`):u==="left"&&(g=`${r.floating.width+l}px`,v=s?f:`${m}px`),{data:{x:g,y:v}}}});function Z4(t){const[e,n="center"]=t.split("-");return[e,n]}var J4=G4,eR=K4,tR=X4,nR=Y4,cH="Portal",A0=C.forwardRef((t,e)=>{var a;const{container:n,...r}=t,[i,o]=C.useState(!1);Yt(()=>o(!0),[]);const s=n||i&&((a=globalThis==null?void 0:globalThis.document)==null?void 0:a.body);return s?TI.createPortal(c.jsx(me.div,{...r,ref:e}),s):null});A0.displayName=cH;function Jx(t){const e=C.useRef({value:t,previous:t});return C.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var uH="VisuallyHidden",ew=C.forwardRef((t,e)=>c.jsx(me.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));ew.displayName=uH;var dH=ew,fH=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Va=new WeakMap,Vf=new WeakMap,Uf={},sg=0,rR=function(t){return t&&(t.host||rR(t.parentNode))},hH=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=rR(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},pH=function(t,e,n,r){var i=hH(e,Array.isArray(t)?t:[t]);Uf[n]||(Uf[n]=new WeakMap);var o=Uf[n],s=[],a=new Set,l=new Set(i),u=function(f){!f||a.has(f)||(a.add(f),u(f.parentNode))};i.forEach(u);var d=function(f){!f||l.has(f)||Array.prototype.forEach.call(f.children,function(h){if(a.has(h))d(h);else try{var m=h.getAttribute(r),g=m!==null&&m!=="false",v=(Va.get(h)||0)+1,y=(o.get(h)||0)+1;Va.set(h,v),o.set(h,y),s.push(h),v===1&&g&&Vf.set(h,!0),y===1&&h.setAttribute(n,"true"),g||h.setAttribute(r,"true")}catch(x){console.error("aria-hidden: cannot operate on ",h,x)}})};return d(e),a.clear(),sg++,function(){s.forEach(function(f){var h=Va.get(f)-1,m=o.get(f)-1;Va.set(f,h),o.set(f,m),h||(Vf.has(f)||f.removeAttribute(r),Vf.delete(f)),m||f.removeAttribute(n)}),sg--,sg||(Va=new WeakMap,Va=new WeakMap,Vf=new WeakMap,Uf={})}},tw=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),i=fH(t);return i?(r.push.apply(r,Array.from(i.querySelectorAll("[aria-live]"))),pH(r,i,n,"aria-hidden")):function(){return null}},Eh="right-scroll-bar-position",Ch="width-before-scroll-bar",mH="with-scroll-bars-hidden",gH="--removed-body-scroll-bar-size";function ag(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function vH(t,e){var n=C.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var yH=typeof window<"u"?C.useLayoutEffect:C.useEffect,db=new WeakMap;function xH(t,e){var n=vH(null,function(r){return t.forEach(function(i){return ag(i,r)})});return yH(function(){var r=db.get(n);if(r){var i=new Set(r),o=new Set(t),s=n.current;i.forEach(function(a){o.has(a)||ag(a,null)}),o.forEach(function(a){i.has(a)||ag(a,s)})}db.set(n,t)},[t]),n}function wH(t){return t}function _H(t,e){e===void 0&&(e=wH);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var s=e(o,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var l=function(){var d=s;s=[],d.forEach(o)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(d){s.push(d),u()},filter:function(d){return s=s.filter(d),n}}}};return i}function EH(t){t===void 0&&(t={});var e=_H(null);return e.options=yi({async:!0,ssr:!1},t),e}var iR=function(t){var e=t.sideCar,n=Rd(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return C.createElement(r,yi({},n))};iR.isSideCarExport=!0;function CH(t,e){return t.useMedium(e),iR}var oR=EH(),lg=function(){},S0=C.forwardRef(function(t,e){var n=C.useRef(null),r=C.useState({onScrollCapture:lg,onWheelCapture:lg,onTouchMoveCapture:lg}),i=r[0],o=r[1],s=t.forwardProps,a=t.children,l=t.className,u=t.removeScrollBar,d=t.enabled,f=t.shards,h=t.sideCar,m=t.noIsolation,g=t.inert,v=t.allowPinchZoom,y=t.as,x=y===void 0?"div":y,w=t.gapMode,E=Rd(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=h,O=xH([n,e]),j=yi(yi({},E),i);return C.createElement(C.Fragment,null,d&&C.createElement(A,{sideCar:oR,removeScrollBar:u,shards:f,noIsolation:m,inert:g,setCallbacks:o,allowPinchZoom:!!v,lockRef:n,gapMode:w}),s?C.cloneElement(C.Children.only(a),yi(yi({},j),{ref:O})):C.createElement(x,yi({},j,{className:l,ref:O}),a))});S0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};S0.classNames={fullWidth:Ch,zeroRight:Eh};var bH=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function AH(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=bH();return e&&t.setAttribute("nonce",e),t}function SH(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function IH(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var NH=function(){var t=0,e=null;return{add:function(n){t==0&&(e=AH())&&(SH(e,n),IH(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},TH=function(){var t=NH();return function(e,n){C.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},sR=function(){var t=TH(),e=function(n){var r=n.styles,i=n.dynamic;return t(r,i),null};return e},RH={left:0,top:0,right:0,gap:0},cg=function(t){return parseInt(t||"",10)||0},PH=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[cg(n),cg(r),cg(i)]},DH=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return RH;var e=PH(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},OH=sR(),Il="data-scroll-locked",kH=function(t,e,n,r){var i=t.left,o=t.top,s=t.right,a=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(mH,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Il,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(s,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Eh,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Ch,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(Eh," .").concat(Eh,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Ch," .").concat(Ch,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Il,`] {
    `).concat(gH,": ").concat(a,`px;
  }
`)},fb=function(){var t=parseInt(document.body.getAttribute(Il)||"0",10);return isFinite(t)?t:0},MH=function(){C.useEffect(function(){return document.body.setAttribute(Il,(fb()+1).toString()),function(){var t=fb()-1;t<=0?document.body.removeAttribute(Il):document.body.setAttribute(Il,t.toString())}},[])},jH=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,i=r===void 0?"margin":r;MH();var o=C.useMemo(function(){return DH(i)},[i]);return C.createElement(OH,{styles:kH(o,!e,i,n?"":"!important")})},uv=!1;if(typeof window<"u")try{var $f=Object.defineProperty({},"passive",{get:function(){return uv=!0,!0}});window.addEventListener("test",$f,$f),window.removeEventListener("test",$f,$f)}catch{uv=!1}var Ua=uv?{passive:!1}:!1,LH=function(t){return t.tagName==="TEXTAREA"},aR=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!LH(t)&&n[e]==="visible")},FH=function(t){return aR(t,"overflowY")},BH=function(t){return aR(t,"overflowX")},hb=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=lR(t,r);if(i){var o=cR(t,r),s=o[1],a=o[2];if(s>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},VH=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},UH=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},lR=function(t,e){return t==="v"?FH(e):BH(e)},cR=function(t,e){return t==="v"?VH(e):UH(e)},$H=function(t,e){return t==="h"&&e==="rtl"?-1:1},zH=function(t,e,n,r,i){var o=$H(t,window.getComputedStyle(e).direction),s=o*r,a=n.target,l=e.contains(a),u=!1,d=s>0,f=0,h=0;do{var m=cR(t,a),g=m[0],v=m[1],y=m[2],x=v-y-o*g;(g||x)&&lR(t,a)&&(f+=x,h+=g),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(e.contains(a)||e===a));return(d&&(Math.abs(f)<1||!i)||!d&&(Math.abs(h)<1||!i))&&(u=!0),u},zf=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},pb=function(t){return[t.deltaX,t.deltaY]},mb=function(t){return t&&"current"in t?t.current:t},HH=function(t,e){return t[0]===e[0]&&t[1]===e[1]},WH=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},GH=0,$a=[];function qH(t){var e=C.useRef([]),n=C.useRef([0,0]),r=C.useRef(),i=C.useState(GH++)[0],o=C.useState(sR)[0],s=C.useRef(t);C.useEffect(function(){s.current=t},[t]),C.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var v=j9([t.lockRef.current],(t.shards||[]).map(mb),!0).filter(Boolean);return v.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var a=C.useCallback(function(v,y){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!s.current.allowPinchZoom;var x=zf(v),w=n.current,E="deltaX"in v?v.deltaX:w[0]-x[0],A="deltaY"in v?v.deltaY:w[1]-x[1],O,j=v.target,N=Math.abs(E)>Math.abs(A)?"h":"v";if("touches"in v&&N==="h"&&j.type==="range")return!1;var T=hb(N,j);if(!T)return!0;if(T?O=N:(O=N==="v"?"h":"v",T=hb(N,j)),!T)return!1;if(!r.current&&"changedTouches"in v&&(E||A)&&(r.current=O),!O)return!0;var S=r.current||O;return zH(S,y,v,S==="h"?E:A,!0)},[]),l=C.useCallback(function(v){var y=v;if(!(!$a.length||$a[$a.length-1]!==o)){var x="deltaY"in y?pb(y):zf(y),w=e.current.filter(function(O){return O.name===y.type&&(O.target===y.target||y.target===O.shadowParent)&&HH(O.delta,x)})[0];if(w&&w.should){y.cancelable&&y.preventDefault();return}if(!w){var E=(s.current.shards||[]).map(mb).filter(Boolean).filter(function(O){return O.contains(y.target)}),A=E.length>0?a(y,E[0]):!s.current.noIsolation;A&&y.cancelable&&y.preventDefault()}}},[]),u=C.useCallback(function(v,y,x,w){var E={name:v,delta:y,target:x,should:w,shadowParent:KH(x)};e.current.push(E),setTimeout(function(){e.current=e.current.filter(function(A){return A!==E})},1)},[]),d=C.useCallback(function(v){n.current=zf(v),r.current=void 0},[]),f=C.useCallback(function(v){u(v.type,pb(v),v.target,a(v,t.lockRef.current))},[]),h=C.useCallback(function(v){u(v.type,zf(v),v.target,a(v,t.lockRef.current))},[]);C.useEffect(function(){return $a.push(o),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Ua),document.addEventListener("touchmove",l,Ua),document.addEventListener("touchstart",d,Ua),function(){$a=$a.filter(function(v){return v!==o}),document.removeEventListener("wheel",l,Ua),document.removeEventListener("touchmove",l,Ua),document.removeEventListener("touchstart",d,Ua)}},[]);var m=t.removeScrollBar,g=t.inert;return C.createElement(C.Fragment,null,g?C.createElement(o,{styles:WH(i)}):null,m?C.createElement(jH,{gapMode:t.gapMode}):null)}function KH(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const XH=CH(oR,qH);var I0=C.forwardRef(function(t,e){return C.createElement(S0,yi({},t,{ref:e,sideCar:XH}))});I0.classNames=S0.classNames;var QH=[" ","Enter","ArrowUp","ArrowDown"],YH=[" ","Enter"],zd="Select",[N0,T0,ZH]=Ec(zd),[Sc,SZ]=Er(zd,[ZH,b0]),R0=b0(),[JH,Ts]=Sc(zd),[eW,tW]=Sc(zd),uR=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:i,onOpenChange:o,value:s,defaultValue:a,onValueChange:l,dir:u,name:d,autoComplete:f,disabled:h,required:m,form:g}=t,v=R0(e),[y,x]=C.useState(null),[w,E]=C.useState(null),[A,O]=C.useState(!1),j=Cc(u),[N=!1,T]=Br({prop:r,defaultProp:i,onChange:o}),[S,b]=Br({prop:s,defaultProp:a,onChange:l}),k=C.useRef(null),R=y?g||!!y.closest("form"):!0,[P,G]=C.useState(new Set),K=Array.from(P).map(X=>X.props.value).join(";");return c.jsx(J4,{...v,children:c.jsxs(JH,{required:m,scope:e,trigger:y,onTriggerChange:x,valueNode:w,onValueNodeChange:E,valueNodeHasChildren:A,onValueNodeHasChildrenChange:O,contentId:lr(),value:S,onValueChange:b,open:N,onOpenChange:T,dir:j,triggerPointerDownPosRef:k,disabled:h,children:[c.jsx(N0.Provider,{scope:e,children:c.jsx(eW,{scope:t.__scopeSelect,onNativeOptionAdd:C.useCallback(X=>{G(ee=>new Set(ee).add(X))},[]),onNativeOptionRemove:C.useCallback(X=>{G(ee=>{const F=new Set(ee);return F.delete(X),F})},[]),children:n})}),R?c.jsxs(MR,{"aria-hidden":!0,required:m,tabIndex:-1,name:d,autoComplete:f,value:S,onChange:X=>b(X.target.value),disabled:h,form:g,children:[S===void 0?c.jsx("option",{value:""}):null,Array.from(P)]},K):null]})})};uR.displayName=zd;var dR="SelectTrigger",fR=C.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...i}=t,o=R0(n),s=Ts(dR,n),a=s.disabled||r,l=$e(e,s.onTriggerChange),u=T0(n),d=C.useRef("touch"),[f,h,m]=jR(v=>{const y=u().filter(E=>!E.disabled),x=y.find(E=>E.value===s.value),w=LR(y,v,x);w!==void 0&&s.onValueChange(w.value)}),g=v=>{a||(s.onOpenChange(!0),m()),v&&(s.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return c.jsx(eR,{asChild:!0,...o,children:c.jsx(me.button,{type:"button",role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed",disabled:a,"data-disabled":a?"":void 0,"data-placeholder":kR(s.value)?"":void 0,...i,ref:l,onClick:ae(i.onClick,v=>{v.currentTarget.focus(),d.current!=="mouse"&&g(v)}),onPointerDown:ae(i.onPointerDown,v=>{d.current=v.pointerType;const y=v.target;y.hasPointerCapture(v.pointerId)&&y.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(g(v),v.preventDefault())}),onKeyDown:ae(i.onKeyDown,v=>{const y=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(y&&v.key===" ")&&QH.includes(v.key)&&(g(),v.preventDefault())})})})});fR.displayName=dR;var hR="SelectValue",pR=C.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,children:o,placeholder:s="",...a}=t,l=Ts(hR,n),{onValueNodeHasChildrenChange:u}=l,d=o!==void 0,f=$e(e,l.onValueNodeChange);return Yt(()=>{u(d)},[u,d]),c.jsx(me.span,{...a,ref:f,style:{pointerEvents:"none"},children:kR(l.value)?c.jsx(c.Fragment,{children:s}):o})});pR.displayName=hR;var nW="SelectIcon",mR=C.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...i}=t;return c.jsx(me.span,{"aria-hidden":!0,...i,ref:e,children:r||"▼"})});mR.displayName=nW;var rW="SelectPortal",gR=t=>c.jsx(A0,{asChild:!0,...t});gR.displayName=rW;var ba="SelectContent",vR=C.forwardRef((t,e)=>{const n=Ts(ba,t.__scopeSelect),[r,i]=C.useState();if(Yt(()=>{i(new DocumentFragment)},[]),!n.open){const o=r;return o?fc.createPortal(c.jsx(yR,{scope:t.__scopeSelect,children:c.jsx(N0.Slot,{scope:t.__scopeSelect,children:c.jsx("div",{children:t.children})})}),o):null}return c.jsx(xR,{...t,ref:e})});vR.displayName=ba;var Wr=10,[yR,Rs]=Sc(ba),iW="SelectContentImpl",oW=ga("SelectContent.RemoveScroll"),xR=C.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:s,side:a,sideOffset:l,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:y,...x}=t,w=Ts(ba,n),[E,A]=C.useState(null),[O,j]=C.useState(null),N=$e(e,te=>A(te)),[T,S]=C.useState(null),[b,k]=C.useState(null),R=T0(n),[P,G]=C.useState(!1),K=C.useRef(!1);C.useEffect(()=>{if(E)return tw(E)},[E]),zx();const X=C.useCallback(te=>{const[de,...be]=R().map(Te=>Te.ref.current),[we]=be.slice(-1),Ie=document.activeElement;for(const Te of te)if(Te===Ie||(Te==null||Te.scrollIntoView({block:"nearest"}),Te===de&&O&&(O.scrollTop=0),Te===we&&O&&(O.scrollTop=O.scrollHeight),Te==null||Te.focus(),document.activeElement!==Ie))return},[R,O]),ee=C.useCallback(()=>X([T,E]),[X,T,E]);C.useEffect(()=>{P&&ee()},[P,ee]);const{onOpenChange:F,triggerPointerDownPosRef:z}=w;C.useEffect(()=>{if(E){let te={x:0,y:0};const de=we=>{var Ie,Te;te={x:Math.abs(Math.round(we.pageX)-(((Ie=z.current)==null?void 0:Ie.x)??0)),y:Math.abs(Math.round(we.pageY)-(((Te=z.current)==null?void 0:Te.y)??0))}},be=we=>{te.x<=10&&te.y<=10?we.preventDefault():E.contains(we.target)||F(!1),document.removeEventListener("pointermove",de),z.current=null};return z.current!==null&&(document.addEventListener("pointermove",de),document.addEventListener("pointerup",be,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",de),document.removeEventListener("pointerup",be,{capture:!0})}}},[E,F,z]),C.useEffect(()=>{const te=()=>F(!1);return window.addEventListener("blur",te),window.addEventListener("resize",te),()=>{window.removeEventListener("blur",te),window.removeEventListener("resize",te)}},[F]);const[D,B]=jR(te=>{const de=R().filter(Ie=>!Ie.disabled),be=de.find(Ie=>Ie.ref.current===document.activeElement),we=LR(de,te,be);we&&setTimeout(()=>we.ref.current.focus())}),$=C.useCallback((te,de,be)=>{const we=!K.current&&!be;(w.value!==void 0&&w.value===de||we)&&(S(te),we&&(K.current=!0))},[w.value]),V=C.useCallback(()=>E==null?void 0:E.focus(),[E]),Y=C.useCallback((te,de,be)=>{const we=!K.current&&!be;(w.value!==void 0&&w.value===de||we)&&k(te)},[w.value]),re=r==="popper"?dv:wR,ie=re===dv?{side:a,sideOffset:l,align:u,alignOffset:d,arrowPadding:f,collisionBoundary:h,collisionPadding:m,sticky:g,hideWhenDetached:v,avoidCollisions:y}:{};return c.jsx(yR,{scope:n,content:E,viewport:O,onViewportChange:j,itemRefCallback:$,selectedItem:T,onItemLeave:V,itemTextRefCallback:Y,focusSelectedItem:ee,selectedItemText:b,position:r,isPositioned:P,searchRef:D,children:c.jsx(I0,{as:oW,allowPinchZoom:!0,children:c.jsx(w0,{asChild:!0,trapped:w.open,onMountAutoFocus:te=>{te.preventDefault()},onUnmountAutoFocus:ae(i,te=>{var de;(de=w.trigger)==null||de.focus({preventScroll:!0}),te.preventDefault()}),children:c.jsx(Ud,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:te=>te.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:c.jsx(re,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:te=>te.preventDefault(),...x,...ie,onPlaced:()=>G(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...x.style},onKeyDown:ae(x.onKeyDown,te=>{const de=te.ctrlKey||te.altKey||te.metaKey;if(te.key==="Tab"&&te.preventDefault(),!de&&te.key.length===1&&B(te.key),["ArrowUp","ArrowDown","Home","End"].includes(te.key)){let we=R().filter(Ie=>!Ie.disabled).map(Ie=>Ie.ref.current);if(["ArrowUp","End"].includes(te.key)&&(we=we.slice().reverse()),["ArrowUp","ArrowDown"].includes(te.key)){const Ie=te.target,Te=we.indexOf(Ie);we=we.slice(Te+1)}setTimeout(()=>X(we)),te.preventDefault()}})})})})})})});xR.displayName=iW;var sW="SelectItemAlignedPosition",wR=C.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...i}=t,o=Ts(ba,n),s=Rs(ba,n),[a,l]=C.useState(null),[u,d]=C.useState(null),f=$e(e,N=>d(N)),h=T0(n),m=C.useRef(!1),g=C.useRef(!0),{viewport:v,selectedItem:y,selectedItemText:x,focusSelectedItem:w}=s,E=C.useCallback(()=>{if(o.trigger&&o.valueNode&&a&&u&&v&&y&&x){const N=o.trigger.getBoundingClientRect(),T=u.getBoundingClientRect(),S=o.valueNode.getBoundingClientRect(),b=x.getBoundingClientRect();if(o.dir!=="rtl"){const Ie=b.left-T.left,Te=S.left-Ie,Je=N.left-Te,_t=N.width+Je,fe=Math.max(_t,T.width),Zt=window.innerWidth-Wr,Ps=XC(Te,[Wr,Math.max(Wr,Zt-fe)]);a.style.minWidth=_t+"px",a.style.left=Ps+"px"}else{const Ie=T.right-b.right,Te=window.innerWidth-S.right-Ie,Je=window.innerWidth-N.right-Te,_t=N.width+Je,fe=Math.max(_t,T.width),Zt=window.innerWidth-Wr,Ps=XC(Te,[Wr,Math.max(Wr,Zt-fe)]);a.style.minWidth=_t+"px",a.style.right=Ps+"px"}const k=h(),R=window.innerHeight-Wr*2,P=v.scrollHeight,G=window.getComputedStyle(u),K=parseInt(G.borderTopWidth,10),X=parseInt(G.paddingTop,10),ee=parseInt(G.borderBottomWidth,10),F=parseInt(G.paddingBottom,10),z=K+X+P+F+ee,D=Math.min(y.offsetHeight*5,z),B=window.getComputedStyle(v),$=parseInt(B.paddingTop,10),V=parseInt(B.paddingBottom,10),Y=N.top+N.height/2-Wr,re=R-Y,ie=y.offsetHeight/2,te=y.offsetTop+ie,de=K+X+te,be=z-de;if(de<=Y){const Ie=k.length>0&&y===k[k.length-1].ref.current;a.style.bottom="0px";const Te=u.clientHeight-v.offsetTop-v.offsetHeight,Je=Math.max(re,ie+(Ie?V:0)+Te+ee),_t=de+Je;a.style.height=_t+"px"}else{const Ie=k.length>0&&y===k[0].ref.current;a.style.top="0px";const Je=Math.max(Y,K+v.offsetTop+(Ie?$:0)+ie)+be;a.style.height=Je+"px",v.scrollTop=de-Y+v.offsetTop}a.style.margin=`${Wr}px 0`,a.style.minHeight=D+"px",a.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>m.current=!0)}},[h,o.trigger,o.valueNode,a,u,v,y,x,o.dir,r]);Yt(()=>E(),[E]);const[A,O]=C.useState();Yt(()=>{u&&O(window.getComputedStyle(u).zIndex)},[u]);const j=C.useCallback(N=>{N&&g.current===!0&&(E(),w==null||w(),g.current=!1)},[E,w]);return c.jsx(lW,{scope:n,contentWrapper:a,shouldExpandOnScrollRef:m,onScrollButtonChange:j,children:c.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:c.jsx(me.div,{...i,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});wR.displayName=sW;var aW="SelectPopperPosition",dv=C.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:i=Wr,...o}=t,s=R0(n);return c.jsx(tR,{...s,...o,ref:e,align:r,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});dv.displayName=aW;var[lW,nw]=Sc(ba,{}),fv="SelectViewport",_R=C.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...i}=t,o=Rs(fv,n),s=nw(fv,n),a=$e(e,o.onViewportChange),l=C.useRef(0);return c.jsxs(c.Fragment,{children:[c.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),c.jsx(N0.Slot,{scope:n,children:c.jsx(me.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:a,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:ae(i.onScroll,u=>{const d=u.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:h}=s;if(h!=null&&h.current&&f){const m=Math.abs(l.current-d.scrollTop);if(m>0){const g=window.innerHeight-Wr*2,v=parseFloat(f.style.minHeight),y=parseFloat(f.style.height),x=Math.max(v,y);if(x<g){const w=x+m,E=Math.min(g,w),A=w-E;f.style.height=E+"px",f.style.bottom==="0px"&&(d.scrollTop=A>0?A:0,f.style.justifyContent="flex-end")}}}l.current=d.scrollTop})})})]})});_R.displayName=fv;var ER="SelectGroup",[cW,uW]=Sc(ER),dW=C.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=lr();return c.jsx(cW,{scope:n,id:i,children:c.jsx(me.div,{role:"group","aria-labelledby":i,...r,ref:e})})});dW.displayName=ER;var CR="SelectLabel",bR=C.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=uW(CR,n);return c.jsx(me.div,{id:i.id,...r,ref:e})});bR.displayName=CR;var Sp="SelectItem",[fW,AR]=Sc(Sp),SR=C.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:i=!1,textValue:o,...s}=t,a=Ts(Sp,n),l=Rs(Sp,n),u=a.value===r,[d,f]=C.useState(o??""),[h,m]=C.useState(!1),g=$e(e,w=>{var E;return(E=l.itemRefCallback)==null?void 0:E.call(l,w,r,i)}),v=lr(),y=C.useRef("touch"),x=()=>{i||(a.onValueChange(r),a.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return c.jsx(fW,{scope:n,value:r,disabled:i,textId:v,isSelected:u,onItemTextChange:C.useCallback(w=>{f(E=>E||((w==null?void 0:w.textContent)??"").trim())},[]),children:c.jsx(N0.ItemSlot,{scope:n,value:r,disabled:i,textValue:d,children:c.jsx(me.div,{role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":u&&h,"data-state":u?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...s,ref:g,onFocus:ae(s.onFocus,()=>m(!0)),onBlur:ae(s.onBlur,()=>m(!1)),onClick:ae(s.onClick,()=>{y.current!=="mouse"&&x()}),onPointerUp:ae(s.onPointerUp,()=>{y.current==="mouse"&&x()}),onPointerDown:ae(s.onPointerDown,w=>{y.current=w.pointerType}),onPointerMove:ae(s.onPointerMove,w=>{var E;y.current=w.pointerType,i?(E=l.onItemLeave)==null||E.call(l):y.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:ae(s.onPointerLeave,w=>{var E;w.currentTarget===document.activeElement&&((E=l.onItemLeave)==null||E.call(l))}),onKeyDown:ae(s.onKeyDown,w=>{var A;((A=l.searchRef)==null?void 0:A.current)!==""&&w.key===" "||(YH.includes(w.key)&&x(),w.key===" "&&w.preventDefault())})})})})});SR.displayName=Sp;var du="SelectItemText",IR=C.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:i,...o}=t,s=Ts(du,n),a=Rs(du,n),l=AR(du,n),u=tW(du,n),[d,f]=C.useState(null),h=$e(e,x=>f(x),l.onItemTextChange,x=>{var w;return(w=a.itemTextRefCallback)==null?void 0:w.call(a,x,l.value,l.disabled)}),m=d==null?void 0:d.textContent,g=C.useMemo(()=>c.jsx("option",{value:l.value,disabled:l.disabled,children:m},l.value),[l.disabled,l.value,m]),{onNativeOptionAdd:v,onNativeOptionRemove:y}=u;return Yt(()=>(v(g),()=>y(g)),[v,y,g]),c.jsxs(c.Fragment,{children:[c.jsx(me.span,{id:l.textId,...o,ref:h}),l.isSelected&&s.valueNode&&!s.valueNodeHasChildren?fc.createPortal(o.children,s.valueNode):null]})});IR.displayName=du;var NR="SelectItemIndicator",TR=C.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return AR(NR,n).isSelected?c.jsx(me.span,{"aria-hidden":!0,...r,ref:e}):null});TR.displayName=NR;var hv="SelectScrollUpButton",RR=C.forwardRef((t,e)=>{const n=Rs(hv,t.__scopeSelect),r=nw(hv,t.__scopeSelect),[i,o]=C.useState(!1),s=$e(e,r.onScrollButtonChange);return Yt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollTop>0;o(u)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?c.jsx(DR,{...t,ref:s,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop-l.offsetHeight)}}):null});RR.displayName=hv;var pv="SelectScrollDownButton",PR=C.forwardRef((t,e)=>{const n=Rs(pv,t.__scopeSelect),r=nw(pv,t.__scopeSelect),[i,o]=C.useState(!1),s=$e(e,r.onScrollButtonChange);return Yt(()=>{if(n.viewport&&n.isPositioned){let a=function(){const u=l.scrollHeight-l.clientHeight,d=Math.ceil(l.scrollTop)<u;o(d)};const l=n.viewport;return a(),l.addEventListener("scroll",a),()=>l.removeEventListener("scroll",a)}},[n.viewport,n.isPositioned]),i?c.jsx(DR,{...t,ref:s,onAutoScroll:()=>{const{viewport:a,selectedItem:l}=n;a&&l&&(a.scrollTop=a.scrollTop+l.offsetHeight)}}):null});PR.displayName=pv;var DR=C.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...i}=t,o=Rs("SelectScrollButton",n),s=C.useRef(null),a=T0(n),l=C.useCallback(()=>{s.current!==null&&(window.clearInterval(s.current),s.current=null)},[]);return C.useEffect(()=>()=>l(),[l]),Yt(()=>{var d;const u=a().find(f=>f.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[a]),c.jsx(me.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:ae(i.onPointerDown,()=>{s.current===null&&(s.current=window.setInterval(r,50))}),onPointerMove:ae(i.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),s.current===null&&(s.current=window.setInterval(r,50))}),onPointerLeave:ae(i.onPointerLeave,()=>{l()})})}),hW="SelectSeparator",OR=C.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return c.jsx(me.div,{"aria-hidden":!0,...r,ref:e})});OR.displayName=hW;var mv="SelectArrow",pW=C.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,i=R0(n),o=Ts(mv,n),s=Rs(mv,n);return o.open&&s.position==="popper"?c.jsx(nR,{...i,...r,ref:e}):null});pW.displayName=mv;function kR(t){return t===""||t===void 0}var MR=C.forwardRef((t,e)=>{const{value:n,...r}=t,i=C.useRef(null),o=$e(e,i),s=Jx(n);return C.useEffect(()=>{const a=i.current,l=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(l,"value").set;if(s!==n&&d){const f=new Event("change",{bubbles:!0});d.call(a,n),a.dispatchEvent(f)}},[s,n]),c.jsx(ew,{asChild:!0,children:c.jsx("select",{...r,ref:o,defaultValue:n})})});MR.displayName="BubbleSelect";function jR(t){const e=zt(t),n=C.useRef(""),r=C.useRef(0),i=C.useCallback(s=>{const a=n.current+s;e(a),function l(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>l(""),1e3))}(a)},[e]),o=C.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return C.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,i,o]}function LR(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let s=mW(t,Math.max(o,0));i.length===1&&(s=s.filter(u=>u!==n));const l=s.find(u=>u.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function mW(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var gW=uR,FR=fR,vW=pR,yW=mR,xW=gR,BR=vR,wW=_R,VR=bR,UR=SR,_W=IR,EW=TR,$R=RR,zR=PR,HR=OR;const ti=gW,ni=vW,Pr=C.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(FR,{ref:r,className:xe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,c.jsx(yW,{asChild:!0,children:c.jsx(Zp,{className:"h-4 w-4 opacity-50"})})]}));Pr.displayName=FR.displayName;const WR=C.forwardRef(({className:t,...e},n)=>c.jsx($R,{ref:n,className:xe("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(G5,{className:"h-4 w-4"})}));WR.displayName=$R.displayName;const GR=C.forwardRef(({className:t,...e},n)=>c.jsx(zR,{ref:n,className:xe("flex cursor-default items-center justify-center py-1",t),...e,children:c.jsx(Zp,{className:"h-4 w-4"})}));GR.displayName=zR.displayName;const Dr=C.forwardRef(({className:t,children:e,position:n="popper",...r},i)=>c.jsx(xW,{children:c.jsxs(BR,{ref:i,className:xe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[c.jsx(WR,{}),c.jsx(wW,{className:xe("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),c.jsx(GR,{})]})}));Dr.displayName=BR.displayName;const CW=C.forwardRef(({className:t,...e},n)=>c.jsx(VR,{ref:n,className:xe("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));CW.displayName=VR.displayName;const mt=C.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(UR,{ref:r,className:xe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(EW,{children:c.jsx(Xl,{className:"h-4 w-4"})})}),c.jsx(_W,{children:e})]}));mt.displayName=UR.displayName;const bW=C.forwardRef(({className:t,...e},n)=>c.jsx(HR,{ref:n,className:xe("-mx-1 my-1 h-px bg-muted",t),...e}));bW.displayName=HR.displayName;function AW({selectedCompany:t}){const{toast:e}=Ns(),n=pc(),{audits:r,draftAudits:i,submittedAudits:o,isLoading:s,deleteAuditMutation:a}=B$(),[l,u]=C.useState("overview"),[d,f]=C.useState(""),[h,m]=C.useState(!1),[g,v]=C.useState(t),[y,x]=C.useState(null),[w,E]=C.useState(!1);if(C.useEffect(()=>{v(t)},[t]),C.useEffect(()=>{const V=()=>{console.log("🔄 Received audit update event, refreshing data..."),E(!0),n.invalidateQueries({queryKey:["compliance-audits"]}),n.invalidateQueries({queryKey:["/api/audit"]}),setTimeout(()=>E(!1),1500)};return window.addEventListener("compliance-audit-saved",V),window.addEventListener("compliance-audit-submitted",V),window.addEventListener("auditSaved",V),()=>{window.removeEventListener("compliance-audit-saved",V),window.removeEventListener("compliance-audit-submitted",V),window.removeEventListener("auditSaved",V)}},[n]),h)return c.jsx($$,{company:g,onBack:()=>m(!1),existingAudit:y});const A=r.filter(V=>{var Y,re;return V.company===g&&(((Y=V.auditorName)==null?void 0:Y.toLowerCase().includes(d.toLowerCase()))||((re=V.location)==null?void 0:re.toLowerCase().includes(d.toLowerCase())))}),O=i.filter(V=>{var Y,re;return V.company===g&&(((Y=V.auditorName)==null?void 0:Y.toLowerCase().includes(d.toLowerCase()))||((re=V.location)==null?void 0:re.toLowerCase().includes(d.toLowerCase())))}),j=o.filter(V=>{var Y,re;return V.company===g&&(((Y=V.auditorName)==null?void 0:Y.toLowerCase().includes(d.toLowerCase()))||((re=V.location)==null?void 0:re.toLowerCase().includes(d.toLowerCase())))}),N=A.length,T=O.length,S=j.length,b=new Date;b.setDate(b.getDate()-7);const k=j.filter(V=>{const Y=V.submittedAt?new Date(V.submittedAt):null;return Y&&Y>=b}).length,R=j.filter(V=>{var Y;return((Y=V.scoreData)==null?void 0:Y.score)!==void 0}),P=R.filter(V=>{var Y;return(((Y=V.scoreData)==null?void 0:Y.score)||0)>=80}),G=R.length>0?Math.round(P.length/R.length*100):0,K=R.filter(V=>{var Y;return(((Y=V.scoreData)==null?void 0:Y.score)||0)<80}).length,X=async V=>{if(window.confirm("Are you sure you want to delete this audit? This action cannot be undone."))try{await a.mutateAsync(V),e({title:"✅ Audit Deleted",description:"Compliance audit has been successfully deleted."})}catch{e({title:"❌ Delete Failed",description:"Failed to delete audit. Please try again.",variant:"destructive"})}},ee=V=>{const Y=`/api/audits/compliance/${V.id}/view`;window.open(Y,"_blank","width=1200,height=800,scrollbars=yes,resizable=yes")},F=async V=>{try{E(!0);const Y=`/api/audits/compliance/${V.id}/pdf`,re=document.createElement("a");re.href=Y,re.download=`compliance-audit-${V.company}-${V.id}.pdf`,document.body.appendChild(re),re.click(),document.body.removeChild(re),e({title:"Success",description:"📄 PDF download started"})}catch(Y){console.error("PDF download error:",Y),e({title:"Error",description:"❌ Failed to download PDF",variant:"destructive"})}finally{E(!1)}},z=V=>{if(!V)return"No date";try{return new Date(V).toLocaleDateString()}catch{return"Invalid date"}},D=V=>{if(!V)return"Unknown";try{const Y=new Date(V),ie=Math.floor((new Date().getTime()-Y.getTime())/(1e3*60*60));if(ie<1)return"Just now";if(ie<24)return`${ie}h ago`;const te=Math.floor(ie/24);return te<7?`${te}d ago`:`${Math.floor(te/7)}w ago`}catch{return"Unknown"}},B=({title:V,value:Y,icon:re,description:ie,color:te})=>c.jsx(Pe,{className:"border-0 shadow-sm",children:c.jsx(Le,{className:"p-3 sm:p-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("p",{className:"text-xs sm:text-sm font-medium text-gray-600 truncate",children:V}),c.jsx("p",{className:`text-lg sm:text-2xl font-bold ${te} truncate`,children:Y}),c.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:ie})]}),c.jsx("div",{className:`p-2 sm:p-3 rounded-full flex-shrink-0 ml-2 ${te.includes("blue")?"bg-blue-100":te.includes("green")?"bg-green-100":te.includes("red")?"bg-red-100":"bg-gray-100"}`,children:c.jsx(re,{className:`h-4 w-4 sm:h-6 sm:w-6 ${te}`})})]})})}),$=({audit:V,showStatus:Y=!0})=>{var re,ie,te;return c.jsx(Pe,{className:"border-0 shadow-sm hover:shadow-md transition-shadow",children:c.jsxs(Le,{className:"p-4",children:[c.jsxs("div",{className:"flex items-start justify-between mb-3",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:`${V.auditorName} - ${V.location}`}),c.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(Su,{className:"h-3 w-3"}),z((re=V.createdAt)==null?void 0:re.toString())]}),c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(ed,{className:"h-3 w-3"}),D((ie=V.updatedAt)==null?void 0:ie.toString())]})]})]}),Y&&c.jsx(Dn,{variant:V.status==="submitted"?"default":"secondary",children:V.status==="submitted"?"Submitted":"Draft"})]}),((te=V.scoreData)==null?void 0:te.score)!==void 0&&c.jsxs("div",{className:"mb-3",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{className:"truncate",children:"Compliance Score"}),c.jsxs("span",{className:`font-medium ml-2 flex-shrink-0 ${V.scoreData.score>=80?"text-green-600":"text-red-600"}`,children:[V.scoreData.score,"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1 overflow-hidden",children:c.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${V.scoreData.score>=80?"bg-green-500":"bg-red-500"}`,style:{width:`${Math.min(100,Math.max(0,V.scoreData.score))}%`}})})]}),c.jsx("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:c.jsxs("div",{className:"flex gap-2 flex-1",children:[c.jsxs(ve,{size:"sm",variant:"outline",onClick:()=>ee(V),className:"flex-1 sm:flex-none",children:[c.jsx(Gs,{className:"h-3 w-3 mr-1"}),c.jsx("span",{className:"hidden sm:inline",children:"View"})]}),V.status==="draft"&&c.jsxs(ve,{size:"sm",variant:"outline",onClick:()=>{x(V),m(!0)},className:"flex-1 sm:flex-none",children:[c.jsx(Fy,{className:"h-3 w-3 mr-1"}),c.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),V.status==="submitted"&&c.jsxs(ve,{size:"sm",variant:"outline",onClick:()=>F(V),className:"flex-1 sm:flex-none",disabled:w,children:[c.jsx(S1,{className:"h-3 w-3 mr-1"}),c.jsx("span",{className:"hidden sm:inline",children:"PDF"})]}),V.status==="draft"&&c.jsxs(ve,{size:"sm",variant:"outline",onClick:()=>X(V.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 flex-1 sm:flex-none",children:[c.jsx(By,{className:"h-3 w-3"}),c.jsx("span",{className:"hidden sm:inline ml-1",children:"Delete"})]})]})})]})})};return s?c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-blue-500 border-t-transparent rounded-full mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Loading compliance audits..."})]}):c.jsxs("div",{className:"bg-white",children:[c.jsxs("div",{className:"bg-white border-b p-3 sm:p-6",children:[c.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 mb-2 lg:mb-0",children:"Compliance Audits"}),c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Company:"}),c.jsxs(ti,{value:g,onValueChange:V=>v(V),children:[c.jsx(Pr,{className:"w-full sm:w-64",children:c.jsx(ni,{})}),c.jsxs(Dr,{children:[c.jsx(mt,{value:"EHI",children:"Eastern Home Industries"}),c.jsx(mt,{value:"EMPL",children:"Eastern Mills Private Limited"})]})]})]})]}),c.jsx(ve,{onClick:()=>m(!0),className:"w-full lg:w-auto bg-blue-600 hover:bg-blue-700 text-sm sm:text-base",disabled:w,children:w?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"animate-spin h-4 w-4 mr-2 border-2 border-white border-t-transparent rounded-full"}),"Refreshing..."]}):c.jsxs(c.Fragment,{children:[c.jsx(Ql,{className:"h-4 w-4 mr-2"}),c.jsx("span",{className:"hidden sm:inline",children:"New Compliance Audit"}),c.jsx("span",{className:"sm:hidden",children:"+ New Audit"})]})})]}),c.jsxs("div",{className:"relative",children:[c.jsx(ep,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),c.jsx(Ze,{placeholder:"Search audits by auditor, location, or title...",value:d,onChange:V=>f(V.target.value),className:"pl-10"})]})]}),c.jsx("div",{className:"p-3 sm:p-6",children:c.jsxs(dd,{value:l,onValueChange:u,className:"w-full",children:[c.jsxs(oc,{className:"grid w-full grid-cols-3 mb-6 bg-blue-50",children:[c.jsx(Nn,{value:"overview",className:"data-[state=active]:bg-white data-[state=active]:text-blue-700",children:"Overview"}),c.jsxs(Nn,{value:"drafts",className:"data-[state=active]:bg-white data-[state=active]:text-blue-700",children:["Drafts (",T,")"]}),c.jsxs(Nn,{value:"submitted",className:"data-[state=active]:bg-white data-[state=active]:text-blue-700",children:["Submitted (",S,")"]})]}),c.jsxs(Tn,{value:"overview",className:"mt-0",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-3 sm:gap-4 mb-6",children:[c.jsx(B,{title:"Total Audits",value:N,icon:td,description:"All compliance audits",color:"text-blue-600"}),c.jsx(B,{title:"Draft Audits",value:T,icon:ma,description:"In progress",color:"text-yellow-600"}),c.jsx(B,{title:"Submitted Audits",value:S,icon:bi,description:"Completed audits",color:"text-green-600"}),c.jsx(B,{title:"Submitted This Week",value:k,icon:N1,description:"Last 7 days",color:"text-blue-600"}),c.jsx(B,{title:"Pass Rate",value:`${G}%`,icon:xl,description:"Score ≥ 80%",color:"text-green-600"}),c.jsx(B,{title:"Failed Audits",value:K,icon:q5,description:"Score < 80%",color:"text-red-600"})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Audits"}),A.length===0?c.jsx(Pe,{className:"border-dashed border-2 border-gray-300",children:c.jsxs(Le,{className:"p-8 text-center",children:[c.jsx(td,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No audits found"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first compliance audit to get started"}),c.jsxs(ve,{onClick:()=>m(!0),className:"bg-blue-600 hover:bg-blue-700",children:[c.jsx(Ql,{className:"h-4 w-4 mr-2"}),"Create First Audit"]})]})}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.slice(0,6).map(V=>c.jsx($,{audit:V},V.id))})]})]}),c.jsx(Tn,{value:"drafts",className:"mt-0",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Draft Audits"}),O.length===0?c.jsx(Pe,{className:"border-dashed border-2 border-gray-300",children:c.jsxs(Le,{className:"p-8 text-center",children:[c.jsx(ma,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No draft audits"}),c.jsx("p",{className:"text-gray-600",children:"All audits have been completed and submitted"})]})}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:O.map(V=>c.jsx($,{audit:V,showStatus:!1},V.id))})]})}),c.jsx(Tn,{value:"submitted",className:"mt-0",children:c.jsxs("div",{className:"space-y-4",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Submitted Audits"}),j.length===0?c.jsx(Pe,{className:"border-dashed border-2 border-gray-300",children:c.jsxs(Le,{className:"p-8 text-center",children:[c.jsx(bi,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No submitted audits"}),c.jsx("p",{className:"text-gray-600",children:"Complete and submit audits to see them here"})]})}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(V=>c.jsx($,{audit:V,showStatus:!1},V.id))})]})})]})})]})}var rw="Checkbox",[SW,IZ]=Er(rw),[IW,NW]=SW(rw),qR=C.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:r,checked:i,defaultChecked:o,required:s,disabled:a,value:l="on",onCheckedChange:u,form:d,...f}=t,[h,m]=C.useState(null),g=$e(e,A=>m(A)),v=C.useRef(!1),y=h?d||!!h.closest("form"):!0,[x=!1,w]=Br({prop:i,defaultProp:o,onChange:u}),E=C.useRef(x);return C.useEffect(()=>{const A=h==null?void 0:h.form;if(A){const O=()=>w(E.current);return A.addEventListener("reset",O),()=>A.removeEventListener("reset",O)}},[h,w]),c.jsxs(IW,{scope:n,state:x,disabled:a,children:[c.jsx(me.button,{type:"button",role:"checkbox","aria-checked":ls(x)?"mixed":x,"aria-required":s,"data-state":QR(x),"data-disabled":a?"":void 0,disabled:a,value:l,...f,ref:g,onKeyDown:ae(t.onKeyDown,A=>{A.key==="Enter"&&A.preventDefault()}),onClick:ae(t.onClick,A=>{w(O=>ls(O)?!0:!O),y&&(v.current=A.isPropagationStopped(),v.current||A.stopPropagation())})}),y&&c.jsx(TW,{control:h,bubbles:!v.current,name:r,value:l,checked:x,required:s,disabled:a,form:d,style:{transform:"translateX(-100%)"},defaultChecked:ls(o)?!1:o})]})});qR.displayName=rw;var KR="CheckboxIndicator",XR=C.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:r,...i}=t,o=NW(KR,n);return c.jsx(Xn,{present:r||ls(o.state)||o.state===!0,children:c.jsx(me.span,{"data-state":QR(o.state),"data-disabled":o.disabled?"":void 0,...i,ref:e,style:{pointerEvents:"none",...t.style}})})});XR.displayName=KR;var TW=t=>{const{control:e,checked:n,bubbles:r=!0,defaultChecked:i,...o}=t,s=C.useRef(null),a=Jx(n),l=z4(e);C.useEffect(()=>{const d=s.current,f=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(f,"checked").set;if(a!==n&&m){const g=new Event("click",{bubbles:r});d.indeterminate=ls(n),m.call(d,ls(n)?!1:n),d.dispatchEvent(g)}},[a,n,r]);const u=C.useRef(ls(n)?!1:n);return c.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??u.current,...o,tabIndex:-1,ref:s,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function ls(t){return t==="indeterminate"}function QR(t){return ls(t)?"indeterminate":t?"checked":"unchecked"}var YR=qR,RW=XR;const gv=C.forwardRef(({className:t,...e},n)=>c.jsx(YR,{ref:n,className:xe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...e,children:c.jsx(RW,{className:xe("flex items-center justify-center text-current"),children:c.jsx(Xl,{className:"h-4 w-4"})})}));gv.displayName=YR.displayName;var iw="Dialog",[ZR,NZ]=Er(iw),[PW,ci]=ZR(iw),JR=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:i,onOpenChange:o,modal:s=!0}=t,a=C.useRef(null),l=C.useRef(null),[u=!1,d]=Br({prop:r,defaultProp:i,onChange:o});return c.jsx(PW,{scope:e,triggerRef:a,contentRef:l,contentId:lr(),titleId:lr(),descriptionId:lr(),open:u,onOpenChange:d,onOpenToggle:C.useCallback(()=>d(f=>!f),[d]),modal:s,children:n})};JR.displayName=iw;var eP="DialogTrigger",tP=C.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=ci(eP,n),o=$e(e,i.triggerRef);return c.jsx(me.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":aw(i.open),...r,ref:o,onClick:ae(t.onClick,i.onOpenToggle)})});tP.displayName=eP;var ow="DialogPortal",[DW,nP]=ZR(ow,{forceMount:void 0}),rP=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:i}=t,o=ci(ow,e);return c.jsx(DW,{scope:e,forceMount:n,children:C.Children.map(r,s=>c.jsx(Xn,{present:n||o.open,children:c.jsx(A0,{asChild:!0,container:i,children:s})}))})};rP.displayName=ow;var Ip="DialogOverlay",iP=C.forwardRef((t,e)=>{const n=nP(Ip,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,o=ci(Ip,t.__scopeDialog);return o.modal?c.jsx(Xn,{present:r||o.open,children:c.jsx(kW,{...i,ref:e})}):null});iP.displayName=Ip;var OW=ga("DialogOverlay.RemoveScroll"),kW=C.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=ci(Ip,n);return c.jsx(I0,{as:OW,allowPinchZoom:!0,shards:[i.contentRef],children:c.jsx(me.div,{"data-state":aw(i.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Aa="DialogContent",oP=C.forwardRef((t,e)=>{const n=nP(Aa,t.__scopeDialog),{forceMount:r=n.forceMount,...i}=t,o=ci(Aa,t.__scopeDialog);return c.jsx(Xn,{present:r||o.open,children:o.modal?c.jsx(MW,{...i,ref:e}):c.jsx(jW,{...i,ref:e})})});oP.displayName=Aa;var MW=C.forwardRef((t,e)=>{const n=ci(Aa,t.__scopeDialog),r=C.useRef(null),i=$e(e,n.contentRef,r);return C.useEffect(()=>{const o=r.current;if(o)return tw(o)},[]),c.jsx(sP,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ae(t.onCloseAutoFocus,o=>{var s;o.preventDefault(),(s=n.triggerRef.current)==null||s.focus()}),onPointerDownOutside:ae(t.onPointerDownOutside,o=>{const s=o.detail.originalEvent,a=s.button===0&&s.ctrlKey===!0;(s.button===2||a)&&o.preventDefault()}),onFocusOutside:ae(t.onFocusOutside,o=>o.preventDefault())})}),jW=C.forwardRef((t,e)=>{const n=ci(Aa,t.__scopeDialog),r=C.useRef(!1),i=C.useRef(!1);return c.jsx(sP,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var s,a;(s=t.onCloseAutoFocus)==null||s.call(t,o),o.defaultPrevented||(r.current||(a=n.triggerRef.current)==null||a.focus(),o.preventDefault()),r.current=!1,i.current=!1},onInteractOutside:o=>{var l,u;(l=t.onInteractOutside)==null||l.call(t,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const s=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(s))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&i.current&&o.preventDefault()}})}),sP=C.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:i,onCloseAutoFocus:o,...s}=t,a=ci(Aa,n),l=C.useRef(null),u=$e(e,l);return zx(),c.jsxs(c.Fragment,{children:[c.jsx(w0,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:i,onUnmountAutoFocus:o,children:c.jsx(Ud,{role:"dialog",id:a.contentId,"aria-describedby":a.descriptionId,"aria-labelledby":a.titleId,"data-state":aw(a.open),...s,ref:u,onDismiss:()=>a.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(LW,{titleId:a.titleId}),c.jsx(BW,{contentRef:l,descriptionId:a.descriptionId})]})]})}),sw="DialogTitle",aP=C.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=ci(sw,n);return c.jsx(me.h2,{id:i.titleId,...r,ref:e})});aP.displayName=sw;var lP="DialogDescription",cP=C.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=ci(lP,n);return c.jsx(me.p,{id:i.descriptionId,...r,ref:e})});cP.displayName=lP;var uP="DialogClose",dP=C.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,i=ci(uP,n);return c.jsx(me.button,{type:"button",...r,ref:e,onClick:ae(t.onClick,()=>i.onOpenChange(!1))})});dP.displayName=uP;function aw(t){return t?"open":"closed"}var fP="DialogTitleWarning",[TZ,hP]=zM(fP,{contentName:Aa,titleName:sw,docsSlug:"dialog"}),LW=({titleId:t})=>{const e=hP(fP),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return C.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},FW="DialogDescriptionWarning",BW=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${hP(FW).contentName}}.`;return C.useEffect(()=>{var o;const i=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");e&&i&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},pP=JR,mP=tP,gP=rP,P0=iP,D0=oP,O0=aP,k0=cP,vP=dP;const VW=pP,UW=mP,$W=gP,yP=C.forwardRef(({className:t,...e},n)=>c.jsx(P0,{ref:n,className:xe("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));yP.displayName=P0.displayName;const xP=C.forwardRef(({className:t,children:e,...n},r)=>c.jsxs($W,{children:[c.jsx(yP,{}),c.jsxs(D0,{ref:r,className:xe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg md:w-full",t),...n,children:[e,c.jsxs(vP,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[c.jsx(Yl,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));xP.displayName=D0.displayName;const wP=({className:t,...e})=>c.jsx("div",{className:xe("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});wP.displayName="DialogHeader";const _P=C.forwardRef(({className:t,...e},n)=>c.jsx(O0,{ref:n,className:xe("text-lg font-semibold leading-none tracking-tight",t),...e}));_P.displayName=O0.displayName;const zW=C.forwardRef(({className:t,...e},n)=>c.jsx(k0,{ref:n,className:xe("text-sm text-muted-foreground",t),...e}));zW.displayName=k0.displayName;const HW=({inspectionId:t,inspection:e,trigger:n,onEscalationSent:r})=>{const[i,o]=C.useState(!1),[s,a]=C.useState(""),[l,u]=C.useState(""),[d,f]=C.useState(!1),{toast:h}=Ns(),m={EHI:[{email:"quality.manager@easternmills.com",title:"Quality Manager"},{email:"zakir@easternmills.com",title:"General Manager"}],EMPL:[{email:"quality.manager@easternmills.com",title:"Quality Manager"},{email:"operations@easternmills.com",title:"Operations Manager"}]},g=(e==null?void 0:e.company)||"EHI",v=m[g]||m.EHI,y=async()=>{if(!s||!l.trim()){h({title:"❌ Missing Information",description:"Please select an approver and provide an escalation reason.",variant:"destructive"});return}f(!0);try{await Qi("/api/escalations/test",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inspectionId:t,approverEmail:s,escalationReason:l})}),h({title:"✅ Escalation Sent",description:`Escalation email sent to ${s} with approve/fail buttons.`,duration:5e3}),o(!1),a(""),u(""),r==null||r()}catch(x){console.error("❌ Escalation error:",x),h({title:"❌ Escalation Failed",description:"Failed to send escalation email. Please try again.",variant:"destructive"})}finally{f(!1)}};return c.jsxs(VW,{open:i,onOpenChange:o,children:[c.jsx(UW,{asChild:!0,children:n}),c.jsxs(xP,{className:"sm:max-w-md",children:[c.jsx(wP,{children:c.jsxs(_P,{className:"flex items-center gap-2 text-red-600",children:[c.jsx(Ro,{className:"h-5 w-5"}),"Escalate Failed Inspection"]})}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[c.jsx("h4",{className:"font-medium text-red-800 mb-2",children:"Inspection Details"}),c.jsxs("div",{className:"text-sm text-red-700 space-y-1",children:[c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"ID:"})," ",t]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Material:"})," ",(e==null?void 0:e.materialType)||"Not specified"]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Supplier:"})," ",(e==null?void 0:e.supplierName)||"Not specified"]}),c.jsxs("p",{children:[c.jsx("span",{className:"font-medium",children:"Company:"})," ",g]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[c.jsx(al,{className:"h-4 w-4"}),"Select Approver"]}),c.jsxs(ti,{value:s,onValueChange:a,children:[c.jsx(Pr,{children:c.jsx(ni,{placeholder:"Choose escalation contact..."})}),c.jsx(Dr,{children:v.map(x=>c.jsxs(mt,{value:x.email,children:[x.title," (",x.email,")"]},x.email))})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"text-sm font-medium",children:"Escalation Reason"}),c.jsx(Vd,{placeholder:"Explain why this inspection failed and requires escalation...",value:l,onChange:x=>u(x.target.value),rows:3})]}),c.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[c.jsxs("h4",{className:"font-medium text-blue-800 mb-2 flex items-center gap-2",children:[c.jsx(lE,{className:"h-4 w-4"}),"Email Preview"]}),c.jsxs("div",{className:"text-sm text-blue-700",children:[c.jsx("p",{children:"The recipient will receive an email with:"}),c.jsxs("ul",{className:"list-disc list-inside mt-1 space-y-1",children:[c.jsxs("li",{children:["✅ ",c.jsx("span",{className:"font-medium",children:"Approve"})," button (green)"]}),c.jsxs("li",{children:["❌ ",c.jsx("span",{className:"font-medium",children:"Fail"})," button (red)"]}),c.jsx("li",{children:"Complete inspection details and reasoning"}),c.jsx("li",{children:"Direct action links (no login required)"})]})]})]}),c.jsxs("div",{className:"flex gap-2 pt-2",children:[c.jsx(ve,{variant:"outline",onClick:()=>o(!1),className:"flex-1",children:"Cancel"}),c.jsx(ve,{onClick:y,disabled:d||!s||!l.trim(),className:"flex-1 bg-red-600 hover:bg-red-700",children:d?c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("div",{className:"h-4 w-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Sending..."]}):c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(lE,{className:"h-4 w-4"}),"Send Escalation"]})})]})]})]})]})};var WW="Label",EP=C.forwardRef((t,e)=>c.jsx(me.label,{...t,ref:e,onMouseDown:n=>{var i;n.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));EP.displayName=WW;var CP=EP;const GW=Id("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),He=C.forwardRef(({className:t,...e},n)=>c.jsx(CP,{ref:n,className:xe(GW(),t),...e}));He.displayName=CP.displayName;const Hf={dyed:[{name:"Color Fastness to rubbing (Dry)",standard:`Wool ≥ 4
Cotton ≥ 3-4`,tolerance:`Wool ≥ 4
Cotton ≥ 3-4`},{name:"Color Fastness to rubbing (Wet)",standard:`Wool ≥ 3
Cotton ≥ 3`,tolerance:`Wool ≥ 3
Cotton ≥ 3`},{name:"Moisture content %",standard:"Max 12%",tolerance:"Max 12%"},{name:"Shade matching",standard:"As per approved sample",tolerance:"As per approved sample"},{name:"Hank variations",standard:"As per approved sample",tolerance:"As per approved sample"},{name:"Cleanliness of hanks",standard:"Proper neat & Clean",tolerance:"Proper neat & Clean"},{name:"Smell",standard:"Natural fiber smell",tolerance:"Only natural fiber smell"},{name:"Strength",standard:"OK",tolerance:"OK"},{name:"Stain/Dust",standard:"NO",tolerance:"NO"}],undyed:[{name:"Linear density of Yarn (Count)",standard:`+10% for Wool (if count ≤2200Tex)
+10% for Cotton (if count ≥49Tex)
+5% for other yarns`,tolerance:""},{name:"Determination of Twist (TPI)",standard:`±0.5 for TPI ≤10
±5% for TPI ≥11
or as per stated in TED`,tolerance:""},{name:"No of Ply",standard:"No tolerance (as per material)",tolerance:""},{name:"Color variation (Cone to Cone/Hank to Hank)",standard:"According to approved samples",tolerance:""},{name:"Moisture Content",standard:`Max 12% in winter (Feb to Jun)
Max 16% in rainy/foggy weather (Jul to Jan)`,tolerance:""},{name:"Uneven twist",standard:"As per approved sample",tolerance:""},{name:"Smell",standard:"Smell as per approved sample (natural smell)",tolerance:""},{name:"Strength",standard:"As per approved sample",tolerance:""},{name:"UV (OBA) test for cotton",standard:"Not acceptable",tolerance:""},{name:"Big knots",standard:"Not acceptable",tolerance:""},{name:"Hank Size",standard:'31"-32"',tolerance:""},{name:"Untied hanks",standard:"Not acceptable",tolerance:""},{name:"Kitti/Dust/Dirt/Stain",standard:"Not acceptable",tolerance:""}],cotton:[{name:"Calibration of tool valid",standard:"Valid",tolerance:""},{name:"2/3 Ne",standard:"",tolerance:"2.70–3.30"},{name:"5/4 Ne",standard:"",tolerance:"3.60–4.40"},{name:"6/6 Ne",standard:"",tolerance:"5.40–6.60"},{name:"8/6 Ne",standard:"",tolerance:"5.40–6.60"},{name:"12/20 Ne",standard:"",tolerance:"19–21"},{name:"Ply (2/3 Ne, 5/4 Ne, etc.)",standard:"Not allowed",tolerance:"Not allowed"},{name:"Cone to Cone color variation",standard:"Similar",tolerance:"Not allowed"},{name:"Moisture",standard:"0–12%",tolerance:"0–12%"},{name:"UV Test",standard:"Not allowed",tolerance:"Not allowed"},{name:"Untied thread",standard:"Not allowed",tolerance:"Not allowed"},{name:"Big knots",standard:"Not allowed",tolerance:"Not allowed"},{name:"Colour as per Ref. sample",standard:"As per Ref. Sample",tolerance:"As per Ref. Sample"},{name:"Smell",standard:"Natural smell",tolerance:"Only natural smell"},{name:"Cone size (Height & dia in inch)",standard:"Actual",tolerance:""}]},qW=({selectedCompany:t,editingInspectionId:e,onFormClose:n})=>{const{toast:r}=Ns(),[i,o]=C.useState({inspectionType:"dyed",company:t,dateOfIncoming:new Date().toISOString().split("T")[0],challanInvoiceNo:"",supplierName:"",transportCondition:"ok",materialDetails:"",lotNo:"",sampleResults:[{sampleNumber:1,results:{}}],remarks:"",status:"pass",checkedBy:""}),[s,a]=C.useState(1),[l,u]=C.useState(!1),[d,f]=C.useState([]),[h,m]=C.useState([]),g=async()=>{try{u(!0);const S=window.location.hostname==="localhost"?"http://localhost:5000/api/lab-inspections":"/api/lab-inspections",k=await(await fetch(S)).json();if(Array.isArray(k)){const R=k.filter(G=>G.status==="draft"),P=k.filter(G=>G.status==="submitted");f(R),m(P)}}catch(S){console.error("Error fetching inspections:",S),r({title:"Error",description:"Failed to load saved inspections.",variant:"destructive"})}finally{u(!1)}};C.useEffect(()=>{g()},[]),C.useEffect(()=>{e&&v(e)},[e]);const v=async S=>{try{console.log("Loading inspection for editing:",S);const b=window.location.hostname==="localhost"?`http://localhost:5000/api/lab-inspections/${S}`:`/api/lab-inspections/${S}`,k=await fetch(b);if(!k.ok)throw new Error("Failed to load inspection");const R=await k.json();console.log("Loaded inspection data:",R),o({inspectionType:R.materialType||R.inspectionType||"dyed",company:R.company||t,dateOfIncoming:R.incomingDate||R.dateOfIncoming||new Date().toISOString().split("T")[0],challanInvoiceNo:R.challanNumber||R.challanInvoiceNo||"",supplierName:R.supplierName||"",transportCondition:R.transportCondition||"ok",materialDetails:R.materialDetails||"",lotNo:R.lotNumber||R.lotNo||"",tagNo:R.tagNumber||R.tagNo||"",shadeNo:R.shadeNumber||R.shadeNo||"",selectedHanks:R.selectedHanks||1,selectedBags:R.selectedBags||1,selectedCones:R.selectedCones||1,sampleResults:R.sampleResults||[{sampleNumber:1,results:{}}],remarks:R.remarks||"",status:R.overallStatus||R.status||"pass",checkedBy:R.checkedBy||""}),r({title:"Inspection loaded",description:"Inspection data loaded for viewing/editing."})}catch(b){console.error("Error loading inspection:",b),r({title:"Error",description:"Failed to load inspection data.",variant:"destructive"})}};C.useEffect(()=>{o(S=>{const b=S.sampleResults.length;if(b<s){const k=Array.from({length:s-b},(R,P)=>({sampleNumber:b+P+1,results:{}}));return{...S,sampleResults:[...S.sampleResults,...k]}}else if(b>s)return{...S,sampleResults:S.sampleResults.slice(0,s)};return S})},[s]);const y=()=>Hf[i.inspectionType]||Hf.dyed,x=(S,b)=>{o(k=>{const R={...k,[S]:b};if(S==="inspectionType"){const P=k.inspectionType,G=b;if(P!==G){const K=Hf[G]||Hf.dyed,X=R.sampleResults.map(ee=>({...ee,results:{}}));R.sampleResults=X,r({title:"Testing Parameters Updated",description:`Switched to ${G.charAt(0).toUpperCase()+G.slice(1)} material testing parameters (${K.length} tests)`})}}return R})},w=(S,b,k)=>{o(R=>({...R,sampleResults:R.sampleResults.map((P,G)=>G===S?{...P,results:{...P.results,[b]:k}}:P)}))},E=()=>{const{company:S,inspectionType:b}=i;switch(b){case"undyed":return`${S}/IR/IUnDY`;case"dyed":return`${S}/IR/IDY`;case"cotton":return`${S}/IR/ICT`;default:return`${S}/IR/IMAT`}},A=async()=>{try{if(!i.supplierName||!i.lotNo||!i.checkedBy){r({title:"Validation Error",description:"Please fill in all required fields.",variant:"destructive"});return}console.log("Saving lab inspection:",i);const S=window.location.hostname==="localhost"?"http://localhost:5000/api/lab-inspections":"/api/lab-inspections",b=await fetch(S,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...i,status:"draft",materialType:i.inspectionType,incomingDate:i.dateOfIncoming,challanNumber:i.challanInvoiceNo,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})});if(!b.ok)throw new Error("Failed to save inspection");const k=await b.json();console.log("✅ Inspection saved successfully:",k),r({title:"✅ Draft Saved",description:"Your draft is saved."}),o({inspectionType:"dyed",company:t,dateOfIncoming:new Date().toISOString().split("T")[0],challanInvoiceNo:"",supplierName:"",transportCondition:"ok",materialDetails:"",lotNo:"",sampleResults:[{sampleNumber:1,results:{}}],remarks:"",status:"pass",checkedBy:""}),g()}catch(S){console.error("❌ Error saving inspection:",S),r({title:"❌ Error",description:"Draft not saved. See console.",variant:"destructive"})}},O=async()=>{try{if(!i.supplierName||!i.lotNo||!i.checkedBy){r({title:"Validation Error",description:"Please fill in all required fields.",variant:"destructive"});return}console.log("Submitting lab inspection:",i);const S=window.location.hostname==="localhost"?"http://localhost:5000/api/lab-inspections":"/api/lab-inspections",b=await fetch(S,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...i,status:"submitted",overallStatus:i.status,materialType:i.inspectionType,incomingDate:i.dateOfIncoming,challanNumber:i.challanInvoiceNo,submittedAt:new Date().toISOString(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})});if(!b.ok)throw new Error("Failed to submit inspection");const k=await b.json();console.log("✅ Inspection submitted successfully:",k),r({title:"✅ Test Report Submitted",description:"Your test report has been submitted successfully."}),o({inspectionType:"dyed",company:t,dateOfIncoming:new Date().toISOString().split("T")[0],challanInvoiceNo:"",supplierName:"",transportCondition:"ok",materialDetails:"",lotNo:"",sampleResults:[{sampleNumber:1,results:{}}],remarks:"",status:"pass",checkedBy:""}),g(),n&&n()}catch(S){console.error("❌ Error submitting inspection:",S),r({title:"❌ Error",description:"Test report not submitted. See console.",variant:"destructive"})}},j=async()=>{try{const S=E();console.log("Generating PDF with document number:",S),r({title:"PDF Generated",description:`Report generated with document number: ${S}`})}catch{r({title:"Error",description:"Failed to generate PDF.",variant:"destructive"})}},N=()=>{const{inspectionType:S}=i;return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(He,{htmlFor:"materialDetails",children:"Material Details *"}),c.jsx(Ze,{id:"materialDetails",value:i.materialDetails,onChange:b=>x("materialDetails",b.target.value),placeholder:"Enter material details",required:!0})]}),S==="dyed"&&c.jsxs("div",{children:[c.jsx(He,{htmlFor:"articleName",children:"Article Name"}),c.jsx(Ze,{id:"articleName",value:i.articleName||"",onChange:b=>x("articleName",b.target.value),placeholder:"Enter article name"})]}),c.jsxs("div",{children:[c.jsx(He,{htmlFor:"lotNo",children:"Lot No. *"}),c.jsx(Ze,{id:"lotNo",value:i.lotNo,onChange:b=>x("lotNo",b.target.value),placeholder:"Enter lot number",required:!0})]}),S==="dyed"&&c.jsxs("div",{children:[c.jsx(He,{htmlFor:"tagNo",children:"Tag No."}),c.jsx(Ze,{id:"tagNo",value:i.tagNo||"",onChange:b=>x("tagNo",b.target.value),placeholder:"Enter tag number"})]}),S==="dyed"&&c.jsxs("div",{children:[c.jsx(He,{htmlFor:"shadeNo",children:"Shade No."}),c.jsx(Ze,{id:"shadeNo",value:i.shadeNo||"",onChange:b=>x("shadeNo",b.target.value),placeholder:"Enter shade number"})]}),S==="dyed"&&c.jsxs("div",{children:[c.jsx(He,{htmlFor:"qty",children:"Qty"}),c.jsx(Ze,{id:"qty",value:i.qty||"",onChange:b=>x("qty",b.target.value),placeholder:"Enter quantity"})]}),S==="dyed"&&c.jsxs("div",{children:[c.jsx(He,{htmlFor:"programQty",children:"Program Qty"}),c.jsx(Ze,{id:"programQty",value:i.programQty||"",onChange:b=>x("programQty",b.target.value),placeholder:"Enter program quantity"})]}),(S==="dyed"||S==="undyed")&&c.jsxs("div",{children:[c.jsx(He,{htmlFor:"selectedHanks",children:"Selected Hanks"}),c.jsx(Ze,{id:"selectedHanks",type:"number",min:"1",value:i.selectedHanks||1,onChange:b=>x("selectedHanks",parseInt(b.target.value)||1),placeholder:"Number of hanks"})]}),S==="undyed"&&c.jsxs("div",{children:[c.jsx(He,{htmlFor:"totalBalesReceived",children:"Total Bales Received"}),c.jsx(Ze,{id:"totalBalesReceived",type:"number",value:i.totalBalesReceived||"",onChange:b=>x("totalBalesReceived",parseInt(b.target.value)||0),placeholder:"Total bales received"})]}),S==="undyed"&&c.jsxs("div",{children:[c.jsx(He,{htmlFor:"selectedBales",children:"Selected Bales"}),c.jsx(Ze,{id:"selectedBales",type:"number",value:i.selectedBales||"",onChange:b=>x("selectedBales",parseInt(b.target.value)||0),placeholder:"Selected bales"})]}),S==="cotton"&&c.jsxs(c.Fragment,{children:[c.jsxs("div",{children:[c.jsx(He,{htmlFor:"materialLotNo",children:"Material Lot No."}),c.jsx(Ze,{id:"materialLotNo",value:i.materialLotNo||"",onChange:b=>x("materialLotNo",b.target.value),placeholder:"Enter material lot number"})]}),c.jsxs("div",{children:[c.jsx(He,{htmlFor:"totalBags",children:"Total No. of Bags"}),c.jsx(Ze,{id:"totalBags",type:"number",value:i.totalBags||"",onChange:b=>x("totalBags",parseInt(b.target.value)||0),placeholder:"Total bags"})]}),c.jsxs("div",{children:[c.jsx(He,{htmlFor:"selectedBags",children:"Selected Bags"}),c.jsx(Ze,{id:"selectedBags",type:"number",value:i.selectedBags||"",onChange:b=>x("selectedBags",parseInt(b.target.value)||0),placeholder:"Selected bags"})]}),c.jsxs("div",{children:[c.jsx(He,{htmlFor:"selectedCones",children:"Selected Cones"}),c.jsx(Ze,{id:"selectedCones",type:"number",min:"1",value:i.selectedCones||1,onChange:b=>x("selectedCones",parseInt(b.target.value)||1),placeholder:"Number of cones"})]}),c.jsxs("div",{children:[c.jsx(He,{htmlFor:"standardConeDia",children:"Standard Cone Dia. (inches)"}),c.jsx(Ze,{id:"standardConeDia",value:i.standardConeDia||"",onChange:b=>x("standardConeDia",b.target.value),placeholder:"Standard diameter"})]}),c.jsxs("div",{children:[c.jsx(He,{htmlFor:"actualConeDia",children:"Actual Found Cone Dia. (inches)"}),c.jsx(Ze,{id:"actualConeDia",value:i.actualConeDia||"",onChange:b=>x("actualConeDia",b.target.value),placeholder:"Actual diameter"})]})]})]})},T=()=>{const S=y(),b=i.inspectionType==="cotton"?"Bag":"Hank";return c.jsx("div",{className:"space-y-4",children:S.map((k,R)=>c.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:[c.jsx("div",{className:"bg-gray-50 p-3 border-b border-gray-300",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Parameter"}),c.jsx("p",{className:"font-medium",children:k.name})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Standard"}),c.jsx("p",{className:"text-sm whitespace-pre-line",children:k.standard})]}),c.jsxs("div",{children:[c.jsx("span",{className:"text-sm text-gray-600",children:"Tolerance"}),c.jsx("p",{className:"text-sm whitespace-pre-line",children:k.tolerance})]})]})}),c.jsxs("div",{className:"p-3 space-y-2",children:[c.jsx("div",{className:"flex items-center justify-between mb-2",children:c.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[b," Results"]})}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:Array.from({length:s},(P,G)=>{var K;return c.jsxs("div",{className:"space-y-1",children:[c.jsxs(He,{className:"text-xs text-gray-600",children:[b," ",G+1]}),c.jsx(Ze,{value:((K=i.sampleResults[G])==null?void 0:K.results[k.name])||"",onChange:X=>w(G,k.name,X.target.value),placeholder:"Enter result",className:"text-sm"})]},G)})})]})]},R))})};return c.jsx("div",{className:"w-full max-w-none mx-auto p-3 md:p-6 space-y-6",children:c.jsx(Pe,{children:c.jsxs(Le,{className:"space-y-6 pt-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx(He,{htmlFor:"inspectionType",children:"Inspection Type *"}),c.jsxs(ti,{value:i.inspectionType,onValueChange:S=>x("inspectionType",S),children:[c.jsx(Pr,{children:c.jsx(ni,{})}),c.jsxs(Dr,{children:[c.jsx(mt,{value:"dyed",children:"Dyed"}),c.jsx(mt,{value:"undyed",children:"Undyed"}),c.jsx(mt,{value:"cotton",children:"Cotton"})]})]})]}),c.jsxs("div",{children:[c.jsx(He,{htmlFor:"company",children:"Company *"}),c.jsxs(ti,{value:i.company,onValueChange:S=>x("company",S),children:[c.jsx(Pr,{children:c.jsx(ni,{})}),c.jsxs(Dr,{children:[c.jsx(mt,{value:"EHI",children:"Eastern Home Industries (EHI)"}),c.jsx(mt,{value:"EMPL",children:"Eastern Mills Pvt. Ltd. (EMPL)"})]})]})]}),c.jsxs("div",{children:[c.jsx(He,{htmlFor:"dateOfIncoming",children:"Date of Material Incoming/Receiving *"}),c.jsx(Ze,{id:"dateOfIncoming",type:"date",value:i.dateOfIncoming,onChange:S=>x("dateOfIncoming",S.target.value),required:!0})]}),c.jsxs("div",{children:[c.jsx(He,{htmlFor:"challanInvoiceNo",children:"Challan/Invoice No. *"}),c.jsx(Ze,{id:"challanInvoiceNo",value:i.challanInvoiceNo,onChange:S=>x("challanInvoiceNo",S.target.value),placeholder:"Enter challan/invoice number",required:!0})]}),c.jsxs("div",{children:[c.jsx(He,{htmlFor:"supplierName",children:"Name of Supplier *"}),c.jsx(Ze,{id:"supplierName",value:i.supplierName,onChange:S=>x("supplierName",S.target.value),placeholder:"Enter supplier name",required:!0})]}),c.jsxs("div",{children:[c.jsx(He,{htmlFor:"transportCondition",children:"Condition of Transport/Truck"}),c.jsxs(ti,{value:i.transportCondition,onValueChange:S=>x("transportCondition",S),children:[c.jsx(Pr,{children:c.jsx(ni,{})}),c.jsxs(Dr,{children:[c.jsx(mt,{value:"ok",children:"OK"}),c.jsx(mt,{value:"not_ok",children:"Not OK"})]})]})]})]}),c.jsxs(Pe,{children:[c.jsx(hn,{children:c.jsx(pn,{className:"text-lg",children:"Material Details"})}),c.jsx(Le,{children:N()})]}),c.jsxs(Pe,{children:[c.jsx(hn,{children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx(pn,{className:"text-lg",children:"Testing Parameters"}),c.jsxs(ll,{children:["Test results for ",s," sample",s>1?"s":""]})]}),c.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-blue-50 rounded-lg",children:[c.jsxs("span",{className:"text-sm font-medium text-blue-700",children:[i.inspectionType.charAt(0).toUpperCase()+i.inspectionType.slice(1)," Material"]}),c.jsxs("span",{className:"text-xs text-blue-600 bg-blue-100 px-2 py-0.5 rounded",children:[y().length," tests"]})]})]})}),c.jsxs(Le,{children:[c.jsxs("div",{className:"mb-4 flex items-center justify-between flex-wrap gap-3",children:[c.jsx("div",{className:"flex items-center gap-2",children:c.jsxs("span",{className:"text-sm font-medium",children:[i.inspectionType==="cotton"?"Bags":"Hanks",": ",s]})}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs(ve,{type:"button",variant:"outline",size:"sm",onClick:()=>a(Math.max(1,s-1)),disabled:s<=1,children:["Remove ",i.inspectionType==="cotton"?"Bag":"Hank"]}),c.jsxs(ve,{type:"button",variant:"outline",size:"sm",onClick:()=>a(Math.min(5,s+1)),disabled:s>=5,children:["Add ",i.inspectionType==="cotton"?"Bag":"Hank"]})]})]}),T()]})]}),c.jsxs(Pe,{children:[c.jsx(hn,{children:c.jsx(pn,{className:"text-lg",children:"Remarks & Submission"})}),c.jsxs(Le,{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx(He,{htmlFor:"remarks",children:"Remarks/Comments"}),c.jsx(Vd,{id:"remarks",value:i.remarks,onChange:S=>x("remarks",S.target.value),placeholder:"Enter any remarks or comments",rows:3})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{children:[c.jsx(He,{htmlFor:"status",children:"Status"}),c.jsxs(ti,{value:i.status,onValueChange:S=>x("status",S),children:[c.jsx(Pr,{children:c.jsx(ni,{})}),c.jsxs(Dr,{children:[c.jsx(mt,{value:"pass",children:"Pass"}),c.jsx(mt,{value:"fail",children:"Fail"})]})]})]}),c.jsxs("div",{children:[c.jsx(He,{htmlFor:"checkedBy",children:"Checked By *"}),c.jsx(Ze,{id:"checkedBy",value:i.checkedBy,onChange:S=>x("checkedBy",S.target.value),placeholder:"Inspector name",required:!0})]}),c.jsxs("div",{children:[c.jsx(He,{htmlFor:"verifiedBy",children:"Verified By"}),c.jsx(Ze,{id:"verifiedBy",value:i.verifiedBy||"",onChange:S=>x("verifiedBy",S.target.value),placeholder:"Verifier name (optional)"})]})]})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-end",children:[c.jsxs(ve,{variant:"outline",onClick:j,className:"flex items-center gap-2",children:[c.jsx(X5,{className:"h-4 w-4"}),"Generate PDF"]}),c.jsxs(ve,{onClick:A,variant:"outline",className:"flex items-center gap-2",children:[c.jsx(Ly,{className:"h-4 w-4"}),"Save Draft"]}),c.jsxs(ve,{onClick:O,className:"flex items-center gap-2 bg-green-600 hover:bg-green-700",children:[c.jsx(bi,{className:"h-4 w-4"}),"Submit Test Report"]})]})]})})})};function KW({selectedCompany:t}){const{toast:e}=Ns(),[n,r]=C.useState("overview"),[i,o]=C.useState(!1),[s,a]=C.useState(null),[l,u]=C.useState(""),[d,f]=C.useState([]),[h,m]=C.useState([]),[g,v]=C.useState([]),[y,x]=C.useState(!1),[w,E]=C.useState([]),[A,O]=C.useState(!1),j=d.filter(F=>{var z,D;return F.company===t&&(((z=F.supplierName)==null?void 0:z.toLowerCase().includes(l.toLowerCase()))||((D=F.challanInvoiceNo)==null?void 0:D.toLowerCase().includes(l.toLowerCase())))}),N=h.filter(F=>F.company===t),T=g.filter(F=>F.company===t),S=async()=>{try{x(!0);const F=window.location.hostname==="localhost"?"http://localhost:5000/api/lab-inspections":"/api/lab-inspections",D=await(await fetch(F)).json();if(Array.isArray(D)){const B=D.filter(V=>V.status==="draft"),$=D.filter(V=>V.status==="submitted");f(D),m(B),v($)}}catch(F){console.error("Error fetching inspections:",F),e({title:"Error",description:"Failed to load lab inspections.",variant:"destructive"})}finally{x(!1)}};C.useEffect(()=>{S()},[]);const b=F=>{console.log("Viewing inspection:",F),a(F),o(!0)},k=()=>{o(!1),a(null)},R=(F,z)=>{E(z?D=>[...D,F]:D=>D.filter(B=>B!==F))},P=F=>{E(F?N.map(z=>z.id):[])},G=async()=>{if(w.length!==0&&confirm(`Are you sure you want to delete ${w.length} draft inspection(s)? This action cannot be undone.`))try{O(!0);const F=window.location.hostname==="localhost"?"http://localhost:5000/api/lab-inspections":"/api/lab-inspections",z=w.map(D=>fetch(`${F}/${D}`,{method:"DELETE"}));await Promise.all(z),e({title:"Drafts deleted",description:`Successfully deleted ${w.length} draft inspection(s).`}),E([]),S()}catch(F){console.error("Error deleting drafts:",F),e({title:"Delete failed",description:"Failed to delete selected drafts. Please try again.",variant:"destructive"})}finally{O(!1)}},K=async F=>{try{console.log("Downloading PDF for inspection:",F);const z=window.location.hostname==="localhost"?`http://localhost:5000/api/lab-inspections/${F}/pdf`:`/api/lab-inspections/${F}/pdf`;console.log("PDF API URL:",z);const D=await fetch(z);if(!D.ok)throw new Error("PDF generation failed");const B=await D.blob(),$=window.URL.createObjectURL(B),V=document.createElement("a");V.href=$,V.download=`Lab_Inspection_${F}.pdf`,document.body.appendChild(V),V.click(),document.body.removeChild(V),window.URL.revokeObjectURL($),e({title:"PDF downloaded",description:"Lab inspection report downloaded successfully."})}catch(z){console.error("PDF download error:",z),e({title:"Download failed",description:"Failed to download PDF. Please try again.",variant:"destructive"})}},X=async F=>{try{console.log("Escalating inspection:",F);const z=window.location.hostname==="localhost"?`http://localhost:5000/api/lab-inspections/${F}`:`/api/lab-inspections/${F}`,B=await(await fetch(z)).json(),$=window.location.hostname==="localhost"?"http://localhost:5000/api/escalation/manual":"/api/escalation/manual";if(!(await fetch($,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({inspectionId:F,inspection:{id:F,supplierName:B.supplierName,company:B.company,inspectionType:B.inspectionType,dateOfIncoming:B.dateOfIncoming,lotNo:B.lotNo,overallStatus:B.overallStatus,sampleResults:B.sampleResults}})})).ok)throw new Error("Escalation failed");e({title:"Escalation sent",description:"Failed inspection has been escalated to Quality Manager."}),S()}catch(z){console.error("❌ Escalation error:",z),e({title:"Escalation failed",description:"Failed to escalate inspection. Please try again.",variant:"destructive"})}},ee=F=>{try{const z=`
        <html>
          <head>
            <style>
              @page { 
                size: 2in 3.5in; 
                margin: 0.1in; 
              }
              body { 
                font-family: Arial, sans-serif; 
                font-size: 10px; 
                line-height: 1.4;
                margin: 0;
                padding: 8px;
                height: 100%;
                display: flex;
                flex-direction: column;
                gap: 8px;
              }
              .field { 
                margin: 4px 0; 
                display: flex;
                justify-content: space-between;
                align-items: center;
              }
              .label { 
                font-weight: bold; 
                font-size: 9px;
              }
              .value {
                font-size: 10px;
                text-align: right;
                max-width: 60%;
                word-wrap: break-word;
              }
              .remark {
                margin-top: 8px;
                padding: 4px;
                border: 1px solid #ccc;
                border-radius: 2px;
                font-size: 8px;
                background-color: #f9f9f9;
                min-height: 40px;
              }
            </style>
          </head>
          <body>
            <div class="field">
              <span class="label">Lot No:</span>
              <span class="value">${F.lotNo||F.lotNumber||"N/A"}</span>
            </div>
            <div class="field">
              <span class="label">Material Date:</span>
              <span class="value">${new Date(F.dateOfIncoming||F.createdAt).toLocaleDateString()}</span>
            </div>
            <div class="remark">
              <div style="font-weight: bold; margin-bottom: 2px; font-size: 8px;">Lab Inspector Remark:</div>
              <div>${F.testingParametersRemarks||F.remarks||"No remarks"}</div>
            </div>
          </body>
        </html>
      `,D=window.open("","_blank");D&&(D.document.write(z),D.document.close(),D.onload=()=>{D.print(),D.close()},e({title:"Label printed",description:"Lab inspection label sent to printer."}))}catch(z){console.error("Print label error:",z),e({title:"Print failed",description:"Failed to print label. Please try again.",variant:"destructive"})}};return i?c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-2xl font-bold",children:"Lab Inspection Form"}),c.jsx(ve,{variant:"outline",onClick:k,children:"Back to Dashboard"})]}),c.jsx(qW,{selectedCompany:t,editingInspectionId:s,onFormClose:()=>{o(!1),a(null),S()}})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-bold text-[18px]",children:"Incoming Material"}),c.jsx("p",{className:"text-muted-foreground text-[14px]",children:"Un-Dyed, Dyed, Cotton"})]}),c.jsx("div",{className:"flex gap-2",children:c.jsxs(ve,{onClick:()=>o(!0),className:"bg-blue-600 hover:bg-blue-700",children:[c.jsx(Ql,{className:"h-4 w-4 mr-2"}),"New Lab Inspection"]})})]}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[c.jsx(Pe,{children:c.jsx(Le,{className:"pt-4 pb-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Total Inspections"}),c.jsx("p",{className:"text-xl font-bold",children:j.length})]}),c.jsx(ma,{className:"h-6 w-6 text-blue-500"})]})})}),c.jsx(Pe,{children:c.jsx(Le,{className:"pt-4 pb-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Draft Reports"}),c.jsx("p",{className:"text-xl font-bold",children:N.length})]}),c.jsx(ed,{className:"h-6 w-6 text-yellow-500"})]})})}),c.jsx(Pe,{children:c.jsx(Le,{className:"pt-4 pb-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Submitted"}),c.jsx("p",{className:"text-xl font-bold",children:T.length})]}),c.jsx(bi,{className:"h-6 w-6 text-green-500"})]})})}),c.jsx(Pe,{children:c.jsx(Le,{className:"pt-4 pb-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Pass Rate"}),c.jsxs("p",{className:"text-xl font-bold",children:[(()=>{const F=T.filter(D=>D.overallStatus||D.status),z=F.filter(D=>(D.overallStatus||D.status)==="pass");return F.length>0?Math.round(z.length/F.length*100):0})(),"%"]})]}),c.jsx(bi,{className:"h-6 w-6 text-green-600"})]})})}),c.jsx(Pe,{children:c.jsx(Le,{className:"pt-4 pb-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"This Week"}),c.jsx("p",{className:"text-xl font-bold",children:(()=>{const F=new Date;return F.setDate(F.getDate()-7),j.filter(z=>new Date(z.submittedAt||z.createdAt||z.dateOfIncoming)>=F).length})()})]}),c.jsx(Su,{className:"h-6 w-6 text-purple-500"})]})})}),c.jsx(Pe,{children:c.jsx(Le,{className:"pt-4 pb-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Failed Tests"}),c.jsx("p",{className:"text-xl font-bold",children:T.filter(F=>(F.overallStatus||F.status)==="fail").length})]}),c.jsx(Ro,{className:"h-6 w-6 text-red-500"})]})})})]}),c.jsx("div",{className:"flex items-center gap-4",children:c.jsxs("div",{className:"relative flex-1 max-w-md",children:[c.jsx(ep,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),c.jsx(Ze,{placeholder:"Search lab inspections...",value:l,onChange:F=>u(F.target.value),className:"pl-10"})]})}),c.jsxs(dd,{value:n,onValueChange:r,children:[c.jsxs(oc,{className:"grid grid-cols-3 w-full",children:[c.jsx(Nn,{value:"overview",children:"Overview"}),c.jsxs(Nn,{value:"drafts",children:["Drafts (",N.length,")"]}),c.jsxs(Nn,{value:"submitted",children:["Submitted (",T.length,")"]})]}),c.jsx(Tn,{value:"overview",children:c.jsx("div",{className:"grid grid-cols-1 gap-6",children:c.jsxs(Pe,{children:[c.jsx(hn,{children:c.jsxs(pn,{className:"flex items-center gap-2",children:[c.jsx(ma,{className:"h-5 w-5"}),"Recent Lab Inspections"]})}),c.jsx(Le,{children:c.jsxs("div",{className:"space-y-3",children:[j.slice(0,10).map(F=>{var z;return c.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg ${F.status==="submitted"?(F.overallStatus||F.status)==="pass"?"bg-green-50":(F.overallStatus||F.status)==="fail"?"bg-red-50":"":""}`,children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-medium",children:F.supplierName||"Unnamed Supplier"}),c.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[c.jsx(Su,{className:"h-3 w-3"}),new Date(F.dateOfIncoming||F.createdAt).toLocaleDateString()]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Dn,{variant:F.status==="submitted"?"default":"secondary",children:F.status}),F.status==="submitted"&&(F.overallStatus||F.status)&&c.jsx(Dn,{variant:(F.overallStatus||F.status)==="pass"?"default":"destructive",className:(F.overallStatus||F.status)==="pass"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",children:(F.overallStatus||F.status)==="pass"?c.jsxs(c.Fragment,{children:[c.jsx(Xl,{className:"h-3 w-3 mr-1"}),"Pass"]}):c.jsxs(c.Fragment,{children:[c.jsx(Ro,{className:"h-3 w-3 mr-1"}),"Fail"]})}),c.jsx(ve,{size:"sm",variant:"ghost",onClick:()=>b(F.id),children:c.jsx(Gs,{className:"h-3 w-3"})}),c.jsx(ve,{size:"sm",variant:"ghost",onClick:()=>K(F.id),children:c.jsx(S1,{className:"h-3 w-3"})}),F.status==="submitted"&&(F.overallStatus||F.status)==="fail"&&c.jsx(HW,{inspectionId:F.id,inspection:{materialType:F.inspectionType,supplierName:F.supplierName,company:F.company,incomingDate:F.dateOfIncoming,status:F.overallStatus||F.status||"fail",testingParameters:((z=F.sampleResults)==null?void 0:z.flatMap(D=>Object.entries(D.results||{}).filter(([B,$])=>$==="Fail"||$==="fail").map(([B,$])=>({parameter:B,result:"Fail"}))))||[]},trigger:c.jsx(ve,{size:"sm",variant:"ghost",className:"text-red-600 hover:text-red-700 hover:bg-red-50",title:"Escalate Failed Inspection",children:c.jsx(Ro,{className:"h-3 w-3"})}),onEscalationSent:()=>{e({title:"✅ Escalation Sent",description:"Escalation email sent with approve/fail buttons.",duration:5e3})}})]})]},F.id)}),j.length===0&&c.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No lab inspections found. Create your first inspection to get started."})]})})]})})}),c.jsx(Tn,{value:"drafts",children:c.jsx("div",{className:"space-y-6",children:c.jsxs(Pe,{children:[c.jsxs(hn,{className:"flex flex-row items-center justify-between",children:[c.jsx(pn,{children:"Draft Lab Inspections"}),N.length>0&&c.jsx("div",{className:"flex items-center gap-2",children:w.length>0&&c.jsxs(ve,{variant:"destructive",size:"sm",onClick:G,disabled:A,className:"flex items-center gap-2",children:[c.jsx(By,{className:"h-3 w-3"}),"Delete Selected (",w.length,")"]})})]}),c.jsxs(Le,{children:[N.length>0&&c.jsxs("div",{className:"flex items-center gap-2 mb-4 p-2 bg-muted rounded-lg",children:[c.jsx(gv,{id:"select-all-drafts",checked:w.length===N.length,onCheckedChange:P}),c.jsxs("label",{htmlFor:"select-all-drafts",className:"text-sm font-medium cursor-pointer",children:["Select All (",N.length," drafts)"]})]}),c.jsxs("div",{className:"space-y-3",children:[N.map(F=>c.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[c.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[c.jsx(gv,{checked:w.includes(F.id),onCheckedChange:z=>R(F.id,z)}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-medium",children:F.supplierName||"Unnamed Supplier"}),c.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[c.jsx(ed,{className:"h-3 w-3"}),"Last saved ",new Date(F.updatedAt||F.createdAt).toLocaleString()]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx(Dn,{variant:"secondary",children:"draft"}),c.jsx(ve,{size:"sm",variant:"ghost",onClick:()=>b(F.id),children:c.jsx(Fy,{className:"h-3 w-3"})})]})]},F.id)),N.length===0&&c.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No draft inspections found."})]})]})]})})}),c.jsx(Tn,{value:"submitted",children:c.jsx("div",{className:"space-y-6",children:c.jsxs(Pe,{children:[c.jsx(hn,{children:c.jsx(pn,{children:"Submitted Lab Inspections"})}),c.jsx(Le,{children:c.jsxs("div",{className:"space-y-3",children:[T.map(F=>c.jsxs("div",{className:`flex items-center justify-between p-3 border rounded-lg ${(F.overallStatus||F.status)==="pass"?"bg-green-50":(F.overallStatus||F.status)==="fail"?"bg-red-50":""}`,children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-medium",children:F.supplierName||"Unnamed Supplier"}),c.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[c.jsx(Su,{className:"h-3 w-3"}),new Date(F.submittedAt||F.createdAt).toLocaleDateString(),c.jsx("span",{className:"mx-1",children:"•"}),c.jsxs("span",{children:["Lot: ",F.lotNo||F.lotNumber||"N/A"]})]})]}),c.jsxs("div",{className:"flex items-center gap-1 flex-shrink-0",children:[(F.overallStatus||F.status)&&c.jsx(Dn,{variant:(F.overallStatus||F.status)==="pass"?"default":"destructive",className:(F.overallStatus||F.status)==="pass"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700",children:(F.overallStatus||F.status)==="pass"?c.jsxs(c.Fragment,{children:[c.jsx(Xl,{className:"h-3 w-3 mr-1"}),"PASS"]}):c.jsxs(c.Fragment,{children:[c.jsx(Ro,{className:"h-3 w-3 mr-1"}),"FAIL"]})}),c.jsx(ve,{size:"sm",variant:"ghost",onClick:()=>ee(F),title:"Print Label",className:"h-8 w-8 p-0",children:c.jsx(iN,{className:"h-3 w-3"})}),c.jsx(ve,{size:"sm",variant:"ghost",onClick:()=>b(F.id),className:"h-8 w-8 p-0",children:c.jsx(Gs,{className:"h-3 w-3"})}),c.jsx(ve,{size:"sm",variant:"ghost",onClick:()=>K(F.id),className:"h-8 w-8 p-0",children:c.jsx(S1,{className:"h-3 w-3"})}),(F.overallStatus||F.status)==="fail"&&c.jsx(ve,{size:"sm",variant:"ghost",onClick:()=>X(F.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50 h-8 w-8 p-0",title:"Escalate Failed Inspection",children:c.jsx(Ro,{className:"h-3 w-3"})})]})]},F.id)),T.length===0&&c.jsx("p",{className:"text-center text-muted-foreground py-4",children:"No submitted inspections found."})]})})]})})})]})]})}const XW=()=>{const t=()=>c.jsxs("div",{className:"p-8",children:[c.jsxs("div",{className:"flex items-center mb-6",children:[c.jsx("div",{className:"p-3 bg-orange-100 rounded-xl mr-4",children:c.jsx(ts,{className:"h-6 w-6 text-orange-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Bazaar Inspection"}),c.jsx("p",{className:"text-gray-600",children:"Quality control for market-ready products"})]})]}),c.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 rounded-2xl p-8 border border-orange-100",children:c.jsxs("div",{className:"text-center",children:[c.jsx(ts,{className:"h-16 w-16 text-orange-400 mx-auto mb-4"}),c.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Coming Soon"}),c.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"Advanced bazaar inspection module with real-time quality tracking and automated reporting capabilities."})]})})]}),e=()=>c.jsxs("div",{className:"p-8",children:[c.jsxs("div",{className:"flex items-center mb-6",children:[c.jsx("div",{className:"p-3 bg-green-100 rounded-xl mr-4",children:c.jsx(bi,{className:"h-6 w-6 text-green-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:"100% QC Inspection"}),c.jsx("p",{className:"text-gray-600",children:"Comprehensive quality assurance protocol"})]})]}),c.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-8 border border-green-100",children:c.jsxs("div",{className:"text-center",children:[c.jsx(bi,{className:"h-16 w-16 text-green-400 mx-auto mb-4"}),c.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Coming Soon"}),c.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"Complete quality control inspection system with defect tracking and statistical analysis."})]})})]}),n=()=>c.jsxs("div",{className:"p-8",children:[c.jsxs("div",{className:"flex items-center mb-6",children:[c.jsx("div",{className:"p-3 bg-purple-100 rounded-xl mr-4",children:c.jsx(Gs,{className:"h-6 w-6 text-purple-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Final Inspection"}),c.jsx("p",{className:"text-gray-600",children:"Pre-shipment quality verification"})]})]}),c.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-violet-50 rounded-2xl p-8 border border-purple-100",children:c.jsxs("div",{className:"text-center",children:[c.jsx(Gs,{className:"h-16 w-16 text-purple-400 mx-auto mb-4"}),c.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Coming Soon"}),c.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"Final quality verification system ensuring products meet all specifications before shipment."})]})})]}),r=()=>c.jsxs("div",{className:"p-8",children:[c.jsxs("div",{className:"flex items-center mb-6",children:[c.jsx("div",{className:"p-3 bg-indigo-100 rounded-xl mr-4",children:c.jsx(xl,{className:"h-6 w-6 text-indigo-600"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:"AQL Inspection"}),c.jsx("p",{className:"text-gray-600",children:"Acceptable Quality Level standards"})]})]}),c.jsx("div",{className:"bg-gradient-to-br from-indigo-50 to-blue-50 rounded-2xl p-8 border border-indigo-100",children:c.jsxs("div",{className:"text-center",children:[c.jsx(xl,{className:"h-16 w-16 text-indigo-400 mx-auto mb-4"}),c.jsx("h4",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Coming Soon"}),c.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"Statistical sampling inspection based on AQL standards with automated acceptance criteria."})]})})]}),i=()=>c.jsx("div",{className:"p-6",children:c.jsx(KW,{selectedCompany:"EHI"})});return c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsx("div",{className:"mb-8",children:c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Quality Control Dashboard"}),c.jsx("p",{className:"text-gray-600",children:"Manage compliance audits and quality inspections"})]})}),c.jsxs(dd,{defaultValue:"inspections",className:"w-full",children:[c.jsxs(oc,{className:"grid w-full grid-cols-2 mb-6 bg-white border",children:[c.jsxs(Nn,{value:"inspections",className:"data-[state=active]:bg-blue-50 data-[state=active]:text-blue-700 data-[state=active]:border-blue-200",children:[c.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Inspections"]}),c.jsxs(Nn,{value:"compliance",className:"data-[state=active]:bg-blue-50 data-[state=active]:text-blue-700 data-[state=active]:border-blue-200",children:[c.jsx(td,{className:"h-4 w-4 mr-2"}),"Compliance"]})]}),c.jsx(Tn,{value:"inspections",className:"mt-0",children:c.jsxs(dd,{defaultValue:"lab",className:"w-full",children:[c.jsxs(oc,{className:"grid w-full grid-cols-5 mb-4 bg-blue-50",children:[c.jsxs(Nn,{value:"lab",className:"data-[state=active]:bg-white data-[state=active]:text-blue-700",children:[c.jsx(Q5,{className:"h-4 w-4 mr-1"}),c.jsx("span",{className:"hidden sm:inline",children:"Lab"})]}),c.jsxs(Nn,{value:"bazaar",className:"data-[state=active]:bg-white data-[state=active]:text-blue-700",children:[c.jsx(ts,{className:"h-4 w-4 mr-1"}),c.jsx("span",{className:"hidden sm:inline",children:"Bazaar"})]}),c.jsxs(Nn,{value:"qc",className:"data-[state=active]:bg-white data-[state=active]:text-blue-700",children:[c.jsx(bi,{className:"h-4 w-4 mr-1"}),c.jsx("span",{className:"hidden sm:inline",children:"100% QC"})]}),c.jsxs(Nn,{value:"final",className:"data-[state=active]:bg-white data-[state=active]:text-blue-700",children:[c.jsx(Gs,{className:"h-4 w-4 mr-1"}),c.jsx("span",{className:"hidden sm:inline",children:"Final"})]}),c.jsxs(Nn,{value:"aql",className:"data-[state=active]:bg-white data-[state=active]:text-blue-700",children:[c.jsx(xl,{className:"h-4 w-4 mr-1"}),c.jsx("span",{className:"hidden sm:inline",children:"AQL"})]})]}),c.jsx(Tn,{value:"lab",className:"mt-0",children:c.jsx(Pe,{className:"border-0 shadow-sm",children:c.jsx(i,{})})}),c.jsx(Tn,{value:"bazaar",className:"mt-0",children:c.jsx(Pe,{className:"border-0 shadow-sm",children:c.jsx(t,{})})}),c.jsx(Tn,{value:"qc",className:"mt-0",children:c.jsx(Pe,{className:"border-0 shadow-sm",children:c.jsx(e,{})})}),c.jsx(Tn,{value:"final",className:"mt-0",children:c.jsx(Pe,{className:"border-0 shadow-sm",children:c.jsx(n,{})})}),c.jsx(Tn,{value:"aql",className:"mt-0",children:c.jsx(Pe,{className:"border-0 shadow-sm",children:c.jsx(r,{})})})]})}),c.jsx(Tn,{value:"compliance",className:"mt-0",children:c.jsx(Pe,{className:"border-0 shadow-sm",children:c.jsx(Le,{className:"p-0",children:c.jsx(AW,{selectedCompany:"EHI"})})})})]})]})};function bP(){const{userDoc:t}=Bd(),e=f=>f&&typeof f.department=="string"&&Array.isArray(f.tabs)&&Array.isArray(f.permissions),n=()=>{if(!t)return null;if(e(t))return t;const f=t.DepartmentId||t.department_id||t.department||"quality",h=t.Role||t.role||"staff";let m=[],g=[];return f==="quality"?(m=["dashboard","compliance"],g=h==="supervisor"?["view_dashboard","edit_dashboard","view_compliance"]:["view_dashboard","view_compliance"]):f==="sampling"?(m=["create","gallery"],g=h==="supervisor"?["view_create","edit_create","view_gallery","edit_gallery"]:["view_create","view_gallery"]):f==="merchandising"&&(m=["buyers","pdoc"],g=h==="supervisor"?["view_buyers","edit_buyers","view_pdoc","edit_pdoc"]:["view_buyers","view_pdoc"]),{id:t.uid||t.id||"",uid:t.uid||t.id||"",email:t.Email||t.email||"",department:f,subDepartment:null,tabs:m,permissions:g,role:h,isActive:t.isActive!==!1,first_name:t.first_name,last_name:t.last_name,created_at:t.created_at,updated_at:t.updated_at}},r=f=>{const h=n();return h?h.tabs.includes(f):!1},i=f=>{const h=n();return h?h.permissions.includes(`view_${f}`)||h.permissions.includes(`edit_${f}`)||h.permissions.includes(`manage_${f}`):!1},o=f=>{const h=n();return h?h.permissions.includes(`edit_${f}`)||h.permissions.includes(`manage_${f}`):!1},s=f=>{const h=n();return h?h.permissions.includes(`manage_${f}`):!1},a=f=>{const h=n();if(!h)return!1;const m=(t==null?void 0:t.departments)||[h.department];return m.includes(f)||h.department==="admin"||m.includes("admin")},l=()=>{const f=n();return f?f.tabs:[]},u=()=>{const f=n();return f?{department:f.department,subDepartment:f.subDepartment,role:f.role}:null},d=f=>{const h=n();return h?h.role===f:!1};return{user:n(),canViewTab:r,canView:i,canEdit:o,canManage:s,canAccessDepartment:a,getAccessibleTabs:l,getUserDepartmentInfo:u,hasRole:d,isLoading:!1}}const QW="modulepreload",YW=function(t){return"/"+t},gb={},vb=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=YW(l),l in gb)return;gb[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":QW,u||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})},ZW=["Pitloom","Punja","Hand Knotted","Nepali","Tufted","Table Tufted","Handloom","VDW","Jaquard"],JW=["Sample","Custom","Buyer PD"],eG=["Solid/Plain","Gabbeh","Tie Dye","Abrash","Space Dyed","Natural Yarn"],tG=["Loom Binding","Binding"],nG=["Fringes","Binding","Hem"],rG={"Hand Knotted":["3/8","3/10","3/12","3/15","3/20","4/14","4/20","4/30","5/15","5/20","5/25","6/16","7/18","7/35","8/22","8/36","8/40","9/25","9/30","9/45","10/30","10/36"],Nepali:["4/20","4/30","5/15","5/20","5/25","6/16","7/18","7/35","8/22","8/36","8/40","9/25","9/30","9/45","10/30","10/36","10/42","10/50","11/55","12/36"],Punja:["Reed No. 4","Reed No. 6","Reed No. 8","Reed No. 10","Reed No. 12","Reed No. 14","Reed No. 16","Reed No. 18","Reed No. 20","Reed No. 22","Reed No. 24"],Pitloom:["Reed No. 4","Reed No. 6","Reed No. 8","Reed No. 10","Reed No. 12","Reed No. 14","Reed No. 16","Reed No. 18","Reed No. 20","Reed No. 22","Reed No. 24"],Handloom:["Reed No. 4","Reed No. 6","Reed No. 8","Reed No. 10","Reed No. 12","Reed No. 14","Reed No. 16","Reed No. 18","Reed No. 20","Reed No. 22","Reed No. 24"],Tufted:["Pick 10","Pick 12","Pick 14","Pick 16","Pick 18","Pick 20"],VDW:["6 Pick","7 Pick","8 Pick","9 Pick"],Jaquard:[],"Table Tufted":[]},iG=["Raw Material Purchase","Dyeing","Weaving","Washing","Clipping","Faafi (Final Clipping)","Stretching","Action Backing","Cotton Backing","Binding","Futki","Packing"],yb=[{name:"Ivory",hex:"#FFFFF0"},{name:"Sand",hex:"#C2B280"},{name:"Wheat",hex:"#F5DEB3"},{name:"Camel",hex:"#C19A6B"},{name:"Beige",hex:"#F5F5DC"},{name:"Grey",hex:"#808080"},{name:"Charcoal",hex:"#36454F"},{name:"Green",hex:"#228B22"},{name:"Olive",hex:"#808000"},{name:"Multi",hex:"#DE5D83"}],oG=()=>{const{data:t=[],isLoading:e,error:n}=Qp({queryKey:["/api/materials"],queryFn:async()=>{console.log("Fetching materials from ERP database...");const o=await fetch("/api/materials");if(console.log("Response status:",o.status,"OK:",o.ok),!o.ok)throw new Error(`Failed to fetch materials: ${o.status} ${o.statusText}`);const s=await o.json();if(Array.isArray(s))return console.log(`✅ Successfully fetched ${s.length} materials from ERP database`),console.log("First few materials:",s.slice(0,3)),s;throw new Error("Invalid response format from materials API")},select:o=>{console.log(`✅ Successfully fetched ${o.length} materials from ERP database`),console.log("First few materials:",o.slice(0,3));const s=[];return o.forEach((a,l)=>{const u={name:(a.name||"Unknown Material").trim(),rate:parseFloat(a.rate)||0,dyeingCost:0,description:a.supplier?`Supplier: ${a.supplier.trim()}`:"",supplier:(a.supplier||"").trim(),dyeType:"",quantity:0,orderNumber:"",itemType:""};s.push({...u,id:`erp_warp_${l}`,type:"warp"}),s.push({...u,id:`erp_weft_${l}`,type:"weft"})}),console.log(`Transformed ${s.length} materials for dropdown`),console.log("Warp materials:",s.filter(a=>a.type==="warp").length),console.log("Weft materials:",s.filter(a=>a.type==="weft").length),s},retry:1,staleTime:3e5}),r=()=>t.filter(o=>o.type==="warp"),i=()=>t.filter(o=>o.type==="weft");return{materials:t,loading:e,error:(n==null?void 0:n.message)||null,getWarpMaterials:r,getWeftMaterials:i}},sG=()=>{const t=pc(),{data:e=[],isLoading:n,error:r}=Qp({queryKey:["/api/buyers"],queryFn:async()=>{const a=await Qi("GET","/api/buyers");if(!a.ok)throw new Error("Failed to fetch buyers");const l=await a.json();return Array.isArray(l)?l:[]}}),i=yl({mutationFn:async a=>await(await Qi("POST","/api/buyers")).json(),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/buyers"]})}}),o=yl({mutationFn:async({id:a,...l})=>await(await Qi("PUT",`/api/buyers/${a}`)).json(),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/buyers"]})}}),s=yl({mutationFn:async a=>await(await Qi("DELETE",`/api/buyers/${a}`)).json(),onSuccess:()=>{t.invalidateQueries({queryKey:["/api/buyers"]})}});return{buyers:e,isLoading:n,error:r,createBuyer:i.mutate,updateBuyer:o.mutate,deleteBuyer:s.mutate,isCreating:i.isPending,isUpdating:o.isPending,isDeleting:s.isPending}};function aG(t,e){var n=Object.setPrototypeOf;n?n(t,e):t.__proto__=e}function lG(t,e){e===void 0&&(e=t.constructor);var n=Error.captureStackTrace;n&&n(t,e)}var cG=function(){var t=function(n,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},t(n,r)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),uG=function(t){cG(e,t);function e(n,r){var i=this.constructor,o=t.call(this,n,r)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1,configurable:!0}),aG(o,i.prototype),lG(o),o}return e}(Error),dG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),cr=function(t){dG(e,t);function e(n){n===void 0&&(n=void 0);var r=t.call(this,n)||this;return r.message=n,r}return e.prototype.getKind=function(){var n=this.constructor;return n.kind},e.kind="Exception",e}(uG),fG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hr=function(t){fG(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(cr),hG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_e=function(t){hG(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(cr),pG=function(){function t(e){if(this.binarizer=e,e===null)throw new _e("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,n){return this.binarizer.getBlackRow(e,n)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,n,r,i){var o=this.binarizer.getLuminanceSource().crop(e,n,r,i);return new t(this.binarizer.createBinarizer(o))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),mG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),rn=function(t){mG(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(cr),gG=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),ct=function(){function t(){}return t.arraycopy=function(e,n,r,i,o){for(;o--;)r[i++]=e[n++]},t.currentTimeMillis=function(){return Date.now()},t}(),vG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),lw=function(t){vG(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(cr),yG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xb=function(t){yG(e,t);function e(n,r){n===void 0&&(n=void 0),r===void 0&&(r=void 0);var i=t.call(this,r)||this;return i.index=n,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(lw),xG=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gt=function(){function t(){}return t.fill=function(e,n){for(var r=0,i=e.length;r<i;r++)e[r]=n},t.fillWithin=function(e,n,r,i){t.rangeCheck(e.length,n,r);for(var o=n;o<r;o++)e[o]=i},t.rangeCheck=function(e,n,r){if(n>r)throw new _e("fromIndex("+n+") > toIndex("+r+")");if(n<0)throw new xb(n);if(r>e)throw new xb(r)},t.asList=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e},t.create=function(e,n,r){var i=Array.from({length:e});return i.map(function(o){return Array.from({length:n}).fill(r)})},t.createInt32Array=function(e,n,r){var i=Array.from({length:e});return i.map(function(o){return Int32Array.from({length:n}).fill(r)})},t.equals=function(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==n[r])return!1;return!0},t.hashCode=function(e){var n,r;if(e===null)return 0;var i=1;try{for(var o=xG(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=31*i+a}}catch(l){n={error:l}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},t.fillUint8Array=function(e,n){for(var r=0;r!==e.length;r++)e[r]=n},t.copyOf=function(e,n){return e.slice(0,n)},t.copyOfUint8Array=function(e,n){if(e.length<=n){var r=new Uint8Array(n);return r.set(e),r}return e.slice(0,n)},t.copyOfRange=function(e,n,r){var i=r-n,o=new Int32Array(i);return ct.arraycopy(e,n,o,0,i),o},t.binarySearch=function(e,n,r){r===void 0&&(r=t.numberComparator);for(var i=0,o=e.length-1;i<=o;){var s=o+i>>1,a=r(n,e[s]);if(a>0)i=s+1;else if(a<0)o=s-1;else return s}return-i-1},t.numberComparator=function(e,n){return e-n},t}(),je=function(){function t(){}return t.numberOfTrailingZeros=function(e){var n;if(e===0)return 32;var r=31;return n=e<<16,n!==0&&(r-=16,e=n),n=e<<8,n!==0&&(r-=8,e=n),n=e<<4,n!==0&&(r-=4,e=n),n=e<<2,n!==0&&(r-=2,e=n),r-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,n){return Math.trunc(e/n)},t.parseInt=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),on=function(){function t(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=t.makeArray(e):this.bits=n)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var n=t.makeArray(e);ct.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,i=Math.floor(e/32),o=r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return n;o=r[i]}var a=i*32+je.numberOfTrailingZeros(o);return a>n?n:a},t.prototype.getNextUnset=function(e){var n=this.size;if(e>=n)return n;var r=this.bits,i=Math.floor(e/32),o=~r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return n;o=~r[i]}var a=i*32+je.numberOfTrailingZeros(o);return a>n?n:a},t.prototype.setBulk=function(e,n){this.bits[Math.floor(e/32)]=n},t.prototype.setRange=function(e,n){if(n<e||e<0||n>this.size)throw new _e;if(n!==e){n--;for(var r=Math.floor(e/32),i=Math.floor(n/32),o=this.bits,s=r;s<=i;s++){var a=s>r?0:e&31,l=s<i?31:n&31,u=(2<<l)-(1<<a);o[s]|=u}}},t.prototype.clear=function(){for(var e=this.bits.length,n=this.bits,r=0;r<e;r++)n[r]=0},t.prototype.isRange=function(e,n,r){if(n<e||e<0||n>this.size)throw new _e;if(n===e)return!0;n--;for(var i=Math.floor(e/32),o=Math.floor(n/32),s=this.bits,a=i;a<=o;a++){var l=a>i?0:e&31,u=a<o?31:n&31,d=(2<<u)-(1<<l)&4294967295;if((s[a]&d)!==(r?d:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,n){if(n<0||n>32)throw new _e("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(var r=n;r>0;r--)this.appendBit((e>>r-1&1)===1)},t.prototype.appendBitArray=function(e){var n=e.size;this.ensureCapacity(this.size+n);for(var r=0;r<n;r++)this.appendBit(e.get(r))},t.prototype.xor=function(e){if(this.size!==e.size)throw new _e("Sizes don't match");for(var n=this.bits,r=0,i=n.length;r<i;r++)n[r]^=e.bits[r]},t.prototype.toBytes=function(e,n,r,i){for(var o=0;o<i;o++){for(var s=0,a=0;a<8;a++)this.get(e)&&(s|=1<<7-a),e++;n[r+o]=s}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),r=n+1,i=this.bits,o=0;o<r;o++){var s=i[o];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[n-o]=s}if(this.size!==r*32){for(var a=r*32-this.size,l=e[0]>>>a,o=1;o<r;o++){var u=e[o];l|=u<<32-a,e[o-1]=l,l=u>>>a}e[r-1]=l}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.size===n.size&&Gt.equals(this.bits,n.bits)},t.prototype.hashCode=function(){return 31*this.size+Gt.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",n=0,r=this.size;n<r;n++)n&7||(e+=" "),e+=this.get(n)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],n=0,r=this.size;n<r;n++)e.push(this.get(n));return e},t}(),vv;(function(t){t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(vv||(vv={}));const wt=vv;var wG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),oe=function(t){wG(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(cr),_G=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rt;(function(t){t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR"})(rt||(rt={}));var Ht=function(){function t(e,n,r){for(var i,o,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];this.valueIdentifier=e,this.name=r,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=s,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(r,this);for(var l=this.values,u=0,d=l.length;u!==d;u++){var f=l[u];t.VALUES_TO_ECI.set(f,this)}try{for(var h=_G(s),m=h.next();!m.done;m=h.next()){var g=m.value;t.NAME_TO_ECI.set(g,this)}}catch(v){i={error:v}}finally{try{m&&!m.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new oe("incorect value");var n=t.VALUES_TO_ECI.get(e);if(n===void 0)throw new oe("incorect value");return n},t.getCharacterSetECIByName=function(e){var n=t.NAME_TO_ECI.get(e);if(n===void 0)throw new oe("incorect value");return n},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.getName()===n.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(rt.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(rt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(rt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(rt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(rt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(rt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(rt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(rt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(rt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(rt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(rt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(rt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(rt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(rt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(rt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(rt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(rt.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(rt.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(rt.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(rt.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(rt.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(rt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(rt.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(rt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(rt.Big5,28,"Big5"),t.GB18030=new t(rt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(rt.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),EG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bh=function(t){EG(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(cr),Mr=function(){function t(){}return t.decode=function(e,n){var r=this.encodingName(n);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,n){var r=this.encodingName(n);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof Ht?e:Ht.getCharacterSetECIByName(e)},t.decodeFallback=function(e,n){var r=this.encodingCharacterSet(n);if(t.isDecodeFallbackSupported(r)){for(var i="",o=0,s=e.length;o<s;o++){var a=e[o].toString(16);a.length<2&&(a="0"+a),i+="%"+a}return decodeURIComponent(i)}if(r.equals(Ht.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new bh("Encoding "+this.encodingName(n)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(Ht.UTF8)||e.equals(Ht.ISO8859_1)||e.equals(Ht.ASCII)},t.encodeFallback=function(e){for(var n=btoa(unescape(encodeURIComponent(e))),r=n.split(""),i=[],o=0;o<r.length;o++)i.push(r[o].charCodeAt(0));return new Uint8Array(i)},t}(),We=function(){function t(){}return t.castAsNonUtf8Char=function(e,n){n===void 0&&(n=null);var r=n?n.getName():this.ISO88591;return Mr.decode(new Uint8Array([e]),r)},t.guessEncoding=function(e,n){if(n!=null&&n.get(wt.CHARACTER_SET)!==void 0)return n.get(wt.CHARACTER_SET).toString();for(var r=e.length,i=!0,o=!0,s=!0,a=0,l=0,u=0,d=0,f=0,h=0,m=0,g=0,v=0,y=0,x=0,w=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,E=0;E<r&&(i||o||s);E++){var A=e[E]&255;s&&(a>0?A&128?a--:s=!1:A&128&&(A&64?(a++,A&32?(a++,A&16?(a++,A&8?s=!1:d++):u++):l++):s=!1)),i&&(A>127&&A<160?i=!1:A>159&&(A<192||A===215||A===247)&&x++),o&&(f>0?A<64||A===127||A>252?o=!1:f--:A===128||A===160||A>239?o=!1:A>160&&A<224?(h++,g=0,m++,m>v&&(v=m)):A>127?(f++,m=0,g++,g>y&&(y=g)):(m=0,g=0))}return s&&a>0&&(s=!1),o&&f>0&&(o=!1),s&&(w||l+u+d>0)?t.UTF8:o&&(t.ASSUME_SHIFT_JIS||v>=3||y>=3)?t.SHIFT_JIS:i&&o?v===2&&h===2||x*10>=r?t.SHIFT_JIS:t.ISO88591:i?t.ISO88591:o?t.SHIFT_JIS:s?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=-1;function o(a,l,u,d,f,h){if(a==="%%")return"%";if(n[++i]!==void 0){a=d?parseInt(d.substr(1)):void 0;var m=f?parseInt(f.substr(1)):void 0,g;switch(h){case"s":g=n[i];break;case"c":g=n[i][0];break;case"f":g=parseFloat(n[i]).toFixed(a);break;case"p":g=parseFloat(n[i]).toPrecision(a);break;case"e":g=parseFloat(n[i]).toExponential(a);break;case"x":g=parseInt(n[i]).toString(m||16);break;case"d":g=parseFloat(parseInt(n[i],m||10).toPrecision(a)).toFixed(0);break}g=typeof g=="object"?JSON.stringify(g):(+g).toString(m);for(var v=parseInt(u),y=u&&u[0]+""=="0"?"0":" ";g.length<v;)g=l!==void 0?g+y:y+g;return g}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,o)},t.getBytes=function(e,n){return Mr.encode(e,n)},t.getCharCode=function(e,n){return n===void 0&&(n=0),e.charCodeAt(n)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=Ht.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=Ht.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=Ht.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),ke=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=We.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,n,r){for(var i=n;n<n+r;i++)this.append(e[i]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)},t.prototype.substring=function(e,n){return this.value.substring(e,n)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,n){this.value=this.value.substring(0,e)+n+this.value.substring(e)},t}(),Li=function(){function t(e,n,r,i){if(this.width=e,this.height=n,this.rowSize=r,this.bits=i,n==null&&(n=e),this.height=n,e<1||n<1)throw new _e("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var n=e.length,r=e[0].length,i=new t(r,n),o=0;o<n;o++)for(var s=e[o],a=0;a<r;a++)s[a]&&i.set(a,o);return i},t.parseFromString=function(e,n,r){if(e===null)throw new _e("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,s=0,a=-1,l=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new _e("row lengths do not match");s=o,l++}u++}else if(e.substring(u,u+n.length)===n)u+=n.length,i[o]=!0,o++;else if(e.substring(u,u+r.length)===r)u+=r.length,i[o]=!1,o++;else throw new _e("illegal character encountered: "+e.substring(u));if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new _e("row lengths do not match");l++}for(var d=new t(a,l),f=0;f<o;f++)i[f]&&d.set(Math.floor(f%a),Math.floor(f/a));return d},t.prototype.get=function(e,n){var r=n*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},t.prototype.set=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,n){var r=n*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new _e("input matrix dimensions do not match");for(var n=new on(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,o=0,s=this.height;o<s;o++)for(var a=o*r,l=e.getRow(o,n).getBitArray(),u=0;u<r;u++)i[a+u]^=l[u]},t.prototype.clear=function(){for(var e=this.bits,n=e.length,r=0;r<n;r++)e[r]=0},t.prototype.setRegion=function(e,n,r,i){if(n<0||e<0)throw new _e("Left and top must be nonnegative");if(i<1||r<1)throw new _e("Height and width must be at least 1");var o=e+r,s=n+i;if(s>this.height||o>this.width)throw new _e("The region must fit inside the matrix");for(var a=this.rowSize,l=this.bits,u=n;u<s;u++)for(var d=u*a,f=e;f<o;f++)l[d+Math.floor(f/32)]|=1<<(f&31)&4294967295},t.prototype.getRow=function(e,n){n==null||n.getSize()<this.width?n=new on(this.width):n.clear();for(var r=this.rowSize,i=this.bits,o=e*r,s=0;s<r;s++)n.setBulk(s*32,i[o+s]);return n},t.prototype.setRow=function(e,n){ct.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),n=this.getHeight(),r=new on(e),i=new on(e),o=0,s=Math.floor((n+1)/2);o<s;o++)r=this.getRow(o,r),i=this.getRow(n-1-o,i),r.reverse(),i.reverse(),this.setRow(o,i),this.setRow(n-1-o,r)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,n=this.height,r=this.rowSize,i=this.bits,o=e,s=n,a=-1,l=-1,u=0;u<n;u++)for(var d=0;d<r;d++){var f=i[u*r+d];if(f!==0){if(u<s&&(s=u),u>l&&(l=u),d*32<o){for(var h=0;!(f<<31-h&4294967295);)h++;d*32+h<o&&(o=d*32+h)}if(d*32+31>a){for(var h=31;!(f>>>h);)h--;d*32+h>a&&(a=d*32+h)}}}return a<o||l<s?null:Int32Array.from([o,s,a-o+1,l-s+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,n=this.bits,r=0;r<n.length&&n[r]===0;)r++;if(r===n.length)return null;for(var i=r/e,o=r%e*32,s=n[r],a=0;!(s<<31-a&4294967295);)a++;return o+=a,Int32Array.from([o,i])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,n=this.bits,r=n.length-1;r>=0&&n[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),o=Math.floor(r%e)*32,s=n[r],a=31;!(s>>>a);)a--;return o+=a,Int32Array.from([o,i])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&Gt.equals(this.bits,n.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Gt.hashCode(this.bits),e},t.prototype.toString=function(e,n,r){return e===void 0&&(e="X "),n===void 0&&(n="  "),r===void 0&&(r=`
`),this.buildToString(e,n,r)},t.prototype.buildToString=function(e,n,r){for(var i=new ke,o=0,s=this.height;o<s;o++){for(var a=0,l=this.width;a<l;a++)i.append(this.get(a,o)?e:n);i.append(r)}return i.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),CG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Q=function(t){CG(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(cr),bG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),AG=function(t){bG(e,t);function e(n){var r=t.call(this,n)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(n,r){var i=this.getLuminanceSource(),o=i.getWidth();r==null||r.getSize()<o?r=new on(o):r.clear(),this.initArrays(o);for(var s=i.getRow(n,this.luminances),a=this.buckets,l=0;l<o;l++)a[(s[l]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(a);if(o<3)for(var l=0;l<o;l++)(s[l]&255)<u&&r.set(l);else for(var d=s[0]&255,f=s[1]&255,l=1;l<o-1;l++){var h=s[l+1]&255;(f*4-d-h)/2<u&&r.set(l),d=f,f=h}return r},e.prototype.getBlackMatrix=function(){var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight(),o=new Li(r,i);this.initArrays(r);for(var s=this.buckets,a=1;a<5;a++)for(var l=Math.floor(i*a/5),u=n.getRow(l,this.luminances),d=Math.floor(r*4/5),f=Math.floor(r/5);f<d;f++){var h=u[f]&255;s[h>>e.LUMINANCE_SHIFT]++}for(var m=e.estimateBlackPoint(s),g=n.getMatrix(),a=0;a<i;a++)for(var v=a*r,f=0;f<r;f++){var h=g[v+f]&255;h<m&&o.set(f,a)}return o},e.prototype.createBinarizer=function(n){return new e(n)},e.prototype.initArrays=function(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(n){for(var r=n.length,i=0,o=0,s=0,a=0;a<r;a++)n[a]>s&&(o=a,s=n[a]),n[a]>i&&(i=n[a]);for(var l=0,u=0,a=0;a<r;a++){var d=a-o,f=n[a]*d*d;f>u&&(l=a,u=f)}if(o>l){var h=o;o=l,l=h}if(l-o<=r/16)throw new Q;for(var m=l-1,g=-1,a=l-1;a>o;a--){var v=a-o,f=v*v*(l-a)*(i-n[a]);f>g&&(m=a,g=f)}return m<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(gG),SG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),IG=function(t){SG(e,t);function e(n){var r=t.call(this,n)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var n=this.getLuminanceSource(),r=n.getWidth(),i=n.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=n.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;r&e.BLOCK_SIZE_MASK&&s++;var a=i>>e.BLOCK_SIZE_POWER;i&e.BLOCK_SIZE_MASK&&a++;var l=e.calculateBlackPoints(o,s,a,r,i),u=new Li(r,i);e.calculateThresholdForBlock(o,s,a,r,i,l,u),this.matrix=u}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(n){return new e(n)},e.calculateThresholdForBlock=function(n,r,i,o,s,a,l){for(var u=s-e.BLOCK_SIZE,d=o-e.BLOCK_SIZE,f=0;f<i;f++){var h=f<<e.BLOCK_SIZE_POWER;h>u&&(h=u);for(var m=e.cap(f,2,i-3),g=0;g<r;g++){var v=g<<e.BLOCK_SIZE_POWER;v>d&&(v=d);for(var y=e.cap(g,2,r-3),x=0,w=-2;w<=2;w++){var E=a[m+w];x+=E[y-2]+E[y-1]+E[y]+E[y+1]+E[y+2]}var A=x/25;e.thresholdBlock(n,v,h,A,o,l)}}},e.cap=function(n,r,i){return n<r?r:n>i?i:n},e.thresholdBlock=function(n,r,i,o,s,a){for(var l=0,u=i*s+r;l<e.BLOCK_SIZE;l++,u+=s)for(var d=0;d<e.BLOCK_SIZE;d++)(n[u+d]&255)<=o&&a.set(r+d,i+l)},e.calculateBlackPoints=function(n,r,i,o,s){for(var a=s-e.BLOCK_SIZE,l=o-e.BLOCK_SIZE,u=new Array(i),d=0;d<i;d++){u[d]=new Int32Array(r);var f=d<<e.BLOCK_SIZE_POWER;f>a&&(f=a);for(var h=0;h<r;h++){var m=h<<e.BLOCK_SIZE_POWER;m>l&&(m=l);for(var g=0,v=255,y=0,x=0,w=f*o+m;x<e.BLOCK_SIZE;x++,w+=o){for(var E=0;E<e.BLOCK_SIZE;E++){var A=n[w+E]&255;g+=A,A<v&&(v=A),A>y&&(y=A)}if(y-v>e.MIN_DYNAMIC_RANGE)for(x++,w+=o;x<e.BLOCK_SIZE;x++,w+=o)for(var E=0;E<e.BLOCK_SIZE;E++)g+=n[w+E]&255}var O=g>>e.BLOCK_SIZE_POWER*2;if(y-v<=e.MIN_DYNAMIC_RANGE&&(O=v/2,d>0&&h>0)){var j=(u[d-1][h]+2*u[d][h-1]+u[d-1][h-1])/4;v<j&&(O=j)}u[d][h]=O}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(AG),M0=function(){function t(e,n){this.width=e,this.height=n}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,n,r,i){throw new bh("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new bh("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new bh("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),n=new ke,r=0;r<this.height;r++){for(var i=this.getRow(r,e),o=0;o<this.width;o++){var s=i[o]&255,a=void 0;s<64?a="#":s<128?a="+":s<192?a=".":a=" ",n.append(a)}n.append(`
`)}return n.toString()},t}(),NG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),cw=function(t){NG(e,t);function e(n){var r=t.call(this,n.getWidth(),n.getHeight())||this;return r.delegate=n,r}return e.prototype.getRow=function(n,r){for(var i=this.delegate.getRow(n,r),o=this.getWidth(),s=0;s<o;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var n=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),o=0;o<r;o++)i[o]=255-(n[o]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(n,r,i,o){return new e(this.delegate.crop(n,r,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(M0),TG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),RG=function(t){TG(e,t);function e(n,r){r===void 0&&(r=!1);var i=t.call(this,n.width,n.height)||this;return i.canvas=n,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(n,r),i}return e.makeBufferFromCanvasImageData=function(n,r){r===void 0&&(r=!1);var i=n.getContext("2d").getImageData(0,0,n.width,n.height);return e.toGrayscaleBuffer(i.data,n.width,n.height,r)},e.toGrayscaleBuffer=function(n,r,i,o){o===void 0&&(o=!1);var s=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!o)for(var a=0,l=0,u=n.length;a<u;a+=4,l++){var d=void 0,f=n[a+3];if(f===0)d=255;else{var h=n[a],m=n[a+1],g=n[a+2];d=306*h+601*m+117*g+512>>10}s[l]=d}else for(var a=0,l=0,v=n.length;a<v;a+=4,l++){var d=void 0,f=n[a+3];if(f===0)d=255;else{var h=n[a],m=n[a+1],g=n[a+2];d=306*h+601*m+117*g+512>>10}s[l]=255-d}return s},e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new _e("Requested row is outside the image: "+n);var i=this.getWidth(),o=n*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,o){return t.prototype.crop.call(this,n,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement},e.prototype.rotate=function(n){var r=this.getTempCanvasElement(),i=r.getContext("2d"),o=n*e.DEGREE_TO_RADIANS,s=this.canvas.width,a=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(o))*s+Math.abs(Math.sin(o))*a),u=Math.ceil(Math.abs(Math.sin(o))*s+Math.abs(Math.cos(o))*a);return r.width=l,r.height=u,i.translate(l/2,u/2),i.rotate(o),i.drawImage(this.canvas,s/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new cw(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(M0),PG=function(){function t(e,n,r){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=r||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}(),Vn=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(d){try{u(r.next(d))}catch(f){s(f)}}function l(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?o(d.value):i(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})},Un=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(d){return l([u,d])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){n.label=u[1];break}if(u[0]===6&&n.label<o[1]){n.label=o[1],o=u;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(u);break}o[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},DG=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ic=function(){function t(e,n,r){n===void 0&&(n=500),this.reader=e,this.timeBetweenScansMillis=n,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return Vn(this,void 0,void 0,function(){var e,n,r,i,o,s,a,l,u,d,f,h;return Un(this,function(m){switch(m.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=m.sent(),n=[];try{for(r=DG(e),i=r.next();!i.done;i=r.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(a=o.deviceId||o.id,l=o.label||"Video device "+(n.length+1),u=o.groupId,d={deviceId:a,label:l,kind:s,groupId:u},n.push(d))}catch(g){f={error:g}}finally{try{i&&!i.done&&(h=r.return)&&h.call(r)}finally{if(f)throw f.error}}return[2,n]}})})},t.prototype.getVideoInputDevices=function(){return Vn(this,void 0,void 0,function(){var e;return Un(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=n.sent(),[2,e.map(function(r){return new PG(r.deviceId,r.label)})]}})})},t.prototype.findDeviceById=function(e){return Vn(this,void 0,void 0,function(){var n;return Un(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return n=r.sent(),n?[2,n.find(function(i){return i.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,n){return Vn(this,void 0,void 0,function(){return Un(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,n)];case 1:return[2,r.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,n){return Vn(this,void 0,void 0,function(){var r,i;return Un(this,function(o){switch(o.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,n){return Vn(this,void 0,void 0,function(){var r;return Un(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,n)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,n){return Vn(this,void 0,void 0,function(){var r,i;return Un(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return r=o.sent(),[4,this.decodeOnce(r)];case 2:return i=o.sent(),[2,i]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,n,r){return Vn(this,void 0,void 0,function(){return Un(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,n,r)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,n,r){return Vn(this,void 0,void 0,function(){var i,o;return Un(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,n,r)];case 1:return[2,s.sent()]}})})},t.prototype.decodeFromConstraints=function(e,n,r){return Vn(this,void 0,void 0,function(){var i;return Un(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,n,r)];case 2:return[2,o.sent()]}})})},t.prototype.decodeFromStream=function(e,n,r){return Vn(this,void 0,void 0,function(){var i;return Un(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,n)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,o.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,n){return Vn(this,void 0,void 0,function(){var r;return Un(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(n),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},t.prototype.playVideoOnLoadAsync=function(e){var n=this;return new Promise(function(r,i){return n.playVideoOnLoad(e,function(){return r()})})},t.prototype.playVideoOnLoad=function(e,n){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return Vn(this,void 0,void 0,function(){return Un(this,function(n){switch(n.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[3,4];case 3:return n.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,n){var r=document.getElementById(e);if(!r)throw new Hr("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==n.toLowerCase())throw new Hr("element with id '"+e+"' must be an "+n+" element");return r},t.prototype.decodeFromImage=function(e,n){if(!e&&!n)throw new Hr("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,n){if(!e&&!n)throw new Hr("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,n,r){if(e===void 0&&n===void 0)throw new Hr("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,r):this.decodeFromVideoElementContinuously(e,r)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new Hr("An image element must be provided.");this.reset();var n=this.prepareImageElement(e);this.imageElement=n;var r;return this.isImageLoaded(n)?r=this.decodeOnce(n,!1,!0):r=this._decodeOnLoadImage(n),r},t.prototype.decodeFromVideoElement=function(e){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)},t.prototype.decodeFromVideoElementContinuously=function(e,n){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,n)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Hr("A video element must be provided.");this.reset();var n=this.prepareVideoElement(e);return this.videoElement=n,n},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new Hr("An URL must be provided.");this.reset();var n=this.prepareImageElement();this.imageElement=n;var r=this._decodeOnLoadImage(n);return n.src=e,r},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Hr("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),r=this.decodeFromVideoElement(n);return n.src=e,r},t.prototype.decodeFromVideoUrlContinuously=function(e,n){if(!e)throw new Hr("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,n);return r.src=e,i},t.prototype._decodeOnLoadImage=function(e){var n=this;return new Promise(function(r,i){n.imageLoadedListener=function(){return n.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",n.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return Vn(this,void 0,void 0,function(){return Un(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),[4,this.decodeOnce(e)];case 2:return[2,n.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,n){return Vn(this,void 0,void 0,function(){return Un(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,n),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n},t.prototype.prepareVideoElement=function(e){var n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n},t.prototype.decodeOnce=function(e,n,r){var i=this;n===void 0&&(n=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var o=function(s,a){if(i._stopAsyncDecode){a(new Q("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var l=i.decode(e);s(l)}catch(h){var u=n&&h instanceof Q,d=h instanceof rn||h instanceof oe,f=d&&r;if(u||f)return setTimeout(o,i._timeBetweenDecodingAttempts,s,a);a(h)}};return new Promise(function(s,a){return o(s,a)})},t.prototype.decodeContinuously=function(e,n){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var o=r.decode(e);n(o,null),setTimeout(i,r.timeBetweenScansMillis)}catch(l){n(null,l);var s=l instanceof rn||l instanceof oe,a=l instanceof Q;(s||a)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},t.prototype.decode=function(e){var n=this.createBinaryBitmap(e);return this.decodeBitmap(n)},t.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var n=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),n=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new RG(r,n),o=new IG(i);return new pG(o)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var n=this.getCaptureCanvas(e),r=void 0;try{r=n.getContext("2d",{willReadFrequently:!0})}catch{r=n.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.drawImageOnCanvas=function(e,n,r){n===void 0&&(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var n=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),n.style.width=r+"px",n.style.height=i+"px",n.width=r,n.height=i,n},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}(),jn=function(){function t(e,n,r,i,o,s){r===void 0&&(r=n==null?0:8*n.length),s===void 0&&(s=ct.currentTimeMillis()),this.text=e,this.rawBytes=n,this.numBits=r,this.resultPoints=i,this.format=o,this.timestamp=s,this.text=e,this.rawBytes=n,r==null?this.numBits=n==null?0:8*n.length:this.numBits=r,this.resultPoints=i,this.format=o,this.resultMetadata=null,s==null?this.timestamp=ct.currentTimeMillis():this.timestamp=s}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(n.length+e.length);ct.arraycopy(n,0,r,0,n.length),ct.arraycopy(e,0,r,n.length,e.length),this.resultPoints=r}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),yv;(function(t){t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(yv||(yv={}));const ge=yv;var xv;(function(t){t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(xv||(xv={}));const mn=xv;var j0=function(){function t(e,n,r,i,o,s){o===void 0&&(o=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=n,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),fu=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new _e;return this.logTable[e]},t.addOrSubtract=function(e,n){return e^n},t}(),cs=function(){function t(e,n){if(n.length===0)throw new _e;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var i=1;i<r&&n[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),ct.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var n=this.coefficients,r;if(e===1){r=0;for(var i=0,o=n.length;i!==o;i++){var s=n[i];r=fu.addOrSubtract(r,s)}return r}r=n[0];for(var a=n.length,l=this.field,i=1;i<a;i++)r=fu.addOrSubtract(l.multiply(e,r),n[i]);return r},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new _e("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var o=new Int32Array(r.length),s=r.length-n.length;ct.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=fu.addOrSubtract(n[a-s],r[a]);return new t(this.field,o)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new _e("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var n=this.coefficients,r=n.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=this.field,l=0;l<r;l++)for(var u=n[l],d=0;d<o;d++)s[l+d]=fu.addOrSubtract(s[l+d],a.multiply(u,i[d]));return new t(a,s)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var n=this.coefficients.length,r=this.field,i=new Int32Array(n),o=this.coefficients,s=0;s<n;s++)i[s]=r.multiply(o[s],e);return new t(r,i)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new _e;if(n===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,o=new Int32Array(i+e),s=this.field,a=0;a<i;a++)o[a]=s.multiply(r[a],n);return new t(s,o)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new _e("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new _e("Divide by 0");for(var n=this.field,r=n.getZero(),i=this,o=e.getCoefficient(e.getDegree()),s=n.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var a=i.getDegree()-e.getDegree(),l=n.multiply(i.getCoefficient(i.getDegree()),s),u=e.multiplyByMonomial(a,l),d=n.buildMonomial(a,l);r=r.addOrSubtract(d),i=i.addOrSubtract(u)}return[r,i]},t.prototype.toString=function(){for(var e="",n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),n===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e},t}(),OG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),AP=function(t){OG(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(cr),kG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),rr=function(t){kG(e,t);function e(n,r,i){var o=t.call(this)||this;o.primitive=n,o.size=r,o.generatorBase=i;for(var s=new Int32Array(r),a=1,l=0;l<r;l++)s[l]=a,a*=2,a>=r&&(a^=n,a&=r-1);o.expTable=s;for(var u=new Int32Array(r),l=0;l<r-1;l++)u[s[l]]=l;return o.logTable=u,o.zero=new cs(o,Int32Array.from([0])),o.one=new cs(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new _e;if(r===0)return this.zero;var i=new Int32Array(n+1);return i[0]=r,new cs(this,i)},e.prototype.inverse=function(n){if(n===0)throw new AP;return this.expTable[this.size-this.logTable[n]-1]},e.prototype.multiply=function(n,r){return n===0||r===0?0:this.expTable[(this.logTable[n]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+je.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(n){return n===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(fu),MG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Wf=function(t){MG(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(cr),jG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Hd=function(t){jG(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(cr),L0=function(){function t(e){this.field=e}return t.prototype.decode=function(e,n){for(var r=this.field,i=new cs(r,e),o=new Int32Array(n),s=!0,a=0;a<n;a++){var l=i.evaluateAt(r.exp(a+r.getGeneratorBase()));o[o.length-1-a]=l,l!==0&&(s=!1)}if(!s)for(var u=new cs(r,o),d=this.runEuclideanAlgorithm(r.buildMonomial(n,1),u,n),f=d[0],h=d[1],m=this.findErrorLocations(f),g=this.findErrorMagnitudes(h,m),a=0;a<m.length;a++){var v=e.length-1-r.log(m[a]);if(v<0)throw new Wf("Bad error location");e[v]=rr.addOrSubtract(e[v],g[a])}},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var i=e;e=n,n=i}for(var o=this.field,s=e,a=n,l=o.getZero(),u=o.getOne();a.getDegree()>=(r/2|0);){var d=s,f=l;if(s=a,l=u,s.isZero())throw new Wf("r_{i-1} was zero");a=d;for(var h=o.getZero(),m=s.getCoefficient(s.getDegree()),g=o.inverse(m);a.getDegree()>=s.getDegree()&&!a.isZero();){var v=a.getDegree()-s.getDegree(),y=o.multiply(a.getCoefficient(a.getDegree()),g);h=h.addOrSubtract(o.buildMonomial(v,y)),a=a.addOrSubtract(s.multiplyByMonomial(v,y))}if(u=h.multiply(l).addOrSubtract(f),a.getDegree()>=s.getDegree())throw new Hd("Division algorithm failed to reduce polynomial?")}var x=u.getCoefficient(0);if(x===0)throw new Wf("sigmaTilde(0) was zero");var w=o.inverse(x),E=u.multiplyScalar(w),A=a.multiplyScalar(w);return[E,A]},t.prototype.findErrorLocations=function(e){var n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(n),i=0,o=this.field,s=1;s<o.getSize()&&i<n;s++)e.evaluateAt(s)===0&&(r[i]=o.inverse(s),i++);if(i!==n)throw new Wf("Error locator degree does not match number of roots");return r},t.prototype.findErrorMagnitudes=function(e,n){for(var r=n.length,i=new Int32Array(r),o=this.field,s=0;s<r;s++){for(var a=o.inverse(n[s]),l=1,u=0;u<r;u++)if(s!==u){var d=o.multiply(n[u],a),f=d&1?d&-2:d|1;l=o.multiply(l,f)}i[s]=o.multiply(e.evaluateAt(a),o.inverse(l)),o.getGeneratorBase()!==0&&(i[s]=o.multiply(i[s],a))}return i},t}(),ln;(function(t){t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY"})(ln||(ln={}));var wb=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var n=e.getBits(),r=this.extractBits(n),i=this.correctBits(r),o=t.convertBoolArrayToByteArray(i),s=t.getEncodedData(i),a=new j0(o,s,null,null);return a.setNumBits(i.length),a},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var n=e.length,r=ln.UPPER,i=ln.UPPER,o="",s=0;s<n;)if(i===ln.BINARY){if(n-s<5)break;var a=t.readCode(e,s,5);if(s+=5,a===0){if(n-s<11)break;a=t.readCode(e,s,11)+31,s+=11}for(var l=0;l<a;l++){if(n-s<8){s=n;break}var u=t.readCode(e,s,8);o+=We.castAsNonUtf8Char(u),s+=8}i=r}else{var d=i===ln.DIGIT?4:5;if(n-s<d)break;var u=t.readCode(e,s,d);s+=d;var f=t.getCharacter(i,u);f.startsWith("CTRL_")?(r=i,i=t.getTable(f.charAt(5)),f.charAt(6)==="L"&&(r=i)):(o+=f,i=r)}return o},t.getTable=function(e){switch(e){case"L":return ln.LOWER;case"P":return ln.PUNCT;case"M":return ln.MIXED;case"D":return ln.DIGIT;case"B":return ln.BINARY;case"U":default:return ln.UPPER}},t.getCharacter=function(e,n){switch(e){case ln.UPPER:return t.UPPER_TABLE[n];case ln.LOWER:return t.LOWER_TABLE[n];case ln.MIXED:return t.MIXED_TABLE[n];case ln.PUNCT:return t.PUNCT_TABLE[n];case ln.DIGIT:return t.DIGIT_TABLE[n];default:throw new Hd("Bad table")}},t.prototype.correctBits=function(e){var n,r;this.ddata.getNbLayers()<=2?(r=6,n=rr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=rr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=rr.AZTEC_DATA_10):(r=12,n=rr.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/r;if(o<i)throw new oe;for(var s=e.length%r,a=new Int32Array(o),l=0;l<o;l++,s+=r)a[l]=t.readCode(e,s,r);try{var u=new L0(n);u.decode(a,o-i)}catch(y){throw new oe(y)}for(var d=(1<<r)-1,f=0,l=0;l<i;l++){var h=a[l];if(h===0||h===d)throw new oe;(h===1||h===d-1)&&f++}for(var m=new Array(i*r-f),g=0,l=0;l<i;l++){var h=a[l];if(h===1||h===d-1)m.fill(h>1,g,g+r-1),g+=r-1;else for(var v=r-1;v>=0;--v)m[g++]=(h&1<<v)!==0}return m},t.prototype.extractBits=function(e){var n=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(n?11:14)+r*4,o=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,n));if(n)for(var a=0;a<o.length;a++)o[a]=a;else for(var l=i+1+2*je.truncDivision(je.truncDivision(i,2)-1,15),u=i/2,d=je.truncDivision(l,2),a=0;a<u;a++){var f=a+je.truncDivision(a,15);o[u-a-1]=d-f-1,o[u+a]=d+f+1}for(var a=0,h=0;a<r;a++){for(var m=(r-a)*4+(n?9:12),g=a*2,v=i-1-g,y=0;y<m;y++)for(var x=y*2,w=0;w<2;w++)s[h+x+w]=e.get(o[g+w],o[g+y]),s[h+2*m+x+w]=e.get(o[g+y],o[v-w]),s[h+4*m+x+w]=e.get(o[v-w],o[v-y]),s[h+6*m+x+w]=e.get(o[v-y],o[g+w]);h+=m*8}return s},t.readCode=function(e,n,r){for(var i=0,o=n;o<n+r;o++)i<<=1,e[o]&&(i|=1);return i},t.readByte=function(e,n){var r=e.length-n;return r>=8?t.readCode(e,n,8):t.readCode(e,n,r)<<8-r},t.convertBoolArrayToByteArray=function(e){for(var n=new Uint8Array((e.length+7)/8),r=0;r<n.length;r++)n[r]=t.readByte(e,8*r);return n},t.prototype.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),Xe=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,n,r,i){var o=e-r,s=n-i;return Math.sqrt(o*o+s*s)},t.sum=function(e){for(var n=0,r=0,i=e.length;r!==i;r++){var o=e[r];n+=o}return n},t}(),wv=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),he=function(){function t(e,n){this.x=e,this.y=n}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var n=e;return this.x===n.x&&this.y===n.y}return!1},t.prototype.hashCode=function(){return 31*wv.floatToIntBits(this.x)+wv.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var n=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),o,s,a;if(r>=n&&r>=i?(s=e[0],o=e[1],a=e[2]):i>=r&&i>=n?(s=e[1],o=e[0],a=e[2]):(s=e[2],o=e[0],a=e[1]),this.crossProductZ(o,s,a)<0){var l=o;o=a,a=l}e[0]=o,e[1]=s,e[2]=a},t.distance=function(e,n){return Xe.distance(e.x,e.y,n.x,n.y)},t.crossProductZ=function(e,n,r){var i=n.x,o=n.y;return(r.x-i)*(e.y-o)-(r.y-o)*(e.x-i)},t}(),uw=function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),LG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),FG=function(t){LG(e,t);function e(n,r,i,o,s){var a=t.call(this,n,r)||this;return a.compact=i,a.nbDatablocks=o,a.nbLayers=s,a}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(uw),_v=function(){function t(e,n,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=t.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=n/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Q}return t.prototype.detect=function(){for(var e=this.leftInit,n=this.rightInit,r=this.upInit,i=this.downInit,o=!1,s=!0,a=!1,l=!1,u=!1,d=!1,f=!1,h=this.width,m=this.height;s;){s=!1;for(var g=!0;(g||!l)&&n<h;)g=this.containsBlackPoint(r,i,n,!1),g?(n++,s=!0,l=!0):l||n++;if(n>=h){o=!0;break}for(var v=!0;(v||!u)&&i<m;)v=this.containsBlackPoint(e,n,i,!0),v?(i++,s=!0,u=!0):u||i++;if(i>=m){o=!0;break}for(var y=!0;(y||!d)&&e>=0;)y=this.containsBlackPoint(r,i,e,!1),y?(e--,s=!0,d=!0):d||e--;if(e<0){o=!0;break}for(var x=!0;(x||!f)&&r>=0;)x=this.containsBlackPoint(e,n,r,!0),x?(r--,s=!0,f=!0):f||r--;if(r<0){o=!0;break}s&&(a=!0)}if(!o&&a){for(var w=n-e,E=null,A=1;E===null&&A<w;A++)E=this.getBlackPointOnSegment(e,i-A,e+A,i);if(E==null)throw new Q;for(var O=null,A=1;O===null&&A<w;A++)O=this.getBlackPointOnSegment(e,r+A,e+A,r);if(O==null)throw new Q;for(var j=null,A=1;j===null&&A<w;A++)j=this.getBlackPointOnSegment(n,r+A,n-A,r);if(j==null)throw new Q;for(var N=null,A=1;N===null&&A<w;A++)N=this.getBlackPointOnSegment(n,i-A,n-A,i);if(N==null)throw new Q;return this.centerEdges(N,E,j,O)}else throw new Q},t.prototype.getBlackPointOnSegment=function(e,n,r,i){for(var o=Xe.round(Xe.distance(e,n,r,i)),s=(r-e)/o,a=(i-n)/o,l=this.image,u=0;u<o;u++){var d=Xe.round(e+u*s),f=Xe.round(n+u*a);if(l.get(d,f))return new he(d,f)}return null},t.prototype.centerEdges=function(e,n,r,i){var o=e.getX(),s=e.getY(),a=n.getX(),l=n.getY(),u=r.getX(),d=r.getY(),f=i.getX(),h=i.getY(),m=t.CORR;return o<this.width/2?[new he(f-m,h+m),new he(a+m,l+m),new he(u-m,d-m),new he(o+m,s-m)]:[new he(f+m,h+m),new he(a+m,l-m),new he(u-m,d+m),new he(o-m,s-m)]},t.prototype.containsBlackPoint=function(e,n,r,i){var o=this.image;if(i){for(var s=e;s<=n;s++)if(o.get(s,r))return!0}else for(var a=e;a<=n;a++)if(o.get(r,a))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),_b=function(){function t(){}return t.checkAndNudgePoints=function(e,n){for(var r=e.getWidth(),i=e.getHeight(),o=!0,s=0;s<n.length&&o;s+=2){var a=Math.floor(n[s]),l=Math.floor(n[s+1]);if(a<-1||a>r||l<-1||l>i)throw new Q;o=!1,a===-1?(n[s]=0,o=!0):a===r&&(n[s]=r-1,o=!0),l===-1?(n[s+1]=0,o=!0):l===i&&(n[s+1]=i-1,o=!0)}o=!0;for(var s=n.length-2;s>=0&&o;s-=2){var a=Math.floor(n[s]),l=Math.floor(n[s+1]);if(a<-1||a>r||l<-1||l>i)throw new Q;o=!1,a===-1?(n[s]=0,o=!0):a===r&&(n[s]=r-1,o=!0),l===-1?(n[s+1]=0,o=!0):l===i&&(n[s+1]=i-1,o=!0)}},t}(),SP=function(){function t(e,n,r,i,o,s,a,l,u){this.a11=e,this.a21=n,this.a31=r,this.a12=i,this.a22=o,this.a32=s,this.a13=a,this.a23=l,this.a33=u}return t.quadrilateralToQuadrilateral=function(e,n,r,i,o,s,a,l,u,d,f,h,m,g,v,y){var x=t.quadrilateralToSquare(e,n,r,i,o,s,a,l),w=t.squareToQuadrilateral(u,d,f,h,m,g,v,y);return w.times(x)},t.prototype.transformPoints=function(e){for(var n=e.length,r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,l=this.a23,u=this.a31,d=this.a32,f=this.a33,h=0;h<n;h+=2){var m=e[h],g=e[h+1],v=o*m+l*g+f;e[h]=(r*m+s*g+u)/v,e[h+1]=(i*m+a*g+d)/v}},t.prototype.transformPointsWithValues=function(e,n){for(var r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,l=this.a23,u=this.a31,d=this.a32,f=this.a33,h=e.length,m=0;m<h;m++){var g=e[m],v=n[m],y=o*g+l*v+f;e[m]=(r*g+s*v+u)/y,n[m]=(i*g+a*v+d)/y}},t.squareToQuadrilateral=function(e,n,r,i,o,s,a,l){var u=e-r+o-a,d=n-i+s-l;if(u===0&&d===0)return new t(r-e,o-r,e,i-n,s-i,n,0,0,1);var f=r-o,h=a-o,m=i-s,g=l-s,v=f*g-h*m,y=(u*g-h*d)/v,x=(f*d-u*m)/v;return new t(r-e+y*r,a-e+x*a,e,i-n+y*i,l-n+x*l,n,y,x,1)},t.quadrilateralToSquare=function(e,n,r,i,o,s,a,l){return t.squareToQuadrilateral(e,n,r,i,o,s,a,l).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),BG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),VG=function(t){BG(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(n,r,i,o,s,a,l,u,d,f,h,m,g,v,y,x,w,E,A){var O=SP.quadrilateralToQuadrilateral(o,s,a,l,u,d,f,h,m,g,v,y,x,w,E,A);return this.sampleGridWithTransform(n,r,i,O)},e.prototype.sampleGridWithTransform=function(n,r,i,o){if(r<=0||i<=0)throw new Q;for(var s=new Li(r,i),a=new Float32Array(2*r),l=0;l<i;l++){for(var u=a.length,d=l+.5,f=0;f<u;f+=2)a[f]=f/2+.5,a[f+1]=d;o.transformPoints(a),_b.checkAndNudgePoints(n,a);try{for(var f=0;f<u;f+=2)n.get(Math.floor(a[f]),Math.floor(a[f+1]))&&s.set(f/2,l)}catch{throw new Q}}return s},e}(_b),dw=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new VG,t}(),Zn=function(){function t(e,n){this.x=e,this.y=n}return t.prototype.toResultPoint=function(){return new he(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}(),UG=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var n=this.getMatrixCenter(),r=this.getBullsEyeCorners(n);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var o=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new FG(o,s,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new Q;var n=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(r,n);for(var i=0,o=0;o<4;o++){var s=r[(this.shift+o)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var a=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)},t.prototype.getRotation=function(e,n){var r=0;e.forEach(function(o,s,a){var l=(o>>n-2<<1)+(o&1);r=(r<<3)+l}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(je.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new Q},t.prototype.getCorrectedParameterData=function(e,n){var r,i;n?(r=7,i=2):(r=10,i=4);for(var o=r-i,s=new Int32Array(r),a=r-1;a>=0;--a)s[a]=e&15,e>>=4;try{var l=new L0(rr.AZTEC_PARAM);l.decode(s,o)}catch{throw new Q}for(var u=0,a=0;a<i;a++)u=(u<<4)+s[a];return u},t.prototype.getBullsEyeCorners=function(e){var n=e,r=e,i=e,o=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(n,s,1,-1),l=this.getFirstDifferent(r,s,1,1),u=this.getFirstDifferent(i,s,-1,1),d=this.getFirstDifferent(o,s,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(d,a)*this.nbCenterLayers/(this.distancePoint(o,n)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(a,l,u,d))break}n=a,r=l,i=u,o=d,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Q;this.compact=this.nbCenterLayers===5;var h=new he(n.getX()+.5,n.getY()-.5),m=new he(r.getX()+.5,r.getY()+.5),g=new he(i.getX()-.5,i.getY()+.5),v=new he(o.getX()-.5,o.getY()-.5);return this.expandSquare([h,m,g,v],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,n,r,i;try{var o=new _v(this.image).detect();e=o[0],n=o[1],r=o[2],i=o[3]}catch{var s=this.image.getWidth()/2,a=this.image.getHeight()/2;e=this.getFirstDifferent(new Zn(s+7,a-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new Zn(s+7,a+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Zn(s-7,a+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Zn(s-7,a-7),!1,-1,-1).toResultPoint()}var l=Xe.round((e.getX()+i.getX()+n.getX()+r.getX())/4),u=Xe.round((e.getY()+i.getY()+n.getY()+r.getY())/4);try{var o=new _v(this.image,15,l,u).detect();e=o[0],n=o[1],r=o[2],i=o[3]}catch{e=this.getFirstDifferent(new Zn(l+7,u-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new Zn(l+7,u+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Zn(l-7,u+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Zn(l-7,u-7),!1,-1,-1).toResultPoint()}return l=Xe.round((e.getX()+i.getX()+n.getX()+r.getX())/4),u=Xe.round((e.getY()+i.getY()+n.getY()+r.getY())/4),new Zn(l,u)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,n,r,i,o){var s=dw.getInstance(),a=this.getDimension(),l=a/2-this.nbCenterLayers,u=a/2+this.nbCenterLayers;return s.sampleGrid(e,a,a,l,l,u,l,u,u,l,u,n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY(),o.getX(),o.getY())},t.prototype.sampleLine=function(e,n,r){for(var i=0,o=this.distanceResultPoint(e,n),s=o/r,a=e.getX(),l=e.getY(),u=s*(n.getX()-e.getX())/o,d=s*(n.getY()-e.getY())/o,f=0;f<r;f++)this.image.get(Xe.round(a+f*u),Xe.round(l+f*d))&&(i|=1<<r-f-1);return i},t.prototype.isWhiteOrBlackRectangle=function(e,n,r,i){var o=3;e=new Zn(e.getX()-o,e.getY()+o),n=new Zn(n.getX()-o,n.getY()-o),r=new Zn(r.getX()+o,r.getY()-o),i=new Zn(i.getX()+o,i.getY()+o);var s=this.getColor(i,e);if(s===0)return!1;var a=this.getColor(e,n);return a!==s||(a=this.getColor(n,r),a!==s)?!1:(a=this.getColor(r,i),a===s)},t.prototype.getColor=function(e,n){for(var r=this.distancePoint(e,n),i=(n.getX()-e.getX())/r,o=(n.getY()-e.getY())/r,s=0,a=e.getX(),l=e.getY(),u=this.image.get(e.getX(),e.getY()),d=Math.ceil(r),f=0;f<d;f++)a+=i,l+=o,this.image.get(Xe.round(a),Xe.round(l))!==u&&s++;var h=s/r;return h>.1&&h<.9?0:h<=.1===u?1:-1},t.prototype.getFirstDifferent=function(e,n,r,i){for(var o=e.getX()+r,s=e.getY()+i;this.isValid(o,s)&&this.image.get(o,s)===n;)o+=r,s+=i;for(o-=r,s-=i;this.isValid(o,s)&&this.image.get(o,s)===n;)o+=r;for(o-=r;this.isValid(o,s)&&this.image.get(o,s)===n;)s+=i;return s-=i,new Zn(o,s)},t.prototype.expandSquare=function(e,n,r){var i=r/(2*n),o=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,l=(e[0].getY()+e[2].getY())/2,u=new he(a+i*o,l+i*s),d=new he(a-i*o,l-i*s);o=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,l=(e[1].getY()+e[3].getY())/2;var f=new he(a+i*o,l+i*s),h=new he(a-i*o,l-i*s),m=[u,f,d,h];return m},t.prototype.isValid=function(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()},t.prototype.isValidPoint=function(e){var n=Xe.round(e.getX()),r=Xe.round(e.getY());return this.isValid(n,r)},t.prototype.distancePoint=function(e,n){return Xe.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.distanceResultPoint=function(e,n){return Xe.distance(e.getX(),e.getY(),n.getX(),n.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(je.truncDivision(this.nbLayers-4,8)+1)+15},t}(),Ev=function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=null,i=new UG(e.getBlackMatrix()),o=null,s=null;try{var a=i.detectMirror(!1);o=a.getPoints(),this.reportFoundResultPoints(n,o),s=new wb().decode(a)}catch(f){r=f}if(s==null)try{var a=i.detectMirror(!0);o=a.getPoints(),this.reportFoundResultPoints(n,o),s=new wb().decode(a)}catch(f){throw r??f}var l=new jn(s.getText(),s.getRawBytes(),s.getNumBits(),o,ge.AZTEC,ct.currentTimeMillis()),u=s.getByteSegments();u!=null&&l.putMetadata(mn.BYTE_SEGMENTS,u);var d=s.getECLevel();return d!=null&&l.putMetadata(mn.ERROR_CORRECTION_LEVEL,d),l},t.prototype.reportFoundResultPoints=function(e,n){if(e!=null){var r=e.get(wt.NEED_RESULT_POINT_CALLBACK);r!=null&&n.forEach(function(i,o,s){r.foundPossibleResultPoint(i)})}},t.prototype.reset=function(){},t}(),$G=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){$G(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new Ev,n)||this}return e})(Ic);var Xt=function(){function t(){}return t.prototype.decode=function(e,n){try{return this.doDecode(e,n)}catch{var r=n&&n.get(wt.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,n),s=o.getResultMetadata(),a=270;s!==null&&s.get(mn.ORIENTATION)===!0&&(a=a+s.get(mn.ORIENTATION)%360),o.putMetadata(mn.ORIENTATION,a);var l=o.getResultPoints();if(l!==null)for(var u=i.getHeight(),d=0;d<l.length;d++)l[d]=new he(u-l[d].getY()-1,l[d].getX());return o}else throw new Q}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,n){var r=e.getWidth(),i=e.getHeight(),o=new on(r),s=n&&n.get(wt.TRY_HARDER)===!0,a=Math.max(1,i>>(s?8:5)),l;s?l=i:l=15;for(var u=Math.trunc(i/2),d=0;d<l;d++){var f=Math.trunc((d+1)/2),h=(d&1)===0,m=u+a*(h?f:-f);if(m<0||m>=i)break;try{o=e.getBlackRow(m,o)}catch{continue}for(var g=function(w){if(w===1&&(o.reverse(),n&&n.get(wt.NEED_RESULT_POINT_CALLBACK)===!0)){var E=new Map;n.forEach(function(j,N){return E.set(N,j)}),E.delete(wt.NEED_RESULT_POINT_CALLBACK),n=E}try{var A=v.decodeRow(m,o,n);if(w===1){A.putMetadata(mn.ORIENTATION,180);var O=A.getResultPoints();O!==null&&(O[0]=new he(r-O[0].getX()-1,O[0].getY()),O[1]=new he(r-O[1].getX()-1,O[1].getY()))}return{value:A}}catch{}},v=this,y=0;y<2;y++){var x=g(y);if(typeof x=="object")return x.value}}throw new Q},t.recordPattern=function(e,n,r){for(var i=r.length,o=0;o<i;o++)r[o]=0;var s=e.getSize();if(n>=s)throw new Q;for(var a=!e.get(n),l=0,u=n;u<s;){if(e.get(u)!==a)r[l]++;else{if(++l===i)break;r[l]=1,a=!a}u++}if(!(l===i||l===i-1&&u===s))throw new Q},t.recordPatternInReverse=function(e,n,r){for(var i=r.length,o=e.get(n);n>0&&i>=0;)e.get(--n)!==o&&(i--,o=!o);if(i>=0)throw new Q;t.recordPattern(e,n+1,r)},t.patternMatchVariance=function(e,n,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=n[a];if(o<s)return Number.POSITIVE_INFINITY;var l=o/s;r*=l;for(var u=0,d=0;d<i;d++){var f=e[d],h=n[d]*l,m=f>h?f-h:h-f;if(m>r)return Number.POSITIVE_INFINITY;u+=m}return u/o},t}(),zG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Eb=function(t){zG(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(n){for(var r=n.getSize(),i=n.getNextSet(0),o=0,s=Int32Array.from([0,0,0,0,0,0]),a=i,l=!1,u=6,d=i;d<r;d++)if(n.get(d)!==l)s[o]++;else{if(o===u-1){for(var f=e.MAX_AVG_VARIANCE,h=-1,m=e.CODE_START_A;m<=e.CODE_START_C;m++){var g=Xt.patternMatchVariance(s,e.CODE_PATTERNS[m],e.MAX_INDIVIDUAL_VARIANCE);g<f&&(f=g,h=m)}if(h>=0&&n.isRange(Math.max(0,a-(d-a)/2),a,!1))return Int32Array.from([a,d,h]);a+=s[0]+s[1],s=s.slice(2,s.length),s[o-1]=0,s[o]=0,o--}else o++;s[o]=1,l=!l}throw new Q},e.decodeCode=function(n,r,i){Xt.recordPattern(n,i,r);for(var o=e.MAX_AVG_VARIANCE,s=-1,a=0;a<e.CODE_PATTERNS.length;a++){var l=e.CODE_PATTERNS[a],u=this.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);u<o&&(o=u,s=a)}if(s>=0)return s;throw new Q},e.prototype.decodeRow=function(n,r,i){var o=i&&i.get(wt.ASSUME_GS1)===!0,s=e.findStartPattern(r),a=s[2],l=0,u=new Uint8Array(20);u[l++]=a;var d;switch(a){case e.CODE_START_A:d=e.CODE_CODE_A;break;case e.CODE_START_B:d=e.CODE_CODE_B;break;case e.CODE_START_C:d=e.CODE_CODE_C;break;default:throw new oe}for(var f=!1,h=!1,m="",g=s[0],v=s[1],y=Int32Array.from([0,0,0,0,0,0]),x=0,w=0,E=a,A=0,O=!0,j=!1,N=!1;!f;){var T=h;switch(h=!1,x=w,w=e.decodeCode(r,y,v),u[l++]=w,w!==e.CODE_STOP&&(O=!0),w!==e.CODE_STOP&&(A++,E+=A*w),g=v,v+=y.reduce(function(ee,F){return ee+F},0),w){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new oe}switch(d){case e.CODE_CODE_A:if(w<64)N===j?m+=String.fromCharCode(32+w):m+=String.fromCharCode(32+w+128),N=!1;else if(w<96)N===j?m+=String.fromCharCode(w-64):m+=String.fromCharCode(w+64),N=!1;else switch(w!==e.CODE_STOP&&(O=!1),w){case e.CODE_FNC_1:o&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!j&&N?(j=!0,N=!1):j&&N?(j=!1,N=!1):N=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_B;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(w<96)N===j?m+=String.fromCharCode(32+w):m+=String.fromCharCode(32+w+128),N=!1;else switch(w!==e.CODE_STOP&&(O=!1),w){case e.CODE_FNC_1:o&&(m.length===0?m+="]C1":m+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!j&&N?(j=!0,N=!1):j&&N?(j=!1,N=!1):N=!0;break;case e.CODE_SHIFT:h=!0,d=e.CODE_CODE_A;break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_C:d=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(w<100)w<10&&(m+="0"),m+=w;else switch(w!==e.CODE_STOP&&(O=!1),w){case e.CODE_FNC_1:o&&(m.length===0?m+="]C1":m+="");break;case e.CODE_CODE_A:d=e.CODE_CODE_A;break;case e.CODE_CODE_B:d=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}T&&(d=d===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var S=v-g;if(v=r.getNextUnset(v),!r.isRange(v,Math.min(r.getSize(),v+(v-g)/2),!1))throw new Q;if(E-=A*x,E%103!==x)throw new rn;var b=m.length;if(b===0)throw new Q;b>0&&O&&(d===e.CODE_CODE_C?m=m.substring(0,b-2):m=m.substring(0,b-1));for(var k=(s[1]+s[0])/2,R=g+S/2,P=u.length,G=new Uint8Array(P),K=0;K<P;K++)G[K]=u[K];var X=[new he(k,n),new he(R,n)];return new jn(m,G,0,X,ge.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(Xt),HG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ug=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cb=function(t){HG(e,t);function e(n,r){n===void 0&&(n=!1),r===void 0&&(r=!1);var i=t.call(this)||this;return i.usingCheckDigit=n,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(n,r,i){var o,s,a,l,u=this.counters;u.fill(0),this.decodeRowResult="";var d=e.findAsteriskPattern(r,u),f=r.getNextSet(d[1]),h=r.getSize(),m,g;do{e.recordPattern(r,f,u);var v=e.toNarrowWidePattern(u);if(v<0)throw new Q;m=e.patternToChar(v),this.decodeRowResult+=m,g=f;try{for(var y=(o=void 0,ug(u)),x=y.next();!x.done;x=y.next()){var w=x.value;f+=w}}catch(P){o={error:P}}finally{try{x&&!x.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}f=r.getNextSet(f)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var E=0;try{for(var A=ug(u),O=A.next();!O.done;O=A.next()){var w=O.value;E+=w}}catch(P){a={error:P}}finally{try{O&&!O.done&&(l=A.return)&&l.call(A)}finally{if(a)throw a.error}}var j=f-g-E;if(f!==h&&j*2<E)throw new Q;if(this.usingCheckDigit){for(var N=this.decodeRowResult.length-1,T=0,S=0;S<N;S++)T+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(S));if(this.decodeRowResult.charAt(N)!==e.ALPHABET_STRING.charAt(T%43))throw new rn;this.decodeRowResult=this.decodeRowResult.substring(0,N)}if(this.decodeRowResult.length===0)throw new Q;var b;this.extendedMode?b=e.decodeExtended(this.decodeRowResult):b=this.decodeRowResult;var k=(d[1]+d[0])/2,R=g+E/2;return new jn(b,null,0,[new he(k,n),new he(R,n)],ge.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(n,r){for(var i=n.getSize(),o=n.getNextSet(0),s=0,a=o,l=!1,u=r.length,d=o;d<i;d++)if(n.get(d)!==l)r[s]++;else{if(s===u-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&n.isRange(Math.max(0,a-Math.floor((d-a)/2)),a,!1))return[a,d];a+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,l=!l}throw new Q},e.toNarrowWidePattern=function(n){var r,i,o=n.length,s=0,a;do{var l=2147483647;try{for(var u=(r=void 0,ug(n)),d=u.next();!d.done;d=u.next()){var f=d.value;f<l&&f>s&&(l=f)}}catch(v){r={error:v}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}s=l,a=0;for(var h=0,m=0,g=0;g<o;g++){var f=n[g];f>s&&(m|=1<<o-1-g,a++,h+=f)}if(a===3){for(var g=0;g<o&&a>0;g++){var f=n[g];if(f>s&&(a--,f*2>=h))return-1}return m}}while(a>3);return-1},e.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);if(n===e.ASTERISK_ENCODING)return"*";throw new Q},e.decodeExtended=function(n){for(var r=n.length,i="",o=0;o<r;o++){var s=n.charAt(o);if(s==="+"||s==="$"||s==="%"||s==="/"){var a=n.charAt(o+1),l="\0";switch(s){case"+":if(a>="A"&&a<="Z")l=String.fromCharCode(a.charCodeAt(0)+32);else throw new oe;break;case"$":if(a>="A"&&a<="Z")l=String.fromCharCode(a.charCodeAt(0)-64);else throw new oe;break;case"%":if(a>="A"&&a<="E")l=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")l=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")l=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")l=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")l="\0";else if(a==="V")l="@";else if(a==="W")l="`";else if(a==="X"||a==="Y"||a==="Z")l="";else throw new oe;break;case"/":if(a>="A"&&a<="O")l=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")l=":";else throw new oe;break}i+=l,o++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(Xt),WG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),dg=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bb=function(t){WG(e,t);function e(){var n=t.call(this)||this;return n.decodeRowResult="",n.counters=new Int32Array(6),n}return e.prototype.decodeRow=function(n,r,i){var o,s,a,l,u=this.findAsteriskPattern(r),d=r.getNextSet(u[1]),f=r.getSize(),h=this.counters;h.fill(0),this.decodeRowResult="";var m,g;do{e.recordPattern(r,d,h);var v=this.toPattern(h);if(v<0)throw new Q;m=this.patternToChar(v),this.decodeRowResult+=m,g=d;try{for(var y=(o=void 0,dg(h)),x=y.next();!x.done;x=y.next()){var w=x.value;d+=w}}catch(S){o={error:S}}finally{try{x&&!x.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}d=r.getNextSet(d)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var E=0;try{for(var A=dg(h),O=A.next();!O.done;O=A.next()){var w=O.value;E+=w}}catch(S){a={error:S}}finally{try{O&&!O.done&&(l=A.return)&&l.call(A)}finally{if(a)throw a.error}}if(d===f||!r.get(d))throw new Q;if(this.decodeRowResult.length<2)throw new Q;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var j=this.decodeExtended(this.decodeRowResult),N=(u[1]+u[0])/2,T=g+E/2;return new jn(j,null,0,[new he(N,n),new he(T,n)],ge.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(n){var r=n.getSize(),i=n.getNextSet(0);this.counters.fill(0);for(var o=this.counters,s=i,a=!1,l=o.length,u=0,d=i;d<r;d++)if(n.get(d)!==a)o[u]++;else{if(u===l-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([s,d]);s+=o[0]+o[1],o.copyWithin(0,2,2+u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,a=!a}throw new Q},e.prototype.toPattern=function(n){var r,i,o=0;try{for(var s=dg(n),a=s.next();!a.done;a=s.next()){var l=a.value;o+=l}}catch(g){r={error:g}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var u=0,d=n.length,f=0;f<d;f++){var h=Math.round(n[f]*9/o);if(h<1||h>4)return-1;if(f&1)u<<=h;else for(var m=0;m<h;m++)u=u<<1|1}return u},e.prototype.patternToChar=function(n){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===n)return e.ALPHABET_STRING.charAt(r);throw new Q},e.prototype.decodeExtended=function(n){for(var r=n.length,i="",o=0;o<r;o++){var s=n.charAt(o);if(s>="a"&&s<="d"){if(o>=r-1)throw new oe;var a=n.charAt(o+1),l="\0";switch(s){case"d":if(a>="A"&&a<="Z")l=String.fromCharCode(a.charCodeAt(0)+32);else throw new oe;break;case"a":if(a>="A"&&a<="Z")l=String.fromCharCode(a.charCodeAt(0)-64);else throw new oe;break;case"b":if(a>="A"&&a<="E")l=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")l=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")l=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")l=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")l="\0";else if(a==="V")l="@";else if(a==="W")l="`";else if(a>="X"&&a<="Z")l="";else throw new oe;break;case"c":if(a>="A"&&a<="O")l=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")l=":";else throw new oe;break}i+=l,o++}else i+=s}return i},e.prototype.checkChecksums=function(n){var r=n.length;this.checkOneChecksum(n,r-2,20),this.checkOneChecksum(n,r-1,15)},e.prototype.checkOneChecksum=function(n,r,i){for(var o=1,s=0,a=r-1;a>=0;a--)s+=o*e.ALPHABET_STRING.indexOf(n.charAt(a)),++o>i&&(o=1);if(n.charAt(r)!==e.ALPHABET_STRING[s%47])throw new rn},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(Xt),GG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qG=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ab=function(t){GG(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.narrowLineWidth=-1,n}return e.prototype.decodeRow=function(n,r,i){var o,s,a=this.decodeStart(r),l=this.decodeEnd(r),u=new ke;e.decodeMiddle(r,a[1],l[0],u);var d=u.toString(),f=null;i!=null&&(f=i.get(wt.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var h=d.length,m=!1,g=0;try{for(var v=qG(f),y=v.next();!y.done;y=v.next()){var x=y.value;if(h===x){m=!0;break}x>g&&(g=x)}}catch(A){o={error:A}}finally{try{y&&!y.done&&(s=v.return)&&s.call(v)}finally{if(o)throw o.error}}if(!m&&h>g&&(m=!0),!m)throw new oe;var w=[new he(a[1],n),new he(l[0],n)],E=new jn(d,null,0,w,ge.ITF,new Date().getTime());return E},e.decodeMiddle=function(n,r,i,o){var s=new Int32Array(10),a=new Int32Array(5),l=new Int32Array(5);for(s.fill(0),a.fill(0),l.fill(0);r<i;){Xt.recordPattern(n,r,s);for(var u=0;u<5;u++){var d=2*u;a[u]=s[d],l[u]=s[d+1]}var f=e.decodeDigit(a);o.append(f.toString()),f=this.decodeDigit(l),o.append(f.toString()),s.forEach(function(h){r+=h})}},e.prototype.decodeStart=function(n){var r=e.skipWhiteSpace(n),i=e.findGuardPattern(n,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(n,i[0]),i},e.prototype.validateQuietZone=function(n,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var o=r-1;i>0&&o>=0&&!n.get(o);o--)i--;if(i!==0)throw new Q},e.skipWhiteSpace=function(n){var r=n.getSize(),i=n.getNextSet(0);if(i===r)throw new Q;return i},e.prototype.decodeEnd=function(n){n.reverse();try{var r=e.skipWhiteSpace(n),i=void 0;try{i=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof Q&&(i=e.findGuardPattern(n,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,i[0]);var o=i[0];return i[0]=n.getSize()-i[1],i[1]=n.getSize()-o,i}finally{n.reverse()}},e.findGuardPattern=function(n,r,i){var o=i.length,s=new Int32Array(o),a=n.getSize(),l=!1,u=0,d=r;s.fill(0);for(var f=r;f<a;f++)if(n.get(f)!==l)s[u]++;else{if(u===o-1){if(Xt.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[d,f];d+=s[0]+s[1],ct.arraycopy(s,2,s,0,u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,l=!l}throw new Q},e.decodeDigit=function(n){for(var r=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,s=0;s<o;s++){var a=e.PATTERNS[s],l=Xt.patternMatchVariance(n,a,e.MAX_INDIVIDUAL_VARIANCE);l<r?(r=l,i=s):l===r&&(i=-1)}if(i>=0)return i%10;throw new Q},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(Xt),KG=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ac=function(t){KG(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.decodeRowStringBuffer="",n}return e.findStartGuardPattern=function(n){for(var r=!1,i,o=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(n,o,!1,this.START_END_PATTERN,s);var a=i[0];o=i[1];var l=a-(o-a);l>=0&&(r=n.isRange(l,a,!1))}return i},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var i=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,i=0,o=r-1;o>=0;o-=2){var s=n.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new oe;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=n.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new oe;i+=s}return(1e3-i)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(n,r,i,o){return this.findGuardPattern(n,r,i,o,new Int32Array(o.length))},e.findGuardPattern=function(n,r,i,o,s){var a=n.getSize();r=i?n.getNextUnset(r):n.getNextSet(r);for(var l=0,u=r,d=o.length,f=i,h=r;h<a;h++)if(n.get(h)!==f)s[l]++;else{if(l===d-1){if(Xt.patternMatchVariance(s,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,h]);u+=s[0]+s[1];for(var m=s.slice(2,s.length),g=0;g<l-1;g++)s[g]=m[g];s[l-1]=0,s[l]=0,l--}else l++;s[l]=1,f=!f}throw new Q},e.decodeDigit=function(n,r,i,o){this.recordPattern(n,i,r);for(var s=this.MAX_AVG_VARIANCE,a=-1,l=o.length,u=0;u<l;u++){var d=o[u],f=Xt.patternMatchVariance(r,d,e.MAX_INDIVIDUAL_VARIANCE);f<s&&(s=f,a=u)}if(a>=0)return a;throw new Q},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(Xt),XG=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},QG=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(n,r,i),s=i.toString(),a=t.parseExtensionString(s),l=[new he((r[0]+r[1])/2,e),new he(o,e)],u=new jn(s,null,0,l,ge.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&u.putAllMetadata(a),u},t.prototype.decodeMiddle=function(e,n,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),l=n[1],u=0,d=0;d<5&&l<a;d++){var f=ac.decodeDigit(e,s,l,ac.L_AND_G_PATTERNS);r+=String.fromCharCode(48+f%10);try{for(var h=(i=void 0,XG(s)),m=h.next();!m.done;m=h.next()){var g=m.value;l+=g}}catch(y){i={error:y}}finally{try{m&&!m.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}f>=10&&(u|=1<<4-d),d!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(r.length!==5)throw new Q;var v=this.determineCheckDigit(u);if(t.extensionChecksum(r.toString())!==v)throw new Q;return l},t.extensionChecksum=function(e){for(var n=e.length,r=0,i=n-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=n-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},t.prototype.determineCheckDigit=function(e){for(var n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new Q},t.parseExtensionString=function(e){if(e.length!==5)return null;var n=t.parseExtension5String(e);return n==null?null:new Map([[mn.SUGGESTED_PRICE,n]])},t.parseExtension5String=function(e){var n;switch(e.charAt(0)){case"0":n="£";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),o=r%100,s=o<10?"0"+o:o.toString();return n+i+"."+s},t}(),YG=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ZG=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,n,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(n,r,i),s=i.toString(),a=t.parseExtensionString(s),l=[new he((r[0]+r[1])/2,e),new he(o,e)],u=new jn(s,null,0,l,ge.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&u.putAllMetadata(a),u},t.prototype.decodeMiddle=function(e,n,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),l=n[1],u=0,d=0;d<2&&l<a;d++){var f=ac.decodeDigit(e,s,l,ac.L_AND_G_PATTERNS);r+=String.fromCharCode(48+f%10);try{for(var h=(i=void 0,YG(s)),m=h.next();!m.done;m=h.next()){var g=m.value;l+=g}}catch(v){i={error:v}}finally{try{m&&!m.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}f>=10&&(u|=1<<1-d),d!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(r.length!==2)throw new Q;if(parseInt(r.toString())%4!==u)throw new Q;return l},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[mn.ISSUE_NUMBER,parseInt(e)]])},t}(),JG=function(){function t(){}return t.decodeRow=function(e,n,r){var i=ac.findGuardPattern(n,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new QG;return o.decodeRow(e,n,i)}catch{var s=new ZG;return s.decodeRow(e,n,i)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),eq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ut=function(t){eq(e,t);function e(){var n=t.call(this)||this;n.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(a){return Int32Array.from(a)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],o=new Int32Array(i.length),s=0;s<i.length;s++)o[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=o}return n}return e.prototype.decodeRow=function(n,r,i){var o=e.findStartGuardPattern(r),s=i==null?null:i.get(wt.NEED_RESULT_POINT_CALLBACK);if(s!=null){var a=new he((o[0]+o[1])/2,n);s.foundPossibleResultPoint(a)}var l=this.decodeMiddle(r,o,this.decodeRowStringBuffer),u=l.rowOffset,d=l.resultString;if(s!=null){var f=new he(u,n);s.foundPossibleResultPoint(f)}var h=e.decodeEnd(r,u);if(s!=null){var m=new he((h[0]+h[1])/2,n);s.foundPossibleResultPoint(m)}var g=h[1],v=g+(g-h[0]);if(v>=r.getSize()||!r.isRange(g,v,!1))throw new Q;var y=d.toString();if(y.length<8)throw new oe;if(!e.checkChecksum(y))throw new rn;var x=(o[1]+o[0])/2,w=(h[1]+h[0])/2,E=this.getBarcodeFormat(),A=[new he(x,n),new he(w,n)],O=new jn(y,null,0,A,E,new Date().getTime()),j=0;try{var N=JG.decodeRow(n,r,h[1]);O.putMetadata(mn.UPC_EAN_EXTENSION,N.getText()),O.putAllMetadata(N.getResultMetadata()),O.addResultPoints(N.getResultPoints()),j=N.getText().length}catch{}var T=i==null?null:i.get(wt.ALLOWED_EAN_EXTENSIONS);if(T!=null){var S=!1;for(var b in T)if(j.toString()===b){S=!0;break}if(!S)throw new Q}return E===ge.EAN_13||ge.UPC_A,O},e.checkChecksum=function(n){return e.checkStandardUPCEANChecksum(n)},e.checkStandardUPCEANChecksum=function(n){var r=n.length;if(r===0)return!1;var i=parseInt(n.charAt(r-1),10);return e.getStandardUPCEANChecksum(n.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(n){for(var r=n.length,i=0,o=r-1;o>=0;o-=2){var s=n.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new oe;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=n.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new oe;i+=s}return(1e3-i)%10},e.decodeEnd=function(n,r){return e.findGuardPattern(n,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(ac),tq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cv=function(t){tq(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return e.prototype.decodeMiddle=function(n,r,i){var o,s,a,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=n.getSize(),f=r[1],h=0,m=0;m<6&&f<d;m++){var g=Ut.decodeDigit(n,u,f,Ut.L_AND_G_PATTERNS);i+=String.fromCharCode(48+g%10);try{for(var v=(o=void 0,Sb(u)),y=v.next();!y.done;y=v.next()){var x=y.value;f+=x}}catch(O){o={error:O}}finally{try{y&&!y.done&&(s=v.return)&&s.call(v)}finally{if(o)throw o.error}}g>=10&&(h|=1<<5-m)}i=e.determineFirstDigit(i,h);var w=Ut.findGuardPattern(n,f,!0,Ut.MIDDLE_PATTERN,new Int32Array(Ut.MIDDLE_PATTERN.length).fill(0));f=w[1];for(var m=0;m<6&&f<d;m++){var g=Ut.decodeDigit(n,u,f,Ut.L_PATTERNS);i+=String.fromCharCode(48+g);try{for(var E=(a=void 0,Sb(u)),A=E.next();!A.done;A=E.next()){var x=A.value;f+=x}}catch(N){a={error:N}}finally{try{A&&!A.done&&(l=E.return)&&l.call(E)}finally{if(a)throw a.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return ge.EAN_13},e.determineFirstDigit=function(n,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return n=String.fromCharCode(48+i)+n,n;throw new Q},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Ut),nq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ib=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Nb=function(t){nq(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=Int32Array.from([0,0,0,0]),n}return e.prototype.decodeMiddle=function(n,r,i){var o,s,a,l,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var d=n.getSize(),f=r[1],h=0;h<4&&f<d;h++){var m=Ut.decodeDigit(n,u,f,Ut.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var g=(o=void 0,Ib(u)),v=g.next();!v.done;v=g.next()){var y=v.value;f+=y}}catch(A){o={error:A}}finally{try{v&&!v.done&&(s=g.return)&&s.call(g)}finally{if(o)throw o.error}}}var x=Ut.findGuardPattern(n,f,!0,Ut.MIDDLE_PATTERN,new Int32Array(Ut.MIDDLE_PATTERN.length).fill(0));f=x[1];for(var h=0;h<4&&f<d;h++){var m=Ut.decodeDigit(n,u,f,Ut.L_PATTERNS);i+=String.fromCharCode(48+m);try{for(var w=(a=void 0,Ib(u)),E=w.next();!E.done;E=w.next()){var y=E.value;f+=y}}catch(j){a={error:j}}finally{try{E&&!E.done&&(l=w.return)&&l.call(w)}finally{if(a)throw a.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return ge.EAN_8},e}(Ut),rq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tb=function(t){rq(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.ean13Reader=new Cv,n}return e.prototype.getBarcodeFormat=function(){return ge.UPC_A},e.prototype.decode=function(n,r){return this.maybeReturnResult(this.ean13Reader.decode(n))},e.prototype.decodeRow=function(n,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,r,i))},e.prototype.decodeMiddle=function(n,r,i){return this.ean13Reader.decodeMiddle(n,r,i)},e.prototype.maybeReturnResult=function(n){var r=n.getText();if(r.charAt(0)==="0"){var i=new jn(r.substring(1),null,null,n.getResultPoints(),ge.UPC_A);return n.getResultMetadata()!=null&&i.putAllMetadata(n.getResultMetadata()),i}else throw new Q},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Ut),iq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),oq=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rb=function(t){iq(e,t);function e(){var n=t.call(this)||this;return n.decodeMiddleCounters=new Int32Array(4),n}return e.prototype.decodeMiddle=function(n,r,i){var o,s,a=this.decodeMiddleCounters.map(function(y){return y});a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var l=n.getSize(),u=r[1],d=0,f=0;f<6&&u<l;f++){var h=e.decodeDigit(n,a,u,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+h%10);try{for(var m=(o=void 0,oq(a)),g=m.next();!g.done;g=m.next()){var v=g.value;u+=v}}catch(y){o={error:y}}finally{try{g&&!g.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}h>=10&&(d|=1<<5-f)}return e.determineNumSysAndCheckDigit(new ke(i),d),u},e.prototype.decodeEnd=function(n,r){return e.findGuardPatternWithoutCounters(n,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(n){return Ut.checkChecksum(e.convertUPCEtoUPCA(n))},e.determineNumSysAndCheckDigit=function(n,r){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){n.insert(0,"0"+i),n.append("0"+o);return}throw Q.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return ge.UPC_E},e.convertUPCEtoUPCA=function(n){var r=n.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new ke;i.append(n.charAt(0));var o=r[5];switch(o){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(o),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(o);break}return n.length>=8&&i.append(n.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Ut),sq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fg=function(t){sq(e,t);function e(n){var r=t.call(this)||this,i=n==null?null:n.get(wt.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(ge.EAN_13)>-1&&o.push(new Cv),i.indexOf(ge.UPC_A)>-1&&o.push(new Tb),i.indexOf(ge.EAN_8)>-1&&o.push(new Nb),i.indexOf(ge.UPC_E)>-1&&o.push(new Rb)),o.length===0&&(o.push(new Cv),o.push(new Tb),o.push(new Nb),o.push(new Rb)),r.readers=o,r}return e.prototype.decodeRow=function(n,r,i){var o,s;try{for(var a=Pb(this.readers),l=a.next();!l.done;l=a.next()){var u=l.value;try{var d=u.decodeRow(n,r,i),f=d.getBarcodeFormat()===ge.EAN_13&&d.getText().charAt(0)==="0",h=i==null?null:i.get(wt.POSSIBLE_FORMATS),m=h==null||h.includes(ge.UPC_A);if(f&&m){var g=d.getRawBytes(),v=new jn(d.getText().substring(1),g,g?g.length:null,d.getResultPoints(),ge.UPC_A);return v.putAllMetadata(d.getResultMetadata()),v}return d}catch{}}}catch(y){o={error:y}}finally{try{l&&!l.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}throw new Q},e.prototype.reset=function(){var n,r;try{for(var i=Pb(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;s.reset()}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e}(Xt),aq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),lq=function(t){aq(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},n}return e.prototype.decodeRow=function(n,r,i){var o=this.getValidRowData(r);if(!o)throw new Q;var s=this.codaBarDecodeRow(o.row);if(!s)throw new Q;return new jn(s,null,0,[new he(o.left,n),new he(o.right,n)],ge.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(n){var r=n.toArray(),i=r.indexOf(!0);if(i===-1)return null;var o=r.lastIndexOf(!0);if(o<=i)return null;r=r.slice(i,o+1);for(var s=[],a=r[0],l=1,u=1;u<r.length;u++)r[u]===a?l++:(a=r[u],s.push(l),l=1);return s.push(l),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:o}},e.prototype.codaBarDecodeRow=function(n){for(var r=[],i=Math.ceil(n.reduce(function(l,u){return(l+u)/2},0));n.length>0;){var o=n.splice(0,8).splice(0,7),s=o.map(function(l){return l<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var a=r.join("");return this.validCodaBarString(a)?a:null},e.prototype.validCodaBarString=function(n){var r=/^[A-D].{1,}[A-D]$/;return r.test(n)},e}(Xt),cq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),uq=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$s=function(t){cq(e,t);function e(){var n=t.call(this)||this;return n.decodeFinderCounters=new Int32Array(4),n.dataCharacterCounters=new Int32Array(8),n.oddRoundingErrors=new Array(4),n.evenRoundingErrors=new Array(4),n.oddCounts=new Array(n.dataCharacterCounters.length/2),n.evenCounts=new Array(n.dataCharacterCounters.length/2),n}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(n,r){for(var i=0;i<r.length;i++)if(Xt.patternMatchVariance(n,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new Q},e.count=function(n){return Xe.sum(new Int32Array(n))},e.increment=function(n,r){for(var i=0,o=r[0],s=1;s<n.length;s++)r[s]>o&&(o=r[s],i=s);n[i]++},e.decrement=function(n,r){for(var i=0,o=r[0],s=1;s<n.length;s++)r[s]<o&&(o=r[s],i=s);n[i]--},e.isFinderPattern=function(n){var r,i,o=n[0]+n[1],s=o+n[2]+n[3],a=o/s;if(a>=e.MIN_FINDER_PATTERN_RATIO&&a<=e.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var d=uq(n),f=d.next();!f.done;f=d.next()){var h=f.value;h>u&&(u=h),h<l&&(l=h)}}catch(m){r={error:m}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}return u<10*l}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(Xt),Np=function(){function t(e,n){this.value=e,this.checksumPortion=n}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),IP=function(){function t(e,n,r,i,o){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new he(r,o)),this.resultPoints.push(new he(i,o))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.hashCode=function(){return this.value},t}(),dq=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},cl=function(){function t(){}return t.getRSSvalue=function(e,n,r){var i,o,s=0;try{for(var a=dq(e),l=a.next();!l.done;l=a.next()){var u=l.value;s+=u}}catch(w){i={error:w}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}for(var d=0,f=0,h=e.length,m=0;m<h-1;m++){var g=void 0;for(g=1,f|=1<<m;g<e[m];g++,f&=~(1<<m)){var v=t.combins(s-g-1,h-m-2);if(r&&f===0&&s-g-(h-m-1)>=h-m-1&&(v-=t.combins(s-g-(h-m),h-m-2)),h-m-1>1){for(var y=0,x=s-g-(h-m-2);x>n;x--)y+=t.combins(s-g-x-1,h-m-3);v-=y*(h-1-m)}else s-g>n&&v--;d+=v}s-=g}return d},t.combins=function(e,n){var r,i;e-n>n?(i=n,r=e-n):(i=e-n,r=n);for(var o=1,s=1,a=e;a>r;a--)o*=a,s<=i&&(o/=s,s++);for(;s<=i;)o/=s,s++;return o},t}(),fq=function(){function t(){}return t.buildBitArray=function(e){var n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);for(var r=12*n,i=new on(r),o=0,s=e[0],a=s.getRightChar().getValue(),l=11;l>=0;--l)a&1<<l&&i.set(o),o++;for(var l=1;l<e.length;++l){for(var u=e[l],d=u.getLeftChar().getValue(),f=11;f>=0;--f)d&1<<f&&i.set(o),o++;if(u.getRightChar()!==null)for(var h=u.getRightChar().getValue(),f=11;f>=0;--f)h&1<<f&&i.set(o),o++}return i},t}(),Ls=function(){function t(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),fw=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),hq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),zr=function(t){hq(e,t);function e(n,r){var i=t.call(this,n)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(fw),pq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fs=function(t){pq(e,t);function e(n,r,i){var o=t.call(this,n)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=r,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(fw),mq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),za=function(t){mq(e,t);function e(n,r,i){var o=t.call(this,n)||this;if(r<0||r>10||i<0||i>10)throw new oe;return o.firstDigit=r,o.secondDigit=i,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(fw),Gf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gq=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var n,r,i,o,s,a,l,u;if(!e)return null;if(e.length<2)throw new Q;var d=e.substring(0,2);try{for(var f=Gf(t.TWO_DIGIT_DATA_LENGTH),h=f.next();!h.done;h=f.next()){var m=h.value;if(m[0]===d)return m[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,m[2],e):t.processFixedAI(2,m[1],e)}}catch(j){n={error:j}}finally{try{h&&!h.done&&(r=f.return)&&r.call(f)}finally{if(n)throw n.error}}if(e.length<3)throw new Q;var g=e.substring(0,3);try{for(var v=Gf(t.THREE_DIGIT_DATA_LENGTH),y=v.next();!y.done;y=v.next()){var m=y.value;if(m[0]===g)return m[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,m[2],e):t.processFixedAI(3,m[1],e)}}catch(j){i={error:j}}finally{try{y&&!y.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}try{for(var x=Gf(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),w=x.next();!w.done;w=x.next()){var m=w.value;if(m[0]===g)return m[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,m[2],e):t.processFixedAI(4,m[1],e)}}catch(j){s={error:j}}finally{try{w&&!w.done&&(a=x.return)&&a.call(x)}finally{if(s)throw s.error}}if(e.length<4)throw new Q;var E=e.substring(0,4);try{for(var A=Gf(t.FOUR_DIGIT_DATA_LENGTH),O=A.next();!O.done;O=A.next()){var m=O.value;if(m[0]===E)return m[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,m[2],e):t.processFixedAI(4,m[1],e)}}catch(j){l={error:j}}finally{try{O&&!O.done&&(u=A.return)&&u.call(A)}finally{if(l)throw l.error}}throw new Q},t.processFixedAI=function(e,n,r){if(r.length<e)throw new Q;var i=r.substring(0,e);if(r.length<e+n)throw new Q;var o=r.substring(e,e+n),s=r.substring(e+n),a="("+i+")"+o,l=t.parseFieldsInGeneralPurpose(s);return l==null?a:a+l},t.processVariableAI=function(e,n,r){var i=r.substring(0,e),o;r.length<e+n?o=r.length:o=e+n;var s=r.substring(e,o),a=r.substring(o),l="("+i+")"+s,u=t.parseFieldsInGeneralPurpose(a);return u==null?l:l+u},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),Ah=function(){function t(e){this.buffer=new ke,this.information=e}return t.prototype.decodeAllCodes=function(e,n){var r=n,i=null;do{var o=this.decodeGeneralPurposeField(r,i),s=gq.parseFieldsInGeneralPurpose(o.getNewString());if(s!=null&&e.append(s),o.isRemaining()?i=""+o.getRemainingValue():i=null,r===o.getNewPosition())break;r=o.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var n=this.extractNumericValueFromBitArray(e,4);return n===0?new za(this.information.getSize(),za.FNC1,za.FNC1):new za(this.information.getSize(),n-1,za.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,o=(r-8)%11;return new za(e+7,i,o)},t.prototype.extractNumericValueFromBitArray=function(e,n){return t.extractNumericValueFromBitArray(this.information,e,n)},t.extractNumericValueFromBitArray=function(e,n,r){for(var i=0,o=0;o<r;++o)e.get(n+o)&&(i|=1<<r-o-1);return i},t.prototype.decodeGeneralPurposeField=function(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Fs(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Fs(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,n;do{var r=this.current.getPosition();this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return n.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var n=void 0;return e.isSecondDigitFNC1()?n=new Fs(this.current.getPosition(),this.buffer.toString()):n=new Fs(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Ls(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var n=new Fs(this.current.getPosition(),this.buffer.toString());return new Ls(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ls(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Fs(this.current.getPosition(),this.buffer.toString());return new Ls(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ls(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var n=new Fs(this.current.getPosition(),this.buffer.toString());return new Ls(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ls(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},t.prototype.decodeIsoIec646=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new zr(e+5,zr.FNC1);if(n>=5&&n<15)return new zr(e+5,"0"+(n-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new zr(e+7,""+(r+1));if(r>=90&&r<116)return new zr(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new oe}return new zr(e+8,o)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},t.prototype.decodeAlphanumeric=function(e){var n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new zr(e+5,zr.FNC1);if(n>=5&&n<15)return new zr(e+5,"0"+(n-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new zr(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Hd("Decoding invalid alphanumeric value: "+r)}return new zr(e+6,i)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0},t}(),NP=function(){function t(e){this.information=e,this.generalDecoder=new Ah(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),vq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yr=function(t){vq(e,t);function e(n){return t.call(this,n)||this}return e.prototype.encodeCompressedGtin=function(n,r){n.append("(01)");var i=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(n,r,i){for(var o=0;o<4;++o){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);s/100===0&&n.append("0"),s/10===0&&n.append("0"),n.append(s)}e.appendCheckDigit(n,i)},e.appendCheckDigit=function(n,r){for(var i=0,o=0;o<13;o++){var s=n.charAt(o+r).charCodeAt(0)-48;i+=o&1?s:3*s}i=10-i%10,i===10&&(i=0),n.append(i)},e.GTIN_SIZE=40,e}(NP),yq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xq=function(t){yq(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){var n=new ke;n.append("(01)");var r=n.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return n.append(i),this.encodeCompressedGtinWithoutAI(n,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Yr),wq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_q=function(t){wq(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){var n=new ke;return this.getGeneralDecoder().decodeAllCodes(n,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(NP),Eq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Sh=function(t){Eq(e,t);function e(n){return t.call(this,n)||this}return e.prototype.encodeCompressedWeight=function(n,r,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(n,o);for(var s=this.checkWeight(o),a=1e5,l=0;l<5;++l)s/a===0&&n.append("0"),a/=10;n.append(s)},e}(Yr),Cq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),TP=function(t){Cq(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Sh.GTIN_SIZE+e.WEIGHT_SIZE)throw new Q;var n=new ke;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+Sh.GTIN_SIZE,e.WEIGHT_SIZE),n.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(Sh),bq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Aq=function(t){bq(e,t);function e(n){return t.call(this,n)||this}return e.prototype.addWeightCode=function(n,r){n.append("(3103)")},e.prototype.checkWeight=function(n){return n},e}(TP),Sq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Iq=function(t){Sq(e,t);function e(n){return t.call(this,n)||this}return e.prototype.addWeightCode=function(n,r){r<1e4?n.append("(3202)"):n.append("(3203)")},e.prototype.checkWeight=function(n){return n<1e4?n:n-1e4},e}(TP),Nq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Tq=function(t){Nq(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Yr.GTIN_SIZE)throw new Q;var n=new ke;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Yr.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(392"),n.append(r),n.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Yr.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return n.append(i.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Yr),Rq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pq=function(t){Rq(e,t);function e(n){return t.call(this,n)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Yr.GTIN_SIZE)throw new Q;var n=new ke;this.encodeCompressedGtin(n,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Yr.GTIN_SIZE,e.LAST_DIGIT_SIZE);n.append("(393"),n.append(r),n.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Yr.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&n.append("0"),i/10===0&&n.append("0"),n.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Yr.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return n.append(o.getNewString()),n.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Yr),Dq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_o=function(t){Dq(e,t);function e(n,r,i){var o=t.call(this,n)||this;return o.dateCode=i,o.firstAIdigits=r,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new Q;var n=new ke;return this.encodeCompressedGtin(n,e.HEADER_SIZE),this.encodeCompressedWeight(n,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(n,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),n.toString()},e.prototype.encodeCompressedDate=function(n,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){n.append("("),n.append(this.dateCode),n.append(")");var o=i%32;i/=32;var s=i%12+1;i/=12;var a=i;a/10===0&&n.append("0"),n.append(a),s/10===0&&n.append("0"),n.append(s),o/10===0&&n.append("0"),n.append(o)}},e.prototype.addWeightCode=function(n,r){n.append("("),n.append(this.firstAIdigits),n.append(r/1e5),n.append(")")},e.prototype.checkWeight=function(n){return n%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(Sh);function Oq(t){try{if(t.get(1))return new xq(t);if(!t.get(2))return new _q(t);var e=Ah.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new Aq(t);case 5:return new Iq(t)}var n=Ah.extractNumericValueFromBitArray(t,1,5);switch(n){case 12:return new Tq(t);case 13:return new Pq(t)}var r=Ah.extractNumericValueFromBitArray(t,1,7);switch(r){case 56:return new _o(t,"310","11");case 57:return new _o(t,"320","11");case 58:return new _o(t,"310","13");case 59:return new _o(t,"320","13");case 60:return new _o(t,"310","15");case 61:return new _o(t,"320","15");case 62:return new _o(t,"310","17");case 63:return new _o(t,"320","17")}}catch(i){throw console.log(i),new Hd("unknown decoder: "+t)}}var Db=function(){function t(e,n,r,i){this.leftchar=e,this.rightchar=n,this.finderpattern=r,this.maybeLast=i}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,n){return e instanceof t?t.equalsOrNull(e.leftchar,n.leftchar)&&t.equalsOrNull(e.rightchar,n.rightchar)&&t.equalsOrNull(e.finderpattern,n.finderpattern):!1},t.equalsOrNull=function(e,n){return e===null?n===null:t.equals(e,n)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),kq=function(){function t(e,n,r){this.pairs=e,this.rowNumber=n,this.wasReversed=r}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,n){return e instanceof t?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1},t.prototype.checkEqualitity=function(e,n){if(!(!e||!n)){var r;return e.forEach(function(i,o){n.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},t}(),Mq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Eo=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jq=function(t){Mq(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.pairs=new Array(e.MAX_PAIRS),n.rows=new Array,n.startEnd=[2],n}return e.prototype.decodeRow=function(n,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(n,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(n,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(n,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,n))}catch(a){if(a instanceof Q){if(!this.pairs.length)throw new Q;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(n,!1),o){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new Q},e.prototype.checkRowsBoolean=function(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return n&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(n,r){for(var i,o,s=r;s<this.rows.length;s++){var a=this.rows[s];this.pairs.length=0;try{for(var l=(i=void 0,Eo(n)),u=l.next();!u.done;u=l.next()){var d=u.value;this.pairs.push(d.getPairs())}}catch(h){i={error:h}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}if(this.pairs.push(a.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(n);f.push(a);try{return this.checkRows(f,s+1)}catch(h){console.log(h)}}}throw new Q},e.isValidSequence=function(n){var r,i;try{for(var o=Eo(e.FINDER_PATTERN_SEQUENCES),s=o.next();!s.done;s=o.next()){var a=s.value;if(!(n.length>a.length)){for(var l=!0,u=0;u<n.length;u++)if(n[u].getFinderPattern().getValue()!==a[u]){l=!1;break}if(l)return!0}}}catch(d){r={error:d}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(n,r){for(var i=0,o=!1,s=!1;i<this.rows.length;){var a=this.rows[i];if(a.getRowNumber()>n){s=a.isEquivalent(this.pairs);break}o=a.isEquivalent(this.pairs),i++}s||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new kq(this.pairs,n,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(n,r){var i,o,s,a,l,u;try{for(var d=Eo(r),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.getPairs().length!==n.length){var m=!0;try{for(var g=(s=void 0,Eo(h.getPairs())),v=g.next();!v.done;v=g.next()){var y=v.value,x=!1;try{for(var w=(l=void 0,Eo(n)),E=w.next();!E.done;E=w.next()){var A=E.value;if(Db.equals(y,A)){x=!0;break}}}catch(O){l={error:O}}finally{try{E&&!E.done&&(u=w.return)&&u.call(w)}finally{if(l)throw l.error}}x||(m=!1)}}catch(O){s={error:O}}finally{try{v&&!v.done&&(a=g.return)&&a.call(g)}finally{if(s)throw s.error}}}}}catch(O){i={error:O}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}},e.isPartialRow=function(n,r){var i,o,s,a,l,u;try{for(var d=Eo(r),f=d.next();!f.done;f=d.next()){var h=f.value,m=!0;try{for(var g=(s=void 0,Eo(n)),v=g.next();!v.done;v=g.next()){var y=v.value,x=!1;try{for(var w=(l=void 0,Eo(h.getPairs())),E=w.next();!E.done;E=w.next()){var A=E.value;if(y.equals(A)){x=!0;break}}}catch(O){l={error:O}}finally{try{E&&!E.done&&(u=w.return)&&u.call(w)}finally{if(l)throw l.error}}if(!x){m=!1;break}}}catch(O){s={error:O}}finally{try{v&&!v.done&&(a=g.return)&&a.call(g)}finally{if(s)throw s.error}}if(m)return!0}}catch(O){i={error:O}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(n){var r=fq.buildBitArray(n),i=Oq(r),o=i.parseInformation(),s=n[0].getFinderPattern().getResultPoints(),a=n[n.length-1].getFinderPattern().getResultPoints(),l=[s[0],s[1],a[0],a[1]];return new jn(o,null,null,l,ge.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var n=this.pairs.get(0),r=n.getLeftChar(),i=n.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),s=2,a=1;a<this.pairs.size();++a){var l=this.pairs.get(a);o+=l.getLeftChar().getChecksumPortion(),s++;var u=l.getRightChar();u!=null&&(o+=u.getChecksumPortion(),s++)}o%=211;var d=211*(s-4)+o;return d===r.getValue()},e.getNextSecondBar=function(n,r){var i;return n.get(r)?(i=n.getNextUnset(r),i=n.getNextSet(i)):(i=n.getNextSet(r),i=n.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(n,r,i){var o=r.length%2===0;this.startFromEven&&(o=!o);var s,a=!0,l=-1;do this.findNextPair(n,r,l),s=this.parseFoundFinderPattern(n,i,o),s===null?l=e.getNextSecondBar(n,this.startEnd[0]):a=!1;while(a);var u=this.decodeDataCharacter(n,s,o,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new Q;var d;try{d=this.decodeDataCharacter(n,s,o,!1)}catch(f){d=null,console.log(f)}return new Db(u,d,s,!0)},e.prototype.isEmptyPair=function(n){return n.length===0},e.prototype.findNextPair=function(n,r,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var s=n.getSize(),a;if(i>=0)a=i;else if(this.isEmptyPair(r))a=0;else{var l=r[r.length-1];a=l.getFinderPattern().getStartEnd()[1]}var u=r.length%2!==0;this.startFromEven&&(u=!u);for(var d=!1;a<s&&(d=!n.get(a),!!d);)a++;for(var f=0,h=a,m=a;m<s;m++)if(n.get(m)!==d)o[f]++;else{if(f===3){if(u&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=h,this.startEnd[1]=m;return}u&&e.reverseCounters(o),h+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,f--}else f++;o[f]=1,d=!d}throw new Q},e.reverseCounters=function(n){for(var r=n.length,i=0;i<r/2;++i){var o=n[i];n[i]=n[r-i-1],n[r-i-1]=o}},e.prototype.parseFoundFinderPattern=function(n,r,i){var o,s,a;if(i){for(var l=this.startEnd[0]-1;l>=0&&!n.get(l);)l--;l++,o=this.startEnd[0]-l,s=l,a=this.startEnd[1]}else s=this.startEnd[0],a=n.getNextUnset(this.startEnd[1]+1),o=a-this.startEnd[1];var u=this.getDecodeFinderCounters();ct.arraycopy(u,0,u,1,u.length-1),u[0]=o;var d;try{d=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new IP(d,[s,a],s,a,r)},e.prototype.decodeDataCharacter=function(n,r,i,o){for(var s=this.getDataCharacterCounters(),a=0;a<s.length;a++)s[a]=0;if(o)e.recordPatternInReverse(n,r.getStartEnd()[0],s);else{e.recordPattern(n,r.getStartEnd()[1],s);for(var l=0,u=s.length-1;l<u;l++,u--){var d=s[l];s[l]=s[u],s[u]=d}}var f=17,h=Xe.sum(new Int32Array(s))/f,m=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(h-m)/m>.3)throw new Q;for(var g=this.getOddCounts(),v=this.getEvenCounts(),y=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),l=0;l<s.length;l++){var w=1*s[l]/h,E=w+.5;if(E<1){if(w<.3)throw new Q;E=1}else if(E>8){if(w>8.7)throw new Q;E=8}var A=l/2;l&1?(v[A]=E,x[A]=w-E):(g[A]=E,y[A]=w-E)}this.adjustOddEvenCounts(f);for(var O=4*r.getValue()+(i?0:2)+(o?0:1)-1,j=0,N=0,l=g.length-1;l>=0;l--){if(e.isNotA1left(r,i,o)){var T=e.WEIGHTS[O][2*l];N+=g[l]*T}j+=g[l]}for(var S=0,l=v.length-1;l>=0;l--)if(e.isNotA1left(r,i,o)){var T=e.WEIGHTS[O][2*l+1];S+=v[l]*T}var b=N+S;if(j&1||j>13||j<4)throw new Q;var k=(13-j)/2,R=e.SYMBOL_WIDEST[k],P=9-R,G=cl.getRSSvalue(g,R,!0),K=cl.getRSSvalue(v,P,!1),X=e.EVEN_TOTAL_SUBSET[k],ee=e.GSUM[k],F=G*X+K+ee;return new Np(F,b)},e.isNotA1left=function(n,r,i){return!(n.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(n){var r=Xe.sum(new Int32Array(this.getOddCounts())),i=Xe.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1;r>13?s=!0:r<4&&(o=!0);var a=!1,l=!1;i>13?l=!0:i<4&&(a=!0);var u=r+i-n,d=(r&1)===1,f=(i&1)===0;if(u===1)if(d){if(f)throw new Q;s=!0}else{if(!f)throw new Q;l=!0}else if(u===-1)if(d){if(f)throw new Q;o=!0}else{if(!f)throw new Q;a=!0}else if(u===0){if(d){if(!f)throw new Q;r<i?(o=!0,l=!0):(s=!0,a=!0)}else if(f)throw new Q}else throw new Q;if(o){if(s)throw new Q;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(l)throw new Q;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}($s),Lq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fq=function(t){Lq(e,t);function e(n,r,i){var o=t.call(this,n,r)||this;return o.count=0,o.finderPattern=i,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Np),Bq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hg=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ob=function(t){Bq(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.possibleLeftPairs=[],n.possibleRightPairs=[],n}return e.prototype.decodeRow=function(n,r,i){var o,s,a,l,u=this.decodePair(r,!1,n,i);e.addOrTally(this.possibleLeftPairs,u),r.reverse();var d=this.decodePair(r,!0,n,i);e.addOrTally(this.possibleRightPairs,d),r.reverse();try{for(var f=hg(this.possibleLeftPairs),h=f.next();!h.done;h=f.next()){var m=h.value;if(m.getCount()>1)try{for(var g=(a=void 0,hg(this.possibleRightPairs)),v=g.next();!v.done;v=g.next()){var y=v.value;if(y.getCount()>1&&e.checkChecksum(m,y))return e.constructResult(m,y)}}catch(x){a={error:x}}finally{try{v&&!v.done&&(l=g.return)&&l.call(g)}finally{if(a)throw a.error}}}}catch(x){o={error:x}}finally{try{h&&!h.done&&(s=f.return)&&s.call(f)}finally{if(o)throw o.error}}throw new Q},e.addOrTally=function(n,r){var i,o;if(r!=null){var s=!1;try{for(var a=hg(n),l=a.next();!l.done;l=a.next()){var u=l.value;if(u.getValue()===r.getValue()){u.incrementCount(),s=!0;break}}}catch(d){i={error:d}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}s||n.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(n,r){for(var i=4537077*n.getValue()+r.getValue(),o=new String(i).toString(),s=new ke,a=13-o.length;a>0;a--)s.append("0");s.append(o);for(var l=0,a=0;a<13;a++){var u=s.charAt(a).charCodeAt(0)-48;l+=a&1?u:3*u}l=10-l%10,l===10&&(l=0),s.append(l.toString());var d=n.getFinderPattern().getResultPoints(),f=r.getFinderPattern().getResultPoints();return new jn(s.toString(),null,0,[d[0],d[1],f[0],f[1]],ge.RSS_14,new Date().getTime())},e.checkChecksum=function(n,r){var i=(n.getChecksumPortion()+16*r.getChecksumPortion())%79,o=9*n.getFinderPattern().getValue()+r.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(n,r,i,o){try{var s=this.findFinderPattern(n,r),a=this.parseFoundFinderPattern(n,i,r,s),l=o==null?null:o.get(wt.NEED_RESULT_POINT_CALLBACK);if(l!=null){var u=(s[0]+s[1])/2;r&&(u=n.getSize()-1-u),l.foundPossibleResultPoint(new he(u,i))}var d=this.decodeDataCharacter(n,a,!0),f=this.decodeDataCharacter(n,a,!1);return new Fq(1597*d.getValue()+f.getValue(),d.getChecksumPortion()+4*f.getChecksumPortion(),a)}catch{return null}},e.prototype.decodeDataCharacter=function(n,r,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)Xt.recordPatternInReverse(n,r.getStartEnd()[0],o);else{Xt.recordPattern(n,r.getStartEnd()[1]+1,o);for(var a=0,l=o.length-1;a<l;a++,l--){var u=o[a];o[a]=o[l],o[l]=u}}for(var d=i?16:15,f=Xe.sum(new Int32Array(o))/d,h=this.getOddCounts(),m=this.getEvenCounts(),g=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors(),a=0;a<o.length;a++){var y=o[a]/f,x=Math.floor(y+.5);x<1?x=1:x>8&&(x=8);var w=Math.floor(a/2);a&1?(m[w]=x,v[w]=y-x):(h[w]=x,g[w]=y-x)}this.adjustOddEvenCounts(i,d);for(var E=0,A=0,a=h.length-1;a>=0;a--)A*=9,A+=h[a],E+=h[a];for(var O=0,j=0,a=m.length-1;a>=0;a--)O*=9,O+=m[a],j+=m[a];var N=A+3*O;if(i){if(E&1||E>12||E<4)throw new Q;var T=(12-E)/2,S=e.OUTSIDE_ODD_WIDEST[T],b=9-S,k=cl.getRSSvalue(h,S,!1),R=cl.getRSSvalue(m,b,!0),P=e.OUTSIDE_EVEN_TOTAL_SUBSET[T],G=e.OUTSIDE_GSUM[T];return new Np(k*P+R+G,N)}else{if(j&1||j>10||j<4)throw new Q;var T=(10-j)/2,S=e.INSIDE_ODD_WIDEST[T],b=9-S,k=cl.getRSSvalue(h,S,!0),R=cl.getRSSvalue(m,b,!1),K=e.INSIDE_ODD_TOTAL_SUBSET[T],G=e.INSIDE_GSUM[T];return new Np(R*K+k+G,N)}},e.prototype.findFinderPattern=function(n,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=n.getSize(),s=!1,a=0;a<o&&(s=!n.get(a),r!==s);)a++;for(var l=0,u=a,d=a;d<o;d++)if(n.get(d)!==s)i[l]++;else{if(l===3){if($s.isFinderPattern(i))return[u,d];u+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,s=!s}throw new Q},e.prototype.parseFoundFinderPattern=function(n,r,i,o){for(var s=n.get(o[0]),a=o[0]-1;a>=0&&s!==n.get(a);)a--;a++;var l=o[0]-a,u=this.getDecodeFinderCounters(),d=new Int32Array(u.length);ct.arraycopy(u,0,d,1,u.length-1),d[0]=l;var f=this.parseFinderValue(d,e.FINDER_PATTERNS),h=a,m=o[1];return i&&(h=n.getSize()-1-h,m=n.getSize()-1-m),new IP(f,[a,o[1]],h,m,r)},e.prototype.adjustOddEvenCounts=function(n,r){var i=Xe.sum(new Int32Array(this.getOddCounts())),o=Xe.sum(new Int32Array(this.getEvenCounts())),s=!1,a=!1,l=!1,u=!1;n?(i>12?a=!0:i<4&&(s=!0),o>12?u=!0:o<4&&(l=!0)):(i>11?a=!0:i<5&&(s=!0),o>10?u=!0:o<4&&(l=!0));var d=i+o-r,f=(i&1)===(n?1:0),h=(o&1)===1;if(d===1)if(f){if(h)throw new Q;a=!0}else{if(!h)throw new Q;u=!0}else if(d===-1)if(f){if(h)throw new Q;s=!0}else{if(!h)throw new Q;l=!0}else if(d===0){if(f){if(!h)throw new Q;i<o?(s=!0,u=!0):(a=!0,l=!0)}else if(h)throw new Q}else throw new Q;if(s){if(a)throw new Q;$s.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&$s.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(u)throw new Q;$s.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&$s.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}($s),Vq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hu=function(t){Vq(e,t);function e(n){var r=t.call(this)||this;r.readers=[];var i=n?n.get(wt.POSSIBLE_FORMATS):null,o=n&&n.get(wt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=n&&n.get(wt.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(ge.EAN_13)||i.includes(ge.UPC_A)||i.includes(ge.EAN_8)||i.includes(ge.UPC_E))&&r.readers.push(new fg(n)),i.includes(ge.CODE_39)&&r.readers.push(new Cb(o,s)),i.includes(ge.CODE_93)&&r.readers.push(new bb),i.includes(ge.CODE_128)&&r.readers.push(new Eb),i.includes(ge.ITF)&&r.readers.push(new Ab),i.includes(ge.CODABAR)&&r.readers.push(new lq),i.includes(ge.RSS_14)&&r.readers.push(new Ob),i.includes(ge.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new jq))),r.readers.length===0&&(r.readers.push(new fg(n)),r.readers.push(new Cb),r.readers.push(new bb),r.readers.push(new fg(n)),r.readers.push(new Eb),r.readers.push(new Ab),r.readers.push(new Ob)),r}return e.prototype.decodeRow=function(n,r,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(n,r,i)}catch{}throw new Q},e.prototype.reset=function(){this.readers.forEach(function(n){return n.reset()})},e}(Xt),Uq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){Uq(e,t);function e(n,r){return n===void 0&&(n=500),t.call(this,new hu(r),n,r)||this}return e})(Ic);var kb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},et=function(){function t(e,n,r){this.ecCodewords=e,this.ecBlocks=[n],r&&this.ecBlocks.push(r)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),Qe=function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),$q=function(){function t(e,n,r,i,o,s){var a,l;this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=s;var u=0,d=s.getECCodewords(),f=s.getECBlocks();try{for(var h=kb(f),m=h.next();!m.done;m=h.next()){var g=m.value;u+=g.getCount()*(g.getDataCodewords()+d)}}catch(v){a={error:v}}finally{try{m&&!m.done&&(l=h.return)&&l.call(h)}finally{if(a)throw a.error}}this.totalCodewords=u}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,n){var r,i;if(e&1||n&1)throw new oe;try{for(var o=kb(t.VERSIONS),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.symbolSizeRows===e&&a.symbolSizeColumns===n)return a}}catch(l){r={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}throw new oe},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new et(5,new Qe(1,3))),new t(2,12,12,10,10,new et(7,new Qe(1,5))),new t(3,14,14,12,12,new et(10,new Qe(1,8))),new t(4,16,16,14,14,new et(12,new Qe(1,12))),new t(5,18,18,16,16,new et(14,new Qe(1,18))),new t(6,20,20,18,18,new et(18,new Qe(1,22))),new t(7,22,22,20,20,new et(20,new Qe(1,30))),new t(8,24,24,22,22,new et(24,new Qe(1,36))),new t(9,26,26,24,24,new et(28,new Qe(1,44))),new t(10,32,32,14,14,new et(36,new Qe(1,62))),new t(11,36,36,16,16,new et(42,new Qe(1,86))),new t(12,40,40,18,18,new et(48,new Qe(1,114))),new t(13,44,44,20,20,new et(56,new Qe(1,144))),new t(14,48,48,22,22,new et(68,new Qe(1,174))),new t(15,52,52,24,24,new et(42,new Qe(2,102))),new t(16,64,64,14,14,new et(56,new Qe(2,140))),new t(17,72,72,16,16,new et(36,new Qe(4,92))),new t(18,80,80,18,18,new et(48,new Qe(4,114))),new t(19,88,88,20,20,new et(56,new Qe(4,144))),new t(20,96,96,22,22,new et(68,new Qe(4,174))),new t(21,104,104,24,24,new et(56,new Qe(6,136))),new t(22,120,120,18,18,new et(68,new Qe(6,175))),new t(23,132,132,20,20,new et(62,new Qe(8,163))),new t(24,144,144,22,22,new et(62,new Qe(8,156),new Qe(2,155))),new t(25,8,18,6,16,new et(7,new Qe(1,5))),new t(26,8,32,6,14,new et(11,new Qe(1,10))),new t(27,12,26,10,24,new et(14,new Qe(1,16))),new t(28,12,36,10,16,new et(18,new Qe(1,22))),new t(29,16,36,14,16,new et(24,new Qe(1,32))),new t(30,16,48,14,22,new et(28,new Qe(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),zq=function(){function t(e){var n=e.getHeight();if(n<8||n>144||n&1)throw new oe;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Li(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var n=e.getHeight(),r=e.getWidth();return $q.getVersionForDimensions(n,r)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),n=0,r=4,i=0,o=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),a=!1,l=!1,u=!1,d=!1;do if(r===o&&i===0&&!a)e[n++]=this.readCorner1(o,s)&255,r-=2,i+=2,a=!0;else if(r===o-2&&i===0&&s&3&&!l)e[n++]=this.readCorner2(o,s)&255,r-=2,i+=2,l=!0;else if(r===o+4&&i===2&&!(s&7)&&!u)e[n++]=this.readCorner3(o,s)&255,r-=2,i+=2,u=!0;else if(r===o-2&&i===0&&(s&7)===4&&!d)e[n++]=this.readCorner4(o,s)&255,r-=2,i+=2,d=!0;else{do r<o&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,o,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,o,s)&255),r+=2,i-=2;while(r<o&&i>=0);r+=3,i+=1}while(r<o||i<s);if(n!==this.version.getTotalCodewords())throw new oe;return e},t.prototype.readModule=function(e,n,r,i){return e<0&&(e+=r,n+=4-(r+4&7)),n<0&&(n+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)},t.prototype.readUtah=function(e,n,r,i){var o=0;return this.readModule(e-2,n-2,r,i)&&(o|=1),o<<=1,this.readModule(e-2,n-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,n-2,r,i)&&(o|=1),o<<=1,this.readModule(e-1,n-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,n,r,i)&&(o|=1),o<<=1,this.readModule(e,n-2,r,i)&&(o|=1),o<<=1,this.readModule(e,n-1,r,i)&&(o|=1),o<<=1,this.readModule(e,n,r,i)&&(o|=1),o},t.prototype.readCorner1=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,1,e,n)&&(r|=1),r<<=1,this.readModule(e-1,2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.readCorner2=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-4,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner3=function(e,n){var r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-3,e,n)&&(r|=1),r<<=1,this.readModule(1,n-2,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r},t.prototype.readCorner4=function(e,n){var r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r},t.prototype.extractDataRegion=function(e){var n=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new _e("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),s=n/i|0,a=r/o|0,l=s*i,u=a*o,d=new Li(u,l),f=0;f<s;++f)for(var h=f*i,m=0;m<a;++m)for(var g=m*o,v=0;v<i;++v)for(var y=f*(i+2)+1+v,x=h+v,w=0;w<o;++w){var E=m*(o+2)+1+w;if(e.get(E,y)){var A=g+w;d.set(A,x)}}return d},t}(),Mb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hq=function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n){var r,i,o,s,a=n.getECBlocks(),l=0,u=a.getECBlocks();try{for(var d=Mb(u),f=d.next();!f.done;f=d.next()){var h=f.value;l+=h.getCount()}}catch(G){r={error:G}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}var m=new Array(l),g=0;try{for(var v=Mb(u),y=v.next();!y.done;y=v.next())for(var h=y.value,x=0;x<h.getCount();x++){var w=h.getDataCodewords(),E=a.getECCodewords()+w;m[g++]=new t(w,new Uint8Array(E))}}catch(G){o={error:G}}finally{try{y&&!y.done&&(s=v.return)&&s.call(v)}finally{if(o)throw o.error}}for(var A=m[0].codewords.length,O=A-a.getECCodewords(),j=O-1,N=0,x=0;x<j;x++)for(var T=0;T<g;T++)m[T].codewords[x]=e[N++];for(var S=n.getVersionNumber()===24,b=S?8:g,T=0;T<b;T++)m[T].codewords[O-1]=e[N++];for(var k=m[0].codewords.length,x=O;x<k;x++)for(var T=0;T<g;T++){var R=S?(T+8)%g:T,P=S&&R>7?x-1:x;m[R].codewords[P]=e[N++]}if(N!==e.length)throw new _e;return m},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),RP=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new _e(""+e);var n=0,r=this.bitOffset,i=this.byteOffset,o=this.bytes;if(r>0){var s=8-r,a=e<s?e:s,l=s-a,u=255>>8-a<<l;n=(o[i]&u)>>l,e-=a,r+=a,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)n=n<<8|o[i]&255,i++,e-=8;if(e>0){var l=8-e,u=255>>l<<l;n=n<<e|(o[i]&u)>>l,r+=e}}return this.bitOffset=r,this.byteOffset=i,n},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),Ft;(function(t){t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ft||(Ft={}));var Wq=function(){function t(){}return t.decode=function(e){var n=new RP(e),r=new ke,i=new ke,o=new Array,s=Ft.ASCII_ENCODE;do if(s===Ft.ASCII_ENCODE)s=this.decodeAsciiSegment(n,r,i);else{switch(s){case Ft.C40_ENCODE:this.decodeC40Segment(n,r);break;case Ft.TEXT_ENCODE:this.decodeTextSegment(n,r);break;case Ft.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,r);break;case Ft.EDIFACT_ENCODE:this.decodeEdifactSegment(n,r);break;case Ft.BASE256_ENCODE:this.decodeBase256Segment(n,r,o);break;default:throw new oe}s=Ft.ASCII_ENCODE}while(s!==Ft.PAD_ENCODE&&n.available()>0);return i.length()>0&&r.append(i.toString()),new j0(e,r.toString(),o.length===0?null:o,null)},t.decodeAsciiSegment=function(e,n,r){var i=!1;do{var o=e.readBits(8);if(o===0)throw new oe;if(o<=128)return i&&(o+=128),n.append(String.fromCharCode(o-1)),Ft.ASCII_ENCODE;if(o===129)return Ft.PAD_ENCODE;if(o<=229){var s=o-130;s<10&&n.append("0"),n.append(""+s)}else switch(o){case 230:return Ft.C40_ENCODE;case 231:return Ft.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:n.append("[)>05"),r.insert(0,"");break;case 237:n.append("[)>06"),r.insert(0,"");break;case 238:return Ft.ANSIX12_ENCODE;case 239:return Ft.TEXT_ENCODE;case 240:return Ft.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new oe;break}}while(e.available()>0);return Ft.ASCII_ENCODE},t.decodeC40Segment=function(e,n){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var l=i[a];switch(o){case 0:if(l<3)o=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[l];r?(n.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):n.append(u)}else throw new oe;break;case 1:r?(n.append(String.fromCharCode(l+128)),r=!1):n.append(String.fromCharCode(l)),o=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[l];r?(n.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):n.append(u)}else switch(l){case 27:n.append("");break;case 30:r=!0;break;default:throw new oe}o=0;break;case 3:r?(n.append(String.fromCharCode(l+224)),r=!1):n.append(String.fromCharCode(l+96)),o=0;break;default:throw new oe}}}while(e.available()>0)},t.decodeTextSegment=function(e,n){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var l=i[a];switch(o){case 0:if(l<3)o=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[l];r?(n.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):n.append(u)}else throw new oe;break;case 1:r?(n.append(String.fromCharCode(l+128)),r=!1):n.append(String.fromCharCode(l)),o=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[l];r?(n.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):n.append(u)}else switch(l){case 27:n.append("");break;case 30:r=!0;break;default:throw new oe}o=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[l];r?(n.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):n.append(u),o=0}else throw new oe;break;default:throw new oe}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,n){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var o=0;o<3;o++){var s=r[o];switch(s){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(s<14)n.append(String.fromCharCode(s+44));else if(s<40)n.append(String.fromCharCode(s+51));else throw new oe;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,n,r){var i=(e<<8)+n-1,o=Math.floor(i/1600);r[0]=o,i-=o*1600,o=Math.floor(i/40),r[1]=o,r[2]=i-o*40},t.decodeEdifactSegment=function(e,n){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}i&32||(i|=64),n.append(String.fromCharCode(i))}}while(e.available()>0)},t.decodeBase256Segment=function(e,n,r){var i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++),s;if(o===0?s=e.available()/8|0:o<250?s=o:s=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new oe;for(var a=new Uint8Array(s),l=0;l<s;l++){if(e.available()<8)throw new oe;a[l]=this.unrandomize255State(e.readBits(8),i++)}r.push(a);try{n.append(Mr.decode(a,We.ISO88591))}catch(u){throw new Hd("Platform does not support required encoding: "+u.message)}},t.unrandomize255State=function(e,n){var r=149*n%255+1,i=e-r;return i>=0?i:i+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],t}(),Gq=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qq=function(){function t(){this.rsDecoder=new L0(rr.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var n,r,i=new zq(e),o=i.getVersion(),s=i.readCodewords(),a=Hq.getDataBlocks(s,o),l=0;try{for(var u=Gq(a),d=u.next();!d.done;d=u.next()){var f=d.value;l+=f.getNumDataCodewords()}}catch(E){n={error:E}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}for(var h=new Uint8Array(l),m=a.length,g=0;g<m;g++){var v=a[g],y=v.getCodewords(),x=v.getNumDataCodewords();this.correctErrors(y,x);for(var w=0;w<x;w++)h[w*m+g]=y[w]}return Wq.decode(h)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new rn}for(var i=0;i<n;i++)e[i]=r[i]},t}(),Kq=function(){function t(e){this.image=e,this.rectangleDetector=new _v(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new Q;n=this.shiftToModuleCenter(n);var r=n[0],i=n[1],o=n[2],s=n[3],a=this.transitionsBetween(r,s)+1,l=this.transitionsBetween(o,s)+1;(a&1)===1&&(a+=1),(l&1)===1&&(l+=1),4*a<7*l&&4*l<7*a&&(a=l=Math.max(a,l));var u=t.sampleGrid(this.image,r,i,o,s,a,l);return new uw(u,[r,i,o,s])},t.shiftPoint=function(e,n,r){var i=(n.getX()-e.getX())/(r+1),o=(n.getY()-e.getY())/(r+1);return new he(e.getX()+i,e.getY()+o)},t.moveAway=function(e,n,r){var i=e.getX(),o=e.getY();return i<n?i-=1:i+=1,o<r?o-=1:o+=1,new he(i,o)},t.prototype.detectSolid1=function(e){var n=e[0],r=e[1],i=e[3],o=e[2],s=this.transitionsBetween(n,r),a=this.transitionsBetween(r,i),l=this.transitionsBetween(i,o),u=this.transitionsBetween(o,n),d=s,f=[o,n,r,i];return d>a&&(d=a,f[0]=n,f[1]=r,f[2]=i,f[3]=o),d>l&&(d=l,f[0]=r,f[1]=i,f[2]=o,f[3]=n),d>u&&(f[0]=i,f[1]=o,f[2]=n,f[3]=r),f},t.prototype.detectSolid2=function(e){var n=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(n,o),a=t.shiftPoint(r,i,(s+1)*4),l=t.shiftPoint(i,r,(s+1)*4),u=this.transitionsBetween(a,n),d=this.transitionsBetween(l,o);return u<d?(e[0]=n,e[1]=r,e[2]=i,e[3]=o):(e[0]=r,e[1]=i,e[2]=o,e[3]=n),e},t.prototype.correctTopRight=function(e){var n=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(n,o),a=this.transitionsBetween(r,o),l=t.shiftPoint(n,r,(a+1)*4),u=t.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(l,o),a=this.transitionsBetween(u,o);var d=new he(o.getX()+(i.getX()-r.getX())/(s+1),o.getY()+(i.getY()-r.getY())/(s+1)),f=new he(o.getX()+(n.getX()-r.getX())/(a+1),o.getY()+(n.getY()-r.getY())/(a+1));if(!this.isValid(d))return this.isValid(f)?f:null;if(!this.isValid(f))return d;var h=this.transitionsBetween(l,d)+this.transitionsBetween(u,d),m=this.transitionsBetween(l,f)+this.transitionsBetween(u,f);return h>m?d:f},t.prototype.shiftToModuleCenter=function(e){var n=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(n,o)+1,a=this.transitionsBetween(i,o)+1,l=t.shiftPoint(n,r,a*4),u=t.shiftPoint(i,r,s*4);s=this.transitionsBetween(l,o)+1,a=this.transitionsBetween(u,o)+1,(s&1)===1&&(s+=1),(a&1)===1&&(a+=1);var d=(n.getX()+r.getX()+i.getX()+o.getX())/4,f=(n.getY()+r.getY()+i.getY()+o.getY())/4;n=t.moveAway(n,d,f),r=t.moveAway(r,d,f),i=t.moveAway(i,d,f),o=t.moveAway(o,d,f);var h,m;return l=t.shiftPoint(n,r,a*4),l=t.shiftPoint(l,o,s*4),h=t.shiftPoint(r,n,a*4),h=t.shiftPoint(h,i,s*4),u=t.shiftPoint(i,o,a*4),u=t.shiftPoint(u,r,s*4),m=t.shiftPoint(o,i,a*4),m=t.shiftPoint(m,n,s*4),[l,h,u,m]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,n,r,i,o,s,a){var l=dw.getInstance();return l.sampleGrid(e,s,a,.5,.5,s-.5,.5,s-.5,a-.5,.5,a-.5,n.getX(),n.getY(),o.getX(),o.getY(),i.getX(),i.getY(),r.getX(),r.getY())},t.prototype.transitionsBetween=function(e,n){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(n.getX()),s=Math.trunc(n.getY()),a=Math.abs(s-i)>Math.abs(o-r);if(a){var l=r;r=i,i=l,l=o,o=s,s=l}for(var u=Math.abs(o-r),d=Math.abs(s-i),f=-u/2,h=i<s?1:-1,m=r<o?1:-1,g=0,v=this.image.get(a?i:r,a?r:i),y=r,x=i;y!==o;y+=m){var w=this.image.get(a?x:y,a?y:x);if(w!==v&&(g++,v=w),f+=d,f>0){if(x===s)break;x+=h,f-=u}}return g},t}(),bv=function(){function t(){this.decoder=new qq}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r,i;if(n!=null&&n.has(wt.PURE_BARCODE)){var o=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(o),i=t.NO_POINTS}else{var s=new Kq(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var a=r.getRawBytes(),l=new jn(r.getText(),a,8*a.length,i,ge.DATA_MATRIX,ct.currentTimeMillis()),u=r.getByteSegments();u!=null&&l.putMetadata(mn.BYTE_SEGMENTS,u);var d=r.getECLevel();return d!=null&&l.putMetadata(mn.ERROR_CORRECTION_LEVEL,d),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n==null||r==null)throw new Q;var i=this.moduleSize(n,e),o=n[1],s=r[1],a=n[0],l=r[0],u=(l-a+1)/i,d=(s-o+1)/i;if(u<=0||d<=0)throw new Q;var f=i/2;o+=f,a+=f;for(var h=new Li(u,d),m=0;m<d;m++)for(var g=o+m*i,v=0;v<u;v++)e.get(a+v*i,g)&&h.set(v,m);return h},t.moduleSize=function(e,n){for(var r=n.getWidth(),i=e[0],o=e[1];i<r&&n.get(i,o);)i++;if(i===r)throw new Q;var s=i-e[0];if(s===0)throw new Q;return s},t.NO_POINTS=[],t}(),Xq=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){Xq(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new bv,n)||this}return e})(Ic);var ul;(function(t){t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H"})(ul||(ul={}));var Qq=function(){function t(e,n,r){this.value=e,this.stringValue=n,this.bits=r,t.FOR_BITS.set(r,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new Hr(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new _e;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(ul.L,"L",1),t.M=new t(ul.M,"M",0),t.Q=new t(ul.Q,"Q",3),t.H=new t(ul.H,"H",2),t}(),Yq=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PP=function(){function t(e){this.errorCorrectionLevel=Qq.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,n){return je.bitCount(e^n)},t.decodeFormatInformation=function(e,n){var r=t.doDecodeFormatInformation(e,n);return r!==null?r:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,n^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,n){var r,i,o=Number.MAX_SAFE_INTEGER,s=0;try{for(var a=Yq(t.FORMAT_INFO_DECODE_LOOKUP),l=a.next();!l.done;l=a.next()){var u=l.value,d=u[0];if(d===e||d===n)return new t(u[1]);var f=t.numBitsDiffering(e,d);f<o&&(s=u[1],o=f),e!==n&&(f=t.numBitsDiffering(n,d),f<o&&(s=u[1],o=f))}}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o<=3?new t(s):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),Zq=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},W=function(){function t(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=n}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,n,r=0,i=this.ecBlocks;try{for(var o=Zq(i),s=o.next();!s.done;s=o.next()){var a=s.value;r+=a.getCount()}}catch(l){e={error:l}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),L=function(){function t(e,n){this.count=e,this.dataCodewords=n}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),Jq=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aa=function(){function t(e,n){for(var r,i,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=o;var a=0,l=o[0].getECCodewordsPerBlock(),u=o[0].getECBlocks();try{for(var d=Jq(u),f=d.next();!f.done;f=d.next()){var h=f.value;a+=h.getCount()*(h.getDataCodewords()+l)}}catch(m){r={error:m}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}this.totalCodewords=a}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new oe;try{return this.getVersionForNumber((e-17)/4)}catch{throw new oe}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new _e;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var n=Number.MAX_SAFE_INTEGER,r=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var o=t.VERSION_DECODE_INFO[i];if(o===e)return t.getVersionForNumber(i+7);var s=PP.numBitsDiffering(e,o);s<n&&(r=i+7,n=s)}return n<=3?t.getVersionForNumber(r):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),n=new Li(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var o=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||n.setRegion(this.alignmentPatternCenters[s]-2,o,5,5);return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new W(7,new L(1,19)),new W(10,new L(1,16)),new W(13,new L(1,13)),new W(17,new L(1,9))),new t(2,Int32Array.from([6,18]),new W(10,new L(1,34)),new W(16,new L(1,28)),new W(22,new L(1,22)),new W(28,new L(1,16))),new t(3,Int32Array.from([6,22]),new W(15,new L(1,55)),new W(26,new L(1,44)),new W(18,new L(2,17)),new W(22,new L(2,13))),new t(4,Int32Array.from([6,26]),new W(20,new L(1,80)),new W(18,new L(2,32)),new W(26,new L(2,24)),new W(16,new L(4,9))),new t(5,Int32Array.from([6,30]),new W(26,new L(1,108)),new W(24,new L(2,43)),new W(18,new L(2,15),new L(2,16)),new W(22,new L(2,11),new L(2,12))),new t(6,Int32Array.from([6,34]),new W(18,new L(2,68)),new W(16,new L(4,27)),new W(24,new L(4,19)),new W(28,new L(4,15))),new t(7,Int32Array.from([6,22,38]),new W(20,new L(2,78)),new W(18,new L(4,31)),new W(18,new L(2,14),new L(4,15)),new W(26,new L(4,13),new L(1,14))),new t(8,Int32Array.from([6,24,42]),new W(24,new L(2,97)),new W(22,new L(2,38),new L(2,39)),new W(22,new L(4,18),new L(2,19)),new W(26,new L(4,14),new L(2,15))),new t(9,Int32Array.from([6,26,46]),new W(30,new L(2,116)),new W(22,new L(3,36),new L(2,37)),new W(20,new L(4,16),new L(4,17)),new W(24,new L(4,12),new L(4,13))),new t(10,Int32Array.from([6,28,50]),new W(18,new L(2,68),new L(2,69)),new W(26,new L(4,43),new L(1,44)),new W(24,new L(6,19),new L(2,20)),new W(28,new L(6,15),new L(2,16))),new t(11,Int32Array.from([6,30,54]),new W(20,new L(4,81)),new W(30,new L(1,50),new L(4,51)),new W(28,new L(4,22),new L(4,23)),new W(24,new L(3,12),new L(8,13))),new t(12,Int32Array.from([6,32,58]),new W(24,new L(2,92),new L(2,93)),new W(22,new L(6,36),new L(2,37)),new W(26,new L(4,20),new L(6,21)),new W(28,new L(7,14),new L(4,15))),new t(13,Int32Array.from([6,34,62]),new W(26,new L(4,107)),new W(22,new L(8,37),new L(1,38)),new W(24,new L(8,20),new L(4,21)),new W(22,new L(12,11),new L(4,12))),new t(14,Int32Array.from([6,26,46,66]),new W(30,new L(3,115),new L(1,116)),new W(24,new L(4,40),new L(5,41)),new W(20,new L(11,16),new L(5,17)),new W(24,new L(11,12),new L(5,13))),new t(15,Int32Array.from([6,26,48,70]),new W(22,new L(5,87),new L(1,88)),new W(24,new L(5,41),new L(5,42)),new W(30,new L(5,24),new L(7,25)),new W(24,new L(11,12),new L(7,13))),new t(16,Int32Array.from([6,26,50,74]),new W(24,new L(5,98),new L(1,99)),new W(28,new L(7,45),new L(3,46)),new W(24,new L(15,19),new L(2,20)),new W(30,new L(3,15),new L(13,16))),new t(17,Int32Array.from([6,30,54,78]),new W(28,new L(1,107),new L(5,108)),new W(28,new L(10,46),new L(1,47)),new W(28,new L(1,22),new L(15,23)),new W(28,new L(2,14),new L(17,15))),new t(18,Int32Array.from([6,30,56,82]),new W(30,new L(5,120),new L(1,121)),new W(26,new L(9,43),new L(4,44)),new W(28,new L(17,22),new L(1,23)),new W(28,new L(2,14),new L(19,15))),new t(19,Int32Array.from([6,30,58,86]),new W(28,new L(3,113),new L(4,114)),new W(26,new L(3,44),new L(11,45)),new W(26,new L(17,21),new L(4,22)),new W(26,new L(9,13),new L(16,14))),new t(20,Int32Array.from([6,34,62,90]),new W(28,new L(3,107),new L(5,108)),new W(26,new L(3,41),new L(13,42)),new W(30,new L(15,24),new L(5,25)),new W(28,new L(15,15),new L(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new W(28,new L(4,116),new L(4,117)),new W(26,new L(17,42)),new W(28,new L(17,22),new L(6,23)),new W(30,new L(19,16),new L(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new W(28,new L(2,111),new L(7,112)),new W(28,new L(17,46)),new W(30,new L(7,24),new L(16,25)),new W(24,new L(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new W(30,new L(4,121),new L(5,122)),new W(28,new L(4,47),new L(14,48)),new W(30,new L(11,24),new L(14,25)),new W(30,new L(16,15),new L(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new W(30,new L(6,117),new L(4,118)),new W(28,new L(6,45),new L(14,46)),new W(30,new L(11,24),new L(16,25)),new W(30,new L(30,16),new L(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new W(26,new L(8,106),new L(4,107)),new W(28,new L(8,47),new L(13,48)),new W(30,new L(7,24),new L(22,25)),new W(30,new L(22,15),new L(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new W(28,new L(10,114),new L(2,115)),new W(28,new L(19,46),new L(4,47)),new W(28,new L(28,22),new L(6,23)),new W(30,new L(33,16),new L(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new W(30,new L(8,122),new L(4,123)),new W(28,new L(22,45),new L(3,46)),new W(30,new L(8,23),new L(26,24)),new W(30,new L(12,15),new L(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new W(30,new L(3,117),new L(10,118)),new W(28,new L(3,45),new L(23,46)),new W(30,new L(4,24),new L(31,25)),new W(30,new L(11,15),new L(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new W(30,new L(7,116),new L(7,117)),new W(28,new L(21,45),new L(7,46)),new W(30,new L(1,23),new L(37,24)),new W(30,new L(19,15),new L(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new W(30,new L(5,115),new L(10,116)),new W(28,new L(19,47),new L(10,48)),new W(30,new L(15,24),new L(25,25)),new W(30,new L(23,15),new L(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new W(30,new L(13,115),new L(3,116)),new W(28,new L(2,46),new L(29,47)),new W(30,new L(42,24),new L(1,25)),new W(30,new L(23,15),new L(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new W(30,new L(17,115)),new W(28,new L(10,46),new L(23,47)),new W(30,new L(10,24),new L(35,25)),new W(30,new L(19,15),new L(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new W(30,new L(17,115),new L(1,116)),new W(28,new L(14,46),new L(21,47)),new W(30,new L(29,24),new L(19,25)),new W(30,new L(11,15),new L(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new W(30,new L(13,115),new L(6,116)),new W(28,new L(14,46),new L(23,47)),new W(30,new L(44,24),new L(7,25)),new W(30,new L(59,16),new L(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new W(30,new L(12,121),new L(7,122)),new W(28,new L(12,47),new L(26,48)),new W(30,new L(39,24),new L(14,25)),new W(30,new L(22,15),new L(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new W(30,new L(6,121),new L(14,122)),new W(28,new L(6,47),new L(34,48)),new W(30,new L(46,24),new L(10,25)),new W(30,new L(2,15),new L(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new W(30,new L(17,122),new L(4,123)),new W(28,new L(29,46),new L(14,47)),new W(30,new L(49,24),new L(10,25)),new W(30,new L(24,15),new L(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new W(30,new L(4,122),new L(18,123)),new W(28,new L(13,46),new L(32,47)),new W(30,new L(48,24),new L(14,25)),new W(30,new L(42,15),new L(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new W(30,new L(20,117),new L(4,118)),new W(28,new L(40,47),new L(7,48)),new W(30,new L(43,24),new L(22,25)),new W(30,new L(10,15),new L(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new W(30,new L(19,118),new L(6,119)),new W(28,new L(18,47),new L(31,48)),new W(30,new L(34,24),new L(34,25)),new W(30,new L(20,15),new L(61,16)))],t}(),Jt;(function(t){t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111"})(Jt||(Jt={}));var jb=function(){function t(e,n){this.value=e,this.isMasked=n}return t.prototype.unmaskBitMatrix=function(e,n){for(var r=0;r<n;r++)for(var i=0;i<n;i++)this.isMasked(r,i)&&e.flip(i,r)},t.values=new Map([[Jt.DATA_MASK_000,new t(Jt.DATA_MASK_000,function(e,n){return(e+n&1)===0})],[Jt.DATA_MASK_001,new t(Jt.DATA_MASK_001,function(e,n){return(e&1)===0})],[Jt.DATA_MASK_010,new t(Jt.DATA_MASK_010,function(e,n){return n%3===0})],[Jt.DATA_MASK_011,new t(Jt.DATA_MASK_011,function(e,n){return(e+n)%3===0})],[Jt.DATA_MASK_100,new t(Jt.DATA_MASK_100,function(e,n){return(Math.floor(e/2)+Math.floor(n/3)&1)===0})],[Jt.DATA_MASK_101,new t(Jt.DATA_MASK_101,function(e,n){return e*n%6===0})],[Jt.DATA_MASK_110,new t(Jt.DATA_MASK_110,function(e,n){return e*n%6<3})],[Jt.DATA_MASK_111,new t(Jt.DATA_MASK_111,function(e,n){return(e+n+e*n%3&1)===0})]]),t}(),eK=function(){function t(e){var n=e.getHeight();if(n<21||(n&3)!==1)throw new oe;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,n=0;n<6;n++)e=this.copyBit(n,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),o=0,s=i-7,r=i-1;r>=s;r--)o=this.copyBit(8,r,o);for(var n=i-8;n<i;n++)o=this.copyBit(n,8,o);if(this.parsedFormatInfo=PP.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new oe},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return aa.getVersionForNumber(n);for(var r=0,i=e-11,o=5;o>=0;o--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,o,r);var a=aa.decodeVersionInformation(r);if(a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;r=0;for(var s=5;s>=0;s--)for(var o=e-9;o>=i;o--)r=this.copyBit(s,o,r);if(a=aa.decodeVersionInformation(r),a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new oe},t.prototype.copyBit=function(e,n,r){var i=this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n);return i?r<<1|1:r<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),n=this.readVersion(),r=jb.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var o=n.buildFunctionPattern(),s=!0,a=new Uint8Array(n.getTotalCodewords()),l=0,u=0,d=0,f=i-1;f>0;f-=2){f===6&&f--;for(var h=0;h<i;h++)for(var m=s?i-1-h:h,g=0;g<2;g++)o.get(f-g,m)||(d++,u<<=1,this.bitMatrix.get(f-g,m)&&(u|=1),d===8&&(a[l++]=u,d=0,u=0));s=!s}if(l!==n.getTotalCodewords())throw new oe;return a},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=jb.values.get(this.parsedFormatInfo.getDataMask()),n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,n=0,r=e.getWidth();n<r;n++)for(var i=n+1,o=e.getHeight();i<o;i++)e.get(n,i)!==e.get(i,n)&&(e.flip(i,n),e.flip(n,i))},t}(),Lb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tK=function(){function t(e,n){this.numDataCodewords=e,this.codewords=n}return t.getDataBlocks=function(e,n,r){var i,o,s,a;if(e.length!==n.getTotalCodewords())throw new _e;var l=n.getECBlocksForLevel(r),u=0,d=l.getECBlocks();try{for(var f=Lb(d),h=f.next();!h.done;h=f.next()){var m=h.value;u+=m.getCount()}}catch(P){i={error:P}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}var g=new Array(u),v=0;try{for(var y=Lb(d),x=y.next();!x.done;x=y.next())for(var m=x.value,w=0;w<m.getCount();w++){var E=m.getDataCodewords(),A=l.getECCodewordsPerBlock()+E;g[v++]=new t(E,new Uint8Array(A))}}catch(P){s={error:P}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(s)throw s.error}}for(var O=g[0].codewords.length,j=g.length-1;j>=0;){var N=g[j].codewords.length;if(N===O)break;j--}j++;for(var T=O-l.getECCodewordsPerBlock(),S=0,w=0;w<T;w++)for(var b=0;b<v;b++)g[b].codewords[w]=e[S++];for(var b=j;b<v;b++)g[b].codewords[T]=e[S++];for(var k=g[0].codewords.length,w=T;w<k;w++)for(var b=0;b<v;b++){var R=b<j?w:w+1;g[b].codewords[R]=e[S++]}return g},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Cr;(function(t){t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI"})(Cr||(Cr={}));var pt=function(){function t(e,n,r,i){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=r,this.bits=i,t.FOR_BITS.set(i,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var n=t.FOR_BITS.get(e);if(n===void 0)throw new _e;return n},t.prototype.getCharacterCountBits=function(e){var n=e.getVersionNumber(),r;return n<=9?r=0:n<=26?r=1:r=2,this.characterCountBitsForVersions[r]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;return this.value===n.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(Cr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(Cr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(Cr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(Cr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(Cr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(Cr.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(Cr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(Cr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(Cr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(Cr.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),nK=function(){function t(){}return t.decode=function(e,n,r,i){var o=new RP(e),s=new ke,a=new Array,l=-1,u=-1;try{var d=null,f=!1,h=void 0;do{if(o.available()<4)h=pt.TERMINATOR;else{var m=o.readBits(4);h=pt.forBits(m)}switch(h){case pt.TERMINATOR:break;case pt.FNC1_FIRST_POSITION:case pt.FNC1_SECOND_POSITION:f=!0;break;case pt.STRUCTURED_APPEND:if(o.available()<16)throw new oe;l=o.readBits(8),u=o.readBits(8);break;case pt.ECI:var g=t.parseECIValue(o);if(d=Ht.getCharacterSetECIByValue(g),d===null)throw new oe;break;case pt.HANZI:var v=o.readBits(4),y=o.readBits(h.getCharacterCountBits(n));v===t.GB2312_SUBSET&&t.decodeHanziSegment(o,s,y);break;default:var x=o.readBits(h.getCharacterCountBits(n));switch(h){case pt.NUMERIC:t.decodeNumericSegment(o,s,x);break;case pt.ALPHANUMERIC:t.decodeAlphanumericSegment(o,s,x,f);break;case pt.BYTE:t.decodeByteSegment(o,s,x,d,a,i);break;case pt.KANJI:t.decodeKanjiSegment(o,s,x);break;default:throw new oe}break}}while(h!==pt.TERMINATOR)}catch{throw new oe}return new j0(e,s.toString(),a.length===0?null:a,r===null?null:r.toString(),l,u)},t.decodeHanziSegment=function(e,n,r){if(r*13>e.available())throw new oe;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/96<<8&4294967295|s%96;a<959?a+=41377:a+=42657,i[o]=a>>8&255,i[o+1]=a&255,o+=2,r--}try{n.append(Mr.decode(i,We.GB2312))}catch(l){throw new oe(l)}},t.decodeKanjiSegment=function(e,n,r){if(r*13>e.available())throw new oe;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/192<<8&4294967295|s%192;a<7936?a+=33088:a+=49472,i[o]=a>>8,i[o+1]=a,o+=2,r--}try{n.append(Mr.decode(i,We.SHIFT_JIS))}catch(l){throw new oe(l)}},t.decodeByteSegment=function(e,n,r,i,o,s){if(8*r>e.available())throw new oe;for(var a=new Uint8Array(r),l=0;l<r;l++)a[l]=e.readBits(8);var u;i===null?u=We.guessEncoding(a,s):u=i.getName();try{n.append(Mr.decode(a,u))}catch(d){throw new oe(d)}o.push(a)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new oe;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,n,r,i){for(var o=n.length();r>1;){if(e.available()<11)throw new oe;var s=e.readBits(11);n.append(t.toAlphaNumericChar(Math.floor(s/45))),n.append(t.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new oe;n.append(t.toAlphaNumericChar(e.readBits(6)))}if(i)for(var a=o;a<n.length();a++)n.charAt(a)==="%"&&(a<n.length()-1&&n.charAt(a+1)==="%"?n.deleteCharAt(a+1):n.setCharAt(a,""))},t.decodeNumericSegment=function(e,n,r){for(;r>=3;){if(e.available()<10)throw new oe;var i=e.readBits(10);if(i>=1e3)throw new oe;n.append(t.toAlphaNumericChar(Math.floor(i/100))),n.append(t.toAlphaNumericChar(Math.floor(i/10)%10)),n.append(t.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new oe;var o=e.readBits(7);if(o>=100)throw new oe;n.append(t.toAlphaNumericChar(Math.floor(o/10))),n.append(t.toAlphaNumericChar(o%10))}else if(r===1){if(e.available()<4)throw new oe;var s=e.readBits(4);if(s>=10)throw new oe;n.append(t.toAlphaNumericChar(s))}},t.parseECIValue=function(e){var n=e.readBits(8);if(!(n&128))return n&127;if((n&192)===128){var r=e.readBits(8);return(n&63)<<8&4294967295|r}if((n&224)===192){var i=e.readBits(16);return(n&31)<<16&4294967295|i}throw new oe},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),DP=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var n=e[0];e[0]=e[2],e[2]=n}},t}(),Fb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},rK=function(){function t(){this.rsDecoder=new L0(rr.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,n){return this.decodeBitMatrix(Li.parseFromBooleanArray(e),n)},t.prototype.decodeBitMatrix=function(e,n){var r=new eK(e),i=null;try{return this.decodeBitMatrixParser(r,n)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var o=this.decodeBitMatrixParser(r,n);return o.setOther(new DP(!0)),o}catch(s){throw i!==null?i:s}},t.prototype.decodeBitMatrixParser=function(e,n){var r,i,o,s,a=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),d=tK.getDataBlocks(u,a,l),f=0;try{for(var h=Fb(d),m=h.next();!m.done;m=h.next()){var g=m.value;f+=g.getNumDataCodewords()}}catch(j){r={error:j}}finally{try{m&&!m.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}var v=new Uint8Array(f),y=0;try{for(var x=Fb(d),w=x.next();!w.done;w=x.next()){var g=w.value,E=g.getCodewords(),A=g.getNumDataCodewords();this.correctErrors(E,A);for(var O=0;O<A;O++)v[y++]=E[O]}}catch(j){o={error:j}}finally{try{w&&!w.done&&(s=x.return)&&s.call(x)}finally{if(o)throw o.error}}return nK.decode(v,a,l,n)},t.prototype.correctErrors=function(e,n){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new rn}for(var i=0;i<n;i++)e[i]=r[i]},t}(),iK=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),oK=function(t){iK(e,t);function e(n,r,i){var o=t.call(this,n,r)||this;return o.estimatedModuleSize=i,o}return e.prototype.aboutEquals=function(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){var o=Math.abs(n-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,i){var o=(this.getX()+r)/2,s=(this.getY()+n)/2,a=(this.estimatedModuleSize+i)/2;return new e(o,s,a)},e}(he),sK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},aK=function(){function t(e,n,r,i,o,s,a){this.image=e,this.startX=n,this.startY=r,this.width=i,this.height=o,this.moduleSize=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,n=this.height,r=this.width,i=e+r,o=this.startY+n/2,s=new Int32Array(3),a=this.image,l=0;l<n;l++){var u=o+(l&1?-Math.floor((l+1)/2):Math.floor((l+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var d=e;d<i&&!a.get(d,u);)d++;for(var f=0;d<i;){if(a.get(d,u))if(f===1)s[1]++;else if(f===2){if(this.foundPatternCross(s)){var h=this.handlePossibleCenter(s,u,d);if(h!==null)return h}s[0]=s[2],s[1]=1,s[2]=0,f=1}else s[++f]++;else f===1&&f++,s[f]++;d++}if(this.foundPatternCross(s)){var h=this.handlePossibleCenter(s,u,i);if(h!==null)return h}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Q},t.centerFromEnd=function(e,n){return n-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var n=this.moduleSize,r=n/2,i=0;i<3;i++)if(Math.abs(n-e[i])>=r)return!1;return!0},t.prototype.crossCheckVertical=function(e,n,r,i){var o=this.image,s=o.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;for(var l=e;l>=0&&o.get(n,l)&&a[1]<=r;)a[1]++,l--;if(l<0||a[1]>r)return NaN;for(;l>=0&&!o.get(n,l)&&a[0]<=r;)a[0]++,l--;if(a[0]>r)return NaN;for(l=e+1;l<s&&o.get(n,l)&&a[1]<=r;)a[1]++,l++;if(l===s||a[1]>r)return NaN;for(;l<s&&!o.get(n,l)&&a[2]<=r;)a[2]++,l++;if(a[2]>r)return NaN;var u=a[0]+a[1]+a[2];return 5*Math.abs(u-i)>=2*i?NaN:this.foundPatternCross(a)?t.centerFromEnd(a,l):NaN},t.prototype.handlePossibleCenter=function(e,n,r){var i,o,s=e[0]+e[1]+e[2],a=t.centerFromEnd(e,r),l=this.crossCheckVertical(n,a,2*e[1],s);if(!isNaN(l)){var u=(e[0]+e[1]+e[2])/3;try{for(var d=sK(this.possibleCenters),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.aboutEquals(u,l,a))return h.combineEstimate(l,a,u)}}catch(g){i={error:g}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}var m=new oK(a,l,u);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null},t}(),lK=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),cK=function(t){lK(e,t);function e(n,r,i,o){var s=t.call(this,n,r)||this;return s.estimatedModuleSize=i,s.count=o,o===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(n,r,i){if(Math.abs(r-this.getY())<=n&&Math.abs(i-this.getX())<=n){var o=Math.abs(n-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(n,r,i){var o=this.count+1,s=(this.count*this.getX()+r)/o,a=(this.count*this.getY()+n)/o,l=(this.count*this.estimatedModuleSize+i)/o;return new e(s,a,l,o)},e}(he),uK=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),Jc=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dK=function(){function t(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var n=e!=null&&e.get(wt.TRY_HARDER)!==void 0,r=e!=null&&e.get(wt.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),s=i.getWidth(),a=Math.floor(3*o/(4*t.MAX_MODULES));(a<t.MIN_SKIP||n)&&(a=t.MIN_SKIP);for(var l=!1,u=new Int32Array(5),d=a-1;d<o&&!l;d+=a){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var f=0,h=0;h<s;h++)if(i.get(h,d))(f&1)===1&&f++,u[f]++;else if(f&1)u[f]++;else if(f===4)if(t.foundPatternCross(u)){var m=this.handlePossibleCenter(u,d,h,r);if(m===!0)if(a=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var g=this.findRowSkip();g>u[2]&&(d+=g-u[2]-a,h=s-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;continue}f=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,f=3;else u[++f]++;if(t.foundPatternCross(u)){var m=this.handlePossibleCenter(u,d,s,r);m===!0&&(a=u[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var v=this.selectBestPatterns();return he.orderBestPatterns(v),new uK(v)},t.centerFromEnd=function(e,n){return n-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var n=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;n+=i}if(n<7)return!1;var o=n/7,s=o/2;return Math.abs(o-e[0])<s&&Math.abs(o-e[1])<s&&Math.abs(3*o-e[2])<3*s&&Math.abs(o-e[3])<s&&Math.abs(o-e[4])<s},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,n,r,i){for(var o=this.getCrossCheckStateCount(),s=0,a=this.image;e>=s&&n>=s&&a.get(n-s,e-s);)o[2]++,s++;if(e<s||n<s)return!1;for(;e>=s&&n>=s&&!a.get(n-s,e-s)&&o[1]<=r;)o[1]++,s++;if(e<s||n<s||o[1]>r)return!1;for(;e>=s&&n>=s&&a.get(n-s,e-s)&&o[0]<=r;)o[0]++,s++;if(o[0]>r)return!1;var l=a.getHeight(),u=a.getWidth();for(s=1;e+s<l&&n+s<u&&a.get(n+s,e+s);)o[2]++,s++;if(e+s>=l||n+s>=u)return!1;for(;e+s<l&&n+s<u&&!a.get(n+s,e+s)&&o[3]<r;)o[3]++,s++;if(e+s>=l||n+s>=u||o[3]>=r)return!1;for(;e+s<l&&n+s<u&&a.get(n+s,e+s)&&o[4]<r;)o[4]++,s++;if(o[4]>=r)return!1;var d=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(d-i)<2*i&&t.foundPatternCross(o)},t.prototype.crossCheckVertical=function(e,n,r,i){for(var o=this.image,s=o.getHeight(),a=this.getCrossCheckStateCount(),l=e;l>=0&&o.get(n,l);)a[2]++,l--;if(l<0)return NaN;for(;l>=0&&!o.get(n,l)&&a[1]<=r;)a[1]++,l--;if(l<0||a[1]>r)return NaN;for(;l>=0&&o.get(n,l)&&a[0]<=r;)a[0]++,l--;if(a[0]>r)return NaN;for(l=e+1;l<s&&o.get(n,l);)a[2]++,l++;if(l===s)return NaN;for(;l<s&&!o.get(n,l)&&a[3]<r;)a[3]++,l++;if(l===s||a[3]>=r)return NaN;for(;l<s&&o.get(n,l)&&a[4]<r;)a[4]++,l++;if(a[4]>=r)return NaN;var u=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(u-i)>=2*i?NaN:t.foundPatternCross(a)?t.centerFromEnd(a,l):NaN},t.prototype.crossCheckHorizontal=function(e,n,r,i){for(var o=this.image,s=o.getWidth(),a=this.getCrossCheckStateCount(),l=e;l>=0&&o.get(l,n);)a[2]++,l--;if(l<0)return NaN;for(;l>=0&&!o.get(l,n)&&a[1]<=r;)a[1]++,l--;if(l<0||a[1]>r)return NaN;for(;l>=0&&o.get(l,n)&&a[0]<=r;)a[0]++,l--;if(a[0]>r)return NaN;for(l=e+1;l<s&&o.get(l,n);)a[2]++,l++;if(l===s)return NaN;for(;l<s&&!o.get(l,n)&&a[3]<r;)a[3]++,l++;if(l===s||a[3]>=r)return NaN;for(;l<s&&o.get(l,n)&&a[4]<r;)a[4]++,l++;if(a[4]>=r)return NaN;var u=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(u-i)>=i?NaN:t.foundPatternCross(a)?t.centerFromEnd(a,l):NaN},t.prototype.handlePossibleCenter=function(e,n,r,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],s=t.centerFromEnd(e,r),a=this.crossCheckVertical(n,Math.floor(s),e[2],o);if(!isNaN(a)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(a),e[2],o),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(a),Math.floor(s),e[2],o)))){for(var l=o/7,u=!1,d=this.possibleCenters,f=0,h=d.length;f<h;f++){var m=d[f];if(m.aboutEquals(l,a,s)){d[f]=m.combineEstimate(a,s,l),u=!0;break}}if(!u){var g=new cK(s,a,l);d.push(g),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(g)}return!0}return!1},t.prototype.findRowSkip=function(){var e,n,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var o=Jc(this.possibleCenters),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.getCount()>=t.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2)}}catch(l){e={error:l}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,n,r,i,o=0,s=0,a=this.possibleCenters.length;try{for(var l=Jc(this.possibleCenters),u=l.next();!u.done;u=l.next()){var d=u.value;d.getCount()>=t.CENTER_QUORUM&&(o++,s+=d.getEstimatedModuleSize())}}catch(v){e={error:v}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}if(o<3)return!1;var f=s/a,h=0;try{for(var m=Jc(this.possibleCenters),g=m.next();!g.done;g=m.next()){var d=g.value;h+=Math.abs(d.getEstimatedModuleSize()-f)}}catch(v){r={error:v}}finally{try{g&&!g.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}return h<=.05*s},t.prototype.selectBestPatterns=function(){var e,n,r,i,o=this.possibleCenters.length;if(o<3)throw new Q;var s=this.possibleCenters,a;if(o>3){var l=0,u=0;try{for(var d=Jc(this.possibleCenters),f=d.next();!f.done;f=d.next()){var h=f.value,m=h.getEstimatedModuleSize();l+=m,u+=m*m}}catch(O){e={error:O}}finally{try{f&&!f.done&&(n=d.return)&&n.call(d)}finally{if(e)throw e.error}}a=l/o;var g=Math.sqrt(u/o-a*a);s.sort(function(O,j){var N=Math.abs(j.getEstimatedModuleSize()-a),T=Math.abs(O.getEstimatedModuleSize()-a);return N<T?-1:N>T?1:0});for(var v=Math.max(.2*a,g),y=0;y<s.length&&s.length>3;y++){var x=s[y];Math.abs(x.getEstimatedModuleSize()-a)>v&&(s.splice(y,1),y--)}}if(s.length>3){var l=0;try{for(var w=Jc(s),E=w.next();!E.done;E=w.next()){var A=E.value;l+=A.getEstimatedModuleSize()}}catch(j){r={error:j}}finally{try{E&&!E.done&&(i=w.return)&&i.call(w)}finally{if(r)throw r.error}}a=l/s.length,s.sort(function(j,N){if(N.getCount()===j.getCount()){var T=Math.abs(N.getEstimatedModuleSize()-a),S=Math.abs(j.getEstimatedModuleSize()-a);return T<S?1:T>S?-1:0}else return N.getCount()-j.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),fK=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(wt.NEED_RESULT_POINT_CALLBACK);var n=new dK(this.image,this.resultPointCallback),r=n.find(e);return this.processFinderPatternInfo(r)},t.prototype.processFinderPatternInfo=function(e){var n=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(n,r,i);if(o<1)throw new Q("No pattern found in proccess finder.");var s=t.computeDimension(n,r,i,o),a=aa.getProvisionalVersionForDimension(s),l=a.getDimensionForVersion()-7,u=null;if(a.getAlignmentPatternCenters().length>0)for(var d=r.getX()-n.getX()+i.getX(),f=r.getY()-n.getY()+i.getY(),h=1-3/l,m=Math.floor(n.getX()+h*(d-n.getX())),g=Math.floor(n.getY()+h*(f-n.getY())),v=4;v<=16;v<<=1)try{u=this.findAlignmentInRegion(o,m,g,v);break}catch(E){if(!(E instanceof Q))throw E}var y=t.createTransform(n,r,i,u,s),x=t.sampleGrid(this.image,y,s),w;return u===null?w=[i,n,r]:w=[i,n,r,u],new uw(x,w)},t.createTransform=function(e,n,r,i,o){var s=o-3.5,a,l,u,d;return i!==null?(a=i.getX(),l=i.getY(),u=s-3,d=u):(a=n.getX()-e.getX()+r.getX(),l=n.getY()-e.getY()+r.getY(),u=s,d=s),SP.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,u,d,3.5,s,e.getX(),e.getY(),n.getX(),n.getY(),a,l,r.getX(),r.getY())},t.sampleGrid=function(e,n,r){var i=dw.getInstance();return i.sampleGridWithTransform(e,r,r,n)},t.computeDimension=function(e,n,r,i){var o=Xe.round(he.distance(e,n)/i),s=Xe.round(he.distance(e,r)/i),a=Math.floor((o+s)/2)+7;switch(a&3){case 0:a++;break;case 2:a--;break;case 3:throw new Q("Dimensions could be not found.")}return a},t.prototype.calculateModuleSize=function(e,n,r){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,r))/2},t.prototype.calculateModuleSizeOneWay=function(e,n){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,n,r,i){var o=this.sizeOfBlackWhiteBlackRun(e,n,r,i),s=1,a=e-(r-e);a<0?(s=e/(e-a),a=0):a>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);var l=Math.floor(n-(i-n)*s);return s=1,l<0?(s=n/(n-l),l=0):l>=this.image.getHeight()&&(s=(this.image.getHeight()-1-n)/(l-n),l=this.image.getHeight()-1),a=Math.floor(e+(a-e)*s),o+=this.sizeOfBlackWhiteBlackRun(e,n,a,l),o-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,n,r,i){var o=Math.abs(i-n)>Math.abs(r-e);if(o){var s=e;e=n,n=s,s=r,r=i,i=s}for(var a=Math.abs(r-e),l=Math.abs(i-n),u=-a/2,d=e<r?1:-1,f=n<i?1:-1,h=0,m=r+d,g=e,v=n;g!==m;g+=d){var y=o?v:g,x=o?g:v;if(h===1===this.image.get(y,x)){if(h===2)return Xe.distance(g,v,e,n);h++}if(u+=l,u>0){if(v===i)break;v+=f,u-=a}}return h===2?Xe.distance(r+d,i,e,n):NaN},t.prototype.findAlignmentInRegion=function(e,n,r,i){var o=Math.floor(i*e),s=Math.max(0,n-o),a=Math.min(this.image.getWidth()-1,n+o);if(a-s<e*3)throw new Q("Alignment top exceeds estimated module size.");var l=Math.max(0,r-o),u=Math.min(this.image.getHeight()-1,r+o);if(u-l<e*3)throw new Q("Alignment bottom exceeds estimated module size.");var d=new aK(this.image,s,l,a-s,u-l,e,this.resultPointCallback);return d.find()},t}(),Av=function(){function t(){this.decoder=new rK}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,n){var r,i;if(n!=null&&n.get(wt.PURE_BARCODE)!==void 0){var o=t.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,n),i=t.NO_POINTS}else{var s=new fK(e.getBlackMatrix()).detect(n);r=this.decoder.decodeBitMatrix(s.getBits(),n),i=s.getPoints()}r.getOther()instanceof DP&&r.getOther().applyMirroredCorrection(i);var a=new jn(r.getText(),r.getRawBytes(),void 0,i,ge.QR_CODE,void 0),l=r.getByteSegments();l!==null&&a.putMetadata(mn.BYTE_SEGMENTS,l);var u=r.getECLevel();return u!==null&&a.putMetadata(mn.ERROR_CORRECTION_LEVEL,u),r.hasStructuredAppend()&&(a.putMetadata(mn.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),a.putMetadata(mn.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),a},t.prototype.reset=function(){},t.extractPureBits=function(e){var n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n===null||r===null)throw new Q;var i=this.moduleSize(n,e),o=n[1],s=r[1],a=n[0],l=r[0];if(a>=l||o>=s)throw new Q;if(s-o!==l-a&&(l=a+(s-o),l>=e.getWidth()))throw new Q;var u=Math.round((l-a+1)/i),d=Math.round((s-o+1)/i);if(u<=0||d<=0)throw new Q;if(d!==u)throw new Q;var f=Math.floor(i/2);o+=f,a+=f;var h=a+Math.floor((u-1)*i)-l;if(h>0){if(h>f)throw new Q;a-=h}var m=o+Math.floor((d-1)*i)-s;if(m>0){if(m>f)throw new Q;o-=m}for(var g=new Li(u,d),v=0;v<d;v++)for(var y=o+Math.floor(v*i),x=0;x<u;x++)e.get(a+Math.floor(x*i),y)&&g.set(x,v);return g},t.moduleSize=function(e,n){for(var r=n.getHeight(),i=n.getWidth(),o=e[0],s=e[1],a=!0,l=0;o<i&&s<r;){if(a!==n.get(o,s)){if(++l===5)break;a=!a}o++,s++}if(o===i||s===r)throw new Q;return(o-e[0])/7},t.NO_POINTS=new Array,t}(),hK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ge=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return Xe.sum(e)},t.toIntArray=function(e){var n,r;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var s=hK(e),a=s.next();!a.done;a=s.next()){var l=a.value;i[o++]=l}}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},t.getCodeword=function(e){var n=Gt.binarySearch(t.SYMBOL_TABLE,e&262143);return n<0?-1:(t.CODEWORD_TABLE[n]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),pK=function(){function t(e,n){this.bits=e,this.points=n}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),mK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gK=function(){function t(){}return t.detectMultiple=function(e,n,r){var i=e.getBlackMatrix(),o=t.detect(r,i);return o.length||(i=i.clone(),i.rotate180(),o=t.detect(r,i)),new pK(i,o)},t.detect=function(e,n){for(var r,i,o=new Array,s=0,a=0,l=!1;s<n.getHeight();){var u=t.findVertices(n,s,a);if(u[0]==null&&u[3]==null){if(!l)break;l=!1,a=0;try{for(var d=(r=void 0,mK(o)),f=d.next();!f.done;f=d.next()){var h=f.value;h[1]!=null&&(s=Math.trunc(Math.max(s,h[1].getY()))),h[3]!=null&&(s=Math.max(s,Math.trunc(h[3].getY())))}}catch(m){r={error:m}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}s+=t.ROW_STEP;continue}if(l=!0,o.push(u),!e)break;u[2]!=null?(a=Math.trunc(u[2].getX()),s=Math.trunc(u[2].getY())):(a=Math.trunc(u[4].getX()),s=Math.trunc(u[4].getY()))}return o},t.findVertices=function(e,n,r){var i=e.getHeight(),o=e.getWidth(),s=new Array(8);return t.copyToResult(s,t.findRowsWithPattern(e,i,o,n,r,t.START_PATTERN),t.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),n=Math.trunc(s[4].getY())),t.copyToResult(s,t.findRowsWithPattern(e,i,o,n,r,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),s},t.copyToResult=function(e,n,r){for(var i=0;i<r.length;i++)e[r[i]]=n[i]},t.findRowsWithPattern=function(e,n,r,i,o,s){for(var a=new Array(4),l=!1,u=new Int32Array(s.length);i<n;i+=t.ROW_STEP){var d=t.findGuardPattern(e,o,i,r,!1,s,u);if(d!=null){for(;i>0;){var f=t.findGuardPattern(e,o,--i,r,!1,s,u);if(f!=null)d=f;else{i++;break}}a[0]=new he(d[0],i),a[1]=new he(d[1],i),l=!0;break}}var h=i+1;if(l){for(var m=0,f=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);h<n;h++){var d=t.findGuardPattern(e,f[0],h,r,!1,s,u);if(d!=null&&Math.abs(f[0]-d[0])<t.MAX_PATTERN_DRIFT&&Math.abs(f[1]-d[1])<t.MAX_PATTERN_DRIFT)f=d,m=0;else{if(m>t.SKIPPED_ROW_COUNT_MAX)break;m++}}h-=m+1,a[2]=new he(f[0],h),a[3]=new he(f[1],h)}return h-i<t.BARCODE_MIN_HEIGHT&&Gt.fill(a,null),a},t.findGuardPattern=function(e,n,r,i,o,s,a){Gt.fillWithin(a,0,a.length,0);for(var l=n,u=0;e.get(l,r)&&l>0&&u++<t.MAX_PIXEL_DRIFT;)l--;for(var d=l,f=0,h=s.length,m=o;d<i;d++){var g=e.get(d,r);if(g!==m)a[f]++;else{if(f===h-1){if(t.patternMatchVariance(a,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([l,d]);l+=a[0]+a[1],ct.arraycopy(a,2,a,0,f-1),a[f-1]=0,a[f]=0,f--}else f++;a[f]=1,m=!m}}return f===h-1&&t.patternMatchVariance(a,s,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([l,d-1]):null},t.patternMatchVariance=function(e,n,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=n[a];if(o<s)return 1/0;var l=o/s;r*=l;for(var u=0,d=0;d<i;d++){var f=e[d],h=n[d]*l,m=f>h?f-h:h-f;if(m>r)return 1/0;u+=m}return u/o},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),vK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xs=function(){function t(e,n){if(n.length===0)throw new _e;this.field=e;var r=n.length;if(r>1&&n[0]===0){for(var i=1;i<r&&n[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),ct.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var n,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=vK(this.coefficients),s=o.next();!s.done;s=o.next()){var a=s.value;i=this.field.add(i,a)}}catch(f){n={error:f}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}for(var l=this.coefficients[0],u=this.coefficients.length,d=1;d<u;d++)l=this.field.add(this.field.multiply(e,l),this.coefficients[d]);return l},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new _e("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var n=this.coefficients,r=e.coefficients;if(n.length>r.length){var i=n;n=r,r=i}var o=new Int32Array(r.length),s=r.length-n.length;ct.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=this.field.add(n[a-s],r[a]);return new t(this.field,o)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new _e("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new _e("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var n=this.coefficients,r=n.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=0;a<r;a++)for(var l=n[a],u=0;u<o;u++)s[a+u]=this.field.add(s[a+u],this.field.multiply(l,i[u]));return new t(this.field,s)},t.prototype.negative=function(){for(var e=this.coefficients.length,n=new Int32Array(e),r=0;r<e;r++)n[r]=this.field.subtract(0,this.coefficients[r]);return new t(this.field,n)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var n=this.coefficients.length,r=new Int32Array(n),i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,r)},t.prototype.multiplyByMonomial=function(e,n){if(e<0)throw new _e;if(n===0)return new t(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],n);return new t(this.field,i)},t.prototype.toString=function(){for(var e=new ke,n=this.getDegree();n>=0;n--){var r=this.getCoefficient(n);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(n===0||r!==1)&&e.append(r),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()},t}(),yK=function(){function t(){}return t.prototype.add=function(e,n){return(e+n)%this.modulus},t.prototype.subtract=function(e,n){return(this.modulus+e-n)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new _e;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new AP;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),xK=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wK=function(t){xK(e,t);function e(n,r){var i=t.call(this)||this;i.modulus=n,i.expTable=new Int32Array(n),i.logTable=new Int32Array(n);for(var o=1,s=0;s<n;s++)i.expTable[s]=o,o=o*r%n;for(var s=0;s<n-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new Xs(i,new Int32Array([0])),i.one=new Xs(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(n,r){if(n<0)throw new _e;if(r===0)return this.zero;var i=new Int32Array(n+1);return i[0]=r,new Xs(this,i)},e.PDF417_GF=new e(Ge.NUMBER_OF_CODEWORDS,3),e}(yK),_K=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},EK=function(){function t(){this.field=wK.PDF417_GF}return t.prototype.decode=function(e,n,r){for(var i,o,s=new Xs(this.field,e),a=new Int32Array(n),l=!1,u=n;u>0;u--){var d=s.evaluateAt(this.field.exp(u));a[n-u]=d,d!==0&&(l=!0)}if(!l)return 0;var f=this.field.getOne();if(r!=null)try{for(var h=_K(r),m=h.next();!m.done;m=h.next()){var g=m.value,v=this.field.exp(e.length-1-g),y=new Xs(this.field,new Int32Array([this.field.subtract(0,v),1]));f=f.multiply(y)}}catch(T){i={error:T}}finally{try{m&&!m.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}for(var x=new Xs(this.field,a),w=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),x,n),E=w[0],A=w[1],O=this.findErrorLocations(E),j=this.findErrorMagnitudes(A,E,O),u=0;u<O.length;u++){var N=e.length-1-this.field.log(O[u]);if(N<0)throw rn.getChecksumInstance();e[N]=this.field.subtract(e[N],j[u])}return O.length},t.prototype.runEuclideanAlgorithm=function(e,n,r){if(e.getDegree()<n.getDegree()){var i=e;e=n,n=i}for(var o=e,s=n,a=this.field.getZero(),l=this.field.getOne();s.getDegree()>=Math.round(r/2);){var u=o,d=a;if(o=s,a=l,o.isZero())throw rn.getChecksumInstance();s=u;for(var f=this.field.getZero(),h=o.getCoefficient(o.getDegree()),m=this.field.inverse(h);s.getDegree()>=o.getDegree()&&!s.isZero();){var g=s.getDegree()-o.getDegree(),v=this.field.multiply(s.getCoefficient(s.getDegree()),m);f=f.add(this.field.buildMonomial(g,v)),s=s.subtract(o.multiplyByMonomial(g,v))}l=f.multiply(a).subtract(d).negative()}var y=l.getCoefficient(0);if(y===0)throw rn.getChecksumInstance();var x=this.field.inverse(y),w=l.multiply(x),E=s.multiply(x);return[w,E]},t.prototype.findErrorLocations=function(e){for(var n=e.getDegree(),r=new Int32Array(n),i=0,o=1;o<this.field.getSize()&&i<n;o++)e.evaluateAt(o)===0&&(r[i]=this.field.inverse(o),i++);if(i!==n)throw rn.getChecksumInstance();return r},t.prototype.findErrorMagnitudes=function(e,n,r){for(var i=n.getDegree(),o=new Int32Array(i),s=1;s<=i;s++)o[i-s]=this.field.multiply(s,n.getCoefficient(s));for(var a=new Xs(this.field,o),l=r.length,u=new Int32Array(l),s=0;s<l;s++){var d=this.field.inverse(r[s]),f=this.field.subtract(0,e.evaluateAt(d)),h=this.field.inverse(a.evaluateAt(d));u[s]=this.field.multiply(f,h)}return u},t}(),Sv=function(){function t(e,n,r,i,o){e instanceof t?this.constructor_2(e):this.constructor_1(e,n,r,i,o)}return t.prototype.constructor_1=function(e,n,r,i,o){var s=n==null||r==null,a=i==null||o==null;if(s&&a)throw new Q;s?(n=new he(0,i.getY()),r=new he(0,o.getY())):a&&(i=new he(e.getWidth()-1,n.getY()),o=new he(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=n,this.bottomLeft=r,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(n.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(n.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,n){return e==null?n:n==null?e:new t(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)},t.prototype.addMissingRows=function(e,n,r){var i=this.topLeft,o=this.bottomLeft,s=this.topRight,a=this.bottomRight;if(e>0){var l=r?this.topLeft:this.topRight,u=Math.trunc(l.getY()-e);u<0&&(u=0);var d=new he(l.getX(),u);r?i=d:s=d}if(n>0){var f=r?this.bottomLeft:this.bottomRight,h=Math.trunc(f.getY()+n);h>=this.image.getHeight()&&(h=this.image.getHeight()-1);var m=new he(f.getX(),h);r?o=m:a=m}return new t(this.image,i,o,s,a)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),CK=function(){function t(e,n,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=n,this.rowCountLowerPart=r,this.rowCount=n+r}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),hw=function(){function t(){this.buffer=""}return t.form=function(e,n){var r=-1;function i(s,a,l,u,d,f){if(s==="%%")return"%";if(n[++r]!==void 0){s=u?parseInt(u.substr(1)):void 0;var h=d?parseInt(d.substr(1)):void 0,m;switch(f){case"s":m=n[r];break;case"c":m=n[r][0];break;case"f":m=parseFloat(n[r]).toFixed(s);break;case"p":m=parseFloat(n[r]).toPrecision(s);break;case"e":m=parseFloat(n[r]).toExponential(s);break;case"x":m=parseInt(n[r]).toString(h||16);break;case"d":m=parseFloat(parseInt(n[r],h||10).toPrecision(s)).toFixed(0);break}m=typeof m=="object"?JSON.stringify(m):(+m).toString(h);for(var g=parseInt(l),v=l&&l[0]+""=="0"?"0":" ";m.length<g;)m=a!==void 0?m+v:v+m;return m}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},t.prototype.format=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this.buffer+=t.form(e,n)},t.prototype.toString=function(){return this.buffer},t}(),bK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OP=function(){function t(e){this.boundingBox=new Sv(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var n=this.getCodeword(e);if(n!=null)return n;for(var r=1;r<t.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(n=this.codewords[i],n!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(n=this.codewords[i],n!=null)))return n}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,n,r=new hw,i=0;try{for(var o=bK(this.codewords),s=o.next();!s.done;s=o.next()){var a=s.value;if(a==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}}catch(l){e={error:l}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),AK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SK=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},pu=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)},t.prototype.getValue=function(){var e,n,r=-1,i=new Array,o=function(f,h){var m={getKey:function(){return f},getValue:function(){return h}};m.getValue()>r?(r=m.getValue(),i=[],i.push(m.getKey())):m.getValue()===r&&i.push(m.getKey())};try{for(var s=AK(this.values.entries()),a=s.next();!a.done;a=s.next()){var l=SK(a.value,2),u=l[0],d=l[1];o(u,d)}}catch(f){e={error:f}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return Ge.toIntArray(i)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),IK=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),pg=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Bb=function(t){IK(e,t);function e(n,r){var i=t.call(this,n)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var n,r;try{for(var i=pg(this.getCodewords()),o=i.next();!o.done;o=i.next()){var s=o.value;s!=null&&s.setRowNumberAsRowIndicatorColumn()}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(n){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,n);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),l=this.imageRowToCodewordIndex(Math.trunc(s.getY())),u=-1,d=1,f=0,h=a;h<l;h++)if(r[h]!=null){var m=r[h],g=m.getRowNumber()-u;if(g===0)f++;else if(g===1)d=Math.max(d,f),f=1,u=m.getRowNumber();else if(g<0||m.getRowNumber()>=n.getRowCount()||g>h)r[h]=null;else{var v=void 0;d>2?v=(d-2)*g:v=g;for(var y=v>=h,x=1;x<=v&&!y;x++)y=r[h-x]!=null;y?r[h]=null:(u=m.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var n,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var s=pg(this.getCodewords()),a=s.next();!a.done;a=s.next()){var l=a.value;if(l!=null){var u=l.getRowNumber();if(u>=o.length)continue;o[u]++}}}catch(d){n={error:d}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(n){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),l=this.getCodewords(),u=-1,d=s;d<a;d++)if(l[d]!=null){var f=l[d];f.setRowNumberAsRowIndicatorColumn();var h=f.getRowNumber()-u;h===0||(h===1?u=f.getRowNumber():f.getRowNumber()>=n.getRowCount()?l[d]=null:u=f.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var n,r,i=this.getCodewords(),o=new pu,s=new pu,a=new pu,l=new pu;try{for(var u=pg(i),d=u.next();!d.done;d=u.next()){var f=d.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var h=f.getValue()%30,m=f.getRowNumber();switch(this._isLeft||(m+=2),m%3){case 0:s.setValue(h*3+1);break;case 1:l.setValue(h/3),a.setValue(h%3);break;case 2:o.setValue(h+1);break}}}}catch(v){n={error:v}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}if(o.getValue().length===0||s.getValue().length===0||a.getValue().length===0||l.getValue().length===0||o.getValue()[0]<1||s.getValue()[0]+a.getValue()[0]<Ge.MIN_ROWS_IN_BARCODE||s.getValue()[0]+a.getValue()[0]>Ge.MAX_ROWS_IN_BARCODE)return null;var g=new CK(o.getValue()[0],s.getValue()[0],a.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(i,g),g},e.prototype.removeIncorrectCodewords=function(n,r){for(var i=0;i<n.length;i++){var o=n[i];if(n[i]!=null){var s=o.getValue()%30,a=o.getRowNumber();if(a>r.getRowCount()){n[i]=null;continue}switch(this._isLeft||(a+=2),a%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(n[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(n[i]=null);break;case 2:s+1!==r.getColumnCount()&&(n[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(OP),NK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},TK=function(){function t(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Ge.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var n=1;n<this.barcodeColumnCount+1;n++)for(var r=this.detectionResultColumns[n].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(n,i,r));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&n[r]!=null&&e[r].getRowNumber()===n[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[r];o!=null&&(o.setRowNumber(e[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var i=n[r].getRowNumber(),o=0,s=this.barcodeColumnCount+1;s>0&&o<this.ADJUST_ROW_NUMBER_SKIP;s--){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=t.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,n=this.detectionResultColumns[0].getCodewords(),r=0;r<n.length;r++)if(n[r]!=null)for(var i=n[r].getRowNumber(),o=0,s=1;s<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;s++){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=t.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,n,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),n=0):++n),n},t.prototype.adjustRowNumbers=function(e,n,r){var i,o;if(this.detectionResultColumns[e-1]!=null){var s=r[n],a=this.detectionResultColumns[e-1].getCodewords(),l=a;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=a[n],u[3]=l[n],n>0&&(u[0]=r[n-1],u[4]=a[n-1],u[5]=l[n-1]),n>1&&(u[8]=r[n-2],u[10]=a[n-2],u[11]=l[n-2]),n<r.length-1&&(u[1]=r[n+1],u[6]=a[n+1],u[7]=l[n+1]),n<r.length-2&&(u[9]=r[n+2],u[12]=a[n+2],u[13]=l[n+2]);try{for(var d=NK(u),f=d.next();!f.done;f=d.next()){var h=f.value;if(t.adjustRowNumber(s,h))return}}catch(m){i={error:m}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}}},t.adjustRowNumber=function(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,n){this.detectionResultColumns[e]=n},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var n=new hw,r=0;r<e.getCodewords().length;r++){n.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){n.format("    |   ");continue}var o=this.detectionResultColumns[i].getCodewords()[r];if(o==null){n.format("    |   ");continue}n.format(" %3d|%3d",o.getRowNumber(),o.getValue())}n.format("%n")}return n.toString()},t}(),RK=function(){function t(e,n,r,i){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),PK=function(){function t(){}return t.initialize=function(){for(var e=0;e<Ge.SYMBOL_TABLE.length;e++)for(var n=Ge.SYMBOL_TABLE[e],r=n&1,i=0;i<Ge.BARS_IN_MODULE;i++){for(var o=0;(n&1)===r;)o+=1,n>>=1;r=n&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(Ge.BARS_IN_MODULE)),t.RATIOS_TABLE[e][Ge.BARS_IN_MODULE-i-1]=Math.fround(o/Ge.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var n=t.getDecodedCodewordValue(t.sampleBitCounts(e));return n!==-1?n:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var n=Xe.sum(e),r=new Int32Array(Ge.BARS_IN_MODULE),i=0,o=0,s=0;s<Ge.MODULES_IN_CODEWORD;s++){var a=n/(2*Ge.MODULES_IN_CODEWORD)+s*n/Ge.MODULES_IN_CODEWORD;o+e[i]<=a&&(o+=e[i],i++),r[i]++}return r},t.getDecodedCodewordValue=function(e){var n=t.getBitValue(e);return Ge.getCodeword(n)===-1?-1:n},t.getBitValue=function(e){for(var n=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)n=n<<1|(r%2===0?1:0);return Math.trunc(n)},t.getClosestDecodedValue=function(e){var n=Xe.sum(e),r=new Array(Ge.BARS_IN_MODULE);if(n>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/n);var o=wv.MAX_VALUE,s=-1;this.bSymbolTableReady||t.initialize();for(var a=0;a<t.RATIOS_TABLE.length;a++){for(var l=0,u=t.RATIOS_TABLE[a],d=0;d<Ge.BARS_IN_MODULE;d++){var f=Math.fround(u[d]-r[d]);if(l+=Math.fround(f*f),l>=o)break}l<o&&(o=l,s=Ge.SYMBOL_TABLE[a])}return s},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(Ge.SYMBOL_TABLE.length).map(function(e){return new Array(Ge.BARS_IN_MODULE)}),t}(),DK=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),Vb=function(){function t(){}return t.parseLong=function(e,n){return n===void 0&&(n=void 0),parseInt(e,n)},t}(),OK=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),kK=function(t){OK(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(cr),MK=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,n,r){if(e==null)throw new kK;if(n<0||n>e.length||r<0||n+r>e.length||n+r<0)throw new lw;if(r===0)return;for(var i=0;i<r;i++)this.write(e[n+i])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),jK=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),LK=function(t){jK(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(cr),FK=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),BK=function(t){FK(e,t);function e(n){n===void 0&&(n=32);var r=t.call(this)||this;if(r.count=0,n<0)throw new _e("Negative initial size: "+n);return r.buf=new Uint8Array(n),r}return e.prototype.ensureCapacity=function(n){n-this.buf.length>0&&this.grow(n)},e.prototype.grow=function(n){var r=this.buf.length,i=r<<1;if(i-n<0&&(i=n),i<0){if(n<0)throw new LK;i=je.MAX_VALUE}this.buf=Gt.copyOfUint8Array(this.buf,i)},e.prototype.write=function(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1},e.prototype.writeBytesOffset=function(n,r,i){if(r<0||r>n.length||i<0||r+i-n.length>0)throw new lw;this.ensureCapacity(this.count+i),ct.arraycopy(n,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(n){n.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Gt.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(n){return new String(this.buf).toString()},e.prototype.toString_number=function(n){return new String(this.buf).toString()},e.prototype.close=function(){},e}(MK),st;(function(t){t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(st||(st={}));function kP(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var qf;function Io(t){if(typeof qf>"u"&&(qf=kP()),qf===null)throw new Error("BigInt is not supported!");return qf(t)}function VK(){var t=[];t[0]=Io(1);var e=Io(900);t[1]=e;for(var n=2;n<16;n++)t[n]=t[n-1]*e;return t}var UK=function(){function t(){}return t.decode=function(e,n){var r=new ke(""),i=Ht.ISO8859_1;r.enableDecoding(i);for(var o=1,s=e[o++],a=new DK;o<e[0];){switch(s){case t.TEXT_COMPACTION_MODE_LATCH:o=t.textCompaction(e,o,r);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:o=t.byteCompaction(s,e,i,o,r);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:o=t.numericCompaction(e,o,r);break;case t.ECI_CHARSET:Ht.getCharacterSetECIByValue(e[o++]);break;case t.ECI_GENERAL_PURPOSE:o+=2;break;case t.ECI_USER_DEFINED:o++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=t.decodeMacroBlock(e,o,a);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new oe;default:o--,o=t.textCompaction(e,o,r);break}if(o<e.length)s=e[o++];else throw oe.getFormatInstance()}if(r.length()===0)throw oe.getFormatInstance();var l=new j0(null,r.toString(),null,n);return l.setOther(a),l},t.decodeMacroBlock=function(e,n,r){if(n+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw oe.getFormatInstance();for(var i=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<t.NUMBER_OF_SEQUENCE_CODEWORDS;o++,n++)i[o]=e[n];r.setSegmentIndex(je.parseInt(t.decodeBase900toBase10(i,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new ke;n=t.textCompaction(e,n,s),r.setFileId(s.toString());var a=-1;for(e[n]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(a=n+1);n<e[0];)switch(e[n]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new ke;n=t.textCompaction(e,n+1,l),r.setFileName(l.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new ke;n=t.textCompaction(e,n+1,u),r.setSender(u.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var d=new ke;n=t.textCompaction(e,n+1,d),r.setAddressee(d.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new ke;n=t.numericCompaction(e,n+1,f),r.setSegmentCount(je.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var h=new ke;n=t.numericCompaction(e,n+1,h),r.setTimestamp(Vb.parseLong(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var m=new ke;n=t.numericCompaction(e,n+1,m),r.setChecksum(je.parseInt(m.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var g=new ke;n=t.numericCompaction(e,n+1,g),r.setFileSize(Vb.parseLong(g.toString()));break;default:throw oe.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:n++,r.setLastSegment(!0);break;default:throw oe.getFormatInstance()}if(a!==-1){var v=n-a;r.isLastSegment()&&v--,r.setOptionalData(Gt.copyOfRange(e,a,a+v))}return n},t.textCompaction=function(e,n,r){for(var i=new Int32Array((e[0]-n)*2),o=new Int32Array((e[0]-n)*2),s=0,a=!1;n<e[0]&&!a;){var l=e[n++];if(l<t.TEXT_COMPACTION_MODE_LATCH)i[s]=l/30,i[s+1]=l%30,s+=2;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:i[s++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,a=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[n++],o[s]=l,s++;break}}return t.decodeTextCompaction(i,o,s,r),n},t.decodeTextCompaction=function(e,n,r,i){for(var o=st.ALPHA,s=st.ALPHA,a=0;a<r;){var l=e[a],u="";switch(o){case st.ALPHA:if(l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case t.LL:o=st.LOWER;break;case t.ML:o=st.MIXED;break;case t.PS:s=o,o=st.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=st.ALPHA;break}break;case st.LOWER:if(l<26)u=String.fromCharCode(97+l);else switch(l){case 26:u=" ";break;case t.AS:s=o,o=st.ALPHA_SHIFT;break;case t.ML:o=st.MIXED;break;case t.PS:s=o,o=st.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=st.ALPHA;break}break;case st.MIXED:if(l<t.PL)u=t.MIXED_CHARS[l];else switch(l){case t.PL:o=st.PUNCT;break;case 26:u=" ";break;case t.LL:o=st.LOWER;break;case t.AL:o=st.ALPHA;break;case t.PS:s=o,o=st.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=st.ALPHA;break}break;case st.PUNCT:if(l<t.PAL)u=t.PUNCT_CHARS[l];else switch(l){case t.PAL:o=st.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=st.ALPHA;break}break;case st.ALPHA_SHIFT:if(o=s,l<26)u=String.fromCharCode(65+l);else switch(l){case 26:u=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:o=st.ALPHA;break}break;case st.PUNCT_SHIFT:if(o=s,l<t.PAL)u=t.PUNCT_CHARS[l];else switch(l){case t.PAL:o=st.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[a]);break;case t.TEXT_COMPACTION_MODE_LATCH:o=st.ALPHA;break}break}u!==""&&i.append(u),a++}},t.byteCompaction=function(e,n,r,i,o){var s=new BK,a=0,l=0,u=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var d=new Int32Array(6),f=n[i++];i<n[0]&&!u;)switch(d[a++]=f,l=900*l+f,f=n[i++],f){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,u=!0;break;default:if(a%5===0&&a>0){for(var h=0;h<6;++h)s.write(Number(Io(l)>>Io(8*(5-h))));l=0,a=0}break}i===n[0]&&f<t.TEXT_COMPACTION_MODE_LATCH&&(d[a++]=f);for(var m=0;m<a;m++)s.write(d[m]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;i<n[0]&&!u;){var g=n[i++];if(g<t.TEXT_COMPACTION_MODE_LATCH)a++,l=900*l+g;else switch(g){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,u=!0;break}if(a%5===0&&a>0){for(var h=0;h<6;++h)s.write(Number(Io(l)>>Io(8*(5-h))));l=0,a=0}}break}return o.append(Mr.decode(s.toByteArray(),r)),i},t.numericCompaction=function(e,n,r){for(var i=0,o=!1,s=new Int32Array(t.MAX_NUMERIC_CODEWORDS);n<e[0]&&!o;){var a=e[n++];if(n===e[0]&&(o=!0),a<t.TEXT_COMPACTION_MODE_LATCH)s[i]=a,i++;else switch(a){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:n--,o=!0;break}(i%t.MAX_NUMERIC_CODEWORDS===0||a===t.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(r.append(t.decodeBase900toBase10(s,i)),i=0)}return n},t.decodeBase900toBase10=function(e,n){for(var r=Io(0),i=0;i<n;i++)r+=t.EXP900[n-i-1]*Io(e[i]);var o=r.toString();if(o.charAt(0)!=="1")throw new oe;return o.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=kP()?VK():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),eu=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$K=function(){function t(){}return t.decode=function(e,n,r,i,o,s,a){for(var l=new Sv(e,n,r,i,o),u=null,d=null,f,h=!0;;h=!1){if(n!=null&&(u=t.getRowIndicatorColumn(e,l,n,!0,s,a)),i!=null&&(d=t.getRowIndicatorColumn(e,l,i,!1,s,a)),f=t.merge(u,d),f==null)throw Q.getNotFoundInstance();var m=f.getBoundingBox();if(h&&m!=null&&(m.getMinY()<l.getMinY()||m.getMaxY()>l.getMaxY()))l=m;else break}f.setBoundingBox(l);var g=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,u),f.setDetectionResultColumn(g,d);for(var v=u!=null,y=1;y<=g;y++){var x=v?y:g-y;if(f.getDetectionResultColumn(x)===void 0){var w=void 0;x===0||x===g?w=new Bb(l,x===0):w=new OP(l),f.setDetectionResultColumn(x,w);for(var E=-1,A=E,O=l.getMinY();O<=l.getMaxY();O++){if(E=t.getStartColumn(f,x,O,v),E<0||E>l.getMaxX()){if(A===-1)continue;E=A}var j=t.detectCodeword(e,l.getMinX(),l.getMaxX(),v,E,O,s,a);j!=null&&(w.setCodeword(O,j),A=E,s=Math.min(s,j.getWidth()),a=Math.max(a,j.getWidth()))}}}return t.createDecoderResult(f)},t.merge=function(e,n){if(e==null&&n==null)return null;var r=t.getBarcodeMetadata(e,n);if(r==null)return null;var i=Sv.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(n));return new TK(r,i)},t.adjustBoundingBox=function(e){var n,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=t.getMax(i),s=0;try{for(var a=eu(i),l=a.next();!l.done;l=a.next()){var u=l.value;if(s+=o-u,u>0)break}}catch(m){n={error:m}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}for(var d=e.getCodewords(),f=0;s>0&&d[f]==null;f++)s--;for(var h=0,f=i.length-1;f>=0&&(h+=o-i[f],!(i[f]>0));f--);for(var f=d.length-1;h>0&&d[f]==null;f--)h--;return e.getBoundingBox().addMissingRows(s,h,e.isLeft())},t.getMax=function(e){var n,r,i=-1;try{for(var o=eu(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=Math.max(i,a)}}catch(l){n={error:l}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},t.getBarcodeMetadata=function(e,n){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();var i;return n==null||(i=n.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},t.getRowIndicatorColumn=function(e,n,r,i,o,s){for(var a=new Bb(n,i),l=0;l<2;l++)for(var u=l===0?1:-1,d=Math.trunc(Math.trunc(r.getX())),f=Math.trunc(Math.trunc(r.getY()));f<=n.getMaxY()&&f>=n.getMinY();f+=u){var h=t.detectCodeword(e,0,e.getWidth(),i,d,f,o,s);h!=null&&(a.setCodeword(f,h),i?d=h.getStartX():d=h.getEndX())}return a},t.adjustCodewordCount=function(e,n){var r=n[0][1],i=r.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>Ge.MAX_CODEWORDS_IN_BARCODE)throw Q.getNotFoundInstance();r.setValue(o)}else i[0]!==o&&r.setValue(o)},t.createDecoderResult=function(e){var n=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,n);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],s=new Array,a=0;a<e.getBarcodeRowCount();a++)for(var l=0;l<e.getBarcodeColumnCount();l++){var u=n[a][l+1].getValue(),d=a*e.getBarcodeColumnCount()+l;u.length===0?r.push(d):u.length===1?i[d]=u[0]:(s.push(d),o.push(u))}for(var f=new Array(o.length),h=0;h<f.length;h++)f[h]=o[h];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Ge.toIntArray(r),Ge.toIntArray(s),f)},t.createDecoderResultFromAmbiguousValues=function(e,n,r,i,o){for(var s=new Int32Array(i.length),a=100;a-- >0;){for(var l=0;l<s.length;l++)n[i[l]]=o[l][s[l]];try{return t.decodeCodewords(n,e,r)}catch(d){var u=d instanceof rn;if(!u)throw d}if(s.length===0)throw rn.getChecksumInstance();for(var l=0;l<s.length;l++)if(s[l]<o[l].length-1){s[l]++;break}else if(s[l]=0,l===s.length-1)throw rn.getChecksumInstance()}throw rn.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var n,r,i,o,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),a=0;a<s.length;a++)for(var l=0;l<s[a].length;l++)s[a][l]=new pu;var u=0;try{for(var d=eu(e.getDetectionResultColumns()),f=d.next();!f.done;f=d.next()){var h=f.value;if(h!=null)try{for(var m=(i=void 0,eu(h.getCodewords())),g=m.next();!g.done;g=m.next()){var v=g.value;if(v!=null){var y=v.getRowNumber();if(y>=0){if(y>=s.length)continue;s[y][u].setValue(v.getValue())}}}}catch(x){i={error:x}}finally{try{g&&!g.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}u++}}catch(x){n={error:x}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}return s},t.isValidBarcodeColumn=function(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,n,r,i){var o,s,a=i?1:-1,l=null;if(t.isValidBarcodeColumn(e,n-a)&&(l=e.getDetectionResultColumn(n-a).getCodeword(r)),l!=null)return i?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(n).getCodewordNearby(r),l!=null)return i?l.getStartX():l.getEndX();if(t.isValidBarcodeColumn(e,n-a)&&(l=e.getDetectionResultColumn(n-a).getCodewordNearby(r)),l!=null)return i?l.getEndX():l.getStartX();for(var u=0;t.isValidBarcodeColumn(e,n-a);){n-=a;try{for(var d=(o=void 0,eu(e.getDetectionResultColumn(n).getCodewords())),f=d.next();!f.done;f=d.next()){var h=f.value;if(h!=null)return(i?h.getEndX():h.getStartX())+a*u*(h.getEndX()-h.getStartX())}}catch(m){o={error:m}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(o)throw o.error}}u++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,n,r,i,o,s,a,l){o=t.adjustCodewordStartColumn(e,n,r,i,o,s);var u=t.getModuleBitCount(e,n,r,i,o,s);if(u==null)return null;var d,f=Xe.sum(u);if(i)d=o+f;else{for(var h=0;h<u.length/2;h++){var m=u[h];u[h]=u[u.length-1-h],u[u.length-1-h]=m}d=o,o=d-f}if(!t.checkCodewordSkew(f,a,l))return null;var g=PK.getDecodedValue(u),v=Ge.getCodeword(g);return v===-1?null:new RK(o,d,t.getCodewordBucketNumber(g),v)},t.getModuleBitCount=function(e,n,r,i,o,s){for(var a=o,l=new Int32Array(8),u=0,d=i?1:-1,f=i;(i?a<r:a>=n)&&u<l.length;)e.get(a,s)===f?(l[u]++,a+=d):(u++,f=!f);return u===l.length||a===(i?r:n)&&u===l.length-1?l:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,n,r,i,o,s){for(var a=o,l=i?-1:1,u=0;u<2;u++){for(;(i?a>=n:a<r)&&i===e.get(a,s);){if(Math.abs(o-a)>t.CODEWORD_SKEW_SIZE)return o;a+=l}l=-l,i=!i}return a},t.checkCodewordSkew=function(e,n,r){return n-t.CODEWORD_SKEW_SIZE<=e&&e<=r+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,n,r){if(e.length===0)throw oe.getFormatInstance();var i=1<<n+1,o=t.correctErrors(e,r,i);t.verifyCodewordCount(e,i);var s=UK.decode(e,""+n);return s.setErrorsCorrected(o),s.setErasures(r.length),s},t.correctErrors=function(e,n,r){if(n!=null&&n.length>r/2+t.MAX_ERRORS||r<0||r>t.MAX_EC_CODEWORDS)throw rn.getChecksumInstance();return t.errorCorrection.decode(e,r,n)},t.verifyCodewordCount=function(e,n){if(e.length<4)throw oe.getFormatInstance();var r=e[0];if(r>e.length)throw oe.getFormatInstance();if(r===0)if(n<e.length)e[0]=e.length-n;else throw oe.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var n=new Int32Array(8),r=0,i=n.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)n[i]++,e>>=1;return n},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var n=new hw,r=0;r<e.length;r++){n.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var o=e[r][i];o.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}n.format("%n")}return n.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new EK,t}(),zK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Iv=function(){function t(){}return t.prototype.decode=function(e,n){n===void 0&&(n=null);var r=t.decode(e,n,!1);if(r==null||r.length===0||r[0]==null)throw Q.getNotFoundInstance();return r[0]},t.prototype.decodeMultiple=function(e,n){n===void 0&&(n=null);try{return t.decode(e,n,!0)}catch(r){throw r instanceof oe||r instanceof rn?Q.getNotFoundInstance():r}},t.decode=function(e,n,r){var i,o,s=new Array,a=gK.detectMultiple(e,n,r);try{for(var l=zK(a.getPoints()),u=l.next();!u.done;u=l.next()){var d=u.value,f=$K.decode(a.getBits(),d[4],d[5],d[6],d[7],t.getMinCodewordWidth(d),t.getMaxCodewordWidth(d)),h=new jn(f.getText(),f.getRawBytes(),void 0,d,ge.PDF_417);h.putMetadata(mn.ERROR_CORRECTION_LEVEL,f.getECLevel());var m=f.getOther();m!=null&&h.putMetadata(mn.PDF417_EXTRA_METADATA,m),s.push(h)}}catch(g){i={error:g}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return s.map(function(g){return g})},t.getMaxWidth=function(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMinWidth=function(e,n){return e==null||n==null?je.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*Ge.MODULES_IN_CODEWORD/Ge.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*Ge.MODULES_IN_CODEWORD/Ge.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*Ge.MODULES_IN_CODEWORD/Ge.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*Ge.MODULES_IN_CODEWORD/Ge.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),HK=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ub=function(t){HK(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(cr),$b=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},WK=function(){function t(){}return t.prototype.decode=function(e,n){return this.setHints(n),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var n=e!=null&&e.get(wt.TRY_HARDER)!==void 0,r=e==null?null:e.get(wt.POSSIBLE_FORMATS),i=new Array;if(r!=null){var o=r.some(function(s){return s===ge.UPC_A||s===ge.UPC_E||s===ge.EAN_13||s===ge.EAN_8||s===ge.CODABAR||s===ge.CODE_39||s===ge.CODE_93||s===ge.CODE_128||s===ge.ITF||s===ge.RSS_14||s===ge.RSS_EXPANDED});o&&!n&&i.push(new hu(e)),r.includes(ge.QR_CODE)&&i.push(new Av),r.includes(ge.DATA_MATRIX)&&i.push(new bv),r.includes(ge.AZTEC)&&i.push(new Ev),r.includes(ge.PDF_417)&&i.push(new Iv),o&&n&&i.push(new hu(e))}i.length===0&&(n||i.push(new hu(e)),i.push(new Av),i.push(new bv),i.push(new Ev),i.push(new Iv),n&&i.push(new hu(e))),this.readers=i},t.prototype.reset=function(){var e,n;if(this.readers!==null)try{for(var r=$b(this.readers),i=r.next();!i.done;i=r.next()){var o=i.value;o.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var n,r;if(this.readers===null)throw new Ub("No readers where selected, nothing can be read.");try{for(var i=$b(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;try{return s.decode(e,this.hints)}catch(a){if(a instanceof Ub)continue}}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}throw new Q("No MultiFormat Readers were able to detect the code.")},t}(),GK=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qK=function(t){GK(e,t);function e(n,r){n===void 0&&(n=null),r===void 0&&(r=500);var i=this,o=new WK;return o.setHints(n),i=t.call(this,o,r)||this,i}return e.prototype.decodeBitmap=function(n){return this.reader.decodeWithState(n)},e}(Ic),KK=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){KK(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new Iv,n)||this}return e})(Ic);var XK=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){XK(e,t);function e(n){return n===void 0&&(n=500),t.call(this,new Av,n)||this}return e})(Ic);var Nv;(function(t){t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40"})(Nv||(Nv={}));const Kf=Nv;var MP=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new cs(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var n=this.cachedGenerators;if(e>=n.length)for(var r=n[n.length-1],i=this.field,o=n.length;o<=e;o++){var s=r.multiply(new cs(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));n.push(s),r=s}return n[e]},t.prototype.encode=function(e,n){if(n===0)throw new _e("No error correction bytes");var r=e.length-n;if(r<=0)throw new _e("No data bytes provided");var i=this.buildGenerator(n),o=new Int32Array(r);ct.arraycopy(e,0,o,0,r);var s=new cs(this.field,o);s=s.multiplyByMonomial(n,1);for(var a=s.divide(i)[1],l=a.getCoefficients(),u=n-l.length,d=0;d<u;d++)e[r+d]=0;ct.arraycopy(l,0,e,r+u,l.length)},t}(),mu=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o-1;s++)for(var a=r[s],l=0;l<i-1;l++){var u=a[l];u===a[l+1]&&u===r[s+1][l]&&u===r[s+1][l+1]&&n++}return t.N2*n},t.applyMaskPenaltyRule3=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=0;a<i;a++){var l=r[s];a+6<i&&l[a]===1&&l[a+1]===0&&l[a+2]===1&&l[a+3]===1&&l[a+4]===1&&l[a+5]===0&&l[a+6]===1&&(t.isWhiteHorizontal(l,a-4,a)||t.isWhiteHorizontal(l,a+7,a+11))&&n++,s+6<o&&r[s][a]===1&&r[s+1][a]===0&&r[s+2][a]===1&&r[s+3][a]===1&&r[s+4][a]===1&&r[s+5][a]===0&&r[s+6][a]===1&&(t.isWhiteVertical(r,a,s-4,s)||t.isWhiteVertical(r,a,s+7,s+11))&&n++}return n*t.N3},t.isWhiteHorizontal=function(e,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(var i=n;i<r;i++)if(e[i]===1)return!1;return!0},t.isWhiteVertical=function(e,n,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var o=r;o<i;o++)if(e[o][n]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var n=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=r[s],l=0;l<i;l++)a[l]===1&&n++;var u=e.getHeight()*e.getWidth(),d=Math.floor(Math.abs(n*2-u)*10/u);return d*t.N4},t.getDataMaskBit=function(e,n,r){var i,o;switch(e){case 0:i=r+n&1;break;case 1:i=r&1;break;case 2:i=n%3;break;case 3:i=(r+n)%3;break;case 4:i=Math.floor(r/2)+Math.floor(n/3)&1;break;case 5:o=r*n,i=(o&1)+o%3;break;case 6:o=r*n,i=(o&1)+o%3&1;break;case 7:o=r*n,i=o%3+(r+n&1)&1;break;default:throw new _e("Invalid mask pattern: "+e)}return i===0},t.applyMaskPenaltyRule1Internal=function(e,n){for(var r=0,i=n?e.getHeight():e.getWidth(),o=n?e.getWidth():e.getHeight(),s=e.getArray(),a=0;a<i;a++){for(var l=0,u=-1,d=0;d<o;d++){var f=n?s[a][d]:s[d][a];f===u?l++:(l>=5&&(r+=t.N1+(l-5)),l=1,u=f)}l>=5&&(r+=t.N1+(l-5))}return r},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),QK=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YK=function(){function t(e,n){this.width=e,this.height=n;for(var r=new Array(n),i=0;i!==n;i++)r[i]=new Uint8Array(e);this.bytes=r}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,n){return this.bytes[n][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,n,r){this.bytes[n][e]=r},t.prototype.setBoolean=function(e,n,r){this.bytes[n][e]=r?1:0},t.prototype.clear=function(e){var n,r;try{for(var i=QK(this.bytes),o=i.next();!o.done;o=i.next()){var s=o.value;Gt.fill(s,e)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var o=this.bytes[r],s=n.bytes[r],a=0,l=this.width;a<l;++a)if(o[a]!==s[a])return!1;return!0},t.prototype.toString=function(){for(var e=new ke,n=0,r=this.height;n<r;++n){for(var i=this.bytes[n],o=0,s=this.width;o<s;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),Tv=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new ke;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),ZK=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),ht=function(t){ZK(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(cr),zb=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,n,r,i,o){t.clearMatrix(o),t.embedBasicPatterns(r,o),t.embedTypeInfo(n,i,o),t.maybeEmbedVersionInfo(r,o),t.embedDataBits(e,i,o)},t.embedBasicPatterns=function(e,n){t.embedPositionDetectionPatternsAndSeparators(n),t.embedDarkDotAtLeftBottomCorner(n),t.maybeEmbedPositionAdjustmentPatterns(e,n),t.embedTimingPatterns(n)},t.embedTypeInfo=function(e,n,r){var i=new on;t.makeTypeInfoBits(e,n,i);for(var o=0,s=i.getSize();o<s;++o){var a=i.get(i.getSize()-1-o),l=t.TYPE_INFO_COORDINATES[o],u=l[0],d=l[1];if(r.setBoolean(u,d,a),o<8){var f=r.getWidth()-o-1,h=8;r.setBoolean(f,h,a)}else{var f=8,h=r.getHeight()-7+(o-8);r.setBoolean(f,h,a)}}},t.maybeEmbedVersionInfo=function(e,n){if(!(e.getVersionNumber()<7)){var r=new on;t.makeVersionInfoBits(e,r);for(var i=6*3-1,o=0;o<6;++o)for(var s=0;s<3;++s){var a=r.get(i);i--,n.setBoolean(o,n.getHeight()-11+s,a),n.setBoolean(n.getHeight()-11+s,o,a)}}},t.embedDataBits=function(e,n,r){for(var i=0,o=-1,s=r.getWidth()-1,a=r.getHeight()-1;s>0;){for(s===6&&(s-=1);a>=0&&a<r.getHeight();){for(var l=0;l<2;++l){var u=s-l;if(t.isEmpty(r.get(u,a))){var d=void 0;i<e.getSize()?(d=e.get(i),++i):d=!1,n!==255&&mu.getDataMaskBit(n,u,a)&&(d=!d),r.setBoolean(u,a,d)}}a+=o}o=-o,a+=o,s-=2}if(i!==e.getSize())throw new ht("Not all bits consumed: "+i+"/"+e.getSize())},t.findMSBSet=function(e){return 32-je.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,n){if(n===0)throw new _e("0 polynomial");var r=t.findMSBSet(n);for(e<<=r-1;t.findMSBSet(e)>=r;)e^=n<<t.findMSBSet(e)-r;return e},t.makeTypeInfoBits=function(e,n,r){if(!Tv.isValidMaskPattern(n))throw new ht("Invalid mask pattern");var i=e.getBits()<<3|n;r.appendBits(i,5);var o=t.calculateBCHCode(i,t.TYPE_INFO_POLY);r.appendBits(o,10);var s=new on;if(s.appendBits(t.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new ht("should not happen but we got: "+r.getSize())},t.makeVersionInfoBits=function(e,n){n.appendBits(e.getVersionNumber(),6);var r=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(n.appendBits(r,12),n.getSize()!==18)throw new ht("should not happen but we got: "+n.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var n=8;n<e.getWidth()-8;++n){var r=(n+1)%2;t.isEmpty(e.get(n,6))&&e.setNumber(n,6,r),t.isEmpty(e.get(6,n))&&e.setNumber(6,n,r)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new ht;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,n,r){for(var i=0;i<8;++i){if(!t.isEmpty(r.get(e+i,n)))throw new ht;r.setNumber(e+i,n,0)}},t.embedVerticalSeparationPattern=function(e,n,r){for(var i=0;i<7;++i){if(!t.isEmpty(r.get(e,n+i)))throw new ht;r.setNumber(e,n+i,0)}},t.embedPositionAdjustmentPattern=function(e,n,r){for(var i=0;i<5;++i)for(var o=t.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,n+i,o[s])},t.embedPositionDetectionPattern=function(e,n,r){for(var i=0;i<7;++i)for(var o=t.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,n+i,o[s])},t.embedPositionDetectionPatternsAndSeparators=function(e){var n=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-n,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-n,e);var r=8;t.embedHorizontalSeparationPattern(0,r-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;t.embedVerticalSeparationPattern(i,0,e),t.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),t.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,n){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],o=0,s=i.length;o!==s;o++){var a=i[o];if(a>=0)for(var l=0;l!==s;l++){var u=i[l];u>=0&&t.isEmpty(n.get(u,a))&&t.embedPositionAdjustmentPattern(u-2,a-2,n)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),JK=function(){function t(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),Hb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.calculateMaskPenalty=function(e){return mu.applyMaskPenaltyRule1(e)+mu.applyMaskPenaltyRule2(e)+mu.applyMaskPenaltyRule3(e)+mu.applyMaskPenaltyRule4(e)},t.encode=function(e,n,r){r===void 0&&(r=null);var i=t.DEFAULT_BYTE_MODE_ENCODING,o=r!==null&&r.get(Kf.CHARACTER_SET)!==void 0;o&&(i=r.get(Kf.CHARACTER_SET).toString());var s=this.chooseMode(e,i),a=new on;if(s===pt.BYTE&&(o||t.DEFAULT_BYTE_MODE_ENCODING!==i)){var l=Ht.getCharacterSetECIByName(i);l!==void 0&&this.appendECI(l,a)}this.appendModeInfo(s,a);var u=new on;this.appendBytes(e,s,u,i);var d;if(r!==null&&r.get(Kf.QR_VERSION)!==void 0){var f=Number.parseInt(r.get(Kf.QR_VERSION).toString(),10);d=aa.getVersionForNumber(f);var h=this.calculateBitsNeeded(s,a,u,d);if(!this.willFit(h,d,n))throw new ht("Data too big for requested version")}else d=this.recommendVersion(n,s,a,u);var m=new on;m.appendBitArray(a);var g=s===pt.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(g,d,s,m),m.appendBitArray(u);var v=d.getECBlocksForLevel(n),y=d.getTotalCodewords()-v.getTotalECCodewords();this.terminateBits(y,m);var x=this.interleaveWithECBytes(m,d.getTotalCodewords(),y,v.getNumBlocks()),w=new Tv;w.setECLevel(n),w.setMode(s),w.setVersion(d);var E=d.getDimensionForVersion(),A=new YK(E,E),O=this.chooseMaskPattern(x,n,d,A);return w.setMaskPattern(O),zb.buildMatrix(x,n,d,O,A),w.setMatrix(A),w},t.recommendVersion=function(e,n,r,i){var o=this.calculateBitsNeeded(n,r,i,aa.getVersionForNumber(1)),s=this.chooseVersion(o,e),a=this.calculateBitsNeeded(n,r,i,s);return this.chooseVersion(a,e)},t.calculateBitsNeeded=function(e,n,r,i){return n.getSize()+e.getCharacterCountBits(i)+r.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,n){if(n===void 0&&(n=null),Ht.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return pt.KANJI;for(var r=!1,i=!1,o=0,s=e.length;o<s;++o){var a=e.charAt(o);if(t.isDigit(a))r=!0;else if(this.getAlphanumericCode(a.charCodeAt(0))!==-1)i=!0;else return pt.BYTE}return i?pt.ALPHANUMERIC:r?pt.NUMERIC:pt.BYTE},t.isOnlyDoubleByteKanji=function(e){var n;try{n=Mr.encode(e,Ht.SJIS)}catch{return!1}var r=n.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var o=n[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},t.chooseMaskPattern=function(e,n,r,i){for(var o=Number.MAX_SAFE_INTEGER,s=-1,a=0;a<Tv.NUM_MASK_PATTERNS;a++){zb.buildMatrix(e,n,r,a,i);var l=this.calculateMaskPenalty(i);l<o&&(o=l,s=a)}return s},t.chooseVersion=function(e,n){for(var r=1;r<=40;r++){var i=aa.getVersionForNumber(r);if(t.willFit(e,i,n))return i}throw new ht("Data too big")},t.willFit=function(e,n,r){var i=n.getTotalCodewords(),o=n.getECBlocksForLevel(r),s=o.getTotalECCodewords(),a=i-s,l=(e+7)/8;return a>=l},t.terminateBits=function(e,n){var r=e*8;if(n.getSize()>r)throw new ht("data bits cannot fit in the QR Code"+n.getSize()+" > "+r);for(var i=0;i<4&&n.getSize()<r;++i)n.appendBit(!1);var o=n.getSize()&7;if(o>0)for(var i=o;i<8;i++)n.appendBit(!1);for(var s=e-n.getSizeInBytes(),i=0;i<s;++i)n.appendBits(i&1?17:236,8);if(n.getSize()!==r)throw new ht("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,n,r,i,o,s){if(i>=r)throw new ht("Block ID too large");var a=e%r,l=r-a,u=Math.floor(e/r),d=u+1,f=Math.floor(n/r),h=f+1,m=u-f,g=d-h;if(m!==g)throw new ht("EC bytes mismatch");if(r!==l+a)throw new ht("RS blocks mismatch");if(e!==(f+m)*l+(h+g)*a)throw new ht("Total bytes mismatch");i<l?(o[0]=f,s[0]=m):(o[0]=h,s[0]=g)},t.interleaveWithECBytes=function(e,n,r,i){var o,s,a,l;if(e.getSizeInBytes()!==r)throw new ht("Number of bits and data bytes does not match");for(var u=0,d=0,f=0,h=new Array,m=0;m<i;++m){var g=new Int32Array(1),v=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(n,r,i,m,g,v);var y=g[0],x=new Uint8Array(y);e.toBytes(8*u,x,0,y);var w=t.generateECBytes(x,v[0]);h.push(new JK(x,w)),d=Math.max(d,y),f=Math.max(f,w.length),u+=g[0]}if(r!==u)throw new ht("Data bytes does not match offset");for(var E=new on,m=0;m<d;++m)try{for(var A=(o=void 0,Hb(h)),O=A.next();!O.done;O=A.next()){var j=O.value,x=j.getDataBytes();m<x.length&&E.appendBits(x[m],8)}}catch(b){o={error:b}}finally{try{O&&!O.done&&(s=A.return)&&s.call(A)}finally{if(o)throw o.error}}for(var m=0;m<f;++m)try{for(var N=(a=void 0,Hb(h)),T=N.next();!T.done;T=N.next()){var j=T.value,w=j.getErrorCorrectionBytes();m<w.length&&E.appendBits(w[m],8)}}catch(b){a={error:b}}finally{try{T&&!T.done&&(l=N.return)&&l.call(N)}finally{if(a)throw a.error}}if(n!==E.getSizeInBytes())throw new ht("Interleaving error: "+n+" and "+E.getSizeInBytes()+" differ.");return E},t.generateECBytes=function(e,n){for(var r=e.length,i=new Int32Array(r+n),o=0;o<r;o++)i[o]=e[o]&255;new MP(rr.QR_CODE_FIELD_256).encode(i,n);for(var s=new Uint8Array(n),o=0;o<n;o++)s[o]=i[r+o];return s},t.appendModeInfo=function(e,n){n.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,n,r,i){var o=r.getCharacterCountBits(n);if(e>=1<<o)throw new ht(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},t.appendBytes=function(e,n,r,i){switch(n){case pt.NUMERIC:t.appendNumericBytes(e,r);break;case pt.ALPHANUMERIC:t.appendAlphanumericBytes(e,r);break;case pt.BYTE:t.append8BitBytes(e,r,i);break;case pt.KANJI:t.appendKanjiBytes(e,r);break;default:throw new ht("Invalid mode: "+n)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var n=t.getDigit(e);return n>=0&&n<=9},t.appendNumericBytes=function(e,n){for(var r=e.length,i=0;i<r;){var o=t.getDigit(e.charAt(i));if(i+2<r){var s=t.getDigit(e.charAt(i+1)),a=t.getDigit(e.charAt(i+2));n.appendBits(o*100+s*10+a,10),i+=3}else if(i+1<r){var s=t.getDigit(e.charAt(i+1));n.appendBits(o*10+s,7),i+=2}else n.appendBits(o,4),i++}},t.appendAlphanumericBytes=function(e,n){for(var r=e.length,i=0;i<r;){var o=t.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new ht;if(i+1<r){var s=t.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new ht;n.appendBits(o*45+s,11),i+=2}else n.appendBits(o,6),i++}},t.append8BitBytes=function(e,n,r){var i;try{i=Mr.encode(e,r)}catch(l){throw new ht(l)}for(var o=0,s=i.length;o!==s;o++){var a=i[o];n.appendBits(a,8)}},t.appendKanjiBytes=function(e,n){var r;try{r=Mr.encode(e,Ht.SJIS)}catch(f){throw new ht(f)}for(var i=r.length,o=0;o<i;o+=2){var s=r[o]&255,a=r[o+1]&255,l=s<<8&4294967295|a,u=-1;if(l>=33088&&l<=40956?u=l-33088:l>=57408&&l<=60351&&(u=l-49472),u===-1)throw new ht("Invalid byte sequence");var d=(u>>8)*192+(u&255);n.appendBits(d,13)}},t.appendECI=function(e,n){n.appendBits(pt.ECI.getBits(),4),n.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=Ht.UTF8.getName(),t})();var eX=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){eX(e,t);function e(n,r,i,o,s,a,l,u){var d=t.call(this,a,l)||this;if(d.yuvData=n,d.dataWidth=r,d.dataHeight=i,d.left=o,d.top=s,o+a>r||s+l>i)throw new _e("Crop rectangle does not fit within image data.");return u&&d.reverseHorizontal(a,l),d}return e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new _e("Requested row is outside the image: "+n);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(n+this.top)*this.dataWidth+this.left;return ct.arraycopy(this.yuvData,o,r,0,i),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=n*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return ct.arraycopy(this.yuvData,s,o,0,i),o;for(var a=0;a<r;a++){var l=a*n;ct.arraycopy(this.yuvData,s,o,l,n),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+r,i,o,!1)},e.prototype.renderThumbnail=function(){for(var n=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(n*r),o=this.yuvData,s=this.top*this.dataWidth+this.left,a=0;a<r;a++){for(var l=a*n,u=0;u<n;u++){var d=o[s+u*e.THUMBNAIL_SCALE_FACTOR]&255;i[l+u]=4278190080|d*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(n,r){for(var i=this.yuvData,o=0,s=this.top*this.dataWidth+this.left;o<r;o++,s+=this.dataWidth)for(var a=s+n/2,l=s,u=s+n-1;l<a;l++,u--){var d=i[l];i[l]=i[u],i[u]=d}},e.prototype.invert=function(){return new cw(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(M0);var tX=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(t){tX(e,t);function e(n,r,i,o,s,a,l){var u=t.call(this,r,i)||this;if(u.dataWidth=o,u.dataHeight=s,u.left=a,u.top=l,n.BYTES_PER_ELEMENT===4){for(var d=r*i,f=new Uint8ClampedArray(d),h=0;h<d;h++){var m=n[h],g=m>>16&255,v=m>>7&510,y=m&255;f[h]=(g+v+y)/4&255}u.luminances=f}else u.luminances=n;if(o===void 0&&(u.dataWidth=r),s===void 0&&(u.dataHeight=i),a===void 0&&(u.left=0),l===void 0&&(u.top=0),u.left+r>u.dataWidth||u.top+i>u.dataHeight)throw new _e("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(n,r){if(n<0||n>=this.getHeight())throw new _e("Requested row is outside the image: "+n);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(n+this.top)*this.dataWidth+this.left;return ct.arraycopy(this.luminances,o,r,0,i),r},e.prototype.getMatrix=function(){var n=this.getWidth(),r=this.getHeight();if(n===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=n*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return ct.arraycopy(this.luminances,s,o,0,i),o;for(var a=0;a<r;a++){var l=a*n;ct.arraycopy(this.luminances,s,o,l,n),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(n,r,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+n,this.top+r)},e.prototype.invert=function(){return new cw(this)},e})(M0);var nX=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),rX=function(t){nX(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(n){return this.getCharacterSetECIByName(n)},e}(Ht),iX=function(){function t(){}return t.ISO_8859_1=Ht.ISO8859_1,t}(),Rv,oX=301,sX=function(t,e){for(var n=1,r=0;r<255;r++)e[r]=n,t[n]=r,n*=2,n>=256&&(n^=oX);return{LOG:t,ALOG:e}};Rv=sX([],[]),Rv.LOG;Rv.ALOG;var Wb;(function(t){t[t.FORCE_NONE=0]="FORCE_NONE",t[t.FORCE_SQUARE=1]="FORCE_SQUARE",t[t.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(Wb||(Wb={}));var Gb=129,jP=230,aX=231,lX=235,cX=236,uX=237,dX=238,fX=239,hX=240,mg=254,pX=254,qb="[)>05",Kb="[)>06",Xb="",it=0,cn=1,$n=2,Bt=3,en=4,An=5,mX=function(){function t(){}return t.prototype.getEncodingMode=function(){return it},t.prototype.encode=function(e){var n=Zr.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(n>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=Zr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case An:e.writeCodeword(aX),e.signalEncoderChange(An);return;case cn:e.writeCodeword(jP),e.signalEncoderChange(cn);return;case Bt:e.writeCodeword(dX),e.signalEncoderChange(Bt);break;case $n:e.writeCodeword(fX),e.signalEncoderChange($n);break;case en:e.writeCodeword(hX),e.signalEncoderChange(en);break;default:throw new Error("Illegal mode: "+i)}else Zr.isExtendedASCII(r)?(e.writeCodeword(lX),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,n){if(Zr.isDigit(e)&&Zr.isDigit(n)){var r=(e-48)*10+(n-48);return r+130}throw new Error("not digits: "+e+n)},t}(),gX=function(){function t(){}return t.prototype.getEncodingMode=function(){return An},t.prototype.encode=function(e){var n=new ke;for(n.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();n.append(r),e.pos++;var i=Zr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(it);break}}var o=n.length()-1,s=1,a=e.getCodewordCount()+o+s;e.updateSymbolInfo(a);var l=e.getSymbolInfo().getDataCapacity()-a>0;if(e.hasMoreCharacters()||l)if(o<=249)n.setCharAt(0,We.getCharAt(o));else if(o<=1555)n.setCharAt(0,We.getCharAt(Math.floor(o/250)+249)),n.insert(1,We.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var u=0,r=n.length();u<r;u++)e.writeCodeword(this.randomize255State(n.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,n){var r=149*n%255+1,i=e+r;return i<=255?i:i-256},t}(),pw=function(){function t(){}return t.prototype.getEncodingMode=function(){return cn},t.prototype.encodeMaximal=function(e){for(var n=new ke,r=0,i=e.pos,o=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,n),n.length()%3===0&&(i=e.pos,o=n.length())}if(o!==n.length()){var a=Math.floor(n.length()/3*2),l=Math.floor(e.getCodewordCount()+a+1);e.updateSymbolInfo(l);var u=e.getSymbolInfo().getDataCapacity()-l,d=Math.floor(n.length()%3);(d===2&&u!==2||d===1&&(r>3||u!==1))&&(e.pos=i)}n.length()>0&&e.writeCodeword(jP),this.handleEOD(e,n)},t.prototype.encode=function(e){for(var n=new ke;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,n),o=Math.floor(n.length()/3)*2,s=e.getCodewordCount()+o;e.updateSymbolInfo(s);var a=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var l=new ke;for(n.length()%3===2&&a!==2&&(i=this.backtrackOneCharacter(e,n,l,i));n.length()%3===1&&(i>3||a!==1);)i=this.backtrackOneCharacter(e,n,l,i);break}var u=n.length();if(u%3===0){var d=Zr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(d!==this.getEncodingMode()){e.signalEncoderChange(it);break}}}this.handleEOD(e,n)},t.prototype.backtrackOneCharacter=function(e,n,r,i){var o=n.length(),s=n.toString().substring(0,o-i);n.setLengthToZero(),n.append(s),e.pos--;var a=e.getCurrentChar();return i=this.encodeChar(a,r),e.resetSymbolInfo(),i},t.prototype.writeNextTriplet=function(e,n){e.writeCodewords(this.encodeToCodewords(n.toString()));var r=n.toString().substring(3);n.setLengthToZero(),n.append(r)},t.prototype.handleEOD=function(e,n){var r=Math.floor(n.length()/3*2),i=n.length()%3,o=e.getCodewordCount()+r;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(n.append("\0");n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(mg)}else if(s===1&&i===1){for(;n.length()>=3;)this.writeNextTriplet(e,n);e.hasMoreCharacters()&&e.writeCodeword(mg),e.pos--}else if(i===0){for(;n.length()>=3;)this.writeNextTriplet(e,n);(s>0||e.hasMoreCharacters())&&e.writeCodeword(mg)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(it)},t.prototype.encodeChar=function(e,n){if(e===32)return n.append(3),1;if(e>=48&&e<=57)return n.append(e-48+4),1;if(e>=65&&e<=90)return n.append(e-65+14),1;if(e<32)return n.append(0),n.append(e),2;if(e<=47)return n.append(1),n.append(e-33),2;if(e<=64)return n.append(1),n.append(e-58+15),2;if(e<=95)return n.append(1),n.append(e-91+22),2;if(e<=127)return n.append(2),n.append(e-96),2;n.append("1");var r=2;return r+=this.encodeChar(e-128,n),r},t.prototype.encodeToCodewords=function(e){var n=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=n/256,i=n%256,o=new ke;return o.append(r),o.append(i),o.toString()},t}(),vX=function(){function t(){}return t.prototype.getEncodingMode=function(){return en},t.prototype.encode=function(e){for(var n=new ke;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,n),e.pos++;var i=n.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(n.toString()));var o=n.toString().substring(4);n.setLengthToZero(),n.append(o);var s=Zr.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(it);break}}}n.append(We.getCharAt(31)),this.handleEOD(e,n)},t.prototype.handleEOD=function(e,n){try{var r=n.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,a=this.encodeToCodewords(n.toString()),l=!e.hasMoreCharacters(),u=l&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+a.length))}u?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(a)}finally{e.signalEncoderChange(it)}},t.prototype.encodeChar=function(e,n){e>=32&&e<=63?n.append(e):e>=64&&e<=94?n.append(We.getCharAt(e-64)):Zr.illegalCharacter(We.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var n=e.length;if(n===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=n>=2?e.charAt(1).charCodeAt(0):0,o=n>=3?e.charAt(2).charCodeAt(0):0,s=n>=4?e.charAt(3).charCodeAt(0):0,a=(r<<18)+(i<<12)+(o<<6)+s,l=a>>16&255,u=a>>8&255,d=a&255,f=new ke;return f.append(l),n>=2&&f.append(u),n>=3&&f.append(d),f.toString()},t}(),yX=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),xX=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ye=function(){function t(e,n,r,i,o,s,a,l){a===void 0&&(a=0),l===void 0&&(l=0),this.rectangular=e,this.dataCapacity=n,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=s,this.rsBlockData=a,this.rsBlockError=l}return t.lookup=function(e,n,r,i,o){var s,a;n===void 0&&(n=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var l=xX(_X),u=l.next();!u.done;u=l.next()){var d=u.value;if(!(n===1&&d.rectangular)&&!(n===2&&!d.rectangular)&&!(r!=null&&(d.getSymbolWidth()<r.getWidth()||d.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(d.getSymbolWidth()>i.getWidth()||d.getSymbolHeight()>i.getHeight()))&&e<=d.dataCapacity)return d}}catch(f){s={error:f}}finally{try{u&&!u.done&&(a=l.return)&&a.call(l)}finally{if(s)throw s.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),wX=function(t){yX(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(n){return n<=8?156:155},e}(Ye),_X=[new Ye(!1,3,5,8,8,1),new Ye(!1,5,7,10,10,1),new Ye(!0,5,7,16,6,1),new Ye(!1,8,10,12,12,1),new Ye(!0,10,11,14,6,2),new Ye(!1,12,12,14,14,1),new Ye(!0,16,14,24,10,1),new Ye(!1,18,14,16,16,1),new Ye(!1,22,18,18,18,1),new Ye(!0,22,18,16,10,2),new Ye(!1,30,20,20,20,1),new Ye(!0,32,24,16,14,2),new Ye(!1,36,24,22,22,1),new Ye(!1,44,28,24,24,1),new Ye(!0,49,28,22,14,2),new Ye(!1,62,36,14,14,4),new Ye(!1,86,42,16,16,4),new Ye(!1,114,48,18,18,4),new Ye(!1,144,56,20,20,4),new Ye(!1,174,68,22,22,4),new Ye(!1,204,84,24,24,4,102,42),new Ye(!1,280,112,14,14,16,140,56),new Ye(!1,368,144,16,16,16,92,36),new Ye(!1,456,192,18,18,16,114,48),new Ye(!1,576,224,20,20,16,144,56),new Ye(!1,696,272,22,22,16,174,68),new Ye(!1,816,336,24,24,16,136,56),new Ye(!1,1050,408,18,18,36,175,68),new Ye(!1,1304,496,20,20,36,163,62),new wX],EX=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var n=e.split("").map(function(a){return a.charCodeAt(0)}),r=new ke,i=0,o=n.length;i<o;i++){var s=String.fromCharCode(n[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new ke,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,n){this.minSize=e,this.maxSize=n},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Ye.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}(),CX=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),bX=function(t){CX(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Bt},e.prototype.encode=function(n){for(var r=new ke;n.hasMoreCharacters();){var i=n.getCurrentChar();n.pos++,this.encodeChar(i,r);var o=r.length();if(o%3===0){this.writeNextTriplet(n,r);var s=Zr.lookAheadTest(n.getMessage(),n.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){n.signalEncoderChange(it);break}}}this.handleEOD(n,r)},e.prototype.encodeChar=function(n,r){switch(n){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:n>=48&&n<=57?r.append(n-48+4):n>=65&&n<=90?r.append(n-65+14):Zr.illegalCharacter(We.getCharAt(n));break}return 1},e.prototype.handleEOD=function(n,r){n.updateSymbolInfo();var i=n.getSymbolInfo().getDataCapacity()-n.getCodewordCount(),o=r.length();n.pos-=o,(n.getRemainingCharacters()>1||i>1||n.getRemainingCharacters()!==i)&&n.writeCodeword(pX),n.getNewEncoding()<0&&n.signalEncoderChange(it)},e}(pw),AX=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),SX=function(t){AX(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return $n},e.prototype.encodeChar=function(n,r){if(n===32)return r.append(3),1;if(n>=48&&n<=57)return r.append(n-48+4),1;if(n>=97&&n<=122)return r.append(n-97+14),1;if(n<32)return r.append(0),r.append(n),2;if(n<=47)return r.append(1),r.append(n-33),2;if(n<=64)return r.append(1),r.append(n-58+15),2;if(n>=91&&n<=95)return r.append(1),r.append(n-91+22),2;if(n===96)return r.append(2),r.append(0),2;if(n<=90)return r.append(2),r.append(n-65+1),2;if(n<=127)return r.append(2),r.append(n-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(n-128,r),i},e}(pw),Zr=function(){function t(){}return t.randomize253State=function(e){var n=149*e%253+1,r=Gb+n;return r<=254?r:r-254},t.encodeHighLevel=function(e,n,r,i,o){n===void 0&&(n=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!1);var s=new pw,a=[new mX,s,new SX,new bX,new vX,new gX],l=new EX(e);l.setSymbolShape(n),l.setSizeConstraints(r,i),e.startsWith(qb)&&e.endsWith(Xb)?(l.writeCodeword(cX),l.setSkipAtEnd(2),l.pos+=qb.length):e.startsWith(Kb)&&e.endsWith(Xb)&&(l.writeCodeword(uX),l.setSkipAtEnd(2),l.pos+=Kb.length);var u=it;for(o&&(s.encodeMaximal(l),u=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)a[u].encode(l),l.getNewEncoding()>=0&&(u=l.getNewEncoding(),l.resetEncoderSignal());var d=l.getCodewordCount();l.updateSymbolInfo();var f=l.getSymbolInfo().getDataCapacity();d<f&&u!==it&&u!==An&&u!==en&&l.writeCodeword("þ");var h=l.getCodewords();for(h.length()<f&&h.append(Gb);h.length()<f;)h.append(this.randomize253State(h.length()+1));return l.getCodewords().toString()},t.lookAheadTest=function(e,n,r){var i=this.lookAheadTestIntern(e,n,r);if(r===Bt&&i===Bt){for(var o=Math.min(n+3,e.length),s=n;s<o;s++)if(!this.isNativeX12(e.charCodeAt(s)))return it}else if(r===en&&i===en){for(var o=Math.min(n+4,e.length),s=n;s<o;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return it}return i},t.lookAheadTestIntern=function(e,n,r){if(n>=e.length)return r;var i;r===it?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var o=0,s=new Uint8Array(6),a=[];;){if(n+o===e.length){Gt.fill(s,0),Gt.fill(a,0);var l=this.findMinimums(i,a,je.MAX_VALUE,s),u=this.getMinimumCount(s);if(a[it]===l)return it;if(u===1){if(s[An]>0)return An;if(s[en]>0)return en;if(s[$n]>0)return $n;if(s[Bt]>0)return Bt}return cn}var d=e.charCodeAt(n+o);if(o++,this.isDigit(d)?i[it]+=.5:this.isExtendedASCII(d)?(i[it]=Math.ceil(i[it]),i[it]+=2):(i[it]=Math.ceil(i[it]),i[it]++),this.isNativeC40(d)?i[cn]+=2/3:this.isExtendedASCII(d)?i[cn]+=8/3:i[cn]+=4/3,this.isNativeText(d)?i[$n]+=2/3:this.isExtendedASCII(d)?i[$n]+=8/3:i[$n]+=4/3,this.isNativeX12(d)?i[Bt]+=2/3:this.isExtendedASCII(d)?i[Bt]+=13/3:i[Bt]+=10/3,this.isNativeEDIFACT(d)?i[en]+=3/4:this.isExtendedASCII(d)?i[en]+=17/4:i[en]+=13/4,this.isSpecialB256(d)?i[An]+=4:i[An]++,o>=4){if(Gt.fill(s,0),Gt.fill(a,0),this.findMinimums(i,a,je.MAX_VALUE,s),a[it]<this.min(a[An],a[cn],a[$n],a[Bt],a[en]))return it;if(a[An]<a[it]||a[An]+1<this.min(a[cn],a[$n],a[Bt],a[en]))return An;if(a[en]+1<this.min(a[An],a[cn],a[$n],a[Bt],a[it]))return en;if(a[$n]+1<this.min(a[An],a[cn],a[en],a[Bt],a[it]))return $n;if(a[Bt]+1<this.min(a[An],a[cn],a[en],a[$n],a[it]))return Bt;if(a[cn]+1<this.min(a[it],a[An],a[en],a[$n])){if(a[cn]<a[Bt])return cn;if(a[cn]===a[Bt]){for(var f=n+o+1;f<e.length;){var h=e.charCodeAt(f);if(this.isX12TermSep(h))return Bt;if(!this.isNativeX12(h))break;f++}return cn}}}}},t.min=function(e,n,r,i,o){var s=Math.min(e,Math.min(n,Math.min(r,i)));return o===void 0?s:Math.min(s,o)},t.findMinimums=function(e,n,r,i){for(var o=0;o<6;o++){var s=n[o]=Math.ceil(e[o]);r>s&&(r=s,Gt.fill(i,0)),r===s&&(i[o]=i[o]+1)}return r},t.getMinimumCount=function(e){for(var n=0,r=0;r<6;r++)n+=e[r];return n||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,n){n===void 0&&(n=0);for(var r=e.length,i=n;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-n},t.illegalCharacter=function(e){var n=je.toHexString(e.charCodeAt(0));throw n="0000".substring(0,4-n.length)+n,new Error("Illegal character: "+e+" (0x"+n+")")},t}(),gg=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qb=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return Mr.encode(e,this.charset)!=null}catch{return!1}},t}(),IX=function(){function t(e,n,r){var i,o,s,a,l,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(S){return new Qb(rX.forName(S))}),this.encoders=[];var d=[];d.push(new Qb(iX.ISO_8859_1));for(var f=n!=null&&n.name.startsWith("UTF"),h=0;h<e.length;h++){var m=!1;try{for(var g=(i=void 0,gg(d)),v=g.next();!v.done;v=g.next()){var y=v.value,x=e.charAt(h),w=x.charCodeAt(0);if(w===r||y.canEncode(x)){m=!0;break}}}catch(S){i={error:S}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}if(!m)try{for(var E=(s=void 0,gg(this.ENCODERS)),A=E.next();!A.done;A=E.next()){var y=A.value;if(y.canEncode(e.charAt(h))){d.push(y),m=!0;break}}}catch(S){s={error:S}}finally{try{A&&!A.done&&(a=E.return)&&a.call(E)}finally{if(s)throw s.error}}m||(f=!0)}if(d.length===1&&!f)this.encoders=[d[0]];else{this.encoders=[];var O=0;try{for(var j=gg(d),N=j.next();!N.done;N=j.next()){var y=N.value;this.encoders[O++]=y}}catch(S){l={error:S}}finally{try{N&&!N.done&&(u=j.return)&&u.call(j)}finally{if(l)throw l.error}}}var T=-1;if(n!=null){for(var h=0;h<this.encoders.length;h++)if(this.encoders[h]!=null&&n.name===this.encoders[h].name){T=h;break}}this.priorityEncoderIndex=T}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,n){if(!(n<this.length()))throw new Error("index must be less than length");return Mr.encode(We.getCharAt(e),this.encoders[n].name)},t}(),NX=3,TX=function(){function t(e,n,r){this.fnc1=r;var i=new IX(e,n,r);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var s=e.charAt(o).charCodeAt(0);this.bytes[o]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,n){if(e+n-1>=this.bytes.length)return!1;for(var r=0;r<n;r++)if(this.isECI(e+r))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,n){if(e<0||e>n||n>this.length())throw new Error(""+e);for(var r=new ke,i=e;i<n;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,n,r){(e[n][r.encoderIndex]==null||e[n][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[n][r.encoderIndex]=r)},t.prototype.addEdges=function(e,n,r,i,o,s){var a=e.charAt(i).charCodeAt(0),l=0,u=n.length();n.getPriorityEncoderIndex()>=0&&(a===s||n.canEncode(a,n.getPriorityEncoderIndex()))&&(l=n.getPriorityEncoderIndex(),u=l+1);for(var d=l;d<u;d++)(a===s||n.canEncode(a,d))&&this.addEdge(r,i+1,new Yb(a,n,d,o,s))},t.prototype.encodeMinimally=function(e,n,r){var i=e.length,o=new Yb[i+1][n.length()];this.addEdges(e,n,o,0,null,r);for(var s=1;s<=i;s++){for(var a=0;a<n.length();a++)o[s][a]!=null&&s<i&&this.addEdges(e,n,o,s,o[s][a],r);for(var a=0;a<n.length();a++)o[s-1][a]=null}for(var l=-1,u=je.MAX_VALUE,a=0;a<n.length();a++)if(o[i][a]!=null){var d=o[i][a];d.cachedTotalSize<u&&(u=d.cachedTotalSize,l=a)}if(l<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],h=o[i][l];h!=null;){if(h.isFNC1())f.unshift(1e3);else for(var m=n.encode(h.c,h.encoderIndex),s=m.length-1;s>=0;s--)f.unshift(m[s]&255);var g=h.previous===null?0:h.previous.encoderIndex;g!==h.encoderIndex&&f.unshift(256+n.getECIValue(h.encoderIndex)),h=h.previous}for(var v=[],s=0;s<v.length;s++)v[s]=f[s];return v},t}(),Yb=function(){function t(e,n,r,i,o){this.c=e,this.encoderSet=n,this.encoderIndex=r,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var s=this.isFNC1()?1:n.encode(e,r).length,a=i===null?0:i.encoderIndex;a!==r&&(s+=NX),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return t.prototype.isFNC1=function(){return this.c===1e3},t}(),RX=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();var Zb;(function(t){t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256"})(Zb||(Zb={}));(function(t){RX(e,t);function e(n,r,i,o,s){var a=t.call(this,n,r,i)||this;return a.shape=o,a.macroId=s,a}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(TX);var PX=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),Jb=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,n){return e.sort(n)[0]},t}(),DX=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),OX=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mw=function(t){OX(e,t);function e(n,r,i){var o=t.call(this,n)||this;return o.value=r,o.bitCount=i,o}return e.prototype.appendTo=function(n,r){n.appendBits(this.value,this.bitCount)},e.prototype.add=function(n,r){return new e(this,n,r)},e.prototype.addBinaryShift=function(n,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,n,r)},e.prototype.toString=function(){var n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+je.toBinaryString(n|1<<this.bitCount).substring(1)+">"},e}(DX),kX=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),MX=function(t){kX(e,t);function e(n,r,i){var o=t.call(this,n,0,0)||this;return o.binaryShiftStart=r,o.binaryShiftByteCount=i,o}return e.prototype.appendTo=function(n,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):i===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(n,r){return new e(this,n,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(mw);function jX(t,e,n){return new MX(t,e,n)}function tu(t,e,n){return new mw(t,e,n)}var LX=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],us=0,Tp=1,Or=2,LP=3,_i=4,FX=new mw(null,0,0),vg=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],BX=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function VX(t){var e,n;try{for(var r=BX(t),i=r.next();!i.done;i=r.next()){var o=i.value;Gt.fill(o,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return t[us][_i]=0,t[Tp][_i]=0,t[Tp][us]=28,t[LP][_i]=0,t[Or][_i]=0,t[Or][us]=15,t}var FP=VX(Gt.createInt32Array(6,6)),UX=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$X=function(){function t(e,n,r,i){this.token=e,this.mode=n,this.binaryShiftByteCount=r,this.bitCount=i}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,n){var r=this.bitCount,i=this.token;if(e!==this.mode){var o=vg[this.mode][e];i=tu(i,o&65535,o>>16),r+=o>>16}var s=e===Or?4:5;return i=tu(i,n,s),new t(i,e,0,r+s)},t.prototype.shiftAndAppend=function(e,n){var r=this.token,i=this.mode===Or?4:5;return r=tu(r,FP[this.mode][e],i),r=tu(r,n,5),new t(r,this.mode,0,this.bitCount+i+5)},t.prototype.addBinaryShiftChar=function(e){var n=this.token,r=this.mode,i=this.bitCount;if(this.mode===_i||this.mode===Or){var o=vg[r][us];n=tu(n,o&65535,o>>16),i+=o>>16,r=us}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,a=new t(n,r,this.binaryShiftByteCount+1,i+s);return a.binaryShiftByteCount===2078&&(a=a.endBinaryShift(e+1)),a},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var n=this.token;return n=jX(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(n,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var n=this.bitCount+(vg[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount},t.prototype.toBitArray=function(e){for(var n,r,i=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())i.unshift(o);var s=new on;try{for(var a=UX(i),l=a.next();!l.done;l=a.next()){var u=l.value;u.appendTo(s,e)}}catch(d){n={error:d}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return s},t.prototype.toString=function(){return We.format("%s bits=%d bytes=%d",LX[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(FX,us,0,0),t}();function zX(t){var e=We.getCharCode(" "),n=We.getCharCode("."),r=We.getCharCode(",");t[us][e]=1;for(var i=We.getCharCode("Z"),o=We.getCharCode("A"),s=o;s<=i;s++)t[us][s]=s-o+2;t[Tp][e]=1;for(var a=We.getCharCode("z"),l=We.getCharCode("a"),s=l;s<=a;s++)t[Tp][s]=s-l+2;t[Or][e]=1;for(var u=We.getCharCode("9"),d=We.getCharCode("0"),s=d;s<=u;s++)t[Or][s]=s-d+2;t[Or][r]=12,t[Or][n]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],h=0;h<f.length;h++)t[LP][We.getCharCode(f[h])]=h;for(var m=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],h=0;h<m.length;h++)We.getCharCode(m[h])>0&&(t[_i][We.getCharCode(m[h])]=h);return t}var yg=zX(Gt.createInt32Array(5,256)),Xf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},HX=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=We.getCharCode(" "),n=We.getCharCode(`
`),r=Jb.singletonList($X.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case We.getCharCode("\r"):o=s===n?2:0;break;case We.getCharCode("."):o=s===e?3:0;break;case We.getCharCode(","):o=s===e?4:0;break;case We.getCharCode(":"):o=s===e?5:0;break;default:o=0}o>0?(r=t.updateStateListForPair(r,i,o),i++):r=this.updateStateListForChar(r,i)}var a=Jb.min(r,function(l,u){return l.getBitCount()-u.getBitCount()});return a.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,n){var r,i,o=[];try{for(var s=Xf(e),a=s.next();!a.done;a=s.next()){var l=a.value;this.updateStateForChar(l,n,o)}}catch(u){r={error:u}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return t.simplifyStates(o)},t.prototype.updateStateForChar=function(e,n,r){for(var i=this.text[n]&255,o=yg[e.getMode()][i]>0,s=null,a=0;a<=_i;a++){var l=yg[a][i];if(l>0){if(s==null&&(s=e.endBinaryShift(n)),!o||a===e.getMode()||a===Or){var u=s.latchAndAppend(a,l);r.push(u)}if(!o&&FP[e.getMode()][a]>=0){var d=s.shiftAndAppend(a,l);r.push(d)}}}if(e.getBinaryShiftByteCount()>0||yg[e.getMode()][i]===0){var f=e.addBinaryShiftChar(n);r.push(f)}},t.updateStateListForPair=function(e,n,r){var i,o,s=[];try{for(var a=Xf(e),l=a.next();!l.done;l=a.next()){var u=l.value;this.updateStateForPair(u,n,r,s)}}catch(d){i={error:d}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return this.simplifyStates(s)},t.updateStateForPair=function(e,n,r,i){var o=e.endBinaryShift(n);if(i.push(o.latchAndAppend(_i,r)),e.getMode()!==_i&&i.push(o.shiftAndAppend(_i,r)),r===3||r===4){var s=o.latchAndAppend(Or,16-r).latchAndAppend(Or,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var a=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);i.push(a)}},t.simplifyStates=function(e){var n,r,i,o,s=[];try{for(var a=Xf(e),l=a.next();!l.done;l=a.next()){var u=l.value,d=!0,f=function(y){if(y.isBetterThanOrEqualTo(u))return d=!1,"break";u.isBetterThanOrEqualTo(y)&&(s=s.filter(function(x){return x!==y}))};try{for(var h=(i=void 0,Xf(s)),m=h.next();!m.done;m=h.next()){var g=m.value,v=f(g);if(v==="break")break}}catch(y){i={error:y}}finally{try{m&&!m.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}d&&s.push(u)}}catch(y){n={error:y}}finally{try{l&&!l.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return s},t}(),WX=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,n,r){var i=new HX(e).encode(),o=je.truncDivision(i.getSize()*n,100)+11,s=i.getSize()+o,a,l,u,d,f;if(r!==t.DEFAULT_AZTEC_LAYERS){if(a=r<0,l=Math.abs(r),l>(a?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new _e(We.format("Illegal value %s for layers",r));u=t.totalBitsInLayer(l,a),d=t.WORD_SIZE[l];var h=u-u%d;if(f=t.stuffBits(i,d),f.getSize()+o>h)throw new _e("Data to large for user specified layer");if(a&&f.getSize()>d*64)throw new _e("Data to large for user specified layer")}else{d=0,f=null;for(var m=0;;m++){if(m>t.MAX_NB_BITS)throw new _e("Data too large for an Aztec code");if(a=m<=3,l=a?m+1:m,u=t.totalBitsInLayer(l,a),!(s>u)){(f==null||d!==t.WORD_SIZE[l])&&(d=t.WORD_SIZE[l],f=t.stuffBits(i,d));var h=u-u%d;if(!(a&&f.getSize()>d*64)&&f.getSize()+o<=h)break}}}var g=t.generateCheckWords(f,u,d),v=f.getSize()/d,y=t.generateModeMessage(a,l,v),x=(a?11:14)+l*4,w=new Int32Array(x),E;if(a){E=x;for(var m=0;m<w.length;m++)w[m]=m}else{E=x+1+2*je.truncDivision(je.truncDivision(x,2)-1,15);for(var A=je.truncDivision(x,2),O=je.truncDivision(E,2),m=0;m<A;m++){var j=m+je.truncDivision(m,15);w[A-m-1]=O-j-1,w[A+m]=O+j+1}}for(var N=new Li(E),m=0,T=0;m<l;m++){for(var S=(l-m)*4+(a?9:12),b=0;b<S;b++)for(var k=b*2,R=0;R<2;R++)g.get(T+k+R)&&N.set(w[m*2+R],w[m*2+b]),g.get(T+S*2+k+R)&&N.set(w[m*2+b],w[x-1-m*2-R]),g.get(T+S*4+k+R)&&N.set(w[x-1-m*2-R],w[x-1-m*2-b]),g.get(T+S*6+k+R)&&N.set(w[x-1-m*2-b],w[m*2+R]);T+=S*8}if(t.drawModeMessage(N,a,E,y),a)t.drawBullsEye(N,je.truncDivision(E,2),5);else{t.drawBullsEye(N,je.truncDivision(E,2),7);for(var m=0,b=0;m<je.truncDivision(x,2)-1;m+=15,b+=16)for(var R=je.truncDivision(E,2)&1;R<E;R+=2)N.set(je.truncDivision(E,2)-b,R),N.set(je.truncDivision(E,2)+b,R),N.set(R,je.truncDivision(E,2)-b),N.set(R,je.truncDivision(E,2)+b)}var P=new PX;return P.setCompact(a),P.setSize(E),P.setLayers(l),P.setCodeWords(v),P.setMatrix(N),P},t.drawBullsEye=function(e,n,r){for(var i=0;i<r;i+=2)for(var o=n-i;o<=n+i;o++)e.set(o,n-i),e.set(o,n+i),e.set(n-i,o),e.set(n+i,o);e.set(n-r,n-r),e.set(n-r+1,n-r),e.set(n-r,n-r+1),e.set(n+r,n-r),e.set(n+r,n-r+1),e.set(n+r,n+r-1)},t.generateModeMessage=function(e,n,r){var i=new on;return e?(i.appendBits(n-1,2),i.appendBits(r-1,6),i=t.generateCheckWords(i,28,4)):(i.appendBits(n-1,5),i.appendBits(r-1,11),i=t.generateCheckWords(i,40,4)),i},t.drawModeMessage=function(e,n,r,i){var o=je.truncDivision(r,2);if(n)for(var s=0;s<7;s++){var a=o-3+s;i.get(s)&&e.set(a,o-5),i.get(s+7)&&e.set(o+5,a),i.get(20-s)&&e.set(a,o+5),i.get(27-s)&&e.set(o-5,a)}else for(var s=0;s<10;s++){var a=o-5+s+je.truncDivision(s,5);i.get(s)&&e.set(a,o-7),i.get(s+10)&&e.set(o+7,a),i.get(29-s)&&e.set(a,o+7),i.get(39-s)&&e.set(o-7,a)}},t.generateCheckWords=function(e,n,r){var i,o,s=e.getSize()/r,a=new MP(t.getGF(r)),l=je.truncDivision(n,r),u=t.bitsToWords(e,r,l);a.encode(u,l-s);var d=n%r,f=new on;f.appendBits(0,d);try{for(var h=WX(Array.from(u)),m=h.next();!m.done;m=h.next()){var g=m.value;f.appendBits(g,r)}}catch(v){i={error:v}}finally{try{m&&!m.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}return f},t.bitsToWords=function(e,n,r){var i=new Int32Array(r),o,s;for(o=0,s=e.getSize()/n;o<s;o++){for(var a=0,l=0;l<n;l++)a|=e.get(o*n+l)?1<<n-l-1:0;i[o]=a}return i},t.getGF=function(e){switch(e){case 4:return rr.AZTEC_PARAM;case 6:return rr.AZTEC_DATA_6;case 8:return rr.AZTEC_DATA_8;case 10:return rr.AZTEC_DATA_10;case 12:return rr.AZTEC_DATA_12;default:throw new _e("Unsupported word size "+e)}},t.stuffBits=function(e,n){for(var r=new on,i=e.getSize(),o=(1<<n)-2,s=0;s<i;s+=n){for(var a=0,l=0;l<n;l++)(s+l>=i||e.get(s+l))&&(a|=1<<n-1-l);(a&o)===o?(r.appendBits(a&o,n),s--):a&o?r.appendBits(a,n):(r.appendBits(a|1,n),s--)}return r},t.totalBitsInLayer=function(e,n){return((n?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t})();const GX=({isOpen:t,onClose:e,onScan:n})=>{const r=C.useRef(null),[i,o]=C.useState(null),s=C.useRef(null);C.useEffect(()=>(s.current=new qK,t?a():l(),()=>{l()}),[t]);const a=async()=>{if(!(!r.current||!s.current))try{o(null),await s.current.decodeFromVideoDevice(null,r.current,(d,f)=>{d&&(console.log("Barcode found:",d.getText()),n(d.getText()),e()),f&&!(f instanceof Q)&&(console.error("Barcode scan error:",f),o("An error occurred while scanning."))})}catch(d){console.error("Error starting camera:",d),d.name==="NotAllowedError"||d.name==="PermissionDeniedError"?o("Camera permission denied. Please allow camera access in your browser settings."):o("Failed to access camera. Please ensure it is not in use by another application.")}},l=()=>{s.current&&s.current.reset()},u=()=>{const d=prompt("Enter barcode manually:");d&&(n(d),e())};return t?c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Scan Barcode"}),c.jsx("button",{className:"text-gray-400 hover:text-gray-600",onClick:e,children:c.jsx("i",{className:"material-icons",children:"close"})})]}),c.jsxs("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden mb-4 relative",children:[c.jsx("video",{ref:r,className:"w-full h-full object-cover"}),i&&c.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white bg-opacity-80",children:c.jsxs("div",{className:"text-center p-4",children:[c.jsx("i",{className:"material-icons text-4xl text-red-400 mb-2",children:"error"}),c.jsx("p",{className:"text-red-600 text-sm",children:i})]})})]}),c.jsx("div",{className:"flex justify-center",children:c.jsxs("button",{className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg flex items-center transition-colors",onClick:u,children:[c.jsx("i",{className:"material-icons text-sm mr-1",children:"keyboard"}),"Manual Input"]})})]})})}):null},qX=({isOpen:t,title:e,message:n,type:r,onConfirm:i,onCancel:o})=>{if(!t)return null;const s=()=>{switch(r){case"error":return"error";case"confirm":return"help";default:return"info"}},a=()=>{switch(r){case"error":return"bg-red-600 hover:bg-red-700";case"confirm":return"bg-orange-600 hover:bg-orange-700";default:return"bg-blue-600 hover:bg-blue-700"}};return c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center mb-4",children:[c.jsx("i",{className:`material-icons text-2xl mr-3 ${r==="error"?"text-red-500":r==="confirm"?"text-orange-500":"text-blue-500"}`,children:s()}),c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e})]}),c.jsx("p",{className:"text-gray-600 mb-6",children:n}),c.jsxs("div",{className:"flex justify-end space-x-3",children:[c.jsx("button",{className:"px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-lg transition-colors",onClick:o,children:r==="confirm"?"Cancel":"Close"}),(r==="confirm"||r==="error")&&i&&c.jsx("button",{className:`px-4 py-2 text-white rounded-lg transition-colors ${a()}`,onClick:i,children:r==="confirm"?"Confirm":"OK"})]})]})})})},KX=({materials:t,value:e,onChange:n,placeholder:r="Search materials...",type:i})=>{const[o,s]=C.useState(!1),[a,l]=C.useState(""),[u,d]=C.useState([]),f=C.useRef(null),h=C.useRef(null);C.useEffect(()=>{console.log(`Filtering materials: Total=${t.length}, Type=${i}`);const x=t.filter(w=>w.type===i);if(console.log(`${i} materials found:`,x.length),a.trim()){const w=x.filter(E=>E.name.toLowerCase().includes(a.toLowerCase())||(E.supplier||"").toLowerCase().includes(a.toLowerCase())).slice(0,50);d(w),console.log(`Search "${a}" found ${w.length} ${i} materials`)}else{const w=x.slice(0,100);d(w),console.log(`Showing ${w.length} ${i} materials without search`)}},[t,a,i]),C.useEffect(()=>{const x=w=>{f.current&&!f.current.contains(w.target)&&s(!1)};return document.addEventListener("mousedown",x),()=>document.removeEventListener("mousedown",x)},[]);const m=x=>{const w=x.target.value;l(w),n(null,w),s(!0)},g=x=>{l(x.name),s(!1),n(x,x.name)},v=()=>{s(!0),l(e||"")},y=x=>{x.key==="Escape"?s(!1):x.key==="ArrowDown"&&!o&&s(!0)};return c.jsxs("div",{className:"relative",ref:f,children:[c.jsx("input",{ref:h,type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent text-sm",placeholder:r,value:o?a:e||"",onChange:m,onFocus:v,onKeyDown:y,autoComplete:"off"}),c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none",children:c.jsx("i",{className:"material-icons text-gray-400 text-sm",children:o?"expand_less":"search"})}),o&&c.jsxs("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[a&&u.length===0&&c.jsx("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No materials found. You can type a custom material name."}),u.length>0&&c.jsxs(c.Fragment,{children:[a&&c.jsxs("div",{className:"px-3 py-1 text-xs text-gray-400 border-b border-gray-100",children:[u.length," results found"]}),u.map((x,w)=>c.jsx("div",{className:"px-3 py-2 hover:bg-blue-50 cursor-pointer border-b border-gray-50 last:border-b-0",onClick:()=>g(x),children:c.jsxs("div",{className:"flex justify-between items-start",children:[c.jsxs("div",{className:"flex-1 min-w-0",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:x.name}),x.supplier&&c.jsx("div",{className:"text-xs text-gray-500 truncate",children:x.supplier})]}),c.jsxs("div",{className:"ml-2 text-xs text-green-600 font-medium flex-shrink-0",children:["₹",x.rate.toFixed(2)]})]})},`${x.id}_${w}`)),!a&&t.filter(x=>x.type===i).length>100&&c.jsxs("div",{className:"px-3 py-2 text-xs text-gray-400 bg-gray-50",children:["Type to search more materials... (",t.filter(x=>x.type===i).length," total available)"]})]})]})]})},XX=({rug:t,onSave:e,onReset:n,onBack:r})=>{var z;const{materials:i,loading:o}=oG(),{buyers:s,isLoading:a}=sG(),[l,u]=C.useState("unfinished"),[d,f]=C.useState(!1),[h,m]=C.useState(!1),[g,v]=C.useState({show:!1,type:"",title:"",message:""}),[y,x]=C.useState({designName:"",construction:"",quality:"",color:"",primaryColor:"",secondaryColor:"",selectedColors:[],orderType:"",buyerName:"",opsNo:"",carpetNo:"",finishedGSM:0,unfinishedGSM:0,size:"",typeOfDyeing:"",contractorType:"contractor",contractorName:"",weaverName:"",submittedBy:"",washingContractor:"",hasWashing:"no",warpIn6Inches:void 0,weftIn6Inches:void 0,pileHeightMM:void 0,totalThicknessMM:void 0,edgeLongerSide:void 0,edgeShortSide:void 0,fringesHemLength:"",fringesHemMaterial:"",shadeCardNo:"",materials:[],weavingCost:0,finishingCost:0,packingCost:125,overheadPercentage:5,profitPercentage:0,processFlow:[],images:{},totalMaterialCost:0,totalDirectCost:0,finalCostPSM:0,area:0,unit:"PSM",currency:"INR",exchangeRate:83});C.useEffect(()=>{if(t){const D={...t,selectedColors:t.color?t.color.split(" + "):[],shadeCardNo:t.shadeCardNo||"",materials:(t.materials||[]).map(B=>({...B,handSpinningCost:B.handSpinningCost||0,isDyed:B.isDyed||!1,hasHandSpinning:B.hasHandSpinning||!1,plyCount:B.plyCount||void 0}))};x(D)}},[t]),C.useEffect(()=>{w()},[y.materials,y.weavingCost,y.finishingCost,y.packingCost,y.overheadPercentage,y.profitPercentage,y.size,y.finishedGSM,y.unit,y.currency,y.exchangeRate]);const w=()=>{let B=(y.materials||[]).reduce((Te,Je)=>Te+Je.costPerSqM,0),$=y.weavingCost||0,V=y.finishingCost||0,Y=y.packingCost||0;const re=y.unit==="PSF"?10.764:1;y.unit==="PSF"&&($=$*re,V=V*re,Y=Y*re);const ie=B+$+V+Y,te=ie*(y.overheadPercentage||0)/100,de=ie+te,be=de*(y.profitPercentage||0)/100;let we=de+be;y.currency==="USD"&&(we=we/(y.exchangeRate||83),B=B/(y.exchangeRate||83),ie/(y.exchangeRate||83));const Ie=E(y.size||"");x(Te=>({...Te,totalMaterialCost:B,totalDirectCost:ie,finalCostPSM:we,area:Ie}))},E=D=>{const B=D.match(/(\d+\.?\d*)\s*x\s*(\d+\.?\d*)/);if(B){const $=parseFloat(B[1]),V=parseFloat(B[2]);return $*V*.092903}return 0},A=(D,B)=>{x($=>({...$,[D]:B})),D==="construction"&&x($=>({...$,quality:""}))},O=()=>y.construction?rG[y.construction]||[]:[],j=()=>{const D={id:Date.now().toString(),name:"",type:"warp",consumption:0,rate:0,dyeingCost:0,handSpinningCost:0,costPerSqM:0,plyCount:void 0};x(B=>({...B,materials:[...B.materials||[],D]}))},N=(D,B,$)=>{const V=[...y.materials||[]];V[D]={...V[D],[B]:$};const Y=V[D].rate||0,re=V[D].dyeingCost||0,ie=V[D].handSpinningCost||0,te=V[D].consumption||0;V[D].costPerSqM=te*(Y+re+ie),x(de=>({...de,materials:V}))},T=D=>{const B=[...y.materials||[]];B.splice(D,1),x($=>({...$,materials:B}))},S=(D,B)=>{if(D&&D.rate!==void 0){const $=[...y.materials||[]];console.log("Auto-filling material rates:",{materialName:D.name,rate:D.rate,supplier:D.supplier,type:D.type}),$[B]={...$[B],name:D.name,type:D.type,rate:D.rate,dyeingCost:0,handSpinningCost:0};const V=$[B].consumption||0,Y=D.rate||0,re=$[B].dyeingCost||0,ie=$[B].handSpinningCost||0;$[B].costPerSqM=V*(Y+re+ie),console.log("Material updated:",$[B]),x(te=>({...te,materials:$}))}},b=(D,B)=>{const $=[...y.processFlow||[]],V=$.findIndex(Y=>Y.process===D);B===0?V>=0&&$.splice(V,1):V>=0?$[V].step=B:$.push({process:D,step:B}),x(Y=>({...Y,processFlow:$}))},k=(D,B=200)=>new Promise(($,V)=>{const Y=document.createElement("canvas"),re=Y.getContext("2d"),ie=new Image;ie.onload=()=>{let{width:be,height:we}=ie;be>we?be>400&&(we=we*400/be,be=400):we>300&&(be=be*300/we,we=300),Y.width=be,Y.height=we,re==null||re.drawImage(ie,0,0,be,we);let Ie=.7,Te=0;const Je=10,_t=()=>{const fe=Y.toDataURL("image/jpeg",Ie),Zt=fe.length*3/4/1024;console.log(`Compression attempt ${Te+1}: ${Math.round(Zt)}KB at quality ${Ie.toFixed(2)}`),Zt<=B||Te>=Je||Ie<=.1?(console.log(`Final compression: ${Math.round(Zt)}KB`),$(fe)):(Ie=Math.max(.1,Ie*.8),Te++,_t())};_t()},ie.onerror=()=>V(new Error("Failed to load image")),ie.src=URL.createObjectURL(D)}),R=async(D,B)=>{try{if(console.log(`Uploading ${D}:`,B.name,B.size),!B.type.startsWith("image/")){Lt({title:"Invalid File Type",description:"Please select a valid image file (JPG, PNG, GIF, etc.)",variant:"destructive"});return}Lt({title:"Processing Image",description:"Uploading and processing image..."});try{console.log(`🔄 Starting compression for ${D}:`,B.name,`(${Math.round(B.size/1024)}KB)`);const $=await k(B,200),V=Math.round($.length*3/4/1024);if(console.log(`✅ Compressed ${D} from ${Math.round(B.size/1024)}KB to ${V}KB`),V>200){Lt({title:"Compression Failed",description:`Unable to compress ${D} under 200KB (current: ${V}KB). Please use a smaller image.`,variant:"destructive"});return}x(Y=>{const re={...Y.images,[D]:$};return console.log(`🖼️ Updated formData.images for ${D}: ${V}KB`),{...Y,images:re}}),Lt({title:"✅ Image Ready",description:`${D} compressed to ${V}KB and ready to save.`})}catch($){if(console.warn("Compression failed, using direct upload:",$),B.size>10*1024*1024){Lt({title:"File Too Large",description:"Image size must be less than 10MB. Please choose a smaller file.",variant:"destructive"});return}const V=new FileReader;V.onload=Y=>{var ie;const re=(ie=Y.target)==null?void 0:ie.result;re&&(console.log(`Direct upload ${D}:`,Math.round(re.length/1024),"KB"),x(te=>{const de={...te.images,[D]:re};return console.log(`Updated formData.images for ${D} (direct):`,!!de[D]),{...te,images:de}}),Lt({title:"Image Uploaded",description:`${D} uploaded successfully.`}))},V.onerror=()=>{Lt({title:"Upload Failed",description:"Failed to read the image file. Please try again.",variant:"destructive"})},V.readAsDataURL(B)}}catch($){console.error("Error uploading image:",$),Lt({title:"Upload Error",description:"An unexpected error occurred. Please try again.",variant:"destructive"})}},P=D=>{try{const B=document.createElement("input");B.type="file",B.accept="image/*",B.capture="environment",B.onchange=$=>{var V;try{const Y=(V=$.target.files)==null?void 0:V[0];Y?R(D,Y):console.log("No file selected from camera")}catch(Y){console.error("Error handling camera capture:",Y),Lt({title:"Camera Error",description:"Failed to capture image from camera. Please try again.",variant:"destructive"})}},B.onerror=()=>{Lt({title:"Camera Error",description:"Failed to access camera. Please check camera permissions.",variant:"destructive"})},B.click()}catch(B){console.error("Error opening camera:",B),Lt({title:"Camera Error",description:"Failed to open camera. Please try the upload option instead.",variant:"destructive"})}},G=D=>{try{console.log(`Deleting image: ${D}`),x(B=>{const $={...B.images};return delete $[D],console.log(`Deleted ${D}, remaining images:`,Object.keys($)),{...B,images:$}}),Lt({title:"Image Deleted",description:`${D} has been successfully removed.`})}catch(B){console.error("Error deleting image:",B),Lt({title:"Delete Error",description:"Failed to delete the image. Please try again.",variant:"destructive"})}},K=()=>{var B,$,V;const D=[];return(B=y.designName)!=null&&B.trim()||D.push("Design Name is required"),y.construction||D.push("Construction is required"),($=y.carpetNo)!=null&&$.trim()||D.push("Carpet Number is required"),(V=y.size)!=null&&V.trim()||D.push("Size is required"),D},X=async()=>{const D=K();if(D.length>0){v({show:!0,type:"error",title:"Validation Error",message:`Please correct the following errors:
• ${D.join(`
• `)}`});return}m(!0),Lt({title:"Saving rug...",description:"Your rug is being saved and will appear in the gallery momentarily."});try{const B={...y,...(t==null?void 0:t.id)&&{id:t.id},images:y.images||{}};console.log("Saving rug data:",{isEdit:!!(t!=null&&t.id),rugId:t==null?void 0:t.id,saveData:B}),await e(B),Lt({title:"Success!",description:t!=null&&t.id?"Rug updated successfully!":"Rug saved successfully and is now available in the gallery."})}catch(B){console.error("Error saving rug:",B);const $=B instanceof Error?B.message:"Unknown error occurred";Lt({title:"Error",description:`Failed to ${t!=null&&t.id?"update":"save"} rug. Please try again. ${$}`,variant:"destructive"})}finally{m(!1)}},ee=async()=>{try{const{jsPDF:D}=await vb(async()=>{const{jsPDF:fe}=await import("./jspdf.es.min-CigGQXUt.js").then(Zt=>Zt.j);return{jsPDF:fe}},[]),B=await vb(()=>import("./browser-BXdiCFWD.js").then(fe=>fe.b),[]),$=new D("landscape","mm",[101.6,76.2]),V=await B.toDataURL(y.shadeCardNo||"No Shade Card",{width:256,margin:1,color:{dark:"#000000",light:"#FFFFFF"}}),Y=101.6,re=76.2,ie=0,te=0;$.setLineWidth(.5),$.rect(ie,te,Y,re),$.setFontSize(14),$.setFont("helvetica","bold"),$.text("SHADE CARD",ie+5,te+12),$.setFontSize(8),$.setFont("helvetica","normal");let de=te+22;y.shadeCardNo&&($.text(`Shade Card No.: ${y.shadeCardNo}`,ie+5,de),de+=6),y.designName&&($.text(`Design: ${y.designName}`,ie+5,de),de+=6),y.construction&&($.text(`Construction: ${y.construction}`,ie+5,de),de+=6),y.quality&&($.text(`Quality: ${y.quality}`,ie+5,de),de+=6),y.carpetNo&&($.text(`Carpet No.: ${y.carpetNo}`,ie+5,de),de+=6),y.unfinishedGSM&&($.text(`Unfinished GSM: ${y.unfinishedGSM}`,ie+5,de),de+=6),y.finishedGSM&&($.text(`Finished GSM: ${y.finishedGSM}`,ie+5,de),de+=6),$.text(`Date: ${new Date().toLocaleDateString()}`,ie+5,de);const be=25;$.addImage(V,"PNG",ie+Y-be-5,te+8,be,be),$.setFontSize(7);const we=y.shadeCardNo||"";we&&$.text(we,ie+Y-be-5+be/2,te+8+be+4,{align:"center"});const Ie=`shade-card-${y.shadeCardNo||"label"}.pdf`;$.save(Ie);const Te=$.output("blob"),Je=URL.createObjectURL(Te),_t=window.open(Je);_t&&(_t.onload=()=>{_t.print()},setTimeout(()=>URL.revokeObjectURL(Je),1e3)),Lt({title:"Success",description:"Shade card label generated and ready to print!"})}catch(D){console.error("Error generating shade card label:",D),Lt({title:"Error",description:"Failed to generate shade card label",variant:"destructive"})}},F=({tab:D,icon:B,label:$,shortLabel:V})=>c.jsxs("button",{type:"button",className:`flex items-center px-3 sm:px-4 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap flex-shrink-0 ${l===D?"border-blue-600 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,onClick:()=>u(D),children:[c.jsx("i",{className:"material-icons text-sm mr-1 sm:mr-2",children:B}),c.jsx("span",{className:"hidden sm:inline",children:$}),c.jsx("span",{className:"sm:hidden",children:V||$})]});return c.jsxs("div",{className:"bg-white rounded-lg shadow-md",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center p-4 sm:p-6 border-b border-gray-200",children:[c.jsxs("div",{className:"flex items-center gap-4 mb-4 sm:mb-0",children:[r&&c.jsxs("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-lg flex items-center transition-colors",onClick:r,children:[c.jsx("i",{className:"material-icons text-sm mr-1",children:"arrow_back"}),c.jsx("span",{className:"hidden sm:inline",children:"Back"})]}),c.jsx("h2",{className:"text-lg sm:text-xl font-medium text-gray-900",children:t?"Edit Rug":"Create New Rug"})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[c.jsxs("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center justify-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:X,disabled:h,children:[c.jsx("i",{className:`material-icons text-sm mr-1 ${h?"animate-spin":""}`,children:h?"refresh":"save"}),h?"Saving...":"Save Rug"]}),c.jsxs("button",{className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg flex items-center justify-center transition-colors",onClick:n,children:[c.jsx("i",{className:"material-icons text-sm mr-1",children:"refresh"}),"Reset Form"]})]})]}),c.jsx("div",{className:"border-b border-gray-200",children:c.jsxs("nav",{className:"flex overflow-x-auto",children:[c.jsx(F,{tab:"unfinished",icon:"info",label:"Unfinished Details",shortLabel:"Unfinished"}),c.jsx(F,{tab:"materials",icon:"inventory",label:"Materials & Costing",shortLabel:"Materials"}),c.jsx(F,{tab:"finishing",icon:"timeline",label:"Finishing Details",shortLabel:"Finishing"}),c.jsx(F,{tab:"images",icon:"photo_library",label:"Photo Studio",shortLabel:"Studio"})]})}),c.jsxs("div",{className:"p-4 sm:p-6",children:[(o||a)&&c.jsx("div",{className:"fixed inset-0 bg-white/80 flex items-center justify-center z-50",children:c.jsxs("div",{className:"text-center bg-white p-6 rounded-lg shadow-lg",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),c.jsx("p",{className:"text-gray-600",children:"Loading form data..."})]})}),l==="unfinished"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Design Name *"}),c.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"Enter design name",value:y.designName||"",onChange:D=>A("designName",D.target.value),required:!0})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Construction *"}),c.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",value:y.construction||"",onChange:D=>A("construction",D.target.value),required:!0,children:[c.jsx("option",{value:"",children:"Select Construction"}),ZW.map(D=>c.jsx("option",{value:D,children:D},D))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quality *"}),y.construction?c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",list:`quality-options-${y.construction}`,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:`Enter or select ${y.construction} quality`,value:y.quality||"",onChange:D=>A("quality",D.target.value),required:!0}),c.jsx("datalist",{id:`quality-options-${y.construction}`,children:O().map(D=>c.jsx("option",{value:D},D))})]}):c.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent bg-gray-100 text-gray-500",placeholder:"Select Construction First",disabled:!0})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color Selection (Select up to 3)"}),y.selectedColors&&y.selectedColors.length>0&&c.jsxs("div",{className:"mb-3 p-3 bg-gray-50 rounded-lg",children:[c.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Selected Colors:"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:y.selectedColors.map((D,B)=>{const $=yb.find(V=>V.name===D);return c.jsxs("div",{className:"flex items-center gap-1 bg-white px-2 py-1 rounded border",children:[c.jsx("div",{className:"w-4 h-4 rounded border border-gray-300",style:{backgroundColor:($==null?void 0:$.hex)||"#CCCCCC"}}),c.jsx("span",{className:"text-xs",children:D}),c.jsx("button",{type:"button",onClick:()=>{var Y;const V=((Y=y.selectedColors)==null?void 0:Y.filter((re,ie)=>ie!==B))||[];x(re=>({...re,selectedColors:V})),A("color",V.join(" + "))},className:"text-red-500 hover:text-red-700 ml-1",children:"×"})]},B)})})]}),c.jsx("div",{className:"grid grid-cols-5 gap-2 mb-3",children:yb.map(D=>{var V,Y;const B=(V=y.selectedColors)==null?void 0:V.includes(D.name),$=!B&&(((Y=y.selectedColors)==null?void 0:Y.length)||0)<3;return c.jsxs("button",{type:"button",onClick:()=>{var re;if(B){const ie=((re=y.selectedColors)==null?void 0:re.filter(te=>te!==D.name))||[];x(te=>({...te,selectedColors:ie})),A("color",ie.join(" + "))}else if($){const ie=[...y.selectedColors||[],D.name];x(te=>({...te,selectedColors:ie})),A("color",ie.join(" + "))}},disabled:!B&&!$,className:`flex flex-col items-center gap-1 p-2 rounded-lg border-2 transition-all ${B?"border-blue-500 bg-blue-50 text-blue-700":$?"border-gray-200 bg-white hover:border-gray-300 hover:bg-gray-50":"border-gray-100 bg-gray-50 text-gray-400 cursor-not-allowed"}`,children:[c.jsx("div",{className:"w-8 h-8 rounded border border-gray-300 relative",style:{backgroundColor:D.hex},children:B&&c.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 bg-blue-500 text-white rounded-full flex items-center justify-center text-xs",children:"✓"})}),c.jsx("span",{className:"text-xs text-center",children:D.name})]},D.name)})}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Add Custom Color"}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("input",{type:"text",placeholder:"Enter color name",className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onKeyDown:D=>{var B;if(D.key==="Enter"){D.preventDefault();const $=D.target.value.trim();if($&&(((B=y.selectedColors)==null?void 0:B.length)||0)<3){const V=[...y.selectedColors||[],$];x(Y=>({...Y,selectedColors:V})),A("color",V.join(" + ")),D.target.value=""}}}}),c.jsx("button",{type:"button",onClick:D=>{var V;const B=D.target.previousElementSibling,$=B.value.trim();if($&&(((V=y.selectedColors)==null?void 0:V.length)||0)<3){const Y=[...y.selectedColors||[],$];x(re=>({...re,selectedColors:Y})),A("color",Y.join(" + ")),B.value=""}},disabled:(((z=y.selectedColors)==null?void 0:z.length)||0)>=3,className:"px-3 py-1 text-sm bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Add"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Type"}),c.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",value:y.orderType||"",onChange:D=>A("orderType",D.target.value),children:[c.jsx("option",{value:"",children:"Select Order Type"}),JW.map(D=>c.jsx("option",{value:D,children:D},D))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Buyer Name"}),a?c.jsx("div",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-500",children:"Loading buyers..."}):c.jsxs("div",{className:"relative",children:[c.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent appearance-none bg-white",value:y.buyerName||"",onChange:D=>{if(D.target.value==="__custom__"){const B=prompt("Enter custom buyer name:");B&&A("buyerName",B)}else A("buyerName",D.target.value)},children:[c.jsx("option",{value:"",children:"Select a buyer or enter custom"}),Array.isArray(s)&&s.map(D=>c.jsxs("option",{value:D.buyerName,children:[D.buyerName," (",D.buyerCode,")"]},D.id)),c.jsx("option",{value:"__custom__",children:"+ Enter Custom Buyer Name"})]}),c.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none",children:c.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),y.buyerName&&Array.isArray(s)&&!s.find(D=>D.buyerName===y.buyerName)&&c.jsxs("p",{className:"text-sm text-blue-600 mt-1",children:["Custom buyer: ",y.buyerName]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"OPS No."}),c.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"Enter OPS number",value:y.opsNo||"",onChange:D=>A("opsNo",D.target.value)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Carpet No. (Barcode) *"}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsx("input",{type:"text",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"Enter or scan carpet number",value:y.carpetNo||"",onChange:D=>A("carpetNo",D.target.value),required:!0}),c.jsx("button",{type:"button",className:"bg-orange-600 hover:bg-orange-700 text-white px-3 py-2 rounded-lg flex items-center transition-colors",onClick:()=>f(!0),children:c.jsx("i",{className:"material-icons text-sm",children:"qr_code_scanner"})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Size"}),c.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"e.g., 8x10 ft or 2x3 m",value:y.size||"",onChange:D=>A("size",D.target.value)}),y.area&&y.area>0&&c.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Area: ",y.area.toFixed(2)," sq m"]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shade Card No."}),c.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"Enter shade card number",value:y.shadeCardNo||"",onChange:D=>A("shadeCardNo",D.target.value)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unfinished GSM"}),c.jsx("input",{type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"Enter unfinished GSM",value:y.unfinishedGSM||"",onChange:D=>A("unfinishedGSM",parseFloat(D.target.value)||0)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contractor Type"}),c.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",value:y.contractorType||"contractor",onChange:D=>A("contractorType",D.target.value),children:[c.jsx("option",{value:"contractor",children:"Contractor"}),c.jsx("option",{value:"inhouse",children:"Inhouse"})]})]}),y.contractorType==="contractor"?c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contractor Name"}),c.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"Enter contractor name",value:y.contractorName||"",onChange:D=>A("contractorName",D.target.value)})]}):c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weaver Name"}),c.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"Enter weaver name",value:y.weaverName||"",onChange:D=>A("weaverName",D.target.value)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Submitted By"}),c.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"Enter submitter name",value:y.submittedBy||"",onChange:D=>A("submittedBy",D.target.value)})]})]}),c.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[c.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Washing Required?"}),c.jsxs("div",{className:"flex space-x-4",children:[c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",name:"hasWashing",value:"yes",checked:y.hasWashing==="yes",onChange:D=>A("hasWashing",D.target.value),className:"mr-2"}),"Yes"]}),c.jsxs("label",{className:"flex items-center",children:[c.jsx("input",{type:"radio",name:"hasWashing",value:"no",checked:y.hasWashing==="no",onChange:D=>A("hasWashing",D.target.value),className:"mr-2"}),"No"]})]})]}),y.hasWashing==="yes"&&c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Washing Contractor"}),c.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"Enter washing contractor name",value:y.washingContractor||"",onChange:D=>A("washingContractor",D.target.value)})]})]}),c.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Photo Documentation"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Upload required photos for this rug. Click on any photo area to select and upload files."}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[{key:"frontPhoto",label:"Front Photo",icon:"photo"},{key:"backWithRuler",label:"Back (With Ruler)",icon:"straighten"},{key:"frontWithMasterHankAndShadeCard",label:"Front with Master Hank and Shade Card",icon:"palette"}].map(({key:D,label:B,icon:$})=>{var V;return c.jsx("div",{className:"bg-white rounded-lg p-4",children:c.jsxs("div",{className:"text-center",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:B}),c.jsx("div",{className:"mb-4 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{var Y;return(Y=document.getElementById(`${D}-input`))==null?void 0:Y.click()},children:(V=y.images)!=null&&V[D]?c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:y.images[D],alt:B,className:"w-full h-32 object-cover rounded-lg border-2 border-dashed border-blue-300 hover:border-blue-500"}),c.jsx("button",{type:"button",onClick:Y=>{Y.stopPropagation(),G(D)},className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm transition-colors",children:"×"})]}):c.jsx("div",{className:"w-full h-32 bg-gray-200 rounded-lg flex items-center justify-center border-2 border-dashed border-gray-300 hover:border-blue-400 hover:bg-gray-100",children:c.jsxs("div",{className:"text-center",children:[c.jsx("i",{className:"material-icons text-gray-400 text-4xl mb-2",children:$}),c.jsx("p",{className:"text-sm text-gray-500",children:"Click to upload/take photo"})]})})}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsxs("button",{type:"button",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm flex items-center justify-center transition-colors",onClick:()=>{var Y;return(Y=document.getElementById(`${D}-input`))==null?void 0:Y.click()},children:[c.jsx("i",{className:"material-icons text-sm mr-1",children:"upload"}),"Upload"]}),c.jsxs("button",{type:"button",className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-lg text-sm flex items-center justify-center transition-colors",onClick:()=>P(D),children:[c.jsx("i",{className:"material-icons text-sm mr-1",children:"camera_alt"}),"Camera"]})]}),c.jsx("input",{id:`${D}-input`,type:"file",accept:"image/*",className:"hidden",onChange:Y=>{var ie;const re=(ie=Y.target.files)==null?void 0:ie[0];re&&R(D,re)}})]})},D)})})]})]}),l==="materials"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Materials"}),c.jsxs("button",{type:"button",className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center transition-colors",onClick:j,children:[c.jsx("i",{className:"material-icons text-sm mr-1",children:"add"}),"Add Material"]})]}),o&&c.jsxs("div",{className:"text-center py-4",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),c.jsx("p",{className:"text-gray-600",children:"Loading materials from database..."})]}),c.jsxs("div",{className:"space-y-4",children:[(y.materials||[]).map((D,B)=>c.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-7 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type"}),c.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",value:D.type||"warp",onChange:$=>{const V=[...y.materials||[]];V[B]={...V[B],type:$.target.value,name:"",rate:0,dyeingCost:0,handSpinningCost:0,isDyed:!1,hasHandSpinning:!1,costPerSqM:0},x(Y=>({...Y,materials:V}))},children:[c.jsx("option",{value:"warp",children:"Warp"}),c.jsx("option",{value:"weft",children:"Weft"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Material"}),c.jsx(KX,{materials:i,value:D.name,type:D.type||"warp",placeholder:`Search ${D.type||"warp"} materials...`,onChange:($,V)=>{$?S($,B):N(B,"name",V||"")}}),D.name&&(()=>{const $=i.find(V=>V.name===D.name);return $!=null&&$.supplier?c.jsxs("p",{className:"text-xs text-gray-400 mt-1 italic",children:["Supplier: ",$.supplier]}):null})()]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"No. of Ply in Weaving"}),c.jsx("input",{type:"number",min:"1",max:"99",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"1",value:D.plyCount||"",onChange:$=>{const V=parseInt($.target.value)||void 0;N(B,"plyCount",V)}})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GSM (With Loss)"}),c.jsx("input",{type:"number",step:"0.001",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"0.000",value:D.consumption||"",onChange:$=>{const V=$.target.value,Y=V===""?0:parseFloat(V);N(B,"consumption",Y)}})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rate (per KG)"}),c.jsx("input",{type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"0.00",value:D.rate||"",onChange:$=>N(B,"rate",parseFloat($.target.value)||0)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dyeing Cost (per KG)"}),c.jsx("input",{type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"0.00",value:D.dyeingCost||"",onChange:$=>N(B,"dyeingCost",parseFloat($.target.value)||0)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type of Dyeing"}),c.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",value:y.typeOfDyeing||"",onChange:$=>A("typeOfDyeing",$.target.value),children:[c.jsx("option",{value:"",children:"Select Dyeing Type"}),eG.map($=>c.jsx("option",{value:$,children:$},$))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hand Spinning Cost (per KG)"}),c.jsx("input",{type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"0.00",value:D.handSpinningCost||"",onChange:$=>N(B,"handSpinningCost",parseFloat($.target.value)||0)})]}),c.jsxs("div",{className:"flex flex-col justify-between",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cost per SqM"}),c.jsxs("div",{className:"flex items-center space-x-2",children:[c.jsxs("div",{className:"flex-1 px-3 py-2 bg-gray-100 border border-gray-300 rounded-lg text-gray-700",children:["₹",D.costPerSqM.toFixed(2)]}),c.jsx("button",{type:"button",className:"text-red-600 hover:text-red-700 p-2",onClick:()=>T(B),children:c.jsx("i",{className:"material-icons text-sm",children:"delete"})})]})]})]})},D.id)),(y.materials||[]).length===0&&c.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[c.jsx("i",{className:"material-icons text-4xl text-gray-400 mb-2",children:"inventory"}),c.jsx("p",{className:"text-gray-500",children:'No materials added yet. Click "Add Material" to start.'})]})]})]}),c.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Cost Calculation"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6 bg-white rounded-lg p-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit"}),c.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",value:y.unit||"PSM",onChange:D=>A("unit",D.target.value),children:[c.jsx("option",{value:"PSM",children:"Per Square Meter (PSM)"}),c.jsx("option",{value:"PSF",children:"Per Square Foot (PSF)"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),c.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",value:y.currency||"INR",onChange:D=>A("currency",D.target.value),children:[c.jsx("option",{value:"INR",children:"Indian Rupee (₹)"}),c.jsx("option",{value:"USD",children:"US Dollar ($)"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Exchange Rate (INR to USD)"}),c.jsx("input",{type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"83.00",value:y.exchangeRate||"",onChange:D=>A("exchangeRate",parseFloat(D.target.value)||83)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Overhead %"}),c.jsx("input",{type:"number",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"5.0",value:y.overheadPercentage||"",onChange:D=>A("overheadPercentage",parseFloat(D.target.value)||5)})]})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Weaving Cost (per ",y.unit||"SqM",")"]}),c.jsx("input",{type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"0.00",value:y.weavingCost||"",onChange:D=>A("weavingCost",parseFloat(D.target.value)||0)})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Finishing Cost (per ",y.unit||"SqM",")"]}),c.jsx("input",{type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"0.00",value:y.finishingCost||"",onChange:D=>A("finishingCost",parseFloat(D.target.value)||0)})]}),c.jsxs("div",{children:[c.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Packing Cost (per ",y.unit||"SqM",")"]}),c.jsx("input",{type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"0.00",value:y.packingCost||"",onChange:D=>A("packingCost",parseFloat(D.target.value)||0)})]})]}),(y.materials||[]).length>0&&c.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[c.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Material GSM Analysis"}),c.jsxs("div",{className:"space-y-2 text-sm",children:[(y.materials||[]).map((D,B)=>{var $;return D.name&&D.consumption>0&&c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{className:"text-gray-700",children:[D.name," (",D.type,"):"]}),c.jsxs("span",{className:"font-medium text-blue-700",children:[($=D.consumption)==null?void 0:$.toFixed(3)," GSM"]})]},B)}),c.jsx("hr",{className:"border-blue-200"}),c.jsxs("div",{className:"flex justify-between items-center font-semibold",children:[c.jsx("span",{children:"Total GSM:"}),c.jsxs("span",{className:"text-blue-800",children:[(y.materials||[]).reduce((D,B)=>D+(B.consumption||0),0).toFixed(3)," GSM"]})]})]})]}),c.jsxs("div",{className:"bg-white rounded-lg p-4",children:[c.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Cost Summary"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[c.jsxs("div",{children:[c.jsxs("span",{className:"text-gray-600",children:["Material Cost/",y.unit||"SqM",":"]}),c.jsxs("p",{className:"font-medium text-blue-600",children:[y.currency==="USD"?"$":"₹",(Number(y.totalMaterialCost)||0).toFixed(2)]})]}),c.jsxs("div",{children:[c.jsxs("span",{className:"text-gray-600",children:["Total Direct Cost/",y.unit||"SqM",":"]}),c.jsxs("p",{className:"font-medium text-green-600",children:[y.currency==="USD"?"$":"₹",(Number(y.totalDirectCost)||0).toFixed(2)]})]}),c.jsxs("div",{children:[c.jsxs("span",{className:"text-gray-600",children:["Final Cost/",y.unit||"SqM",":"]}),c.jsxs("p",{className:"font-medium text-orange-600",children:[y.currency==="USD"?"$":"₹",(Number(y.finalCostPSM)||0).toFixed(2)]})]})]}),y.unit==="PSF"&&c.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:[c.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-2",children:"Unit Conversion Information"}),c.jsxs("p",{className:"text-xs text-gray-600",children:["1 PSM = 10.764 PSF | Final Cost per PSM:",y.currency==="USD"?"$":"₹",((Number(y.finalCostPSM)||0)*10.764).toFixed(2)]})]}),y.currency==="USD"&&c.jsxs("div",{className:"mt-4 p-3 bg-green-50 rounded-lg",children:[c.jsx("h5",{className:"text-sm font-medium text-gray-900 mb-2",children:"Currency Conversion Information"}),c.jsxs("p",{className:"text-xs text-gray-600",children:["Exchange Rate: 1 USD = ₹",y.exchangeRate||83," | Final Cost in INR: ₹",((Number(y.finalCostPSM)||0)*(y.exchangeRate||83)).toFixed(2)]})]})]})]})]}),l==="finishing"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Specifications"}),c.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Finished GSM"}),c.jsx("input",{type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"Enter finished GSM",value:y.finishedGSM||"",onChange:D=>A("finishedGSM",parseFloat(D.target.value)||0)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pile GSM"}),c.jsx("input",{type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"Enter pile GSM",value:y.pileGSM||"",onChange:D=>A("pileGSM",parseFloat(D.target.value)||0)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Warp in 6 inches"}),c.jsx("input",{type:"number",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"Enter warp count",value:y.warpIn6Inches||"",onChange:D=>A("warpIn6Inches",parseFloat(D.target.value)||void 0)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Weft in 6 inches"}),c.jsx("input",{type:"number",min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"Enter weft count",value:y.weftIn6Inches||"",onChange:D=>A("weftIn6Inches",parseFloat(D.target.value)||void 0)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Pile height in MM"}),c.jsx("input",{type:"number",min:"0",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"Enter pile height",value:y.pileHeightMM||"",onChange:D=>A("pileHeightMM",parseFloat(D.target.value)||void 0)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Total Thickness in MM"}),c.jsx("input",{type:"number",min:"0",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"Enter total thickness",value:y.totalThicknessMM||"",onChange:D=>A("totalThicknessMM",parseFloat(D.target.value)||void 0)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Edge Details - Longer side"}),c.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",value:y.edgeLongerSide||"",onChange:D=>A("edgeLongerSide",D.target.value),children:[c.jsx("option",{value:"",children:"Select edge type"}),tG.map(D=>c.jsx("option",{value:D,children:D},D))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Edge Details - Short side"}),c.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",value:y.edgeShortSide||"",onChange:D=>A("edgeShortSide",D.target.value),children:[c.jsx("option",{value:"",children:"Select edge type"}),nG.map(D=>c.jsx("option",{value:D,children:D},D))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fringes/Hem Length"}),c.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"4 - 5 cm",value:y.fringesHemLength||"",onChange:D=>A("fringesHemLength",D.target.value)})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fringes/Hem Material"}),c.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-600 focus:border-transparent",placeholder:"100% cotton",value:y.fringesHemMaterial||"",onChange:D=>A("fringesHemMaterial",D.target.value)})]})]})]}),c.jsxs("div",{className:"bg-white rounded-lg p-6",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Manufacturing Process Flow"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Click on processes to add them to your workflow. Drag to reorder."}),c.jsxs("div",{className:"mb-6",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Available Processes"}),c.jsx("div",{className:"flex flex-wrap gap-2",children:iG.filter(D=>!(y.processFlow||[]).find(B=>B.process===D)).map(D=>c.jsxs("button",{type:"button",onClick:()=>{const B=(y.processFlow||[]).length+1;b(D,B)},className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-blue-100 hover:text-blue-700 transition-colors text-sm",children:["+ ",D]},D))})]}),(y.processFlow||[]).length>0&&c.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[c.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Your Process Flow"}),c.jsx("div",{className:"space-y-2",children:(y.processFlow||[]).sort((D,B)=>D.step-B.step).map((D,B)=>c.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-3 shadow-sm",children:[c.jsxs("div",{className:"flex items-center space-x-3",children:[c.jsx("span",{className:"bg-blue-600 text-white text-xs font-medium px-2 py-1 rounded-full",children:D.step}),c.jsx("span",{className:"text-gray-900 font-medium",children:D.process})]}),c.jsxs("div",{className:"flex items-center space-x-2",children:[B>0&&c.jsx("button",{type:"button",onClick:()=>{const $=[...y.processFlow||[]],V=$.find(re=>re.process===D.process),Y=$.find(re=>re.step===D.step-1);V&&Y&&(V.step=D.step-1,Y.step=D.step,x(re=>({...re,processFlow:$})))},className:"text-gray-400 hover:text-blue-600 text-sm",children:"↑"}),B<(y.processFlow||[]).length-1&&c.jsx("button",{type:"button",onClick:()=>{const $=[...y.processFlow||[]],V=$.find(re=>re.process===D.process),Y=$.find(re=>re.step===D.step+1);V&&Y&&(V.step=D.step+1,Y.step=D.step,x(re=>({...re,processFlow:$})))},className:"text-gray-400 hover:text-blue-600 text-sm",children:"↓"}),c.jsx("button",{type:"button",onClick:()=>b(D.process,0),className:"text-red-400 hover:text-red-600 text-sm",children:"✕"})]})]},B))})]}),(y.processFlow||[]).length===0&&c.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg",children:[c.jsx("i",{className:"material-icons text-4xl text-gray-400 mb-2",children:"timeline"}),c.jsx("p",{className:"text-gray-500",children:"No processes selected. Click on processes above to build your workflow."})]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-6 border-t border-gray-200",children:[c.jsxs("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center justify-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:X,disabled:h,children:[c.jsx("i",{className:`material-icons text-sm mr-1 ${h?"animate-spin":""}`,children:h?"refresh":"save"}),h?"Saving...":"Save Rug"]}),c.jsxs("button",{className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center justify-center transition-colors",onClick:ee,type:"button",children:[c.jsx("i",{className:"material-icons text-sm mr-1",children:"local_offer"}),"Shade Card Label"]})]})]}),l==="images"&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Photo Studio"}),c.jsx("p",{className:"text-gray-600",children:"Upload additional rug images for documentation. Click on any photo area to select and upload files."}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 sm:gap-6",children:[{key:"rugImage1",label:"Rug Image 1",icon:"photo"},{key:"rugImage2",label:"Rug Image 2",icon:"photo"},{key:"rugImage3",label:"Rug Image 3",icon:"photo"},{key:"rugImage4",label:"Rug Image 4",icon:"photo"},{key:"rugImage5",label:"Rug Image 5",icon:"photo"}].map(({key:D,label:B,icon:$})=>{var re;const V=(re=y.images)==null?void 0:re[D],Y=V;return c.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border",children:c.jsxs("div",{className:"text-center",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:B}),c.jsx("div",{className:"mb-4 cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>{var ie;return(ie=document.getElementById(`${D}-studio-input`))==null?void 0:ie.click()},children:V?c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:Y,alt:B,className:"w-full h-32 object-cover rounded-lg border-2 border-solid border-green-400",onLoad:()=>console.log(`Image loaded successfully: ${D}`),onError:ie=>console.error(`Image load error for ${D}:`,ie)}),c.jsx("button",{type:"button",onClick:ie=>{ie.stopPropagation(),G(D)},className:"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm transition-colors shadow-lg",children:"×"}),c.jsx("div",{className:"absolute bottom-1 left-1 bg-green-500 text-white text-xs px-1 rounded",children:"✓"})]}):c.jsx("div",{className:"w-full h-32 bg-gray-200 rounded-lg flex items-center justify-center border-2 border-dashed border-gray-300 hover:border-blue-400 hover:bg-gray-100 transition-colors",children:c.jsxs("div",{className:"text-center",children:[c.jsx("i",{className:"material-icons text-gray-400 text-4xl mb-2",children:$}),c.jsx("p",{className:"text-sm text-gray-500",children:"Click to upload/take photo"})]})})}),c.jsxs("div",{className:"flex space-x-2",children:[c.jsxs("button",{type:"button",className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-lg text-sm flex items-center justify-center transition-colors",onClick:()=>{var ie;return(ie=document.getElementById(`${D}-studio-input`))==null?void 0:ie.click()},children:[c.jsx("i",{className:"material-icons text-sm mr-1",children:"upload"}),"Upload"]}),c.jsxs("button",{type:"button",className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-lg text-sm flex items-center justify-center transition-colors",onClick:()=>P(D),children:[c.jsx("i",{className:"material-icons text-sm mr-1",children:"camera_alt"}),"Camera"]})]}),c.jsx("input",{id:`${D}-studio-input`,type:"file",accept:"image/*",className:"hidden",onChange:ie=>{var de;const te=(de=ie.target.files)==null?void 0:de[0];te&&(console.log(`File selected for ${D}:`,te.name),R(D,te)),ie.target.value=""}})]})},D)})})]})]}),c.jsx("div",{className:"border-t border-gray-200 p-4 sm:p-6 bg-gray-50",children:c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-3 sm:space-y-0",children:[c.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[c.jsxs("span",{className:"flex items-center",children:[c.jsx("i",{className:"material-icons text-sm mr-1",children:"info"}),"Fields marked with * are required"]}),y.area&&y.area>0&&c.jsxs("span",{className:"flex items-center",children:[c.jsx("i",{className:"material-icons text-sm mr-1",children:"straighten"}),"Area: ",y.area.toFixed(2)," sq m"]})]}),c.jsxs("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[y.shadeCardNo&&c.jsxs("button",{className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg flex items-center justify-center transition-colors",onClick:ee,children:[c.jsx("i",{className:"material-icons text-sm mr-1",children:"print"}),"Shade Card Label"]}),c.jsxs("button",{className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center justify-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed",onClick:X,disabled:h,children:[c.jsx("i",{className:`material-icons text-sm mr-1 ${h?"animate-spin":""}`,children:h?"refresh":"save"}),h?"Saving...":t?"Update Rug":"Save Rug"]})]})]})}),c.jsx(GX,{isOpen:d,onClose:()=>f(!1),onScan:D=>{A("carpetNo",D),f(!1)}}),c.jsx(qX,{isOpen:g.show,title:g.title,message:g.message,type:g.type,onCancel:()=>v({show:!1,type:"",title:"",message:""}),onConfirm:g.type==="info"?()=>v({show:!1,type:"",title:"",message:""}):void 0})]})},eA="/assets/eastern-logo-new-BRf7wOPe.png",QX=({rugs:t,onEditRug:e,onDownloadTED:n,onGenerateLabel:r,onDeleteRugs:i,onImageUpload:o,onImageDelete:s})=>{const[a,l]=C.useState(""),[u,d]=C.useState("All Constructions"),[f,h]=C.useState("All Buyers"),[m,g]=C.useState("Sort by Date"),[v,y]=C.useState(new Set),[x,w]=C.useState(new Set),E=t.filter(R=>{const P=a===""||R.designName.toLowerCase().includes(a.toLowerCase())||R.carpetNo.toLowerCase().includes(a.toLowerCase())||R.construction.toLowerCase().includes(a.toLowerCase())||R.color.toLowerCase().includes(a.toLowerCase()),G=u==="All Constructions"||R.construction===u,K=f==="All Buyers"||R.buyerName===f;return P&&G&&K}).sort((R,P)=>{const G=typeof R.id=="string"?parseInt(R.id):R.id||0;return(typeof P.id=="string"?parseInt(P.id):P.id||0)-G}),A=[...new Set(t.map(R=>R.construction))],O=[...new Set(t.map(R=>R.buyerName))],j=R=>{const P=new Set(v);P.has(R)?P.delete(R):P.add(R),y(P)},N=async()=>{if(v.size===0)return;if(window.confirm(`Are you sure you want to delete ${v.size} selected rug(s)? This action cannot be undone.`)&&i)try{await i(Array.from(v)),y(new Set)}catch(P){console.error("Error deleting rugs:",P),alert("Failed to delete rugs. Please try again.")}},T=async(R,P,G)=>{var ee;const K=(ee=G.target.files)==null?void 0:ee[0];if(!K||!o)return;const X=`${R}-${P}`;w(F=>new Set(F).add(X));try{await o(R,P,K)}catch(F){console.error("Failed to upload image:",F),alert("Failed to upload image. Please try again.")}finally{w(F=>{const z=new Set(F);return z.delete(X),z})}},S=async(R,P)=>{if(!(!s||!window.confirm("Are you sure you want to delete this image?")))try{await s(R,P)}catch(K){console.error("Failed to delete image:",K),alert("Failed to delete image. Please try again.")}},b=(R,P)=>{if(!R.images)return;const G=R.images,K=[["rugImage1"],["rugImage1"],["rugImage2"],["rugImage3"],["rugImage4"],["rugImage5"]];if(P<K.length)for(const X of K[P]){const ee=G[X];if(ee&&typeof ee=="string"&&ee.trim()!==""&&(ee.startsWith("data:image/")||ee.startsWith("/uploads/")||ee.startsWith("http")||ee.includes(".jpg")||ee.includes(".jpeg")||ee.includes(".png")||ee.includes(".webp")))return ee}},k=R=>{if(n)n(R);else{const P={designName:R.designName,construction:R.construction,quality:R.quality,size:R.size,color:R.color,finishedGSM:R.finishedGSM,materials:R.materials,specifications:{warpIn6Inches:R.warpIn6Inches,weftIn6Inches:R.weftIn6Inches,pileHeightMM:R.pileHeightMM,totalThicknessMM:R.totalThicknessMM},costs:{materialCost:R.totalMaterialCost,weavingCost:R.weavingCost,finishingCost:R.finishingCost,finalCostPSM:R.finalCostPSM}},G=JSON.stringify(P,null,2),K=new Blob([G],{type:"application/json"}),X=URL.createObjectURL(K),ee=document.createElement("a");ee.href=X,ee.download=`TED_${R.designName}_${R.carpetNo}.json`,document.body.appendChild(ee),ee.click(),document.body.removeChild(ee),URL.revokeObjectURL(X)}};return t.length===0?c.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow-sm",children:[c.jsx("div",{className:"text-6xl text-gray-300 mb-4",children:"📐"}),c.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Rugs Available"}),c.jsx("p",{className:"text-gray-500",children:"Rug designs created by the Sampling Department will appear here."})]}):c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"text-lg sm:text-2xl font-semibold text-gray-900",children:"Gallery"}),c.jsxs("p",{className:"text-sm sm:text-base text-gray-600",children:[E.length," of ",t.length," rugs"]})]}),c.jsxs(ve,{variant:"outline",size:"sm",className:"hidden sm:flex",children:[c.jsx(ep,{className:"h-4 w-4 mr-2"}),"Refresh Data"]})]}),c.jsx("div",{className:"bg-white rounded-lg p-3 sm:p-4 shadow-sm",children:c.jsxs("div",{className:"space-y-3 sm:space-y-0 sm:grid sm:grid-cols-2 lg:grid-cols-4 sm:gap-4",children:[c.jsxs("div",{className:"relative sm:col-span-2 lg:col-span-1",children:[c.jsx(ep,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),c.jsx(Ze,{placeholder:"Search rugs...",value:a,onChange:R=>l(R.target.value),className:"pl-10"})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 sm:col-span-2 lg:col-span-3 sm:grid-cols-3",children:[c.jsxs(ti,{value:u,onValueChange:d,children:[c.jsx(Pr,{className:"text-xs sm:text-sm",children:c.jsx(ni,{placeholder:"Construction"})}),c.jsxs(Dr,{children:[c.jsx(mt,{value:"All Constructions",children:"All"}),A.filter(R=>R&&R.trim()!=="").map(R=>c.jsx(mt,{value:R,children:R},R))]})]}),c.jsxs(ti,{value:f,onValueChange:h,children:[c.jsx(Pr,{className:"text-xs sm:text-sm",children:c.jsx(ni,{placeholder:"Buyers"})}),c.jsxs(Dr,{children:[c.jsx(mt,{value:"All Buyers",children:"All"}),O.filter(R=>R&&R.trim()!=="").map(R=>c.jsx(mt,{value:R,children:R},R))]})]}),c.jsxs(ti,{value:m,onValueChange:g,children:[c.jsx(Pr,{className:"text-xs sm:text-sm",children:c.jsx(ni,{placeholder:"Sort"})}),c.jsxs(Dr,{children:[c.jsx(mt,{value:"Sort by Date",children:"Date"}),c.jsx(mt,{value:"Sort by Name",children:"Name"}),c.jsx(mt,{value:"Sort by Construction",children:"Type"})]})]})]})]})}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-3 sm:gap-6",children:E.map(R=>c.jsxs("div",{className:"bg-white rounded-lg border shadow-sm overflow-hidden relative",children:[c.jsxs("div",{className:"relative h-32 sm:h-48 bg-gray-100 flex items-center justify-center",children:[c.jsx("div",{className:"absolute top-2 sm:top-3 left-2 sm:left-3 z-10",children:c.jsx("input",{type:"checkbox",checked:v.has(R.id.toString()),onChange:()=>j(R.id.toString()),className:"w-3 h-3 sm:w-4 sm:h-4 text-blue-600 border-2 border-gray-300 rounded focus:ring-blue-500"})}),(()=>{const P=b(R,0);return P?c.jsx("img",{src:P,alt:R.designName,className:"w-full h-full object-cover",onLoad:()=>console.log("Main image loaded successfully:",P),onError:G=>{console.log("Main image failed to load:",P);const K=G.target,X=K.parentElement;if(K.style.display="none",X&&!X.querySelector(".fallback-icon")){const ee=document.createElement("div");ee.className="fallback-icon w-full h-full bg-white flex items-center justify-center p-2",ee.innerHTML=`<img src="${eA}" alt="Eastern Logo" class="w-full h-full object-contain opacity-60" />`,X.appendChild(ee)}}}):c.jsx("div",{className:"w-full h-full bg-white flex items-center justify-center p-2",children:c.jsx("img",{src:eA,alt:"Eastern Logo",className:"w-full h-full object-contain opacity-60"})})})()]}),c.jsxs("div",{className:"p-2 sm:p-4 space-y-2 sm:space-y-3",children:[c.jsx("h3",{className:"font-semibold text-gray-900 text-center text-sm sm:text-base",children:R.designName}),c.jsxs("div",{className:"space-y-1 sm:space-y-2 text-xs sm:text-sm",children:[c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Construction:"}),c.jsx("span",{className:"font-medium text-right",children:R.construction})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Color:"}),c.jsx("span",{className:"font-medium truncate text-right",children:R.color})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("span",{className:"text-gray-600",children:"Size:"}),c.jsx("span",{className:"font-medium text-right",children:R.size})]})]}),c.jsxs("div",{className:"hidden sm:block",children:[c.jsx("div",{className:"text-xs sm:text-sm text-gray-600 mb-2",children:"Photos:"}),c.jsx("div",{className:"grid grid-cols-5 gap-1 sm:gap-2",children:[...Array(5)].map((P,G)=>{const K=G+1,X=`${R.id}-${K}`,ee=x.has(X),F=b(R,K),z=`rugImage${K}`;return c.jsxs("div",{className:"relative group",children:[c.jsx("input",{type:"file",accept:"image/*",onChange:D=>T(R.id.toString(),K,D),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer z-10",disabled:ee,title:`Upload ${z}`}),c.jsx("div",{className:`aspect-square border-2 border-dashed rounded-lg flex items-center justify-center transition-colors ${F?"border-green-300 bg-green-50":"border-gray-300 hover:border-blue-400 hover:bg-blue-50"} ${ee?"opacity-50":""}`,children:ee?c.jsx("div",{className:"animate-spin h-3 w-3 sm:h-4 sm:w-4 border-2 border-blue-500 border-t-transparent rounded-full"}):F?c.jsxs("div",{className:"w-full h-full bg-gray-100 rounded-md overflow-hidden relative",children:[c.jsx("img",{src:F,alt:z,className:"w-full h-full object-cover",onError:D=>{console.log(`Small thumbnail failed to load (${z}):`,F);const B=D.target;B.style.display="none";const $=B.parentElement;if($&&!$.querySelector(".fallback-plus")){const V=document.createElement("div");V.className="fallback-plus flex items-center justify-center w-full h-full bg-gray-100",V.innerHTML='<svg class="h-3 w-3 sm:h-4 sm:w-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path></svg>',$.appendChild(V)}},onLoad:()=>console.log(`Small thumbnail loaded successfully (${z}):`,F)}),c.jsx("button",{onClick:D=>{D.stopPropagation(),S(R.id.toString(),K)},className:"absolute top-0.5 right-0.5 w-4 h-4 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity z-20 shadow-sm",title:`Delete ${z}`,children:c.jsx(Yl,{className:"h-2.5 w-2.5"})})]}):c.jsx(Ql,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400",title:`Click to upload ${z}`})}),c.jsx("div",{className:"absolute -bottom-3 left-1/2 transform -translate-x-1/2 text-[6px] sm:text-[8px] text-gray-500 whitespace-nowrap",children:z})]},`${R.id}-thumb-${K}`)})})]}),c.jsxs("div",{className:"flex gap-1 sm:gap-2 pt-1 sm:pt-2",children:[c.jsxs(ve,{variant:"outline",size:"sm",onClick:()=>e==null?void 0:e(R),className:"flex-1 text-xs h-7 sm:h-8",children:[c.jsx(Fy,{className:"h-3 w-3 sm:mr-1"}),c.jsx("span",{className:"hidden sm:inline",children:"Edit"})]}),c.jsxs(ve,{variant:"outline",size:"sm",onClick:()=>r==null?void 0:r(R),className:"flex-1 text-xs h-7 sm:h-8",children:[c.jsx(iN,{className:"h-3 w-3 sm:mr-1"}),c.jsx("span",{className:"hidden sm:inline",children:"Label"})]}),c.jsxs(ve,{variant:"outline",size:"sm",onClick:()=>k(R),className:"flex-1 text-xs h-7 sm:h-8",children:[c.jsx(ma,{className:"h-3 w-3 sm:mr-1"}),c.jsx("span",{className:"hidden sm:inline",children:"PDF"})]})]})]})]},R.id))}),v.size>0&&c.jsx("div",{className:"fixed bottom-3 sm:bottom-6 left-2 right-2 sm:left-1/2 sm:right-auto sm:transform sm:-translate-x-1/2 bg-blue-50 border border-blue-200 rounded-lg p-3 sm:p-4 shadow-lg z-50",children:c.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-3 sm:gap-6",children:[c.jsxs("span",{className:"text-xs sm:text-sm font-medium text-blue-900",children:[v.size," rug(s) selected"]}),c.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[c.jsx(ve,{variant:"outline",size:"sm",onClick:()=>y(new Set),className:"flex-1 sm:flex-none text-xs",children:"Clear"}),c.jsxs(ve,{size:"sm",variant:"destructive",onClick:N,className:"bg-red-600 hover:bg-red-700 flex-1 sm:flex-none text-xs",children:[c.jsx(By,{className:"h-3 w-3 sm:h-4 sm:w-4 sm:mr-1"}),c.jsx("span",{className:"hidden sm:inline",children:"Delete Selected"}),c.jsx("span",{className:"sm:hidden",children:"Delete"})]})]})]})}),v.size>0&&c.jsxs("div",{className:"mt-4 p-3 bg-gray-100 rounded-lg text-xs text-gray-600",children:[c.jsx("strong",{children:"Debug - Selected IDs:"})," ",Array.from(v).join(", ")]})]})},YX=()=>{Bd();const{canViewTab:t,canEdit:e}=bP(),{toast:n}=Ns(),r=pc(),[i,o]=C.useState("create"),[s,a]=C.useState(null),{data:l=[],isLoading:u,refetch:d}=Qp({queryKey:["/api/rugs"],queryFn:async()=>{const g=await fetch("/api/rugs");if(!g.ok)throw new Error("Failed to fetch rugs");return g.json()}}),f=async g=>{try{const v=s?`/api/rugs/${s.id}`:"/api/rugs",x=await fetch(v,{method:s?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});if(!x.ok)throw new Error("Failed to save rug");const w=await x.json();return await r.invalidateQueries({queryKey:["/api/rugs"]}),n({title:s?"Rug Updated":"Rug Created",description:`${g.designName} has been ${s?"updated":"created"} successfully.`}),a(null),o("gallery"),w}catch(v){throw console.error("Error saving rug:",v),n({title:"Error",description:"Failed to save rug. Please try again.",variant:"destructive"}),v}},h=g=>{a(g),o("create")},m=()=>{a(null)};return u?c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 flex items-center justify-center min-h-64",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"Loading Sampling Dashboard..."})]})}):c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Sampling Department"}),c.jsx("p",{className:"text-gray-600",children:"Create and manage rug samples with technical specifications"})]}),c.jsxs(dd,{value:i,onValueChange:o,className:"w-full",children:[c.jsxs(oc,{className:"grid w-full grid-cols-2 max-w-md mb-6 bg-white border",children:[t("create")&&c.jsxs(Nn,{value:"create",className:"flex items-center gap-2 data-[state=active]:bg-blue-50 data-[state=active]:text-blue-700",children:[c.jsx(Ql,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden sm:inline",children:s?"Edit Rug":"Create New"}),c.jsx("span",{className:"sm:hidden",children:"Create"})]}),t("gallery")&&c.jsxs(Nn,{value:"gallery",className:"flex items-center gap-2 data-[state=active]:bg-blue-50 data-[state=active]:text-blue-700",children:[c.jsx(Y5,{className:"h-4 w-4"}),c.jsx("span",{className:"hidden sm:inline",children:"Rug Gallery"}),c.jsx("span",{className:"sm:hidden",children:"Gallery"}),l.length>0&&c.jsx(Dn,{variant:"secondary",className:"ml-1 text-xs",children:l.length})]})]}),t("create")&&c.jsx(Tn,{value:"create",className:"mt-0",children:c.jsx("div",{className:"bg-white rounded-lg shadow-sm border-0",children:c.jsx(XX,{rug:s,onSave:f,onReset:m,onBack:()=>o("gallery")})})}),t("gallery")&&c.jsx(Tn,{value:"gallery",className:"mt-0",children:c.jsx(QX,{rugs:l,onEditRug:e("gallery")?h:void 0,onDeleteRugs:e("gallery")?async g=>{for(const v of g)await fetch(`/api/rugs/${v}`,{method:"DELETE"});await r.invalidateQueries({queryKey:["/api/rugs"]}),n({title:"Rugs Deleted",description:`${g.length} rug(s) have been deleted.`})}:void 0,onImageUpload:e("gallery")?async(g,v,y)=>{try{console.log(`🔄 Direct upload ${v} for rug ${g}:`,y.name,`(${Math.round(y.size/1024)}KB)`);const x=(N,T=200)=>new Promise((S,b)=>{const k=document.createElement("canvas"),R=k.getContext("2d"),P=new Image;P.onload=()=>{let{width:X,height:ee}=P;X>ee?X>400&&(ee=ee*400/X,X=400):ee>300&&(X=X*300/ee,ee=300),k.width=X,k.height=ee,R==null||R.drawImage(P,0,0,X,ee);let F=.7,z=0;const D=10,B=()=>{const $=k.toDataURL("image/jpeg",F),V=$.length*3/4/1024;console.log(`Compression attempt ${z+1}: ${Math.round(V)}KB at quality ${F.toFixed(2)}`),V<=T||z>=D||F<=.1?(console.log(`Final compression: ${Math.round(V)}KB`),S($)):(F=Math.max(.1,F*.8),z++,B())};B()},P.onerror=()=>b(new Error("Failed to load image")),P.src=URL.createObjectURL(N)});if(!y.type.startsWith("image/")){n({title:"Invalid File Type",description:"Please select a valid image file (JPG, PNG, GIF, etc.)",variant:"destructive"});return}const w=await x(y,200),E=Math.round(w.length*3/4/1024);if(console.log(`✅ Compressed to ${E}KB for direct upload`),E>200){n({title:"Compression Failed",description:`Unable to compress under 200KB (current: ${E}KB). Please use a smaller image.`,variant:"destructive"});return}const O=["rugImage1","rugImage1","rugImage2","rugImage3","rugImage4","rugImage5"][v]||"rugImage1";if(!(await fetch(`/api/rugs/${g}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({images:{[O]:w}})})).ok)throw new Error("Failed to upload image");await r.invalidateQueries({queryKey:["/api/rugs"]}),n({title:"✅ Image Uploaded",description:`${O} compressed to ${E}KB and saved successfully.`})}catch(x){console.error("Error uploading image:",x),n({title:"Upload Error",description:"Failed to upload image. Please try again.",variant:"destructive"})}}:void 0,onImageDelete:e("gallery")?async(g,v)=>{try{const x=["rugImage1","rugImage1","rugImage2","rugImage3","rugImage4","rugImage5"][v]||"rugImage1";if(!(await fetch(`/api/rugs/${g}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({images:{[x]:null}})})).ok)throw new Error("Failed to delete image");await r.invalidateQueries({queryKey:["/api/rugs"]}),n({title:"Image Deleted",description:`${x} has been removed successfully.`})}catch(y){console.error("Error deleting image:",y),n({title:"Delete Error",description:"Failed to delete image. Please try again.",variant:"destructive"})}}:void 0})})]})]})};var gw="Collapsible",[ZX,BP]=Er(gw),[JX,vw]=ZX(gw),VP=C.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:i,disabled:o,onOpenChange:s,...a}=t,[l=!1,u]=Br({prop:r,defaultProp:i,onChange:s});return c.jsx(JX,{scope:n,disabled:o,contentId:lr(),open:l,onOpenToggle:C.useCallback(()=>u(d=>!d),[u]),children:c.jsx(me.div,{"data-state":xw(l),"data-disabled":o?"":void 0,...a,ref:e})})});VP.displayName=gw;var UP="CollapsibleTrigger",$P=C.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,i=vw(UP,n);return c.jsx(me.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":xw(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...r,ref:e,onClick:ae(t.onClick,i.onOpenToggle)})});$P.displayName=UP;var yw="CollapsibleContent",zP=C.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=vw(yw,t.__scopeCollapsible);return c.jsx(Xn,{present:n||i.open,children:({present:o})=>c.jsx(eQ,{...r,ref:e,present:o})})});zP.displayName=yw;var eQ=C.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:i,...o}=t,s=vw(yw,n),[a,l]=C.useState(r),u=C.useRef(null),d=$e(e,u),f=C.useRef(0),h=f.current,m=C.useRef(0),g=m.current,v=s.open||a,y=C.useRef(v),x=C.useRef(void 0);return C.useEffect(()=>{const w=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(w)},[]),Yt(()=>{const w=u.current;if(w){x.current=x.current||{transitionDuration:w.style.transitionDuration,animationName:w.style.animationName},w.style.transitionDuration="0s",w.style.animationName="none";const E=w.getBoundingClientRect();f.current=E.height,m.current=E.width,y.current||(w.style.transitionDuration=x.current.transitionDuration,w.style.animationName=x.current.animationName),l(r)}},[s.open,r]),c.jsx(me.div,{"data-state":xw(s.open),"data-disabled":s.disabled?"":void 0,id:s.contentId,hidden:!v,...o,ref:d,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...t.style},children:v&&i})});function xw(t){return t?"open":"closed"}var tQ=VP,nQ=$P,rQ=zP,ho="Accordion",iQ=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ww,oQ,sQ]=Ec(ho),[F0,RZ]=Er(ho,[sQ,BP]),_w=BP(),HP=kt.forwardRef((t,e)=>{const{type:n,...r}=t,i=r,o=r;return c.jsx(ww.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?c.jsx(uQ,{...o,ref:e}):c.jsx(cQ,{...i,ref:e})})});HP.displayName=ho;var[WP,aQ]=F0(ho),[GP,lQ]=F0(ho,{collapsible:!1}),cQ=kt.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},collapsible:o=!1,...s}=t,[a,l]=Br({prop:n,defaultProp:r,onChange:i});return c.jsx(WP,{scope:t.__scopeAccordion,value:a?[a]:[],onItemOpen:l,onItemClose:kt.useCallback(()=>o&&l(""),[o,l]),children:c.jsx(GP,{scope:t.__scopeAccordion,collapsible:o,children:c.jsx(qP,{...s,ref:e})})})}),uQ=kt.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:i=()=>{},...o}=t,[s=[],a]=Br({prop:n,defaultProp:r,onChange:i}),l=kt.useCallback(d=>a((f=[])=>[...f,d]),[a]),u=kt.useCallback(d=>a((f=[])=>f.filter(h=>h!==d)),[a]);return c.jsx(WP,{scope:t.__scopeAccordion,value:s,onItemOpen:l,onItemClose:u,children:c.jsx(GP,{scope:t.__scopeAccordion,collapsible:!0,children:c.jsx(qP,{...o,ref:e})})})}),[dQ,B0]=F0(ho),qP=kt.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:i,orientation:o="vertical",...s}=t,a=kt.useRef(null),l=$e(a,e),u=oQ(n),f=Cc(i)==="ltr",h=ae(t.onKeyDown,m=>{var T;if(!iQ.includes(m.key))return;const g=m.target,v=u().filter(S=>{var b;return!((b=S.ref.current)!=null&&b.disabled)}),y=v.findIndex(S=>S.ref.current===g),x=v.length;if(y===-1)return;m.preventDefault();let w=y;const E=0,A=x-1,O=()=>{w=y+1,w>A&&(w=E)},j=()=>{w=y-1,w<E&&(w=A)};switch(m.key){case"Home":w=E;break;case"End":w=A;break;case"ArrowRight":o==="horizontal"&&(f?O():j());break;case"ArrowDown":o==="vertical"&&O();break;case"ArrowLeft":o==="horizontal"&&(f?j():O());break;case"ArrowUp":o==="vertical"&&j();break}const N=w%x;(T=v[N].ref.current)==null||T.focus()});return c.jsx(dQ,{scope:n,disabled:r,direction:i,orientation:o,children:c.jsx(ww.Slot,{scope:n,children:c.jsx(me.div,{...s,"data-orientation":o,ref:l,onKeyDown:r?void 0:h})})})}),Rp="AccordionItem",[fQ,Ew]=F0(Rp),KP=kt.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...i}=t,o=B0(Rp,n),s=aQ(Rp,n),a=_w(n),l=lr(),u=r&&s.value.includes(r)||!1,d=o.disabled||t.disabled;return c.jsx(fQ,{scope:n,open:u,disabled:d,triggerId:l,children:c.jsx(tQ,{"data-orientation":o.orientation,"data-state":e6(u),...a,...i,ref:e,disabled:d,open:u,onOpenChange:f=>{f?s.onItemOpen(r):s.onItemClose(r)}})})});KP.displayName=Rp;var XP="AccordionHeader",QP=kt.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=B0(ho,n),o=Ew(XP,n);return c.jsx(me.h3,{"data-orientation":i.orientation,"data-state":e6(o.open),"data-disabled":o.disabled?"":void 0,...r,ref:e})});QP.displayName=XP;var Pv="AccordionTrigger",YP=kt.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=B0(ho,n),o=Ew(Pv,n),s=lQ(Pv,n),a=_w(n);return c.jsx(ww.ItemSlot,{scope:n,children:c.jsx(nQ,{"aria-disabled":o.open&&!s.collapsible||void 0,"data-orientation":i.orientation,id:o.triggerId,...a,...r,ref:e})})});YP.displayName=Pv;var ZP="AccordionContent",JP=kt.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,i=B0(ho,n),o=Ew(ZP,n),s=_w(n);return c.jsx(rQ,{role:"region","aria-labelledby":o.triggerId,"data-orientation":i.orientation,...s,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});JP.displayName=ZP;function e6(t){return t?"open":"closed"}var hQ=HP,pQ=KP,mQ=QP,t6=YP,n6=JP;const gQ=hQ,r6=C.forwardRef(({className:t,...e},n)=>c.jsx(pQ,{ref:n,className:xe("border-b",t),...e}));r6.displayName="AccordionItem";const i6=C.forwardRef(({className:t,children:e,...n},r)=>c.jsx(mQ,{className:"flex",children:c.jsxs(t6,{ref:r,className:xe("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,c.jsx(Zp,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));i6.displayName=t6.displayName;const o6=C.forwardRef(({className:t,children:e,...n},r)=>c.jsx(n6,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:c.jsx("div",{className:xe("pb-4 pt-0",t),children:e})}));o6.displayName=n6.displayName;var Nc="NavigationMenu",[Cw,s6,vQ]=Ec(Nc),[Dv,yQ,xQ]=Ec(Nc),[bw,PZ]=Er(Nc,[vQ,xQ]),[wQ,Vr]=bw(Nc),[_Q,EQ]=bw(Nc),a6=C.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,value:r,onValueChange:i,defaultValue:o,delayDuration:s=200,skipDelayDuration:a=300,orientation:l="horizontal",dir:u,...d}=t,[f,h]=C.useState(null),m=$e(e,S=>h(S)),g=Cc(u),v=C.useRef(0),y=C.useRef(0),x=C.useRef(0),[w,E]=C.useState(!0),[A="",O]=Br({prop:r,onChange:S=>{const b=S!=="",k=a>0;b?(window.clearTimeout(x.current),k&&E(!1)):(window.clearTimeout(x.current),x.current=window.setTimeout(()=>E(!0),a)),i==null||i(S)},defaultProp:o}),j=C.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>O(""),150)},[O]),N=C.useCallback(S=>{window.clearTimeout(y.current),O(S)},[O]),T=C.useCallback(S=>{A===S?window.clearTimeout(y.current):v.current=window.setTimeout(()=>{window.clearTimeout(y.current),O(S)},s)},[A,O,s]);return C.useEffect(()=>()=>{window.clearTimeout(v.current),window.clearTimeout(y.current),window.clearTimeout(x.current)},[]),c.jsx(c6,{scope:n,isRootMenu:!0,value:A,dir:g,orientation:l,rootNavigationMenu:f,onTriggerEnter:S=>{window.clearTimeout(v.current),w?T(S):N(S)},onTriggerLeave:()=>{window.clearTimeout(v.current),j()},onContentEnter:()=>window.clearTimeout(y.current),onContentLeave:j,onItemSelect:S=>{O(b=>b===S?"":S)},onItemDismiss:()=>O(""),children:c.jsx(me.nav,{"aria-label":"Main","data-orientation":l,dir:g,...d,ref:m})})});a6.displayName=Nc;var l6="NavigationMenuSub",CQ=C.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,value:r,onValueChange:i,defaultValue:o,orientation:s="horizontal",...a}=t,l=Vr(l6,n),[u="",d]=Br({prop:r,onChange:i,defaultProp:o});return c.jsx(c6,{scope:n,isRootMenu:!1,value:u,dir:l.dir,orientation:s,rootNavigationMenu:l.rootNavigationMenu,onTriggerEnter:f=>d(f),onItemSelect:f=>d(f),onItemDismiss:()=>d(""),children:c.jsx(me.div,{"data-orientation":s,...a,ref:e})})});CQ.displayName=l6;var c6=t=>{const{scope:e,isRootMenu:n,rootNavigationMenu:r,dir:i,orientation:o,children:s,value:a,onItemSelect:l,onItemDismiss:u,onTriggerEnter:d,onTriggerLeave:f,onContentEnter:h,onContentLeave:m}=t,[g,v]=C.useState(null),[y,x]=C.useState(new Map),[w,E]=C.useState(null);return c.jsx(wQ,{scope:e,isRootMenu:n,rootNavigationMenu:r,value:a,previousValue:Jx(a),baseId:lr(),dir:i,orientation:o,viewport:g,onViewportChange:v,indicatorTrack:w,onIndicatorTrackChange:E,onTriggerEnter:zt(d),onTriggerLeave:zt(f),onContentEnter:zt(h),onContentLeave:zt(m),onItemSelect:zt(l),onItemDismiss:zt(u),onViewportContentChange:C.useCallback((A,O)=>{x(j=>(j.set(A,O),new Map(j)))},[]),onViewportContentRemove:C.useCallback(A=>{x(O=>O.has(A)?(O.delete(A),new Map(O)):O)},[]),children:c.jsx(Cw.Provider,{scope:e,children:c.jsx(_Q,{scope:e,items:y,children:s})})})},u6="NavigationMenuList",d6=C.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,...r}=t,i=Vr(u6,n),o=c.jsx(me.ul,{"data-orientation":i.orientation,...r,ref:e});return c.jsx(me.div,{style:{position:"relative"},ref:i.onIndicatorTrackChange,children:c.jsx(Cw.Slot,{scope:n,children:i.isRootMenu?c.jsx(_6,{asChild:!0,children:o}):o})})});d6.displayName=u6;var f6="NavigationMenuItem",[bQ,h6]=bw(f6),p6=C.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,value:r,...i}=t,o=lr(),s=r||o||"LEGACY_REACT_AUTO_VALUE",a=C.useRef(null),l=C.useRef(null),u=C.useRef(null),d=C.useRef(()=>{}),f=C.useRef(!1),h=C.useCallback((g="start")=>{if(a.current){d.current();const v=kv(a.current);v.length&&Iw(g==="start"?v:v.reverse())}},[]),m=C.useCallback(()=>{if(a.current){const g=kv(a.current);g.length&&(d.current=PQ(g))}},[]);return c.jsx(bQ,{scope:n,value:s,triggerRef:l,contentRef:a,focusProxyRef:u,wasEscapeCloseRef:f,onEntryKeyDown:h,onFocusProxyEnter:h,onRootContentClose:m,onContentFocusOutside:m,children:c.jsx(me.li,{...i,ref:e})})});p6.displayName=f6;var Ov="NavigationMenuTrigger",m6=C.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,disabled:r,...i}=t,o=Vr(Ov,t.__scopeNavigationMenu),s=h6(Ov,t.__scopeNavigationMenu),a=C.useRef(null),l=$e(a,s.triggerRef,e),u=C6(o.baseId,s.value),d=b6(o.baseId,s.value),f=C.useRef(!1),h=C.useRef(!1),m=s.value===o.value;return c.jsxs(c.Fragment,{children:[c.jsx(Cw.ItemSlot,{scope:n,value:s.value,children:c.jsx(E6,{asChild:!0,children:c.jsx(me.button,{id:u,disabled:r,"data-disabled":r?"":void 0,"data-state":Nw(m),"aria-expanded":m,"aria-controls":d,...i,ref:l,onPointerEnter:ae(t.onPointerEnter,()=>{h.current=!1,s.wasEscapeCloseRef.current=!1}),onPointerMove:ae(t.onPointerMove,Pp(()=>{r||h.current||s.wasEscapeCloseRef.current||f.current||(o.onTriggerEnter(s.value),f.current=!0)})),onPointerLeave:ae(t.onPointerLeave,Pp(()=>{r||(o.onTriggerLeave(),f.current=!1)})),onClick:ae(t.onClick,()=>{o.onItemSelect(s.value),h.current=m}),onKeyDown:ae(t.onKeyDown,g=>{const y={horizontal:"ArrowDown",vertical:o.dir==="rtl"?"ArrowLeft":"ArrowRight"}[o.orientation];m&&g.key===y&&(s.onEntryKeyDown(),g.preventDefault())})})})}),m&&c.jsxs(c.Fragment,{children:[c.jsx(dH,{"aria-hidden":!0,tabIndex:0,ref:s.focusProxyRef,onFocus:g=>{const v=s.contentRef.current,y=g.relatedTarget,x=y===a.current,w=v==null?void 0:v.contains(y);(x||!w)&&s.onFocusProxyEnter(x?"start":"end")}}),o.viewport&&c.jsx("span",{"aria-owns":d})]})]})});m6.displayName=Ov;var AQ="NavigationMenuLink",tA="navigationMenu.linkSelect",g6=C.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,active:r,onSelect:i,...o}=t;return c.jsx(E6,{asChild:!0,children:c.jsx(me.a,{"data-active":r?"":void 0,"aria-current":r?"page":void 0,...o,ref:e,onClick:ae(t.onClick,s=>{const a=s.target,l=new CustomEvent(tA,{bubbles:!0,cancelable:!0});if(a.addEventListener(tA,u=>i==null?void 0:i(u),{once:!0}),tp(a,l),!l.defaultPrevented&&!s.metaKey){const u=new CustomEvent(Ih,{bubbles:!0,cancelable:!0});tp(a,u)}},{checkForDefaultPrevented:!1})})})});g6.displayName=AQ;var Aw="NavigationMenuIndicator",v6=C.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Vr(Aw,t.__scopeNavigationMenu),o=!!i.value;return i.indicatorTrack?TI.createPortal(c.jsx(Xn,{present:n||o,children:c.jsx(SQ,{...r,ref:e})}),i.indicatorTrack):null});v6.displayName=Aw;var SQ=C.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,...r}=t,i=Vr(Aw,n),o=s6(n),[s,a]=C.useState(null),[l,u]=C.useState(null),d=i.orientation==="horizontal",f=!!i.value;C.useEffect(()=>{var v;const g=(v=o().find(y=>y.value===i.value))==null?void 0:v.ref.current;g&&a(g)},[o,i.value]);const h=()=>{s&&u({size:d?s.offsetWidth:s.offsetHeight,offset:d?s.offsetLeft:s.offsetTop})};return Mv(s,h),Mv(i.indicatorTrack,h),l?c.jsx(me.div,{"aria-hidden":!0,"data-state":f?"visible":"hidden","data-orientation":i.orientation,...r,ref:e,style:{position:"absolute",...d?{left:0,width:l.size+"px",transform:`translateX(${l.offset}px)`}:{top:0,height:l.size+"px",transform:`translateY(${l.offset}px)`},...r.style}}):null}),lc="NavigationMenuContent",y6=C.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Vr(lc,t.__scopeNavigationMenu),o=h6(lc,t.__scopeNavigationMenu),s=$e(o.contentRef,e),a=o.value===i.value,l={value:o.value,triggerRef:o.triggerRef,focusProxyRef:o.focusProxyRef,wasEscapeCloseRef:o.wasEscapeCloseRef,onContentFocusOutside:o.onContentFocusOutside,onRootContentClose:o.onRootContentClose,...r};return i.viewport?c.jsx(IQ,{forceMount:n,...l,ref:s}):c.jsx(Xn,{present:n||a,children:c.jsx(x6,{"data-state":Nw(a),...l,ref:s,onPointerEnter:ae(t.onPointerEnter,i.onContentEnter),onPointerLeave:ae(t.onPointerLeave,Pp(i.onContentLeave)),style:{pointerEvents:!a&&i.isRootMenu?"none":void 0,...l.style}})})});y6.displayName=lc;var IQ=C.forwardRef((t,e)=>{const n=Vr(lc,t.__scopeNavigationMenu),{onViewportContentChange:r,onViewportContentRemove:i}=n;return Yt(()=>{r(t.value,{ref:e,...t})},[t,e,r]),Yt(()=>()=>i(t.value),[t.value,i]),null}),Ih="navigationMenu.rootContentDismiss",x6=C.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,value:r,triggerRef:i,focusProxyRef:o,wasEscapeCloseRef:s,onRootContentClose:a,onContentFocusOutside:l,...u}=t,d=Vr(lc,n),f=C.useRef(null),h=$e(f,e),m=C6(d.baseId,r),g=b6(d.baseId,r),v=s6(n),y=C.useRef(null),{onItemDismiss:x}=d;C.useEffect(()=>{const E=f.current;if(d.isRootMenu&&E){const A=()=>{var O;x(),a(),E.contains(document.activeElement)&&((O=i.current)==null||O.focus())};return E.addEventListener(Ih,A),()=>E.removeEventListener(Ih,A)}},[d.isRootMenu,t.value,i,x,a]);const w=C.useMemo(()=>{const A=v().map(b=>b.value);d.dir==="rtl"&&A.reverse();const O=A.indexOf(d.value),j=A.indexOf(d.previousValue),N=r===d.value,T=j===A.indexOf(r);if(!N&&!T)return y.current;const S=(()=>{if(O!==j){if(N&&j!==-1)return O>j?"from-end":"from-start";if(T&&O!==-1)return O>j?"to-start":"to-end"}return null})();return y.current=S,S},[d.previousValue,d.value,d.dir,v,r]);return c.jsx(_6,{asChild:!0,children:c.jsx(Ud,{id:g,"aria-labelledby":m,"data-motion":w,"data-orientation":d.orientation,...u,ref:h,disableOutsidePointerEvents:!1,onDismiss:()=>{var A;const E=new Event(Ih,{bubbles:!0,cancelable:!0});(A=f.current)==null||A.dispatchEvent(E)},onFocusOutside:ae(t.onFocusOutside,E=>{var O;l();const A=E.target;(O=d.rootNavigationMenu)!=null&&O.contains(A)&&E.preventDefault()}),onPointerDownOutside:ae(t.onPointerDownOutside,E=>{var N;const A=E.target,O=v().some(T=>{var S;return(S=T.ref.current)==null?void 0:S.contains(A)}),j=d.isRootMenu&&((N=d.viewport)==null?void 0:N.contains(A));(O||j||!d.isRootMenu)&&E.preventDefault()}),onKeyDown:ae(t.onKeyDown,E=>{var j;const A=E.altKey||E.ctrlKey||E.metaKey;if(E.key==="Tab"&&!A){const N=kv(E.currentTarget),T=document.activeElement,S=N.findIndex(R=>R===T),k=E.shiftKey?N.slice(0,S).reverse():N.slice(S+1,N.length);Iw(k)?E.preventDefault():(j=o.current)==null||j.focus()}}),onEscapeKeyDown:ae(t.onEscapeKeyDown,E=>{s.current=!0})})})}),Sw="NavigationMenuViewport",w6=C.forwardRef((t,e)=>{const{forceMount:n,...r}=t,o=!!Vr(Sw,t.__scopeNavigationMenu).value;return c.jsx(Xn,{present:n||o,children:c.jsx(NQ,{...r,ref:e})})});w6.displayName=Sw;var NQ=C.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,children:r,...i}=t,o=Vr(Sw,n),s=$e(e,o.onViewportChange),a=EQ(lc,t.__scopeNavigationMenu),[l,u]=C.useState(null),[d,f]=C.useState(null),h=l?(l==null?void 0:l.width)+"px":void 0,m=l?(l==null?void 0:l.height)+"px":void 0,g=!!o.value,v=g?o.value:o.previousValue;return Mv(d,()=>{d&&u({width:d.offsetWidth,height:d.offsetHeight})}),c.jsx(me.div,{"data-state":Nw(g),"data-orientation":o.orientation,...i,ref:s,style:{pointerEvents:!g&&o.isRootMenu?"none":void 0,"--radix-navigation-menu-viewport-width":h,"--radix-navigation-menu-viewport-height":m,...i.style},onPointerEnter:ae(t.onPointerEnter,o.onContentEnter),onPointerLeave:ae(t.onPointerLeave,Pp(o.onContentLeave)),children:Array.from(a.items).map(([x,{ref:w,forceMount:E,...A}])=>{const O=v===x;return c.jsx(Xn,{present:E||O,children:c.jsx(x6,{...A,ref:Sd(w,j=>{O&&j&&f(j)})})},x)})})}),TQ="FocusGroup",_6=C.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,...r}=t,i=Vr(TQ,n);return c.jsx(Dv.Provider,{scope:n,children:c.jsx(Dv.Slot,{scope:n,children:c.jsx(me.div,{dir:i.dir,...r,ref:e})})})}),nA=["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],RQ="FocusGroupItem",E6=C.forwardRef((t,e)=>{const{__scopeNavigationMenu:n,...r}=t,i=yQ(n),o=Vr(RQ,n);return c.jsx(Dv.ItemSlot,{scope:n,children:c.jsx(me.button,{...r,ref:e,onKeyDown:ae(t.onKeyDown,s=>{if(["Home","End",...nA].includes(s.key)){let l=i().map(f=>f.ref.current);if([o.dir==="rtl"?"ArrowRight":"ArrowLeft","ArrowUp","End"].includes(s.key)&&l.reverse(),nA.includes(s.key)){const f=l.indexOf(s.currentTarget);l=l.slice(f+1)}setTimeout(()=>Iw(l)),s.preventDefault()}})})})});function kv(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const i=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||i?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Iw(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}function PQ(t){return t.forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")}),()=>{t.forEach(e=>{const n=e.dataset.tabindex;e.setAttribute("tabindex",n)})}}function Mv(t,e){const n=zt(e);Yt(()=>{let r=0;if(t){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(t),()=>{window.cancelAnimationFrame(r),i.unobserve(t)}}},[t,n])}function Nw(t){return t?"open":"closed"}function C6(t,e){return`${t}-trigger-${e}`}function b6(t,e){return`${t}-content-${e}`}function Pp(t){return e=>e.pointerType==="mouse"?t(e):void 0}var A6=a6,S6=d6,DQ=p6,I6=m6,OQ=g6,N6=v6,T6=y6,R6=w6;const P6=C.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(A6,{ref:r,className:xe("relative z-10 flex max-w-max flex-1 items-center justify-center",t),...n,children:[e,c.jsx(M6,{})]}));P6.displayName=A6.displayName;const D6=C.forwardRef(({className:t,...e},n)=>c.jsx(S6,{ref:n,className:xe("group flex flex-1 list-none items-center justify-center space-x-1",t),...e}));D6.displayName=S6.displayName;const kQ=DQ,MQ=Id("group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent"),O6=C.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(I6,{ref:r,className:xe(MQ(),"group",t),...n,children:[e," ",c.jsx(Zp,{className:"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180","aria-hidden":"true"})]}));O6.displayName=I6.displayName;const k6=C.forwardRef(({className:t,...e},n)=>c.jsx(T6,{ref:n,className:xe("left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto ",t),...e}));k6.displayName=T6.displayName;const jQ=OQ,M6=C.forwardRef(({className:t,...e},n)=>c.jsx("div",{className:xe("absolute left-0 top-full flex justify-center"),children:c.jsx(R6,{className:xe("origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",t),ref:n,...e})}));M6.displayName=R6.displayName;const LQ=C.forwardRef(({className:t,...e},n)=>c.jsx(N6,{ref:n,className:xe("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",t),...e,children:c.jsx("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md"})}));LQ.displayName=N6.displayName;const FQ=pP,BQ=mP,VQ=gP,j6=C.forwardRef(({className:t,...e},n)=>c.jsx(P0,{className:xe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));j6.displayName=P0.displayName;const UQ=Id("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),L6=C.forwardRef(({side:t="right",className:e,children:n,...r},i)=>c.jsxs(VQ,{children:[c.jsx(j6,{}),c.jsxs(D0,{ref:i,className:xe(UQ({side:t}),e),...r,children:[n,c.jsxs(vP,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[c.jsx(Yl,{className:"h-4 w-4"}),c.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));L6.displayName=D0.displayName;const F6=({className:t,...e})=>c.jsx("div",{className:xe("flex flex-col space-y-2 text-center sm:text-left",t),...e});F6.displayName="SheetHeader";const B6=C.forwardRef(({className:t,...e},n)=>c.jsx(O0,{ref:n,className:xe("text-lg font-semibold text-foreground",t),...e}));B6.displayName=O0.displayName;const $Q=C.forwardRef(({className:t,...e},n)=>c.jsx(k0,{ref:n,className:xe("text-sm text-muted-foreground",t),...e}));$Q.displayName=k0.displayName;const zQ=({logo:t={url:"https://www.shadcnblocks.com",src:"https://www.shadcnblocks.com/images/block/block-1.svg",alt:"logo",title:"Shadcnblocks.com"},menu:e=[{title:"Home",url:"#"},{title:"Products",url:"#",items:[{title:"Blog",description:"The latest industry news, updates, and info",icon:c.jsx(sE,{className:"size-5 shrink-0"}),url:"#"},{title:"Company",description:"Our mission is to innovate and empower the world",icon:c.jsx(I1,{className:"size-5 shrink-0"}),url:"#"},{title:"Careers",description:"Browse job listing and discover our workspace",icon:c.jsx(cE,{className:"size-5 shrink-0"}),url:"#"},{title:"Support",description:"Get in touch with our support team or visit our community forums",icon:c.jsx(uE,{className:"size-5 shrink-0"}),url:"#"}]},{title:"Resources",url:"#",items:[{title:"Help Center",description:"Get all the answers you need right here",icon:c.jsx(uE,{className:"size-5 shrink-0"}),url:"#"},{title:"Contact Us",description:"We are here to help you with any questions you have",icon:c.jsx(cE,{className:"size-5 shrink-0"}),url:"#"},{title:"Status",description:"Check the current status of our services and APIs",icon:c.jsx(I1,{className:"size-5 shrink-0"}),url:"#"},{title:"Terms of Service",description:"Our terms and conditions for using our services",icon:c.jsx(sE,{className:"size-5 shrink-0"}),url:"#"}]},{title:"Pricing",url:"#"},{title:"Blog",url:"#"}],mobileExtraLinks:n=[{name:"Press",url:"#"},{name:"Contact",url:"#"},{name:"Imprint",url:"#"},{name:"Sitemap",url:"#"}],auth:r={login:{text:"Log in",url:"#"},signup:{text:"Sign up",url:"#"}}})=>c.jsx("section",{className:"py-4",children:c.jsxs("div",{className:"container",children:[c.jsxs("nav",{className:"hidden justify-between lg:flex",children:[c.jsxs("div",{className:"flex items-center gap-6",children:[c.jsxs("a",{href:t.url,className:"flex items-center gap-2",children:[c.jsx("img",{src:t.src,className:"w-8",alt:t.alt}),c.jsx("span",{className:"text-lg font-semibold",children:t.title})]}),c.jsx("div",{className:"flex items-center",children:c.jsx(P6,{children:c.jsx(D6,{children:e.map(i=>HQ(i))})})})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx(ve,{asChild:!0,variant:"outline",size:"sm",children:c.jsx("a",{href:r.login.url,children:r.login.text})}),c.jsx(ve,{asChild:!0,size:"sm",children:c.jsx("a",{href:r.signup.url,children:r.signup.text})})]})]}),c.jsx("div",{className:"block lg:hidden",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("a",{href:t.url,className:"flex items-center gap-2",children:[c.jsx("img",{src:t.src,className:"w-8",alt:t.alt}),c.jsx("span",{className:"text-lg font-semibold",children:t.title})]}),c.jsxs(FQ,{children:[c.jsx(BQ,{asChild:!0,children:c.jsx(ve,{variant:"outline",size:"icon",children:c.jsx(J5,{className:"size-4"})})}),c.jsxs(L6,{className:"overflow-y-auto",children:[c.jsx(F6,{children:c.jsx(B6,{children:c.jsxs("a",{href:t.url,className:"flex items-center gap-2",children:[c.jsx("img",{src:t.src,className:"w-8",alt:t.alt}),c.jsx("span",{className:"text-lg font-semibold",children:t.title})]})})}),c.jsxs("div",{className:"my-6 flex flex-col gap-6",children:[c.jsx(gQ,{type:"single",collapsible:!0,className:"flex w-full flex-col gap-4",children:e.map(i=>WQ(i))}),c.jsx("div",{className:"border-t py-4",children:c.jsx("div",{className:"grid grid-cols-2 justify-start",children:n.map((i,o)=>c.jsx("a",{className:"inline-flex h-10 items-center gap-2 whitespace-nowrap rounded-md px-4 py-2 text-sm font-medium text-muted-foreground transition-colors hover:bg-muted hover:text-accent-foreground",href:i.url,children:i.name},o))})}),c.jsxs("div",{className:"flex flex-col gap-3",children:[c.jsx(ve,{asChild:!0,variant:"outline",children:c.jsx("a",{href:r.login.url,children:r.login.text})}),c.jsx(ve,{asChild:!0,children:c.jsx("a",{href:r.signup.url,children:r.signup.text})})]})]})]})]})]})})]})}),HQ=t=>t.items?c.jsxs(kQ,{className:"text-muted-foreground",children:[c.jsx(O6,{children:t.title}),c.jsx(k6,{children:c.jsx("ul",{className:"w-80 p-3",children:c.jsx(jQ,{children:t.items.map(e=>c.jsx("li",{children:c.jsxs("a",{className:"flex select-none gap-4 rounded-md p-3 leading-none no-underline outline-none transition-colors hover:bg-muted hover:text-accent-foreground",href:e.url,children:[e.icon,c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold",children:e.title}),e.description&&c.jsx("p",{className:"text-sm leading-snug text-muted-foreground",children:e.description})]})]})},e.title))})})})]},t.title):c.jsx("a",{className:"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium text-muted-foreground transition-colors hover:bg-muted hover:text-accent-foreground",href:t.url,children:t.title},t.title),WQ=t=>t.items?c.jsxs(r6,{value:t.title,className:"border-b-0",children:[c.jsx(i6,{className:"py-0 font-semibold hover:no-underline",children:t.title}),c.jsx(o6,{className:"mt-2",children:t.items.map(e=>c.jsxs("a",{className:"flex select-none gap-4 rounded-md p-3 leading-none outline-none transition-colors hover:bg-muted hover:text-accent-foreground",href:e.url,children:[e.icon,c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-semibold",children:e.title}),e.description&&c.jsx("p",{className:"text-sm leading-snug text-muted-foreground",children:e.description})]})]},e.title))})]},t.title):c.jsx("a",{href:t.url,className:"font-semibold",children:t.title},t.title),GQ={logo:{url:"/",src:"/eastern-logo-main.png",alt:"Eastern Mills",title:"Eastern Mills"},menu:[{title:"Home",url:"/"},{title:"Quality",url:"/quality",items:[{title:"Compliance",description:"ISO 9001:2015 audit management and compliance tracking",icon:c.jsx(td,{className:"size-5 shrink-0"}),url:"/quality#compliance"},{title:"Lab Inspection",description:"Scientific material analysis and testing protocols",icon:c.jsx(H5,{className:"size-5 shrink-0"}),url:"/quality#lab"},{title:"Bazaar Inspection",description:"Market quality control and vendor assessments",icon:c.jsx(ts,{className:"size-5 shrink-0"}),url:"/quality#bazaar"},{title:"Final Inspection",description:"End-to-end quality validation before shipping",icon:c.jsx(td,{className:"size-5 shrink-0"}),url:"/quality#final"}]},{title:"Sampling",url:"/sampling",items:[{title:"Create New Rug",description:"Design and specify new rug samples with materials",icon:c.jsx(ts,{className:"size-5 shrink-0"}),url:"/sampling#create"},{title:"Rug Gallery",description:"Browse and manage existing rug designs and samples",icon:c.jsx(I1,{className:"size-5 shrink-0"}),url:"/sampling#gallery"}]},{title:"Merchandising",url:"/merchandising"}],mobileExtraLinks:[{name:"Reports",url:"/reports"},{name:"Support",url:"/support"},{name:"Documentation",url:"/docs"},{name:"Status",url:"/status"}],auth:{login:{text:"Sign In",url:"/login"},signup:{text:"Contact Admin",url:"/contact"}}};function qQ(){return c.jsx(zQ,{...GQ})}const KQ=()=>c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx(qQ,{}),c.jsx("div",{className:"container mx-auto px-4 py-16",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-8",children:"New Navigation Prototype"}),c.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"This is a prototype of the new shadcn-based navigation component with dropdown menus, mobile-friendly design, and Eastern Mills branding."}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-8 mt-12",children:[c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Desktop Navigation"}),c.jsx("p",{className:"text-gray-600",children:"Full navigation menu with dropdown submenus for Quality and Sampling departments."})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Mobile Sheet Menu"}),c.jsx("p",{className:"text-gray-600",children:"Collapsible accordion-style navigation for mobile devices with all features intact."})]}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Eastern Mills Branding"}),c.jsx("p",{className:"text-gray-600",children:"Consistent Eastern Mills logo and department-specific navigation items."})]})]})]})})]}),rA=[{code:"C1",question:"Are design and development procedures established?",evidence:[]},{code:"C2",question:"Are design input requirements identified and reviewed?",evidence:[]},{code:"C3",question:"Are design reviews conducted at key stages?",evidence:[]},{code:"C4",question:"Does design output include all necessary production info?",evidence:[]},{code:"C5",question:"Are design changes verified and controlled?",evidence:[]},{code:"C6",question:"Is prototype or pilot testing done before production?",evidence:[]},{code:"C7",question:"Are design personnel competent and qualified?",evidence:[]},{code:"C8",question:"Are suppliers evaluated and approved before ordering?",evidence:[]},{code:"C9",question:"Are materials purchased from approved sources?",evidence:[]},{code:"C10",question:"Are product specs and requirements agreed with suppliers?",evidence:[]},{code:"C11",question:"Is supplier performance monitored regularly?",evidence:[]},{code:"C12",question:"Are purchase orders clear and complete?",evidence:[]},{code:"C13",question:"Are materials stored in appropriate conditions?",evidence:[]},{code:"C14",question:"Is inventory management system in place?",evidence:[]},{code:"C15",question:"Are materials protected from damage/deterioration?",evidence:[]},{code:"C16",question:"Is FIFO (First In, First Out) system implemented?",evidence:[]},{code:"C17",question:"Are storage areas clean and organized?",evidence:[]},{code:"C18",question:"Are all incoming materials inspected?",evidence:[]},{code:"C19",question:"Are inspection criteria clearly defined?",evidence:[]},{code:"C20",question:"Is inspection equipment calibrated?",evidence:[]},{code:"C21",question:"Are inspection records maintained?",evidence:[]},{code:"C22",question:"Is non-conforming material identified and segregated?",evidence:[]},{code:"C23",question:"Are suppliers notified of quality issues?",evidence:[]},{code:"C24",question:"Is incoming material traceability maintained?",evidence:[]},{code:"C25",question:"Are inspection personnel trained and competent?",evidence:[]}];function XQ(){const{toast:t}=Ns(),[e,n]=C.useState(!1),r=async()=>{try{const m=[{code:"C1",question:"Are design and development procedures established?",response:"Yes",remark:"Manually inserted test",evidence:["https://example.com/test.jpg"]},{code:"C2",question:"Are design inputs properly documented?",response:"No",remark:"Nothing here",evidence:[]}],g=await $3(tv(h$,"audit"),{auditDate:"2025-07-28",auditor:"Abdul (test)",company:"EHI",status:"draft",checklist:m,createdAt:H3()});console.log("✅ Hardcoded audit saved with ID:",g.id),window.dispatchEvent(new CustomEvent("auditSaved")),alert("✅ Manual audit saved"),t({title:"Test Audit Saved",description:"Hardcoded audit successfully saved to Firebase"})}catch(m){console.error("❌ Error saving test audit:",m),alert("❌ Error saving test audit: "+(m instanceof Error?m.message:"Unknown error"))}},[i,o]=C.useState({auditDate:new Date().toISOString().split("T")[0],company:"EHI",auditor:"",status:"draft",checklist:rA,createdAt:new Date().toISOString()}),s=(m,g,v)=>{o(y=>({...y,checklist:y.checklist.map(x=>x.code===m?{...x,[g]:v}:x)}))},a=async(m,g)=>{try{if(console.log("📸 Starting image upload for code:",m),g.size>2*1024*1024){t({title:"File Too Large",description:"Please select an image smaller than 2MB",variant:"destructive"});return}const v=new FileReader;v.onload=y=>{var E;const x=(E=y.target)==null?void 0:E.result,w=new Image;w.onload=()=>{var k;const A=document.createElement("canvas"),O=A.getContext("2d"),j=400,N=300;let{width:T,height:S}=w;T>S?T>j&&(S=S*j/T,T=j):S>N&&(T=T*N/S,S=N),A.width=T,A.height=S,O.drawImage(w,0,0,T,S);const b=A.toDataURL("image/jpeg",.7);console.log("📸 Image compressed and ready for upload"),s(m,"evidence",[...((k=i.checklist.find(R=>R.code===m))==null?void 0:k.evidence)||[],b]),t({title:"Image Uploaded",description:"Evidence image added successfully",variant:"default"})},w.src=x},v.readAsDataURL(g)}catch(v){console.error("❌ Image upload error:",v),t({title:"Upload Error",description:"Failed to upload image",variant:"destructive"})}},l=(m,g)=>{const v=i.checklist.find(y=>y.code===m);if(v){const y=v.evidence.filter((x,w)=>w!==g);s(m,"evidence",y)}},u=async m=>{if(!i.auditor.trim()){t({title:"Validation Error",description:"Auditor name is required",variant:"destructive"});return}n(!0);try{const g={...i,status:m,submittedAt:m==="submitted"?new Date().toISOString():void 0};console.log("📋 Flattened checklist before saving:",g.checklist),console.log("📊 Checklist items with evidence:",g.checklist.filter(x=>x.evidence.length>0));const v=await fetch("/api/audit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)});if(!v.ok)throw new Error("Failed to save audit");const y=await v.json();console.log("✅ Audit save result:",y),t({title:"Success",description:m==="draft"?`Draft saved successfully (ID: ${y.id})`:"Audit submitted successfully",variant:"default"}),window.dispatchEvent(new CustomEvent("auditSaved",{detail:{id:y.id,status:m,auditData:g}})),m==="submitted"&&o({auditDate:new Date().toISOString().split("T")[0],company:"EHI",auditor:"",status:"draft",checklist:rA,createdAt:new Date().toISOString()})}catch{t({title:"Error",description:"Failed to save audit",variant:"destructive"})}finally{n(!1)}},d=m=>{switch(m){case"Yes":return"bg-green-100 text-green-800";case"No":return"bg-red-100 text-red-800";case"NA":return"bg-gray-100 text-gray-800";default:return"bg-gray-50 text-gray-500"}},f=i.checklist.filter(m=>m.response).length,h=Math.round(f/i.checklist.length*100);return c.jsx("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:c.jsxs(Pe,{children:[c.jsx(hn,{children:c.jsxs(pn,{className:"flex items-center justify-between",children:[c.jsx("span",{children:"ISO 9001:2015 Compliance Audit Form V2"}),c.jsxs(Dn,{variant:"outline",children:[f,"/",i.checklist.length," Complete (",h,"%)"]})]})}),c.jsxs(Le,{className:"space-y-6",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(He,{htmlFor:"auditDate",children:"Audit Date"}),c.jsx(Ze,{id:"auditDate",type:"date",value:i.auditDate,onChange:m=>o(g=>({...g,auditDate:m.target.value}))})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(He,{htmlFor:"company",children:"Company"}),c.jsxs(ti,{value:i.company,onValueChange:m=>o(g=>({...g,company:m})),children:[c.jsx(Pr,{children:c.jsx(ni,{})}),c.jsxs(Dr,{children:[c.jsx(mt,{value:"EHI",children:"Eastern Home Industries"}),c.jsx(mt,{value:"EMPL",children:"Eastern Mills Pvt. Ltd."})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(He,{htmlFor:"auditor",children:"Auditor Name"}),c.jsx(Ze,{id:"auditor",value:i.auditor,onChange:m=>o(g=>({...g,auditor:m.target.value})),placeholder:"Enter auditor name"})]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${h}%`}})}),c.jsx("div",{className:"space-y-4",children:i.checklist.map((m,g)=>c.jsx(Pe,{className:"border-l-4 border-l-blue-500",children:c.jsxs(Le,{className:"pt-4",children:[c.jsx("div",{className:"flex items-start justify-between mb-3",children:c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx(Dn,{variant:"outline",children:m.code}),m.response&&c.jsx(Dn,{className:d(m.response),children:m.response})]}),c.jsx("p",{className:"text-sm font-medium text-gray-900",children:m.question})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx(He,{children:"Response"}),c.jsxs(ti,{value:m.response||"",onValueChange:v=>s(m.code,"response",v),children:[c.jsx(Pr,{children:c.jsx(ni,{placeholder:"Select response"})}),c.jsxs(Dr,{children:[c.jsx(mt,{value:"Yes",children:"Yes"}),c.jsx(mt,{value:"No",children:"No"}),c.jsx(mt,{value:"NA",children:"N/A"})]})]})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx(He,{children:"Evidence Images"}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsxs("label",{className:"flex items-center gap-2 px-3 py-2 border border-gray-300 rounded-md cursor-pointer hover:bg-gray-50",children:[c.jsx(tM,{className:"h-4 w-4"}),c.jsx("span",{className:"text-sm",children:"Upload"}),c.jsx("input",{type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:v=>{Array.from(v.target.files||[]).forEach(x=>a(m.code,x))}})]}),c.jsxs("span",{className:"text-sm text-gray-500",children:[m.evidence.length," image(s)"]})]}),m.evidence.length>0&&c.jsx("div",{className:"flex flex-wrap gap-2",children:m.evidence.map((v,y)=>c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:v,alt:`Evidence ${y+1}`,className:"w-16 h-16 object-cover rounded border"}),c.jsx("button",{onClick:()=>l(m.code,y),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600",children:c.jsx(Yl,{className:"h-3 w-3"})})]},y))})]})]}),c.jsxs("div",{className:"mt-4 space-y-2",children:[c.jsx(He,{children:"Remarks (Optional)"}),c.jsx(Vd,{value:m.remark||"",onChange:v=>s(m.code,"remark",v.target.value),placeholder:"Add any remarks or observations...",className:"resize-none",rows:2})]})]})},m.code))}),c.jsxs("div",{className:"flex gap-4 pt-6 border-t",children:[c.jsx(ve,{onClick:r,className:"bg-blue-600 text-white hover:bg-blue-700",children:"Test Manual Save"}),c.jsxs(ve,{onClick:()=>u("draft"),disabled:e,variant:"outline",className:"flex items-center gap-2",children:[c.jsx(Ly,{className:"h-4 w-4"}),"Save Draft"]}),c.jsxs(ve,{onClick:()=>u("submitted"),disabled:e||!i.auditor.trim(),className:"flex items-center gap-2",children:[c.jsx(rN,{className:"h-4 w-4"}),"Submit Audit"]})]})]})]})})}function QQ(){return c.jsx("div",{className:"min-h-screen bg-gray-50",children:c.jsxs("div",{className:"container mx-auto py-8",children:[c.jsxs("div",{className:"mb-6 text-center",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Audit Form V2 Test Page"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"Testing the new clean checklist[] structure"})]}),c.jsx(XQ,{})]})})}function YQ(){const t=async()=>{console.log("🚀 Starting manual save...");try{const e=[{code:"C1",question:"Manual test question",response:"Yes",remark:"Testing from direct code",evidence:["https://example.com/test.jpg"]}];console.log("📦 Saving object with checklist:",e),console.log("🔥 Firebase db object:",Al),console.log("📋 Collection reference:",tv(Al,"audit"));const n=await $3(tv(Al,"audit"),{auditDate:"2025-07-28",auditor:"Abdul",company:"EHI",status:"draft",checklist:e,createdAt:H3()});console.log("✅ Successfully saved! Doc ID:",n.id),alert("✅ Saved")}catch(e){console.error("❌ SAVE FAILED:",e),console.error("❌ Error name:",e==null?void 0:e.name),console.error("❌ Error message:",e==null?void 0:e.message),console.error("❌ Error code:",e==null?void 0:e.code),console.error("❌ Full error object:",JSON.stringify(e,null,2)),alert("❌ Save failed. See console.")}};return c.jsxs("div",{className:"p-4",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Firestore Save Test"}),c.jsx("button",{onClick:t,className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Test Manual Save"})]})}var jv=["Enter"," "],ZQ=["ArrowDown","PageUp","Home"],V6=["ArrowUp","PageDown","End"],JQ=[...ZQ,...V6],eY={ltr:[...jv,"ArrowRight"],rtl:[...jv,"ArrowLeft"]},tY={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Wd="Menu",[pd,nY,rY]=Ec(Wd),[Oa,U6]=Er(Wd,[rY,b0,x0]),V0=b0(),$6=x0(),[iY,ka]=Oa(Wd),[oY,Gd]=Oa(Wd),z6=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:i,onOpenChange:o,modal:s=!0}=t,a=V0(e),[l,u]=C.useState(null),d=C.useRef(!1),f=zt(o),h=Cc(i);return C.useEffect(()=>{const m=()=>{d.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>d.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),c.jsx(J4,{...a,children:c.jsx(iY,{scope:e,open:n,onOpenChange:f,content:l,onContentChange:u,children:c.jsx(oY,{scope:e,onClose:C.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:d,dir:h,modal:s,children:r})})})};z6.displayName=Wd;var sY="MenuAnchor",Tw=C.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=V0(n);return c.jsx(eR,{...i,...r,ref:e})});Tw.displayName=sY;var Rw="MenuPortal",[aY,H6]=Oa(Rw,{forceMount:void 0}),W6=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:i}=t,o=ka(Rw,e);return c.jsx(aY,{scope:e,forceMount:n,children:c.jsx(Xn,{present:n||o.open,children:c.jsx(A0,{asChild:!0,container:i,children:r})})})};W6.displayName=Rw;var jr="MenuContent",[lY,Pw]=Oa(jr),G6=C.forwardRef((t,e)=>{const n=H6(jr,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,o=ka(jr,t.__scopeMenu),s=Gd(jr,t.__scopeMenu);return c.jsx(pd.Provider,{scope:t.__scopeMenu,children:c.jsx(Xn,{present:r||o.open,children:c.jsx(pd.Slot,{scope:t.__scopeMenu,children:s.modal?c.jsx(cY,{...i,ref:e}):c.jsx(uY,{...i,ref:e})})})})}),cY=C.forwardRef((t,e)=>{const n=ka(jr,t.__scopeMenu),r=C.useRef(null),i=$e(e,r);return C.useEffect(()=>{const o=r.current;if(o)return tw(o)},[]),c.jsx(Dw,{...t,ref:i,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:ae(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),uY=C.forwardRef((t,e)=>{const n=ka(jr,t.__scopeMenu);return c.jsx(Dw,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),dY=ga("MenuContent.ScrollLock"),Dw=C.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEntryFocus:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,disableOutsideScroll:g,...v}=t,y=ka(jr,n),x=Gd(jr,n),w=V0(n),E=$6(n),A=nY(n),[O,j]=C.useState(null),N=C.useRef(null),T=$e(e,N,y.onContentChange),S=C.useRef(0),b=C.useRef(""),k=C.useRef(0),R=C.useRef(null),P=C.useRef("right"),G=C.useRef(0),K=g?I0:C.Fragment,X=g?{as:dY,allowPinchZoom:!0}:void 0,ee=z=>{var te,de;const D=b.current+z,B=A().filter(be=>!be.disabled),$=document.activeElement,V=(te=B.find(be=>be.ref.current===$))==null?void 0:te.textValue,Y=B.map(be=>be.textValue),re=CY(Y,D,V),ie=(de=B.find(be=>be.textValue===re))==null?void 0:de.ref.current;(function be(we){b.current=we,window.clearTimeout(S.current),we!==""&&(S.current=window.setTimeout(()=>be(""),1e3))})(D),ie&&setTimeout(()=>ie.focus())};C.useEffect(()=>()=>window.clearTimeout(S.current),[]),zx();const F=C.useCallback(z=>{var B,$;return P.current===((B=R.current)==null?void 0:B.side)&&AY(z,($=R.current)==null?void 0:$.area)},[]);return c.jsx(lY,{scope:n,searchRef:b,onItemEnter:C.useCallback(z=>{F(z)&&z.preventDefault()},[F]),onItemLeave:C.useCallback(z=>{var D;F(z)||((D=N.current)==null||D.focus(),j(null))},[F]),onTriggerLeave:C.useCallback(z=>{F(z)&&z.preventDefault()},[F]),pointerGraceTimerRef:k,onPointerGraceIntentChange:C.useCallback(z=>{R.current=z},[]),children:c.jsx(K,{...X,children:c.jsx(w0,{asChild:!0,trapped:i,onMountAutoFocus:ae(o,z=>{var D;z.preventDefault(),(D=N.current)==null||D.focus({preventScroll:!0})}),onUnmountAutoFocus:s,children:c.jsx(Ud,{asChild:!0,disableOutsidePointerEvents:a,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,onDismiss:m,children:c.jsx(p4,{asChild:!0,...E,dir:x.dir,orientation:"vertical",loop:r,currentTabStopId:O,onCurrentTabStopIdChange:j,onEntryFocus:ae(l,z=>{x.isUsingKeyboardRef.current||z.preventDefault()}),preventScrollOnEntryFocus:!0,children:c.jsx(tR,{role:"menu","aria-orientation":"vertical","data-state":l8(y.open),"data-radix-menu-content":"",dir:x.dir,...w,...v,ref:T,style:{outline:"none",...v.style},onKeyDown:ae(v.onKeyDown,z=>{const B=z.target.closest("[data-radix-menu-content]")===z.currentTarget,$=z.ctrlKey||z.altKey||z.metaKey,V=z.key.length===1;B&&(z.key==="Tab"&&z.preventDefault(),!$&&V&&ee(z.key));const Y=N.current;if(z.target!==Y||!JQ.includes(z.key))return;z.preventDefault();const ie=A().filter(te=>!te.disabled).map(te=>te.ref.current);V6.includes(z.key)&&ie.reverse(),_Y(ie)}),onBlur:ae(t.onBlur,z=>{z.currentTarget.contains(z.target)||(window.clearTimeout(S.current),b.current="")}),onPointerMove:ae(t.onPointerMove,md(z=>{const D=z.target,B=G.current!==z.clientX;if(z.currentTarget.contains(D)&&B){const $=z.clientX>G.current?"right":"left";P.current=$,G.current=z.clientX}}))})})})})})})});G6.displayName=jr;var fY="MenuGroup",Ow=C.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return c.jsx(me.div,{role:"group",...r,ref:e})});Ow.displayName=fY;var hY="MenuLabel",q6=C.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return c.jsx(me.div,{...r,ref:e})});q6.displayName=hY;var Dp="MenuItem",iA="menu.itemSelect",U0=C.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...i}=t,o=C.useRef(null),s=Gd(Dp,t.__scopeMenu),a=Pw(Dp,t.__scopeMenu),l=$e(e,o),u=C.useRef(!1),d=()=>{const f=o.current;if(!n&&f){const h=new CustomEvent(iA,{bubbles:!0,cancelable:!0});f.addEventListener(iA,m=>r==null?void 0:r(m),{once:!0}),tp(f,h),h.defaultPrevented?u.current=!1:s.onClose()}};return c.jsx(K6,{...i,ref:l,disabled:n,onClick:ae(t.onClick,d),onPointerDown:f=>{var h;(h=t.onPointerDown)==null||h.call(t,f),u.current=!0},onPointerUp:ae(t.onPointerUp,f=>{var h;u.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:ae(t.onKeyDown,f=>{const h=a.searchRef.current!=="";n||h&&f.key===" "||jv.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});U0.displayName=Dp;var K6=C.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:i,...o}=t,s=Pw(Dp,n),a=$6(n),l=C.useRef(null),u=$e(e,l),[d,f]=C.useState(!1),[h,m]=C.useState("");return C.useEffect(()=>{const g=l.current;g&&m((g.textContent??"").trim())},[o.children]),c.jsx(pd.ItemSlot,{scope:n,disabled:r,textValue:i??h,children:c.jsx(m4,{asChild:!0,...a,focusable:!r,children:c.jsx(me.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:u,onPointerMove:ae(t.onPointerMove,md(g=>{r?s.onItemLeave(g):(s.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:ae(t.onPointerLeave,md(g=>s.onItemLeave(g))),onFocus:ae(t.onFocus,()=>f(!0)),onBlur:ae(t.onBlur,()=>f(!1))})})})}),pY="MenuCheckboxItem",X6=C.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...i}=t;return c.jsx(e8,{scope:t.__scopeMenu,checked:n,children:c.jsx(U0,{role:"menuitemcheckbox","aria-checked":Op(n)?"mixed":n,...i,ref:e,"data-state":Mw(n),onSelect:ae(i.onSelect,()=>r==null?void 0:r(Op(n)?!0:!n),{checkForDefaultPrevented:!1})})})});X6.displayName=pY;var Q6="MenuRadioGroup",[mY,gY]=Oa(Q6,{value:void 0,onValueChange:()=>{}}),Y6=C.forwardRef((t,e)=>{const{value:n,onValueChange:r,...i}=t,o=zt(r);return c.jsx(mY,{scope:t.__scopeMenu,value:n,onValueChange:o,children:c.jsx(Ow,{...i,ref:e})})});Y6.displayName=Q6;var Z6="MenuRadioItem",J6=C.forwardRef((t,e)=>{const{value:n,...r}=t,i=gY(Z6,t.__scopeMenu),o=n===i.value;return c.jsx(e8,{scope:t.__scopeMenu,checked:o,children:c.jsx(U0,{role:"menuitemradio","aria-checked":o,...r,ref:e,"data-state":Mw(o),onSelect:ae(r.onSelect,()=>{var s;return(s=i.onValueChange)==null?void 0:s.call(i,n)},{checkForDefaultPrevented:!1})})})});J6.displayName=Z6;var kw="MenuItemIndicator",[e8,vY]=Oa(kw,{checked:!1}),t8=C.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...i}=t,o=vY(kw,n);return c.jsx(Xn,{present:r||Op(o.checked)||o.checked===!0,children:c.jsx(me.span,{...i,ref:e,"data-state":Mw(o.checked)})})});t8.displayName=kw;var yY="MenuSeparator",n8=C.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return c.jsx(me.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});n8.displayName=yY;var xY="MenuArrow",r8=C.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,i=V0(n);return c.jsx(nR,{...i,...r,ref:e})});r8.displayName=xY;var wY="MenuSub",[DZ,i8]=Oa(wY),gu="MenuSubTrigger",o8=C.forwardRef((t,e)=>{const n=ka(gu,t.__scopeMenu),r=Gd(gu,t.__scopeMenu),i=i8(gu,t.__scopeMenu),o=Pw(gu,t.__scopeMenu),s=C.useRef(null),{pointerGraceTimerRef:a,onPointerGraceIntentChange:l}=o,u={__scopeMenu:t.__scopeMenu},d=C.useCallback(()=>{s.current&&window.clearTimeout(s.current),s.current=null},[]);return C.useEffect(()=>d,[d]),C.useEffect(()=>{const f=a.current;return()=>{window.clearTimeout(f),l(null)}},[a,l]),c.jsx(Tw,{asChild:!0,...u,children:c.jsx(K6,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":i.contentId,"data-state":l8(n.open),...t,ref:Sd(e,i.onTriggerChange),onClick:f=>{var h;(h=t.onClick)==null||h.call(t,f),!(t.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:ae(t.onPointerMove,md(f=>{o.onItemEnter(f),!f.defaultPrevented&&!t.disabled&&!n.open&&!s.current&&(o.onPointerGraceIntentChange(null),s.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:ae(t.onPointerLeave,md(f=>{var m,g;d();const h=(m=n.content)==null?void 0:m.getBoundingClientRect();if(h){const v=(g=n.content)==null?void 0:g.dataset.side,y=v==="right",x=y?-5:5,w=h[y?"left":"right"],E=h[y?"right":"left"];o.onPointerGraceIntentChange({area:[{x:f.clientX+x,y:f.clientY},{x:w,y:h.top},{x:E,y:h.top},{x:E,y:h.bottom},{x:w,y:h.bottom}],side:v}),window.clearTimeout(a.current),a.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(f),f.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:ae(t.onKeyDown,f=>{var m;const h=o.searchRef.current!=="";t.disabled||h&&f.key===" "||eY[r.dir].includes(f.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),f.preventDefault())})})})});o8.displayName=gu;var s8="MenuSubContent",a8=C.forwardRef((t,e)=>{const n=H6(jr,t.__scopeMenu),{forceMount:r=n.forceMount,...i}=t,o=ka(jr,t.__scopeMenu),s=Gd(jr,t.__scopeMenu),a=i8(s8,t.__scopeMenu),l=C.useRef(null),u=$e(e,l);return c.jsx(pd.Provider,{scope:t.__scopeMenu,children:c.jsx(Xn,{present:r||o.open,children:c.jsx(pd.Slot,{scope:t.__scopeMenu,children:c.jsx(Dw,{id:a.contentId,"aria-labelledby":a.triggerId,...i,ref:u,align:"start",side:s.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var f;s.isUsingKeyboardRef.current&&((f=l.current)==null||f.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:ae(t.onFocusOutside,d=>{d.target!==a.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:ae(t.onEscapeKeyDown,d=>{s.onClose(),d.preventDefault()}),onKeyDown:ae(t.onKeyDown,d=>{var m;const f=d.currentTarget.contains(d.target),h=tY[s.dir].includes(d.key);f&&h&&(o.onOpenChange(!1),(m=a.trigger)==null||m.focus(),d.preventDefault())})})})})})});a8.displayName=s8;function l8(t){return t?"open":"closed"}function Op(t){return t==="indeterminate"}function Mw(t){return Op(t)?"indeterminate":t?"checked":"unchecked"}function _Y(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function EY(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function CY(t,e,n){const i=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let s=EY(t,Math.max(o,0));i.length===1&&(s=s.filter(u=>u!==n));const l=s.find(u=>u.toLowerCase().startsWith(i.toLowerCase()));return l!==n?l:void 0}function bY(t,e){const{x:n,y:r}=t;let i=!1;for(let o=0,s=e.length-1;o<e.length;s=o++){const a=e[o].x,l=e[o].y,u=e[s].x,d=e[s].y;l>r!=d>r&&n<(u-a)*(r-l)/(d-l)+a&&(i=!i)}return i}function AY(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return bY(n,e)}function md(t){return e=>e.pointerType==="mouse"?t(e):void 0}var SY=z6,IY=Tw,NY=W6,TY=G6,RY=Ow,PY=q6,DY=U0,OY=X6,kY=Y6,MY=J6,jY=t8,LY=n8,FY=r8,BY=o8,VY=a8,jw="DropdownMenu",[UY,OZ]=Er(jw,[U6]),Qn=U6(),[$Y,c8]=UY(jw),u8=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:i,defaultOpen:o,onOpenChange:s,modal:a=!0}=t,l=Qn(e),u=C.useRef(null),[d=!1,f]=Br({prop:i,defaultProp:o,onChange:s});return c.jsx($Y,{scope:e,triggerId:lr(),triggerRef:u,contentId:lr(),open:d,onOpenChange:f,onOpenToggle:C.useCallback(()=>f(h=>!h),[f]),modal:a,children:c.jsx(SY,{...l,open:d,onOpenChange:f,dir:r,modal:a,children:n})})};u8.displayName=jw;var d8="DropdownMenuTrigger",f8=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...i}=t,o=c8(d8,n),s=Qn(n);return c.jsx(IY,{asChild:!0,...s,children:c.jsx(me.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...i,ref:Sd(e,o.triggerRef),onPointerDown:ae(t.onPointerDown,a=>{!r&&a.button===0&&a.ctrlKey===!1&&(o.onOpenToggle(),o.open||a.preventDefault())}),onKeyDown:ae(t.onKeyDown,a=>{r||(["Enter"," "].includes(a.key)&&o.onOpenToggle(),a.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(a.key)&&a.preventDefault())})})})});f8.displayName=d8;var zY="DropdownMenuPortal",h8=t=>{const{__scopeDropdownMenu:e,...n}=t,r=Qn(e);return c.jsx(NY,{...r,...n})};h8.displayName=zY;var p8="DropdownMenuContent",m8=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=c8(p8,n),o=Qn(n),s=C.useRef(!1);return c.jsx(TY,{id:i.contentId,"aria-labelledby":i.triggerId,...o,...r,ref:e,onCloseAutoFocus:ae(t.onCloseAutoFocus,a=>{var l;s.current||(l=i.triggerRef.current)==null||l.focus(),s.current=!1,a.preventDefault()}),onInteractOutside:ae(t.onInteractOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,d=l.button===2||u;(!i.modal||d)&&(s.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});m8.displayName=p8;var HY="DropdownMenuGroup",WY=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qn(n);return c.jsx(RY,{...i,...r,ref:e})});WY.displayName=HY;var GY="DropdownMenuLabel",g8=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qn(n);return c.jsx(PY,{...i,...r,ref:e})});g8.displayName=GY;var qY="DropdownMenuItem",v8=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qn(n);return c.jsx(DY,{...i,...r,ref:e})});v8.displayName=qY;var KY="DropdownMenuCheckboxItem",y8=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qn(n);return c.jsx(OY,{...i,...r,ref:e})});y8.displayName=KY;var XY="DropdownMenuRadioGroup",QY=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qn(n);return c.jsx(kY,{...i,...r,ref:e})});QY.displayName=XY;var YY="DropdownMenuRadioItem",x8=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qn(n);return c.jsx(MY,{...i,...r,ref:e})});x8.displayName=YY;var ZY="DropdownMenuItemIndicator",w8=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qn(n);return c.jsx(jY,{...i,...r,ref:e})});w8.displayName=ZY;var JY="DropdownMenuSeparator",_8=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qn(n);return c.jsx(LY,{...i,...r,ref:e})});_8.displayName=JY;var eZ="DropdownMenuArrow",tZ=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qn(n);return c.jsx(FY,{...i,...r,ref:e})});tZ.displayName=eZ;var nZ="DropdownMenuSubTrigger",E8=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qn(n);return c.jsx(BY,{...i,...r,ref:e})});E8.displayName=nZ;var rZ="DropdownMenuSubContent",C8=C.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,i=Qn(n);return c.jsx(VY,{...i,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});C8.displayName=rZ;var iZ=u8,oZ=f8,sZ=h8,b8=m8,A8=g8,S8=v8,I8=y8,N8=x8,T8=w8,R8=_8,P8=E8,D8=C8;const aZ=iZ,lZ=oZ,cZ=C.forwardRef(({className:t,inset:e,children:n,...r},i)=>c.jsxs(P8,{ref:i,className:xe("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...r,children:[n,c.jsx(W5,{className:"ml-auto"})]}));cZ.displayName=P8.displayName;const uZ=C.forwardRef(({className:t,...e},n)=>c.jsx(D8,{ref:n,className:xe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...e}));uZ.displayName=D8.displayName;const O8=C.forwardRef(({className:t,sideOffset:e=4,...n},r)=>c.jsx(sZ,{children:c.jsx(b8,{ref:r,sideOffset:e,className:xe("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})}));O8.displayName=b8.displayName;const k8=C.forwardRef(({className:t,inset:e,...n},r)=>c.jsx(S8,{ref:r,className:xe("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...n}));k8.displayName=S8.displayName;const dZ=C.forwardRef(({className:t,children:e,checked:n,...r},i)=>c.jsxs(I8,{ref:i,className:xe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(T8,{children:c.jsx(Xl,{className:"h-4 w-4"})})}),e]}));dZ.displayName=I8.displayName;const fZ=C.forwardRef(({className:t,children:e,...n},r)=>c.jsxs(N8,{ref:r,className:xe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[c.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:c.jsx(T8,{children:c.jsx(K5,{className:"h-2 w-2 fill-current"})})}),e]}));fZ.displayName=N8.displayName;const hZ=C.forwardRef(({className:t,inset:e,...n},r)=>c.jsx(A8,{ref:r,className:xe("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));hZ.displayName=A8.displayName;const pZ=C.forwardRef(({className:t,...e},n)=>c.jsx(R8,{ref:n,className:xe("-mx-1 my-1 h-px bg-muted",t),...e}));pZ.displayName=R8.displayName;const mZ=({children:t})=>{const{user:e,logout:n}=Bd(),[r,i]=JI(),o=[{name:"Home",path:"/"},{name:"Quality",path:"/quality"},{name:"Sampling",path:"/sampling"},{name:"Merchandising",path:"/merchandising"}];return c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"flex justify-between items-center h-16",children:[c.jsxs("div",{className:"flex items-center space-x-8",children:[c.jsx("div",{className:"flex-shrink-0",children:c.jsx("button",{onClick:()=>i("/"),className:"flex items-center",children:c.jsx("img",{src:"/attached_assets/NEW EASTERN LOGO (transparent background))v copy (3)_1753322709558.png",alt:"Eastern Mills Logo",className:"h-10 w-auto"})})}),c.jsx("nav",{className:"hidden md:flex space-x-1",children:o.map(s=>c.jsx("button",{onClick:()=>i(s.path),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${r===s.path?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:s.name},s.name))})]}),e&&c.jsxs(aZ,{children:[c.jsx(lZ,{asChild:!0,children:c.jsx(ve,{variant:"ghost",className:"h-8 w-8 rounded-full",children:c.jsx(nM,{className:"h-4 w-4"})})}),c.jsxs(O8,{align:"end",className:"w-56",children:[c.jsx("div",{className:"px-2 py-1.5 text-sm text-gray-500 truncate",children:e.email}),c.jsxs(k8,{onClick:n,className:"text-red-600",children:[c.jsx(Z5,{className:"mr-2 h-4 w-4"}),"Sign out"]})]})]})]}),c.jsx("div",{className:"md:hidden border-t border-gray-200 py-2",children:c.jsx("div",{className:"flex space-x-1 overflow-x-auto pb-1",children:o.map(s=>c.jsx("button",{onClick:()=>i(s.path),className:`px-3 py-1.5 rounded-md text-xs font-medium whitespace-nowrap transition-colors ${r===s.path?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:s.name},s.name))})})]})}),c.jsx("main",{className:"flex-1",children:t})]})};function gZ(){const{user:t,loading:e}=Bd(),{canAccessDepartment:n,getAccessibleTabs:r}=bP(),i=window.location.search.includes("test=true");return e?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"Loading..."})]})}):!t&&!i?c.jsx(A1,{children:c.jsx(iE,{children:c.jsx($i,{path:"*",component:p$})})}):c.jsx(A1,{children:c.jsx(mZ,{children:c.jsxs(iE,{children:[c.jsx($i,{path:"/",component:ej}),c.jsx($i,{path:"/navbar-test",component:KQ}),c.jsx($i,{path:"/audit-test",component:QQ}),c.jsx($i,{path:"/save-test",component:YQ}),c.jsx($i,{path:"/sampling",children:n("sampling")||i?c.jsx(YX,{}):c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-xl font-semibold text-red-600",children:"Access Denied"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"You don't have permission to access the Sampling department."})]})}),c.jsx($i,{path:"/quality",children:n("quality")||i?c.jsx(XW,{}):c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-xl font-semibold text-red-600",children:"Access Denied"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"You don't have permission to access the Quality department."})]})}),c.jsx($i,{path:"/merchandising",children:n("merchandising")||i?c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Merchandising Dashboard"}),c.jsx("p",{className:"text-gray-600",children:"Merchandising features coming soon."})]})}):c.jsxs("div",{className:"p-8 text-center",children:[c.jsx("h2",{className:"text-xl font-semibold text-red-600",children:"Access Denied"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"You don't have permission to access the Merchandising department."})]})}),c.jsx($i,{path:"/access-denied",children:c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),c.jsx("p",{className:"text-gray-600",children:"You don't have permission to access this resource."})]})})})]})})})}RI(document.getElementById("root")).render(c.jsx(Jk,{client:d5,children:c.jsx(gZ,{})}));export{vb as _,yZ as c,mA as g};
